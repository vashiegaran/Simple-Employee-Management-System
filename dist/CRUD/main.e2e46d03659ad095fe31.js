(self.webpackChunkcrud=self.webpackChunkcrud||[]).push([[179],{8255:qe=>{function xe(U){return Promise.resolve().then(()=>{var h=new Error("Cannot find module '"+U+"'");throw h.code="MODULE_NOT_FOUND",h})}xe.keys=()=>[],xe.resolve=xe,xe.id=8255,qe.exports=xe},7716:(qe,xe,U)=>{"use strict";U.d(xe,{deG:()=>EE,tb:()=>Ic,AFp:()=>Wl,ip1:()=>xt,CZH:()=>xc,hGG:()=>hv,z2F:()=>$h,sBO:()=>hM,Sil:()=>Uh,_Vd:()=>mc,EJc:()=>ka,SBq:()=>Aa,qLn:()=>x,vpe:()=>so,gxx:()=>rc,tBr:()=>ha,XFs:()=>Qe,OlP:()=>Tn,zs3:()=>tn,ZZ4:()=>ly,aQg:()=>ow,soG:()=>Wy,YKP:()=>yc,v3s:()=>nR,h0i:()=>Ee,PXZ:()=>Xw,R0b:()=>as,FiY:()=>Ao,Lbi:()=>kr,g9A:()=>TI,Qsj:()=>mx,FYo:()=>tw,JOm:()=>Cs,Tiy:()=>nw,q3G:()=>An,tp0:()=>yr,EAV:()=>zI,Rgc:()=>Zg,dDg:()=>LI,DyG:()=>ul,q4F:()=>iw,GfV:()=>rw,s_b:()=>yh,ifc:()=>Pe,eFA:()=>ls,G48:()=>ev,Gpc:()=>z,f3M:()=>eg,X6Q:()=>Ac,_c5:()=>aR,VLi:()=>XM,c2e:()=>Dr,zSh:()=>qd,wAp:()=>ct,vHH:()=>Ie,EiD:()=>$u,mCW:()=>vl,qzn:()=>yl,JVY:()=>Id,pB0:()=>ju,eBb:()=>Gu,L6k:()=>og,LAX:()=>Ks,cg1:()=>Bb,Tjo:()=>Yr,kL8:()=>RN,yhl:()=>Ym,dqk:()=>zt,sIi:()=>Bg,CqO:()=>Rl,QGY:()=>P_,F4k:()=>v1,RDi:()=>Af,AaK:()=>J,z3N:()=>jr,qOj:()=>ub,TTD:()=>Br,_Bn:()=>Qb,xp6:()=>M0,uIk:()=>hb,Tol:()=>R1,DjV:()=>G1,ekj:()=>M1,Suo:()=>Ly,Xpm:()=>St,lG2:()=>Hc,Yz7:()=>mt,cJS:()=>On,oAB:()=>za,Yjl:()=>Cf,Y36:()=>Gg,_UZ:()=>jg,BQk:()=>Po,ynx:()=>mn,qZA:()=>ac,TgZ:()=>vr,EpF:()=>y1,n5z:()=>Om,Ikx:()=>cc,SDv:()=>ry,QtT:()=>lx,pQV:()=>Zb,LFG:()=>en,$8M:()=>Nu,$Z:()=>_1,NdJ:()=>bb,CRH:()=>Pw,oxw:()=>C1,ALo:()=>Rh,lcZ:()=>Ow,Hsn:()=>lh,F$t:()=>E1,Q6J:()=>_b,s9C:()=>Jn,MGl:()=>F_,VKq:()=>Ty,WLB:()=>jl,kEZ:()=>Rw,iGM:()=>Ph,MAs:()=>i1,CHM:()=>Pf,LSH:()=>Wu,kYT:()=>wf,Udp:()=>ch,YNc:()=>r1,W1O:()=>dI,_uU:()=>j_,Oqu:()=>Mb,hij:()=>H_,Gf:()=>gp});var h=U(9765),ue=U(5319),q=U(7574),ae=U(6682),pe=U(8819);function X(l){for(let u in l)if(l[u]===X)return u;throw Error("Could not find renamed property on target object.")}function ie(l,u){for(const c in u)u.hasOwnProperty(c)&&!l.hasOwnProperty(c)&&(l[c]=u[c])}function J(l){if("string"==typeof l)return l;if(Array.isArray(l))return"["+l.map(J).join(", ")+"]";if(null==l)return""+l;if(l.overriddenName)return`${l.overriddenName}`;if(l.name)return`${l.name}`;const u=l.toString();if(null==u)return""+u;const c=u.indexOf("\n");return-1===c?u:u.substring(0,c)}function $(l,u){return null==l||""===l?null===u?"":u:null==u||""===u?l:l+" "+u}const B=X({__forward_ref__:X});function z(l){return l.__forward_ref__=z,l.toString=function(){return J(this())},l}function G(l){return K(l)?l():l}function K(l){return"function"==typeof l&&l.hasOwnProperty(B)&&l.__forward_ref__===z}class Ie extends Error{constructor(u,c){super(function(l,u){return`${l?`NG0${l}: `:""}${u}`}(u,c)),this.code=u}}function se(l){return"string"==typeof l?l:null==l?"":String(l)}function ce(l){return"function"==typeof l?l.name||l.toString():"object"==typeof l&&null!=l&&"function"==typeof l.type?l.type.name||l.type.toString():se(l)}function At(l,u){const c=u?` in ${u}`:"";throw new Ie("201",`No provider for ${ce(l)} found${c}`)}function ut(l,u,c,f){throw new Error(`ASSERTION ERROR: ${l}`+(null==f?"":` [Expected=> ${c} ${f} ${u} <=Actual]`))}function mt(l){return{token:l.token,providedIn:l.providedIn||null,factory:l.factory,value:void 0}}function On(l){return{providers:l.providers||[],imports:l.imports||[]}}function gr(l){return pr(l,Wi)||pr(l,mo)}function pr(l,u){return l.hasOwnProperty(u)?l[u]:null}function qa(l){return l&&(l.hasOwnProperty(po)||l.hasOwnProperty(zo))?l[po]:null}const Wi=X({\u0275prov:X}),po=X({\u0275inj:X}),mo=X({ngInjectableDef:X}),zo=X({ngInjectorDef:X});var Qe=(()=>((Qe=Qe||{})[Qe.Default=0]="Default",Qe[Qe.Host=1]="Host",Qe[Qe.Self=2]="Self",Qe[Qe.SkipSelf=4]="SkipSelf",Qe[Qe.Optional=8]="Optional",Qe))();let mr;function sr(l){const u=mr;return mr=l,u}function Dt(l,u,c){const f=gr(l);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:c&Qe.Optional?null:void 0!==u?u:void At(J(l),"Injector")}function Vt(l){return{toString:l}.toString()}var kt=(()=>((kt=kt||{})[kt.OnPush=0]="OnPush",kt[kt.Default=1]="Default",kt))(),Pe=(()=>((Pe=Pe||{})[Pe.Emulated=0]="Emulated",Pe[Pe.None=2]="None",Pe[Pe.ShadowDom=3]="ShadowDom",Pe))();const st="undefined"!=typeof globalThis&&globalThis,jc="undefined"!=typeof window&&window,Ya="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Oi="undefined"!=typeof global&&global,zt=st||Oi||jc||Ya,Kt={},W=[],H=X({\u0275cmp:X}),re=X({\u0275dir:X}),he=X({\u0275pipe:X}),ne=X({\u0275mod:X}),Oe=X({\u0275loc:X}),Ye=X({\u0275fac:X}),Bt=X({__NG_ELEMENT_ID__:X});let $t=0;function St(l){return Vt(()=>{const c={},f={type:l.type,providersResolver:null,decls:l.decls,vars:l.vars,factory:null,template:l.template||null,consts:l.consts||null,ngContentSelectors:l.ngContentSelectors,hostBindings:l.hostBindings||null,hostVars:l.hostVars||0,hostAttrs:l.hostAttrs||null,contentQueries:l.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:l.exportAs||null,onPush:l.changeDetection===kt.OnPush,directiveDefs:null,pipeDefs:null,selectors:l.selectors||W,viewQuery:l.viewQuery||null,features:l.features||null,data:l.data||{},encapsulation:l.encapsulation||Pe.Emulated,id:"c",styles:l.styles||W,_:null,setInput:null,schemas:l.schemas||null,tView:null},m=l.directives,_=l.features,b=l.pipes;return f.id+=$t++,f.inputs=Za(l.inputs,c),f.outputs=Za(l.outputs),_&&_.forEach(E=>E(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(Lr):null,f.pipeDefs=b?()=>("function"==typeof b?b():b).map(Vr):null,f})}function Lr(l){return Pn(l)||function(l){return l[re]||null}(l)}function Vr(l){return function(l){return l[he]||null}(l)}const Bs={};function za(l){return Vt(()=>{const u={type:l.type,bootstrap:l.bootstrap||W,declarations:l.declarations||W,imports:l.imports||W,exports:l.exports||W,transitiveCompileScopes:null,schemas:l.schemas||null,id:l.id||null};return null!=l.id&&(Bs[l.id]=l.type),u})}function wf(l,u){return Vt(()=>{const c=ki(l,!0);c.declarations=u.declarations||W,c.imports=u.imports||W,c.exports=u.exports||W})}function Za(l,u){if(null==l)return Kt;const c={};for(const f in l)if(l.hasOwnProperty(f)){let m=l[f],_=m;Array.isArray(m)&&(_=m[1],m=m[0]),c[m]=f,u&&(u[m]=_)}return c}const Hc=St;function Cf(l){return{type:l.type,name:l.name,factory:null,pure:!1!==l.pure,onDestroy:l.type.prototype.ngOnDestroy||null}}function Pn(l){return l[H]||null}function ki(l,u){const c=l[ne]||null;if(!c&&!0===u)throw new Error(`Type ${J(l)} does not have '\u0275mod' property.`);return c}function Zi(l){return Array.isArray(l)&&"object"==typeof l[1]}function Pi(l){return Array.isArray(l)&&!0===l[1]}function mu(l){return 0!=(8&l.flags)}function ms(l){return 2==(2&l.flags)}function En(l){return 1==(1&l.flags)}function Fi(l){return null!==l.template}function Ki(l){return 0!=(512&l[2])}function Qo(l,u){return l.hasOwnProperty(Ye)?l[Ye]:null}class Ja{constructor(u,c,f){this.previousValue=u,this.currentValue=c,this.firstChange=f}isFirstChange(){return this.firstChange}}function Br(){return _u}function _u(l){return l.type.prototype.ngOnChanges&&(l.setInput=_m),mm}function mm(){const l=Zn(this),u=null==l?void 0:l.current;if(u){const c=l.previous;if(c===Kt)l.previous=u;else for(let f in u)c[f]=u[f];l.current=null,this.ngOnChanges(u)}}function _m(l,u,c,f){const m=Zn(l)||function(l,u){return l[Wc]=u}(l,{previous:Kt,current:null}),_=m.current||(m.current={}),b=m.previous,E=this.declaredInputs[c],I=b[E];_[E]=new Ja(I&&I.currentValue,u,b===Kt),l[f]=u}Br.ngInherit=!0;const Wc="__ngSimpleChanges__";function Zn(l){return l[Wc]||null}let Yc;function Af(l){Yc=l}function zc(){return void 0!==Yc?Yc:"undefined"!=typeof document?document:void 0}function un(l){return!!l.listen}const Jo={createRenderer:(l,u)=>zc()};function gn(l){for(;Array.isArray(l);)l=l[0];return l}function Xa(l,u){return gn(u[l])}function bi(l,u){return gn(u[l.index])}function Qc(l,u){return l.data[u]}function Co(l,u){return l[u]}function wi(l,u){const c=u[l];return Zi(c)?c:c[0]}function Mf(l){return 4==(4&l[2])}function wm(l){return 128==(128&l[2])}function _s(l,u){return null==u?null:l[u]}function Jc(l){l[18]=0}function tl(l,u){l[5]+=u;let c=l,f=l[3];for(;null!==f&&(1===u&&1===c[5]||-1===u&&0===c[5]);)f[5]+=u,c=f,f=f[3]}const ft={lFrame:e0(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function kf(){return ft.bindingsEnabled}function Ae(){return ft.lFrame.lView}function Rt(){return ft.lFrame.tView}function Pf(l){return ft.lFrame.contextLView=l,l[8]}function cn(){let l=Ff();for(;null!==l&&64===l.type;)l=l.parent;return l}function Ff(){return ft.lFrame.currentTNode}function ea(){const l=ft.lFrame,u=l.currentTNode;return l.isParent?u:u.parent}function ei(l,u){const c=ft.lFrame;c.currentTNode=l,c.isParent=u}function Xc(){return ft.lFrame.isParent}function ed(){ft.lFrame.isParent=!1}function nl(){return ft.isInCheckNoChangesMode}function td(l){ft.isInCheckNoChangesMode=l}function Gn(){const l=ft.lFrame;let u=l.bindingRootIndex;return-1===u&&(u=l.bindingRootIndex=l.tView.bindingStartIndex),u}function Qi(){return ft.lFrame.bindingIndex}function Eo(){return ft.lFrame.bindingIndex++}function Ci(l){const u=ft.lFrame,c=u.bindingIndex;return u.bindingIndex=u.bindingIndex+l,c}function nd(l){ft.lFrame.inI18n=l}function Dm(l,u){const c=ft.lFrame;c.bindingIndex=c.bindingRootIndex=l,Bf(u)}function Bf(l){ft.lFrame.currentDirectiveIndex=l}function Gf(){return ft.lFrame.currentQueryIndex}function ta(l){ft.lFrame.currentQueryIndex=l}function xm(l){const u=l[1];return 2===u.type?u.declTNode:1===u.type?l[6]:null}function na(l,u,c){if(c&Qe.SkipSelf){let m=u,_=l;for(;!(m=m.parent,null!==m||c&Qe.Host||(m=xm(_),null===m||(_=_[15],10&m.type))););if(null===m)return!1;u=m,l=_}const f=ft.lFrame=Im();return f.currentTNode=u,f.lView=l,!0}function vu(l){const u=Im(),c=l[1];ft.lFrame=u,u.currentTNode=c.firstChild,u.lView=l,u.tView=c,u.contextLView=l,u.bindingIndex=c.bindingStartIndex,u.inI18n=!1}function Im(){const l=ft.lFrame,u=null===l?null:l.child;return null===u?e0(l):u}function e0(l){const u={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:l,child:null,inI18n:!1};return null!==l&&(l.child=u),u}function Tm(){const l=ft.lFrame;return ft.lFrame=l.parent,l.currentTNode=null,l.lView=null,l}const t0=Tm;function bu(){const l=Tm();l.isParent=!0,l.tView=null,l.selectedIndex=-1,l.contextLView=null,l.elementDepthCount=0,l.currentDirectiveIndex=-1,l.currentNamespace=null,l.bindingRootIndex=-1,l.bindingIndex=-1,l.currentQueryIndex=0}function Ur(){return ft.lFrame.selectedIndex}function rl(l){ft.lFrame.selectedIndex=l}function jn(){const l=ft.lFrame;return Qc(l.tView,l.selectedIndex)}function id(l,u){for(let c=u.directiveStart,f=u.directiveEnd;c<f;c++){const _=l.data[c].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:M}=_;b&&(l.contentHooks||(l.contentHooks=[])).push(-c,b),E&&((l.contentHooks||(l.contentHooks=[])).push(c,E),(l.contentCheckHooks||(l.contentCheckHooks=[])).push(c,E)),I&&(l.viewHooks||(l.viewHooks=[])).push(-c,I),A&&((l.viewHooks||(l.viewHooks=[])).push(c,A),(l.viewCheckHooks||(l.viewCheckHooks=[])).push(c,A)),null!=M&&(l.destroyHooks||(l.destroyHooks=[])).push(c,M)}}function il(l,u,c){od(l,u,3,c)}function sd(l,u,c,f){(3&l[2])===c&&od(l,u,c,f)}function wu(l,u){let c=l[2];(3&c)===u&&(c&=2047,c+=1,l[2]=c)}function od(l,u,c,f){const _=null!=f?f:-1,b=u.length-1;let E=0;for(let I=void 0!==f?65535&l[18]:0;I<b;I++)if("number"==typeof u[I+1]){if(E=u[I],null!=f&&E>=f)break}else u[I]<0&&(l[18]+=65536),(E<_||-1==_)&&(n0(l,c,u,I),l[18]=(4294901760&l[18])+I+2),I++}function n0(l,u,c,f){const m=c[f]<0,_=c[f+1],E=l[m?-c[f]:c[f]];if(m){if(l[2]>>11<l[18]>>16&&(3&l[2])===u){l[2]+=2048;try{_.call(E)}finally{}}}else try{_.call(E)}finally{}}class Cu{constructor(u,c,f){this.factory=u,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=f}}function $f(l,u,c){const f=un(l);let m=0;for(;m<c.length;){const _=c[m];if("number"==typeof _){if(0!==_)break;m++;const b=c[m++],E=c[m++],I=c[m++];f?l.setAttribute(u,E,I,b):u.setAttributeNS(b,E,I)}else{const b=_,E=c[++m];ys(b)?f&&l.setProperty(u,b,E):f?l.setAttribute(u,b,E):u.setAttribute(b,E),m++}}return m}function sl(l){return 3===l||4===l||6===l}function ys(l){return 64===l.charCodeAt(0)}function Dn(l,u){if(null!==u&&0!==u.length)if(null===l||0===l.length)l=u.slice();else{let c=-1;for(let f=0;f<u.length;f++){const m=u[f];"number"==typeof m?c=m:0===c||Sm(l,c,m,null,-1===c||2===c?u[++f]:null)}}return l}function Sm(l,u,c,f,m){let _=0,b=l.length;if(-1===u)b=-1;else for(;_<l.length;){const E=l[_++];if("number"==typeof E){if(E===u){b=-1;break}if(E>u){b=_-1;break}}}for(;_<l.length;){const E=l[_];if("number"==typeof E)break;if(E===c){if(null===f)return void(null!==m&&(l[_+1]=m));if(f===l[_+1])return void(l[_+2]=m)}_++,null!==f&&_++,null!==m&&_++}-1!==b&&(l.splice(b,0,u),_=b+1),l.splice(_++,0,c),null!==f&&l.splice(_++,0,f),null!==m&&l.splice(_++,0,m)}function ol(l){return-1!==l}function sa(l){return 32767&l}function Du(l,u){let c=function(l){return l>>16}(l),f=u;for(;c>0;)f=f[15],c--;return f}let Mm=!0;function xu(l){const u=Mm;return Mm=l,u}let ld=0;function Tu(l,u){const c=dn(l,u);if(-1!==c)return c;const f=u[1];f.firstCreatePass&&(l.injectorIndex=u.length,ud(f.data,l),ud(u,null),ud(f.blueprint,null));const m=ze(l,u),_=l.injectorIndex;if(ol(m)){const b=sa(m),E=Du(m,u),I=E[1].data;for(let A=0;A<8;A++)u[_+A]=E[b+A]|I[b+A]}return u[_+8]=m,_}function ud(l,u){l.push(0,0,0,0,0,0,0,0,u)}function dn(l,u){return-1===l.injectorIndex||l.parent&&l.parent.injectorIndex===l.injectorIndex||null===u[l.injectorIndex+8]?-1:l.injectorIndex}function ze(l,u){if(l.parent&&-1!==l.parent.injectorIndex)return l.parent.injectorIndex;let c=0,f=null,m=u;for(;null!==m;){const _=m[1],b=_.type;if(f=2===b?_.declTNode:1===b?m[6]:null,null===f)return-1;if(c++,m=m[15],-1!==f.injectorIndex)return f.injectorIndex|c<<16}return-1}function Yt(l,u,c){!function(l,u,c){let f;"string"==typeof c?f=c.charCodeAt(0)||0:c.hasOwnProperty(Bt)&&(f=c[Bt]),null==f&&(f=c[Bt]=ld++);const m=255&f;u.data[l+(m>>5)]|=1<<m}(l,u,c)}function xn(l,u,c){if(c&Qe.Optional)return l;At(u,"NodeInjector")}function Au(l,u,c,f){if(c&Qe.Optional&&void 0===f&&(f=null),0==(c&(Qe.Self|Qe.Host))){const m=l[9],_=sr(void 0);try{return m?m.get(u,f,c&Qe.Optional):Dt(u,f,c&Qe.Optional)}finally{sr(_)}}return xn(f,u,c)}function oa(l,u,c,f=Qe.Default,m){if(null!==l){const _=function(l){if("string"==typeof l)return l.charCodeAt(0)||0;const u=l.hasOwnProperty(Bt)?l[Bt]:void 0;return"number"==typeof u?u>=0?255&u:aa:u}(c);if("function"==typeof _){if(!na(u,l,f))return f&Qe.Host?xn(m,c,f):Au(u,c,f,m);try{const b=_(f);if(null!=b||f&Qe.Optional)return b;At(c)}finally{t0()}}else if("number"==typeof _){let b=null,E=dn(l,u),I=-1,A=f&Qe.Host?u[16][6]:null;for((-1===E||f&Qe.SkipSelf)&&(I=-1===E?ze(l,u):u[E+8],-1!==I&&fd(f,!1)?(b=u[1],E=sa(I),u=Du(I,u)):E=-1);-1!==E;){const M=u[1];if(hd(_,E,M.data)){const k=s0(E,u,c,b,f,A);if(k!==Gr)return k}I=u[E+8],-1!==I&&fd(f,u[1].data[E+8]===A)&&hd(_,E,u)?(b=M,E=sa(I),u=Du(I,u)):E=-1}}}return Au(u,c,f,m)}const Gr={};function aa(){return new qs(cn(),Ae())}function s0(l,u,c,f,m,_){const b=u[1],E=b.data[l+8],M=dd(E,b,c,null==f?ms(E)&&Mm:f!=b&&0!=(3&E.type),m&Qe.Host&&_===E);return null!==M?In(u,b,M,E):Gr}function dd(l,u,c,f,m){const _=l.providerIndexes,b=u.data,E=1048575&_,I=l.directiveStart,M=_>>20,F=m?E+M:l.directiveEnd;for(let j=f?E:E+M;j<F;j++){const Z=b[j];if(j<I&&c===Z||j>=I&&Z.type===c)return j}if(m){const j=b[I];if(j&&Fi(j)&&j.type===c)return I}return null}function In(l,u,c,f){let m=l[c];const _=u.data;if(function(l){return l instanceof Cu}(m)){const b=m;b.resolving&&function(l,u){throw new Ie("200",`Circular dependency in DI detected for ${l}`)}(ce(_[c]));const E=xu(b.canSeeViewProviders);b.resolving=!0;const I=b.injectImpl?sr(b.injectImpl):null;na(l,f,Qe.Default);try{m=l[c]=b.factory(void 0,_,l,f),u.firstCreatePass&&c>=f.directiveStart&&function(l,u,c){const{ngOnChanges:f,ngOnInit:m,ngDoCheck:_}=u.type.prototype;if(f){const b=_u(u);(c.preOrderHooks||(c.preOrderHooks=[])).push(l,b),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(l,b)}m&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-l,m),_&&((c.preOrderHooks||(c.preOrderHooks=[])).push(l,_),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(l,_))}(c,_[c],u)}finally{null!==I&&sr(I),xu(E),b.resolving=!1,t0()}}return m}function hd(l,u,c){return!!(c[u+(l>>5)]&1<<l)}function fd(l,u){return!(l&Qe.Self||l&Qe.Host&&u)}class qs{constructor(u,c){this._tNode=u,this._lView=c}get(u,c){return oa(this._tNode,this._lView,u,void 0,c)}}function Om(l){return Vt(()=>{const u=l.prototype.constructor,c=u[Ye]||qf(u),f=Object.prototype;let m=Object.getPrototypeOf(l.prototype).constructor;for(;m&&m!==f;){const _=m[Ye]||qf(m);if(_&&_!==c)return _;m=Object.getPrototypeOf(m)}return _=>new _})}function qf(l){return K(l)?()=>{const u=qf(G(l));return u&&u()}:Qo(l)}function Nu(l){return function(l,u){if("class"===u)return l.classes;if("style"===u)return l.styles;const c=l.attrs;if(c){const f=c.length;let m=0;for(;m<f;){const _=c[m];if(sl(_))break;if(0===_)m+=2;else if("number"==typeof _)for(m++;m<f&&"string"==typeof c[m];)m++;else{if(_===u)return c[m+1];m+=2}}}return null}(cn(),l)}const zs="__parameters__";function Do(l,u,c){return Vt(()=>{const f=function(l){return function(...c){if(l){const f=l(...c);for(const m in f)this[m]=f[m]}}}(u);function m(..._){if(this instanceof m)return f.apply(this,_),this;const b=new m(..._);return E.annotation=b,E;function E(I,A,M){const k=I.hasOwnProperty(zs)?I[zs]:Object.defineProperty(I,zs,{value:[]})[zs];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(b),I}}return c&&(m.prototype=Object.create(c.prototype)),m.prototype.ngMetadataName=l,m.annotationCls=m,m})}class Tn{constructor(u,c){this._desc=u,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=mt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const EE=new Tn("AnalyzeForEntryComponents"),ul=Function;function ni(l,u){void 0===u&&(u=l);for(let c=0;c<l.length;c++){let f=l[c];Array.isArray(f)?(u===l&&(u=l.slice(0,c)),ni(f,u)):u!==l&&u.push(f)}return u}function es(l,u){l.forEach(c=>Array.isArray(c)?es(c,u):u(c))}function Ru(l,u,c){u>=l.length?l.push(c):l.splice(u,0,c)}function ua(l,u){return u>=l.length-1?l.pop():l.splice(u,1)[0]}function ws(l,u){const c=[];for(let f=0;f<l;f++)c.push(u);return c}function Fn(l,u,c){let f=cl(l,u);return f>=0?l[1|f]=c:(f=~f,function(l,u,c,f){let m=l.length;if(m==u)l.push(c,f);else if(1===m)l.push(f,l[0]),l[0]=c;else{for(m--,l.push(l[m-1],l[m]);m>u;)l[m]=l[m-2],m--;l[u]=c,l[u+1]=f}}(l,f,u,c)),f}function $n(l,u){const c=cl(l,u);if(c>=0)return l[1|c]}function cl(l,u){return function(l,u,c){let f=0,m=l.length>>c;for(;m!==f;){const _=f+(m-f>>1),b=l[_<<c];if(u===b)return _<<c;b>u?m=_:f=_+1}return~(m<<c)}(l,u,1)}const ca={},Jf="__NG_DI_FLAG__",hl="ngTempTokenPath",Bm=/\n/gm,fl="__source",bd=X({provide:String,useValue:X});let Io;function Et(l){const u=Io;return Io=l,u}function Gm(l,u=Qe.Default){if(void 0===Io)throw new Error("inject() must be called from an injection context");return null===Io?Dt(l,void 0,u):Io.get(l,u&Qe.Optional?null:void 0,u)}function en(l,u=Qe.Default){return(mr||Gm)(G(l),u)}const eg=en;function To(l){const u=[];for(let c=0;c<l.length;c++){const f=G(l[c]);if(Array.isArray(f)){if(0===f.length)throw new Error("Arguments array must have arguments.");let m,_=Qe.Default;for(let b=0;b<f.length;b++){const E=f[b],I=u0(E);"number"==typeof I?-1===I?m=E.token:_|=I:m=E}u.push(en(m,_))}else u.push(en(f))}return u}function da(l,u){return l[Jf]=u,l.prototype[Jf]=u,l}function u0(l){return l[Jf]}function ns(l,u,c,f){const m=l[hl];throw u[fl]&&m.unshift(u[fl]),l.message=function(l,u,c,f=null){l=l&&"\n"===l.charAt(0)&&"\u0275"==l.charAt(1)?l.substr(2):l;let m=J(u);if(Array.isArray(u))m=u.map(J).join(" -> ");else if("object"==typeof u){let _=[];for(let b in u)if(u.hasOwnProperty(b)){let E=u[b];_.push(b+":"+("string"==typeof E?JSON.stringify(E):J(E)))}m=`{${_.join(", ")}}`}return`${c}${f?"("+f+")":""}[${m}]: ${l.replace(Bm,"\n  ")}`}("\n"+l.message,m,c,f),l.ngTokenPath=m,l[hl]=null,l}const ha=da(Do("Inject",l=>({token:l})),-1),Ao=da(Do("Optional"),8),yr=da(Do("SkipSelf"),4);let Lu;function Zs(l){var u;return(null===(u=function(){if(void 0===Lu&&(Lu=null,zt.trustedTypes))try{Lu=zt.trustedTypes.createPolicy("angular",{createHTML:l=>l,createScript:l=>l,createScriptURL:l=>l})}catch(l){}return Lu}())||void 0===u?void 0:u.createHTML(l))||l}class ma{constructor(u){this.changingThisBreaksApplicationSecurity=u}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class d0 extends ma{getTypeName(){return"HTML"}}class h0 extends ma{getTypeName(){return"Style"}}class xd extends ma{getTypeName(){return"Script"}}class f0 extends ma{getTypeName(){return"URL"}}class AE extends ma{getTypeName(){return"ResourceURL"}}function jr(l){return l instanceof ma?l.changingThisBreaksApplicationSecurity:l}function yl(l,u){const c=Ym(l);if(null!=c&&c!==u){if("ResourceURL"===c&&"URL"===u)return!0;throw new Error(`Required a safe ${u}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===u}function Ym(l){return l instanceof ma&&l.getTypeName()||null}function Id(l){return new d0(l)}function og(l){return new h0(l)}function Gu(l){return new xd(l)}function Ks(l){return new f0(l)}function ju(l){return new AE(l)}function Hu(l){const u=new g0(l);return function(){try{return!!(new window.DOMParser).parseFromString(Zs(""),"text/html")}catch(l){return!1}}()?new zm(u):u}class zm{constructor(u){this.inertDocumentHelper=u}getInertBodyElement(u){u="<body><remove></remove>"+u;try{const c=(new window.DOMParser).parseFromString(Zs(u),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(u):(c.removeChild(c.firstChild),c)}catch(c){return null}}}class g0{constructor(u){if(this.defaultDoc=u,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const f=this.inertDocument.createElement("body");c.appendChild(f)}}getInertBodyElement(u){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=Zs(u),c;const f=this.inertDocument.createElement("body");return f.innerHTML=Zs(u),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(f),f}stripCustomNsAttrs(u){const c=u.attributes;for(let m=c.length-1;0<m;m--){const b=c.item(m).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&u.removeAttribute(b)}let f=u.firstChild;for(;f;)f.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(f),f=f.nextSibling}}const Zm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Td=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function vl(l){return(l=String(l)).match(Zm)||l.match(Td)?l:"unsafe:"+l}function Ad(l){return(l=String(l)).split(",").map(u=>vl(u.trim())).join(", ")}function Vi(l){const u={};for(const c of l.split(","))u[c]=!0;return u}function Qs(...l){const u={};for(const c of l)for(const f in c)c.hasOwnProperty(f)&&(u[f]=!0);return u}const Sd=Vi("area,br,col,hr,img,wbr"),Km=Vi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_a=Vi("rp,rt"),bl=Qs(Sd,Qs(Km,Vi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Qs(_a,Vi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Qs(_a,Km)),wl=Vi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ya=Vi("srcset"),lg=Qs(wl,ya,Vi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),p0=Vi("script,style,template");class ug{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(u){let c=u.firstChild,f=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?f=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,f&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let m=this.checkClobberedElement(c,c.nextSibling);if(m){c=m;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(u){const c=u.nodeName.toLowerCase();if(!bl.hasOwnProperty(c))return this.sanitizedSomething=!0,!p0.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const f=u.attributes;for(let m=0;m<f.length;m++){const _=f.item(m),b=_.name,E=b.toLowerCase();if(!lg.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=_.value;wl[E]&&(I=vl(I)),ya[E]&&(I=Ad(I)),this.buf.push(" ",b,'="',Xm(I),'"')}return this.buf.push(">"),!0}endElement(u){const c=u.nodeName.toLowerCase();bl.hasOwnProperty(c)&&!Sd.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(u){this.buf.push(Xm(u))}checkClobberedElement(u,c){if(c&&(u.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${u.outerHTML}`);return c}}const m0=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Nd=/([^\#-~ |!])/g;function Xm(l){return l.replace(/&/g,"&amp;").replace(m0,function(u){return"&#"+(1024*(u.charCodeAt(0)-55296)+(u.charCodeAt(1)-56320)+65536)+";"}).replace(Nd,function(u){return"&#"+u.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Cl;function $u(l,u){let c=null;try{Cl=Cl||Hu(l);let f=u?String(u):"";c=Cl.getInertBodyElement(f);let m=5,_=f;do{if(0===m)throw new Error("Failed to sanitize html because the input is unstable");m--,f=_,_=c.innerHTML,c=Cl.getInertBodyElement(f)}while(f!==_);return Zs((new ug).sanitizeChildren(cg(c)||c))}finally{if(c){const f=cg(c)||c;for(;f.firstChild;)f.removeChild(f.firstChild)}}}function cg(l){return"content"in l&&function(l){return l.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===l.nodeName}(l)?l.content:null}var An=(()=>((An=An||{})[An.NONE=0]="NONE",An[An.HTML=1]="HTML",An[An.STYLE=2]="STYLE",An[An.SCRIPT=3]="SCRIPT",An[An.URL=4]="URL",An[An.RESOURCE_URL=5]="RESOURCE_URL",An))();function Wu(l){const u=function(){const l=Ae();return l&&l[12]}();return u?u.sanitize(An.URL,l)||"":yl(l,"URL")?jr(l):vl(se(l))}const Ei="__ngContext__";function lr(l,u){l[Ei]=u}function pg(l){const u=function(l){return l[Ei]||null}(l);return u?Array.isArray(u)?u:u.lView:null}function D(l){return l.ngOriginalError}function w(l,...u){l.error(...u)}class x{constructor(){this._console=console}handleError(u){const c=this._findOriginalError(u),f=this._findContext(u),m=(l=u)&&l.ngErrorLogger||w;var l;m(this._console,"ERROR",u),c&&m(this._console,"ORIGINAL ERROR",c),f&&m(this._console,"ERROR CONTEXT",f)}_findContext(u){return u?u.ngDebugContext||this._findContext(D(u)):null}_findOriginalError(u){let c=u&&D(u);for(;c&&D(c);)c=D(c);return c||null}}const Q=/^>|^->|<!--|-->|--!>|<!-$/g,we=/(<|>)/;const Fd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(zt))();function rs(l){return l instanceof Function?l():l}var Cs=(()=>((Cs=Cs||{})[Cs.Important=1]="Important",Cs[Cs.DashCase=2]="DashCase",Cs))();let v0;function u_(l,u){return v0(l,u)}function bg(l){const u=l[3];return Pi(u)?u[3]:u}function c_(l){return b0(l[13])}function PE(l){return b0(l[4])}function b0(l){for(;null!==l&&!Pi(l);)l=l[4];return l}function Qu(l,u,c,f,m){if(null!=f){let _,b=!1;Pi(f)?_=f:Zi(f)&&(b=!0,f=f[0]);const E=gn(f);0===l&&null!==c?null==m?UE(u,c,E):Sl(u,c,E,m||null,!0):1===l&&null!==c?Sl(u,c,E,m||null,!0):2===l?I0(u,E,b):3===l&&u.destroyNode(E),null!=_&&function(l,u,c,f,m){const _=c[7];_!==gn(c)&&Qu(u,l,f,_,m);for(let E=10;E<c.length;E++){const I=c[E];Xu(I[1],I,l,u,f,_)}}(u,l,_,c,m)}}function d_(l,u){return un(l)?l.createText(u):l.createTextNode(u)}function FE(l,u,c){un(l)?l.setValue(u,c):u.textContent=c}function FA(l,u){return l.createComment(function(l){return l.replace(Q,u=>u.replace(we,"\u200b$1\u200b"))}(u))}function w0(l,u,c){return un(l)?l.createElement(u,c):null===c?l.createElement(u):l.createElementNS(c,u)}function h_(l,u){const c=l[9],f=c.indexOf(u),m=u[3];1024&u[2]&&(u[2]&=-1025,tl(m,-1)),c.splice(f,1)}function f_(l,u){if(l.length<=10)return;const c=10+u,f=l[c];if(f){const m=f[17];null!==m&&m!==l&&h_(m,f),u>0&&(l[c-1][4]=f[4]);const _=ua(l,10+u);!function(l,u){Xu(l,u,u[11],2,null,null),u[0]=null,u[6]=null}(f[1],f);const b=_[19];null!==b&&b.detachView(_[1]),f[3]=null,f[4]=null,f[2]&=-129}return f}function LE(l,u){if(!(256&u[2])){const c=u[11];un(c)&&c.destroyNode&&Xu(l,u,c,3,null,null),function(l){let u=l[13];if(!u)return Al(l[1],l);for(;u;){let c=null;if(Zi(u))c=u[13];else{const f=u[10];f&&(c=f)}if(!c){for(;u&&!u[4]&&u!==l;)Zi(u)&&Al(u[1],u),u=u[3];null===u&&(u=l),Zi(u)&&Al(u[1],u),c=u&&u[4]}u=c}}(u)}}function Al(l,u){if(!(256&u[2])){u[2]&=-129,u[2]|=256,function(l,u){let c;if(null!=l&&null!=(c=l.destroyHooks))for(let f=0;f<c.length;f+=2){const m=u[c[f]];if(!(m instanceof Cu)){const _=c[f+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const E=m[_[b]],I=_[b+1];try{I.call(E)}finally{}}else try{_.call(m)}finally{}}}}(l,u),function(l,u){const c=l.cleanup,f=u[7];let m=-1;if(null!==c)for(let _=0;_<c.length-1;_+=2)if("string"==typeof c[_]){const b=c[_+1],E="function"==typeof b?b(u):gn(u[b]),I=f[m=c[_+2]],A=c[_+3];"boolean"==typeof A?E.removeEventListener(c[_],I,A):A>=0?f[m=A]():f[m=-A].unsubscribe(),_+=2}else{const b=f[m=c[_+1]];c[_].call(b)}if(null!==f){for(let _=m+1;_<f.length;_++)f[_]();u[7]=null}}(l,u),1===u[1].type&&un(u[11])&&u[11].destroy();const c=u[17];if(null!==c&&Pi(u[3])){c!==u[3]&&h_(c,u);const f=u[19];null!==f&&f.detachView(l)}}}function VE(l,u,c){return BE(l,u.parent,c)}function BE(l,u,c){let f=u;for(;null!==f&&40&f.type;)f=(u=f).parent;if(null===f)return c[0];if(2&f.flags){const m=l.data[f.directiveStart].encapsulation;if(m===Pe.None||m===Pe.Emulated)return null}return bi(f,c)}function Sl(l,u,c,f,m){un(l)?l.insertBefore(u,c,f,m):u.insertBefore(c,f,m)}function UE(l,u,c){un(l)?l.appendChild(u,c):u.appendChild(c)}function GE(l,u,c,f,m){null!==f?Sl(l,u,c,f,m):UE(l,u,c)}function g_(l,u){return un(l)?l.parentNode(u):u.parentNode}function m_(l,u,c){return Ju(l,u,c)}function __(l,u,c){return 40&l.type?bi(l,c):null}let E0,Ju=__;function jE(l,u){Ju=l,E0=u}function wg(l,u,c,f){const m=VE(l,f,u),_=u[11],E=m_(f.parent||u[6],f,u);if(null!=m)if(Array.isArray(c))for(let I=0;I<c.length;I++)GE(_,m,c[I],E,!1);else GE(_,m,c,E,!1);void 0!==E0&&E0(_,f,u,c,m)}function y_(l,u){if(null!==u){const c=u.type;if(3&c)return bi(u,l);if(4&c)return x0(-1,l[u.index]);if(8&c){const f=u.child;if(null!==f)return y_(l,f);{const m=l[u.index];return Pi(m)?x0(-1,m):gn(m)}}if(32&c)return u_(u,l)()||gn(l[u.index]);{const f=D0(l,u);return null!==f?Array.isArray(f)?f[0]:y_(bg(l[16]),f):y_(l,u.next)}}return null}function D0(l,u){return null!==u?l[16][6].projection[u.projection]:null}function x0(l,u){const c=10+l+1;if(c<u.length){const f=u[c],m=f[1].firstChild;if(null!==m)return y_(f,m)}return u[7]}function I0(l,u,c){const f=g_(l,u);f&&function(l,u,c,f){un(l)?l.removeChild(u,c,f):u.removeChild(c)}(l,f,u,c)}function v_(l,u,c,f,m,_,b){for(;null!=c;){const E=f[c.index],I=c.type;if(b&&0===u&&(E&&lr(gn(E),f),c.flags|=4),64!=(64&c.flags))if(8&I)v_(l,u,c.child,f,m,_,!1),Qu(u,l,m,E,_);else if(32&I){const A=u_(c,f);let M;for(;M=A();)Qu(u,l,m,M,_);Qu(u,l,m,E,_)}else 16&I?Nl(l,u,f,c,m,_):Qu(u,l,m,E,_);c=b?c.projectionNext:c.next}}function Xu(l,u,c,f,m,_){v_(c,f,l.firstChild,u,m,_,!1)}function Nl(l,u,c,f,m,_){const b=c[16],I=b[6].projection[f.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Qu(u,l,m,I[A],_);else v_(l,u,I,b[3],m,_,!0)}function $E(l,u,c){un(l)?l.setAttribute(u,"style",c):u.style.cssText=c}function T0(l,u,c){un(l)?""===c?l.removeAttribute(u,"class"):l.setAttribute(u,"class",c):u.className=c}function A0(l,u,c){let f=l.length;for(;;){const m=l.indexOf(u,c);if(-1===m)return m;if(0===m||l.charCodeAt(m-1)<=32){const _=u.length;if(m+_===f||l.charCodeAt(m+_)<=32)return m}c=m+1}}const WE="ng-template";function WA(l,u,c){let f=0;for(;f<l.length;){let m=l[f++];if(c&&"class"===m){if(m=l[f],-1!==A0(m.toLowerCase(),u,0))return!0}else if(1===m){for(;f<l.length&&"string"==typeof(m=l[f++]);)if(m.toLowerCase()===u)return!0;return!1}}return!1}function S0(l){return 4===l.type&&l.value!==WE}function qA(l,u,c){return u===(4!==l.type||c?l.value:WE)}function YA(l,u,c){let f=4;const m=l.attrs||[],_=function(l){for(let u=0;u<l.length;u++)if(sl(l[u]))return u;return l.length}(m);let b=!1;for(let E=0;E<u.length;E++){const I=u[E];if("number"!=typeof I){if(!b)if(4&f){if(f=2|1&f,""!==I&&!qA(l,I,c)||""===I&&1===u.length){if(Xs(f))return!1;b=!0}}else{const A=8&f?I:u[++E];if(8&f&&null!==l.attrs){if(!WA(l.attrs,A,c)){if(Xs(f))return!1;b=!0}continue}const k=N0(8&f?"class":I,m,S0(l),c);if(-1===k){if(Xs(f))return!1;b=!0;continue}if(""!==A){let F;F=k>_?"":m[k+1].toLowerCase();const j=8&f?F:null;if(j&&-1!==A0(j,A,0)||2&f&&A!==F){if(Xs(f))return!1;b=!0}}}}else{if(!b&&!Xs(f)&&!Xs(I))return!1;if(b&&Xs(I))continue;b=!1,f=I|1&f}}return Xs(f)||b}function Xs(l){return 0==(1&l)}function N0(l,u,c,f){if(null===u)return-1;let m=0;if(f||!c){let _=!1;for(;m<u.length;){const b=u[m];if(b===l)return m;if(3===b||6===b)_=!0;else{if(1===b||2===b){let E=u[++m];for(;"string"==typeof E;)E=u[++m];continue}if(4===b)break;if(0===b){m+=4;continue}}m+=_?1:2}return-1}return function(l,u){let c=l.indexOf(4);if(c>-1)for(c++;c<l.length;){const f=l[c];if("number"==typeof f)return-1;if(f===u)return c;c++}return-1}(u,l)}function qE(l,u,c=!1){for(let f=0;f<u.length;f++)if(YA(l,u[f],c))return!0;return!1}function RP(l,u){e:for(let c=0;c<u.length;c++){const f=u[c];if(l.length===f.length){for(let m=0;m<l.length;m++)if(l[m]!==f[m])continue e;return!0}}return!1}function zE(l,u){return l?":not("+u.trim()+")":u}function KA(l){let u=l[0],c=1,f=2,m="",_=!1;for(;c<l.length;){let b=l[c];if("string"==typeof b)if(2&f){const E=l[++c];m+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&f?m+="."+b:4&f&&(m+=" "+b);else""!==m&&!Xs(b)&&(u+=zE(_,m),m=""),f=b,_=_||!Xs(f);c++}return""!==m&&(u+=zE(_,m)),u}const gt={};function M0(l){Ml(Rt(),Ae(),Ur()+l,nl())}function Ml(l,u,c,f){if(!f)if(3==(3&u[2])){const _=l.preOrderCheckHooks;null!==_&&il(u,_,c)}else{const _=l.preOrderHooks;null!==_&&sd(u,_,0,c)}rl(c)}function ur(l,u){return l<<17|u<<2}function eo(l){return l>>17&32767}function O0(l){return 2|l}function wa(l){return(131068&l)>>2}function Ld(l,u){return-131069&l|u<<2}function b_(l){return 1|l}function xg(l,u){const c=l.contentQueries;if(null!==c)for(let f=0;f<c.length;f+=2){const m=c[f],_=c[f+1];if(-1!==_){const b=l.data[_];ta(m),b.contentQueries(2,u[_],_)}}}function tc(l,u,c,f,m,_,b,E,I,A){const M=u.blueprint.slice();return M[0]=m,M[2]=140|f,Jc(M),M[3]=M[15]=l,M[8]=c,M[10]=b||l&&l[10],M[11]=E||l&&l[11],M[12]=I||l&&l[12]||null,M[9]=A||l&&l[9]||null,M[6]=_,M[16]=2==u.type?l[16]:M,M}function Ia(l,u,c,f,m){let _=l.data[u];if(null===_)_=U0(l,u,c,f,m),ft.lFrame.inI18n&&(_.flags|=64);else if(64&_.type){_.type=c,_.value=f,_.attrs=m;const b=ea();_.injectorIndex=null===b?-1:b.injectorIndex}return ei(_,!0),_}function U0(l,u,c,f,m){const _=Ff(),b=Xc(),I=l.data[u]=function(l,u,c,f,m,_){return{type:c,index:f,insertBeforeIndex:null,injectorIndex:u?u.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:u,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,c,u,f,m);return null===l.firstChild&&(l.firstChild=I),null!==_&&(b?null==_.child&&null!==I.parent&&(_.child=I):null===_.next&&(_.next=I)),I}function Bd(l,u,c,f){if(0===c)return-1;const m=u.length;for(let _=0;_<c;_++)u.push(f),l.blueprint.push(f),l.data.push(null);return m}function Ud(l,u,c){vu(u);try{const f=l.viewQuery;null!==f&&Og(1,f,c);const m=l.template;null!==m&&iD(l,u,m,1,c),l.firstCreatePass&&(l.firstCreatePass=!1),l.staticContentQueries&&xg(l,u),l.staticViewQueries&&Og(2,l.viewQuery,c);const _=l.components;null!==_&&function(l,u){for(let c=0;c<u.length;c++)yS(l,u[c])}(u,_)}catch(f){throw l.firstCreatePass&&(l.incompleteFirstPass=!0,l.firstCreatePass=!1),f}finally{u[2]&=-5,bu()}}function Gd(l,u,c,f){const m=u[2];if(256==(256&m))return;vu(u);const _=nl();try{Jc(u),function(l){ft.lFrame.bindingIndex=l}(l.bindingStartIndex),null!==c&&iD(l,u,c,2,f);const b=3==(3&m);if(!_)if(b){const A=l.preOrderCheckHooks;null!==A&&il(u,A,null)}else{const A=l.preOrderHooks;null!==A&&sd(u,A,0,null),wu(u,0)}if(function(l){for(let u=c_(l);null!==u;u=PE(u)){if(!u[2])continue;const c=u[9];for(let f=0;f<c.length;f++){const m=c[f],_=m[3];0==(1024&m[2])&&tl(_,1),m[2]|=1024}}}(u),function(l){for(let u=c_(l);null!==u;u=PE(u))for(let c=10;c<u.length;c++){const f=u[c],m=f[1];wm(f)&&Gd(m,f,m.template,f[8])}}(u),null!==l.contentQueries&&xg(l,u),!_)if(b){const A=l.contentCheckHooks;null!==A&&il(u,A)}else{const A=l.contentHooks;null!==A&&sd(u,A,1),wu(u,1)}!function(l,u){const c=l.hostBindingOpCodes;if(null!==c)try{for(let f=0;f<c.length;f++){const m=c[f];if(m<0)rl(~m);else{const _=m,b=c[++f],E=c[++f];Dm(b,_),E(2,u[_])}}}finally{rl(-1)}}(l,u);const E=l.components;null!==E&&function(l,u){for(let c=0;c<u.length;c++)fD(l,u[c])}(u,E);const I=l.viewQuery;if(null!==I&&Og(2,I,f),!_)if(b){const A=l.viewCheckHooks;null!==A&&il(u,A)}else{const A=l.viewHooks;null!==A&&sd(u,A,2),wu(u,2)}!0===l.firstUpdatePass&&(l.firstUpdatePass=!1),_||(u[2]&=-73),1024&u[2]&&(u[2]&=-1025,tl(u[3],-1))}finally{bu()}}function rD(l,u,c,f){const m=u[10],_=!nl(),b=Mf(u);try{_&&!b&&m.begin&&m.begin(),b&&Ud(l,u,f),Gd(l,u,c,f)}finally{_&&!b&&m.end&&m.end()}}function iD(l,u,c,f,m){const _=Ur(),b=2&f;try{rl(-1),b&&u.length>20&&Ml(l,u,20,nl()),c(f,m)}finally{rl(_)}}function uS(l,u,c){if(mu(u)){const m=u.directiveEnd;for(let _=u.directiveStart;_<m;_++){const b=l.data[_];b.contentQueries&&b.contentQueries(1,c[_],_)}}}function G0(l,u,c){!kf()||(function(l,u,c,f){const m=c.directiveStart,_=c.directiveEnd;l.firstCreatePass||Tu(c,u),lr(f,u);const b=c.initialInputs;for(let E=m;E<_;E++){const I=l.data[E],A=Fi(I);A&&cD(u,c,I);const M=In(u,l,E,c);lr(M,u),null!==b&&pS(0,E-m,M,I,0,b),A&&(wi(c.index,u)[8]=M)}}(l,u,c,bi(c,u)),128==(128&c.flags)&&function(l,u,c){const f=c.directiveStart,m=c.directiveEnd,b=c.index,E=ft.lFrame.currentDirectiveIndex;try{rl(b);for(let I=f;I<m;I++){const A=l.data[I],M=u[I];Bf(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&hS(A,M)}}finally{rl(-1),Bf(E)}}(l,u,c))}function Ig(l,u,c=bi){const f=u.localNames;if(null!==f){let m=u.index+1;for(let _=0;_<f.length;_+=2){const b=f[_+1],E=-1===b?c(u,l):l[b];l[m++]=E}}}function sD(l){const u=l.tView;return null===u||u.incompleteFirstPass?l.tView=Tg(1,null,l.template,l.decls,l.vars,l.directiveDefs,l.pipeDefs,l.viewQuery,l.schemas,l.consts):u}function Tg(l,u,c,f,m,_,b,E,I,A){const M=20+f,k=M+m,F=function(l,u){const c=[];for(let f=0;f<u;f++)c.push(f<l?null:gt);return c}(M,k),j="function"==typeof A?A():A;return F[1]={type:l,blueprint:F,template:c,queries:null,viewQuery:E,declTNode:u,data:F.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:I,consts:j,incompleteFirstPass:!1}}function Sg(l,u,c,f){const m=_D(u);null===c?m.push(f):(m.push(c),l.firstCreatePass&&S_(l).push(f,m.length-1))}function $d(l,u,c){for(let f in l)if(l.hasOwnProperty(f)){const m=l[f];(c=null===c?{}:c).hasOwnProperty(f)?c[f].push(u,m):c[f]=[u,m]}return c}function Gi(l,u,c,f,m,_,b,E){const I=bi(u,c);let M,A=u.inputs;!E&&null!=A&&(M=A[f])?(X0(l,c,M,f,m),ms(u)&&function(l,u){const c=wi(u,l);16&c[2]||(c[2]|=64)}(c,u.index)):3&u.type&&(f=function(l){return"class"===l?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l}(f),m=null!=b?b(m,u.value||"",f):m,un(_)?_.setProperty(I,f,m):ys(f)||(I.setProperty?I.setProperty(f,m):I[f]=m))}function q0(l,u,c,f){let m=!1;if(kf()){const _=function(l,u,c){const f=l.directiveRegistry;let m=null;if(f)for(let _=0;_<f.length;_++){const b=f[_];qE(c,b.selectors,!1)&&(m||(m=[]),Yt(Tu(c,u),l,b.type),Fi(b)?(z0(l,c),m.unshift(b)):m.push(b))}return m}(l,u,c),b=null===f?null:{"":-1};if(null!==_){m=!0,Z0(c,l.data.length,_.length);for(let M=0;M<_.length;M++){const k=_[M];k.providersResolver&&k.providersResolver(k)}let E=!1,I=!1,A=Bd(l,u,_.length,null);for(let M=0;M<_.length;M++){const k=_[M];c.mergedAttrs=Dn(c.mergedAttrs,k.hostAttrs),K0(l,c,u,A,k),LP(A,k,b),null!==k.contentQueries&&(c.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(c.flags|=128);const F=k.type.prototype;!E&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((l.preOrderHooks||(l.preOrderHooks=[])).push(c.index),E=!0),!I&&(F.ngOnChanges||F.ngDoCheck)&&((l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(c.index),I=!0),A++}!function(l,u){const f=u.directiveEnd,m=l.data,_=u.attrs,b=[];let E=null,I=null;for(let A=u.directiveStart;A<f;A++){const M=m[A],k=M.inputs,F=null===_||S0(u)?null:VP(k,_);b.push(F),E=$d(k,A,E),I=$d(M.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(u.flags|=16),E.hasOwnProperty("style")&&(u.flags|=32)),u.initialInputs=b,u.inputs=E,u.outputs=I}(l,c)}b&&function(l,u,c){if(u){const f=l.localNames=[];for(let m=0;m<u.length;m+=2){const _=c[u[m+1]];if(null==_)throw new Ie("301",`Export of name '${u[m+1]}' not found!`);f.push(u[m],_)}}}(c,f,b)}return c.mergedAttrs=Dn(c.mergedAttrs,c.attrs),m}function dS(l,u,c,f,m,_){const b=_.hostBindings;if(b){let E=l.hostBindingOpCodes;null===E&&(E=l.hostBindingOpCodes=[]);const I=~u.index;(function(l){let u=l.length;for(;u>0;){const c=l[--u];if("number"==typeof c&&c<0)return c}return 0})(E)!=I&&E.push(I),E.push(f,m,b)}}function hS(l,u){null!==l.hostBindings&&l.hostBindings(1,u)}function z0(l,u){u.flags|=2,(l.components||(l.components=[])).push(u.index)}function LP(l,u,c){if(c){if(u.exportAs)for(let f=0;f<u.exportAs.length;f++)c[u.exportAs[f]]=l;Fi(u)&&(c[""]=l)}}function Z0(l,u,c){l.flags|=1,l.directiveStart=u,l.directiveEnd=u+c,l.providerIndexes=u}function K0(l,u,c,f,m){l.data[f]=m;const _=m.factory||(m.factory=Qo(m.type)),b=new Cu(_,Fi(m),null);l.blueprint[f]=b,c[f]=b,dS(l,u,0,f,Bd(l,c,m.hostVars,gt),m)}function cD(l,u,c){const f=bi(u,l),m=sD(c),_=l[10],b=T_(l,tc(l,m,null,c.onPush?64:16,f,u,_,_.createRenderer(f,c),null,null));l[u.index]=b}function I_(l,u,c,f,m,_,b){if(null==_)un(l)?l.removeAttribute(u,m,c):u.removeAttribute(m);else{const E=null==b?se(_):b(_,f||"",m);un(l)?l.setAttribute(u,m,E,c):c?u.setAttributeNS(c,m,E):u.setAttribute(m,E)}}function pS(l,u,c,f,m,_){const b=_[u];if(null!==b){const E=f.setInput;for(let I=0;I<b.length;){const A=b[I++],M=b[I++],k=b[I++];null!==E?f.setInput(c,k,A,M):c[M]=k}}}function VP(l,u){let c=null,f=0;for(;f<u.length;){const m=u[f];if(0!==m)if(5!==m){if("number"==typeof m)break;l.hasOwnProperty(m)&&(null===c&&(c=[]),c.push(m,l[m],u[f+1])),f+=2}else f+=2;else f+=4}return c}function dD(l,u,c,f){return new Array(l,!0,!1,u,null,0,f,c,null,null)}function fD(l,u){const c=wi(u,l);if(wm(c)){const f=c[1];80&c[2]?Gd(f,c,f.template,c[8]):c[5]>0&&Mg(c)}}function Mg(l){for(let f=c_(l);null!==f;f=PE(f))for(let m=10;m<f.length;m++){const _=f[m];if(1024&_[2]){const b=_[1];Gd(b,_,b.template,_[8])}else _[5]>0&&Mg(_)}const c=l[1].components;if(null!==c)for(let f=0;f<c.length;f++){const m=wi(c[f],l);wm(m)&&m[5]>0&&Mg(m)}}function yS(l,u){const c=wi(u,l),f=c[1];(function(l,u){for(let c=u.length;c<l.blueprint.length;c++)u.push(l.blueprint[c])})(f,c),Ud(f,c,c[8])}function T_(l,u){return l[13]?l[14][4]=u:l[13]=u,l[14]=u,u}function Wd(l){for(;l;){l[2]|=64;const u=bg(l);if(Ki(l)&&!u)return l;l=u}return null}function Q0(l,u,c){const f=u[10];f.begin&&f.begin();try{Gd(l,u,l.template,c)}catch(m){throw yD(u,m),m}finally{f.end&&f.end()}}function A_(l){!function(l){for(let u=0;u<l.components.length;u++){const c=l.components[u],f=pg(c),m=f[1];rD(m,f,m.template,c)}}(l[8])}function Og(l,u,c){ta(0),u(l,c)}const mD=(()=>Promise.resolve(null))();function _D(l){return l[7]||(l[7]=[])}function S_(l){return l.cleanup||(l.cleanup=[])}function yD(l,u){const c=l[9],f=c?c.get(x,null):null;f&&f.handleError(u)}function X0(l,u,c,f,m){for(let _=0;_<c.length;){const b=c[_++],E=c[_++],I=u[b],A=l.data[b];null!==A.setInput?A.setInput(I,m,f,E):I[E]=m}}function eb(l,u,c){let f=c?l.styles:null,m=c?l.classes:null,_=0;if(null!==u)for(let b=0;b<u.length;b++){const E=u[b];"number"==typeof E?_=E:1==_?m=$(m,E):2==_&&(f=$(f,E+": "+u[++b]+";"))}c?l.styles=f:l.stylesWithoutHost=f,c?l.classes=m:l.classesWithoutHost=m}const rc=new Tn("INJECTOR",-1);class bD{get(u,c=ca){if(c===ca){const f=new Error(`NullInjectorError: No provider for ${J(u)}!`);throw f.name="NullInjectorError",f}return c}}const qd=new Tn("Set Injector scope."),kg={},wD={};let nb;function CD(){return void 0===nb&&(nb=new bD),nb}function ib(l,u=null,c=null,f){return new CS(l,c,u||CD(),f)}class CS{constructor(u,c,f,m=null){this.parent=f,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];c&&es(c,E=>this.processProvider(E,u,c)),es([u],E=>this.processInjectorType(E,[],_)),this.records.set(rc,ic(void 0,this));const b=this.records.get(qd);this.scope=null!=b?b.value:null,this.source=m||("object"==typeof u?null:J(u))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(u=>u.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(u,c=ca,f=Qe.Default){this.assertNotDestroyed();const m=Et(this),_=sr(void 0);try{if(!(f&Qe.SkipSelf)){let E=this.records.get(u);if(void 0===E){const I=("function"==typeof(l=u)||"object"==typeof l&&l instanceof Tn)&&gr(u);E=I&&this.injectableDefInScope(I)?ic(N_(u),kg):null,this.records.set(u,E)}if(null!=E)return this.hydrate(u,E)}return(f&Qe.Self?CD():this.parent).get(u,c=f&Qe.Optional&&c===ca?null:c)}catch(b){if("NullInjectorError"===b.name){if((b[hl]=b[hl]||[]).unshift(J(u)),m)throw b;return ns(b,u,"R3InjectorError",this.source)}throw b}finally{sr(_),Et(m)}var l}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(u=>this.get(u))}toString(){const u=[];return this.records.forEach((f,m)=>u.push(J(m))),`R3Injector[${u.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(u,c,f){if(!(u=G(u)))return!1;let m=qa(u);const _=null==m&&u.ngModule||void 0,b=void 0===_?u:_,E=-1!==f.indexOf(b);if(void 0!==_&&(m=qa(_)),null==m)return!1;if(null!=m.imports&&!E){let M;f.push(b);try{es(m.imports,k=>{this.processInjectorType(k,c,f)&&(void 0===M&&(M=[]),M.push(k))})}finally{}if(void 0!==M)for(let k=0;k<M.length;k++){const{ngModule:F,providers:j}=M[k];es(j,Z=>this.processProvider(Z,F,j||W))}}this.injectorDefTypes.add(b);const I=Qo(b)||(()=>new b);this.records.set(b,ic(I,kg));const A=m.providers;if(null!=A&&!E){const M=u;es(A,k=>this.processProvider(k,M,A))}return void 0!==_&&void 0!==u.providers}processProvider(u,c,f){let m=Pg(u=G(u))?u:G(u&&u.provide);const _=xD(l=u)?ic(void 0,l.useValue):ic(DD(l),kg);var l;if(Pg(u)||!0!==u.multi)this.records.get(m);else{let b=this.records.get(m);b||(b=ic(void 0,kg,!0),b.factory=()=>To(b.multi),this.records.set(m,b)),m=u,b.multi.push(u)}this.records.set(m,_)}hydrate(u,c){return c.value===kg&&(c.value=wD,c.value=c.factory()),"object"==typeof c.value&&c.value&&null!==(l=c.value)&&"object"==typeof l&&"function"==typeof l.ngOnDestroy&&this.onDestroy.add(c.value),c.value;var l}injectableDefInScope(u){if(!u.providedIn)return!1;const c=G(u.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function N_(l){const u=gr(l),c=null!==u?u.factory:Qo(l);if(null!==c)return c;if(l instanceof Tn)throw new Error(`Token ${J(l)} is missing a \u0275prov definition.`);if(l instanceof Function)return function(l){const u=l.length;if(u>0){const f=ws(u,"?");throw new Error(`Can't resolve all parameters for ${J(l)}: (${f.join(", ")}).`)}const c=function(l){const u=l&&(l[Wi]||l[mo]);if(u){const c=function(l){if(l.hasOwnProperty("name"))return l.name;const u=(""+l).match(/^function\s*([^\s(]+)/);return null===u?"":u[1]}(l);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),u}return null}(l);return null!==c?()=>c.factory(l):()=>new l}(l);throw new Error("unreachable")}function DD(l,u,c){let f;if(Pg(l)){const m=G(l);return Qo(m)||N_(m)}if(xD(l))f=()=>G(l.useValue);else if(function(l){return!(!l||!l.useFactory)}(l))f=()=>l.useFactory(...To(l.deps||[]));else if(function(l){return!(!l||!l.useExisting)}(l))f=()=>en(G(l.useExisting));else{const m=G(l&&(l.useClass||l.provide));if(!function(l){return!!l.deps}(l))return Qo(m)||N_(m);f=()=>new m(...To(l.deps))}return f}function ic(l,u,c=!1){return{factory:l,value:u,multi:c?[]:void 0}}function xD(l){return null!==l&&"object"==typeof l&&bd in l}function Pg(l){return"function"==typeof l}const xS=function(l,u,c){return function(l,u=null,c=null,f){const m=ib(l,u,c,f);return m._resolveInjectorDefTypes(),m}({name:c},u,l,c)};class tn{static create(u,c){return Array.isArray(u)?xS(u,c,""):xS(u.providers,u.parent,u.name||"")}}function WD(l,u){id(pg(l)[1],cn())}function ub(l){let u=function(l){return Object.getPrototypeOf(l.prototype).constructor}(l.type),c=!0;const f=[l];for(;u;){let m;if(Fi(l))m=u.\u0275cmp||u.\u0275dir;else{if(u.\u0275cmp)throw new Error("Directives cannot inherit Components");m=u.\u0275dir}if(m){if(c){f.push(m);const b=l;b.inputs=cb(l.inputs),b.declaredInputs=cb(l.declaredInputs),b.outputs=cb(l.outputs);const E=m.hostBindings;E&&LS(l,E);const I=m.viewQuery,A=m.contentQueries;if(I&&PS(l,I),A&&FS(l,A),ie(l.inputs,m.inputs),ie(l.declaredInputs,m.declaredInputs),ie(l.outputs,m.outputs),Fi(m)&&m.data.animation){const M=l.data;M.animation=(M.animation||[]).concat(m.data.animation)}}const _=m.features;if(_)for(let b=0;b<_.length;b++){const E=_[b];E&&E.ngInherit&&E(l),E===ub&&(c=!1)}}u=Object.getPrototypeOf(u)}!function(l){let u=0,c=null;for(let f=l.length-1;f>=0;f--){const m=l[f];m.hostVars=u+=m.hostVars,m.hostAttrs=Dn(m.hostAttrs,c=Dn(c,m.hostAttrs))}}(f)}function cb(l){return l===Kt?{}:l===W?[]:l}function PS(l,u){const c=l.viewQuery;l.viewQuery=c?(f,m)=>{u(f,m),c(f,m)}:u}function FS(l,u){const c=l.contentQueries;l.contentQueries=c?(f,m,_)=>{u(f,m,_),c(f,m,_)}:u}function LS(l,u){const c=l.hostBindings;l.hostBindings=c?(f,m)=>{u(f,m),c(f,m)}:u}tn.THROW_IF_NOT_FOUND=ca,tn.NULL=new bD,tn.\u0275prov=mt({token:tn,providedIn:"any",factory:()=>en(rc)}),tn.__NG_ELEMENT_ID__=-1;let R_=null;function Kd(){if(!R_){const l=zt.Symbol;if(l&&l.iterator)R_=l.iterator;else{const u=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<u.length;++c){const f=u[c];"entries"!==f&&"size"!==f&&Map.prototype[f]===Map.prototype.entries&&(R_=f)}}}return R_}class to{constructor(u){this.wrapped=u}static wrap(u){return new to(u)}static unwrap(u){return to.isWrapped(u)?u.wrapped:u}static isWrapped(u){return u instanceof to}}function Bg(l){return!!db(l)&&(Array.isArray(l)||!(l instanceof Map)&&Kd()in l)}function db(l){return null!==l&&("function"==typeof l||"object"==typeof l)}function ko(l,u,c){return l[u]=c}function ai(l,u,c){return!Object.is(l[u],c)&&(l[u]=c,!0)}function oc(l,u,c,f){const m=ai(l,u,c);return ai(l,u+1,f)||m}function hb(l,u,c,f){const m=Ae();return ai(m,Eo(),u)&&(Rt(),function(l,u,c,f,m,_){const b=bi(l,u);I_(u[11],b,_,l.value,c,f,m)}(jn(),m,l,u,c,f)),hb}function Jd(l,u,c,f){return ai(l,Eo(),c)?u+se(c)+f:gt}function th(l,u,c,f,m,_,b,E,I,A){const k=function(l,u,c,f,m,_){const b=oc(l,u,c,f);return oc(l,u+2,m,_)||b}(l,Qi(),c,m,b,I);return Ci(4),k?u+se(c)+f+se(m)+_+se(b)+E+se(I)+A:gt}function r1(l,u,c,f,m,_,b,E){const I=Ae(),A=Rt(),M=l+20,k=A.firstCreatePass?function(l,u,c,f,m,_,b,E,I){const A=u.consts,M=Ia(u,l,4,b||null,_s(A,E));q0(u,c,M,_s(A,I)),id(u,M);const k=M.tViews=Tg(2,M,f,m,_,u.directiveRegistry,u.pipeRegistry,null,u.schemas,A);return null!==u.queries&&(u.queries.template(u,M),k.queries=u.queries.embeddedTView(M)),M}(M,A,I,u,c,f,m,_,b):A.data[M];ei(k,!1);const F=I[11].createComment("");wg(A,I,F,k),lr(F,I),T_(I,I[M]=dD(F,I,F,k)),En(k)&&G0(A,I,k),null!=b&&Ig(I,k,E)}function i1(l){return Co(ft.lFrame.contextLView,20+l)}function Gg(l,u=Qe.Default){const c=Ae();return null===c?en(l,u):oa(cn(),c,G(l),u)}function _1(){throw new Error("invalid")}function _b(l,u,c){const f=Ae();return ai(f,Eo(),u)&&Gi(Rt(),jn(),f,l,u,f[11],c,!1),_b}function yb(l,u,c,f,m){const b=m?"class":"style";X0(l,c,u.inputs[b],b,f)}function vr(l,u,c,f){const m=Ae(),_=Rt(),b=20+l,E=m[11],I=m[b]=w0(E,u,ft.lFrame.currentNamespace),A=_.firstCreatePass?function(l,u,c,f,m,_,b){const E=u.consts,A=Ia(u,l,2,m,_s(E,_));return q0(u,c,A,_s(E,b)),null!==A.attrs&&eb(A,A.attrs,!1),null!==A.mergedAttrs&&eb(A,A.mergedAttrs,!0),null!==u.queries&&u.queries.elementStart(u,A),A}(b,_,m,0,u,c,f):_.data[b];ei(A,!0);const M=A.mergedAttrs;null!==M&&$f(E,I,M);const k=A.classes;null!==k&&T0(E,I,k);const F=A.styles;null!==F&&$E(E,I,F),64!=(64&A.flags)&&wg(_,m,I,A),0===ft.lFrame.elementDepthCount&&lr(I,m),ft.lFrame.elementDepthCount++,En(A)&&(G0(_,m,A),uS(_,A,m)),null!==f&&Ig(m,A)}function ac(){let l=cn();Xc()?ed():(l=l.parent,ei(l,!1));const u=l;ft.lFrame.elementDepthCount--;const c=Rt();c.firstCreatePass&&(id(c,l),mu(l)&&c.queries.elementEnd(l)),null!=u.classesWithoutHost&&function(l){return 0!=(16&l.flags)}(u)&&yb(c,u,Ae(),u.classesWithoutHost,!0),null!=u.stylesWithoutHost&&function(l){return 0!=(32&l.flags)}(u)&&yb(c,u,Ae(),u.stylesWithoutHost,!1)}function jg(l,u,c,f){vr(l,u,c,f),ac()}function mn(l,u,c){const f=Ae(),m=Rt(),_=l+20,b=m.firstCreatePass?function(l,u,c,f,m){const _=u.consts,b=_s(_,f),E=Ia(u,l,8,"ng-container",b);return null!==b&&eb(E,b,!0),q0(u,c,E,_s(_,m)),null!==u.queries&&u.queries.elementStart(u,E),E}(_,m,f,u,c):m.data[_];ei(b,!0);const E=f[_]=f[11].createComment("");wg(m,f,E,b),lr(E,f),En(b)&&(G0(m,f,b),uS(m,b,f)),null!=c&&Ig(f,b)}function Po(){let l=cn();const u=Rt();Xc()?ed():(l=l.parent,ei(l,!1)),u.firstCreatePass&&(id(u,l),mu(l)&&u.queries.elementEnd(l))}function y1(){return Ae()}function P_(l){return!!l&&"function"==typeof l.then}function v1(l){return!!l&&"function"==typeof l.subscribe}const Rl=v1;function bb(l,u,c,f){const m=Ae(),_=Rt(),b=cn();return function(l,u,c,f,m,_,b,E){const I=En(f),M=l.firstCreatePass&&S_(l),k=u[8],F=_D(u);let j=!0;if(3&f.type||E){const ee=bi(f,u),Re=E?E(ee):ee,De=F.length,Je=E?dt=>E(gn(dt[f.index])):f.index;if(un(c)){let dt=null;if(!E&&I&&(dt=function(l,u,c,f){const m=l.cleanup;if(null!=m)for(let _=0;_<m.length-1;_+=2){const b=m[_];if(b===c&&m[_+1]===f){const E=u[7],I=m[_+2];return E.length>I?E[I]:null}"string"==typeof b&&(_+=2)}return null}(l,u,m,f.index)),null!==dt)(dt.__ngLastListenerFn__||dt).__ngNextListenerFn__=_,dt.__ngLastListenerFn__=_,j=!1;else{_=Cb(f,u,k,_,!1);const Lt=c.listen(Re,m,_);F.push(_,Lt),M&&M.push(m,Je,De,De+1)}}else _=Cb(f,u,k,_,!0),Re.addEventListener(m,_,b),F.push(_),M&&M.push(m,Je,De,b)}else _=Cb(f,u,k,_,!1);const Z=f.outputs;let de;if(j&&null!==Z&&(de=Z[m])){const ee=de.length;if(ee)for(let Re=0;Re<ee;Re+=2){const Tr=u[de[Re]][de[Re+1]].subscribe(_),ds=F.length;F.push(_,Tr),M&&M.push(m,f.index,ds,-(ds+1))}}}(_,m,m[11],b,l,u,!!c,f),bb}function w1(l,u,c,f){try{return!1!==c(f)}catch(m){return yD(l,m),!1}}function Cb(l,u,c,f,m){return function _(b){if(b===Function)return f;const E=2&l.flags?wi(l.index,u):u;0==(32&u[2])&&Wd(E);let I=w1(u,0,f,b),A=_.__ngNextListenerFn__;for(;A;)I=w1(u,0,A,b)&&I,A=A.__ngNextListenerFn__;return m&&!1===I&&(b.preventDefault(),b.returnValue=!1),I}}function C1(l=1){return function(l){return(ft.lFrame.contextLView=function(l,u){for(;l>0;)u=u[15],l--;return u}(l,ft.lFrame.contextLView))[8]}(l)}function oF(l,u){let c=null;const f=function(l){const u=l.attrs;if(null!=u){const c=u.indexOf(5);if(0==(1&c))return u[c+1]}return null}(l);for(let m=0;m<u.length;m++){const _=u[m];if("*"!==_){if(null===f?qE(l,_,!0):RP(f,_))return m}else c=m}return c}function E1(l){const u=Ae()[16][6];if(!u.projection){const f=u.projection=ws(l?l.length:1,null),m=f.slice();let _=u.child;for(;null!==_;){const b=l?oF(_,l):0;null!==b&&(m[b]?m[b].projectionNext=_:f[b]=_,m[b]=_),_=_.next}}}function lh(l,u=0,c){const f=Ae(),m=Rt(),_=Ia(m,20+l,16,null,c||null);null===_.projection&&(_.projection=u),ed(),64!=(64&_.flags)&&function(l,u,c){Nl(u[11],0,u,c,VE(l,c,u),m_(c.parent||u[6],c,u))}(m,f,_)}function Jn(l,u,c){return F_(l,"",u,"",c),Jn}function F_(l,u,c,f,m){const _=Ae(),b=Jd(_,u,c,f);return b!==gt&&Gi(Rt(),jn(),_,l,b,_[11],m,!1),F_}function T1(l,u,c,f,m){const _=l[c+1],b=null===u;let E=f?eo(_):wa(_),I=!1;for(;0!==E&&(!1===I||b);){const M=l[E+1];gN(l[E],u)&&(I=!0,l[E+1]=f?b_(M):O0(M)),E=f?eo(M):wa(M)}I&&(l[c+1]=f?O0(_):b_(_))}function gN(l,u){return null===l||null==u||(Array.isArray(l)?l[1]:l)===u||!(!Array.isArray(l)||"string"!=typeof u)&&cl(l,u)>=0}const Nr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ib(l){return l.substring(Nr.key,Nr.keyEnd)}function A1(l,u){const c=Nr.textEnd;return c===u?-1:(u=Nr.keyEnd=function(l,u,c){for(;u<c&&l.charCodeAt(u)>32;)u++;return u}(l,Nr.key=u,c),lc(l,u,c))}function lc(l,u,c){for(;u<c&&l.charCodeAt(u)<=32;)u++;return u}function ch(l,u,c){return ro(l,u,c,!1),ch}function M1(l,u){return ro(l,u,null,!0),M1}function R1(l){Wr(Fn,no,l,!0)}function no(l,u){for(let c=function(l){return function(l){Nr.key=0,Nr.keyEnd=0,Nr.value=0,Nr.valueEnd=0,Nr.textEnd=l.length}(l),A1(l,lc(l,0,Nr.textEnd))}(u);c>=0;c=A1(u,c))Fn(l,Ib(u),!0)}function ro(l,u,c,f){const m=Ae(),_=Rt(),b=Ci(2);_.firstUpdatePass&&Sb(_,l,b,f),u!==gt&&ai(m,b,u)&&uc(_,_.data[Ur()],m,m[11],l,m[b+1]=function(l,u){return null==l||("string"==typeof u?l+=u:"object"==typeof l&&(l=J(jr(l)))),l}(u,c),f,b)}function Wr(l,u,c,f){const m=Rt(),_=Ci(2);m.firstUpdatePass&&Sb(m,null,_,f);const b=Ae();if(c!==gt&&ai(b,_,c)){const E=m.data[Ur()];if($g(E,f)&&!vN(m,_)){let I=f?E.classesWithoutHost:E.stylesWithoutHost;null!==I&&(c=$(I,c||"")),yb(m,E,b,c,f)}else!function(l,u,c,f,m,_,b,E){m===gt&&(m=W);let I=0,A=0,M=0<m.length?m[0]:null,k=0<_.length?_[0]:null;for(;null!==M||null!==k;){const F=I<m.length?m[I+1]:void 0,j=A<_.length?_[A+1]:void 0;let de,Z=null;M===k?(I+=2,A+=2,F!==j&&(Z=k,de=j)):null===k||null!==M&&M<k?(I+=2,Z=M):(A+=2,Z=k,de=j),null!==Z&&uc(l,u,c,f,Z,de,b,E),M=I<m.length?m[I]:null,k=A<_.length?_[A]:null}}(m,E,b,b[11],b[_+1],b[_+1]=function(l,u,c){if(null==c||""===c)return W;const f=[],m=jr(c);if(Array.isArray(m))for(let _=0;_<m.length;_++)l(f,m[_],!0);else if("object"==typeof m)for(const _ in m)m.hasOwnProperty(_)&&l(f,_,m[_]);else"string"==typeof m&&u(f,m);return f}(l,u,c),f,_)}}function vN(l,u){return u>=l.expandoStartIndex}function Sb(l,u,c,f){const m=l.data;if(null===m[c+1]){const _=m[Ur()],b=vN(l,c);$g(_,f)&&null===u&&!b&&(u=!1),u=function(l,u,c,f){const m=function(l){const u=ft.lFrame.currentDirectiveIndex;return-1===u?null:l[u]}(l);let _=f?u.residualClasses:u.residualStyles;if(null===m)0===(f?u.classBindings:u.styleBindings)&&(c=kl(c=U_(null,l,u,c,f),u.attrs,f),_=null);else{const b=u.directiveStylingLast;if(-1===b||l[b]!==m)if(c=U_(m,l,u,c,f),null===_){let I=function(l,u,c){const f=c?u.classBindings:u.styleBindings;if(0!==wa(f))return l[eo(f)]}(l,u,f);void 0!==I&&Array.isArray(I)&&(I=U_(null,l,u,I[1],f),I=kl(I,u.attrs,f),function(l,u,c,f){l[eo(c?u.classBindings:u.styleBindings)]=f}(l,u,f,I))}else _=function(l,u,c){let f;const m=u.directiveEnd;for(let _=1+u.directiveStylingLast;_<m;_++)f=kl(f,l[_].hostAttrs,c);return kl(f,u.attrs,c)}(l,u,f)}return void 0!==_&&(f?u.residualClasses=_:u.residualStyles=_),c}(m,_,u,f),function(l,u,c,f,m,_){let b=_?u.classBindings:u.styleBindings,E=eo(b),I=wa(b);l[f]=c;let M,A=!1;if(Array.isArray(c)){const k=c;M=k[1],(null===M||cl(k,M)>0)&&(A=!0)}else M=c;if(m)if(0!==I){const F=eo(l[E+1]);l[f+1]=ur(F,E),0!==F&&(l[F+1]=Ld(l[F+1],f)),l[E+1]=function(l,u){return 131071&l|u<<17}(l[E+1],f)}else l[f+1]=ur(E,0),0!==E&&(l[E+1]=Ld(l[E+1],f)),E=f;else l[f+1]=ur(I,0),0===E?E=f:l[I+1]=Ld(l[I+1],f),I=f;A&&(l[f+1]=O0(l[f+1])),T1(l,M,f,!0),T1(l,M,f,!1),function(l,u,c,f,m){const _=m?l.residualClasses:l.residualStyles;null!=_&&"string"==typeof u&&cl(_,u)>=0&&(c[f+1]=b_(c[f+1]))}(u,M,l,f,_),b=ur(E,I),_?u.classBindings=b:u.styleBindings=b}(m,_,u,c,b,f)}}function U_(l,u,c,f,m){let _=null;const b=c.directiveEnd;let E=c.directiveStylingLast;for(-1===E?E=c.directiveStart:E++;E<b&&(_=u[E],f=kl(f,_.hostAttrs,m),_!==l);)E++;return null!==l&&(c.directiveStylingLast=E),f}function kl(l,u,c){const f=c?1:2;let m=-1;if(null!==u)for(let _=0;_<u.length;_++){const b=u[_];"number"==typeof b?m=b:m===f&&(Array.isArray(l)||(l=void 0===l?[]:["",l]),Fn(l,b,!!c||u[++_]))}return void 0===l?null:l}function uc(l,u,c,f,m,_,b,E){if(!(3&u.type))return;const I=l.data,A=I[E+1];G_(function(l){return 1==(1&l)}(A)?Nb(I,u,c,m,wa(A),b):void 0)||(G_(_)||function(l){return 2==(2&l)}(A)&&(_=Nb(I,null,c,m,E,b)),function(l,u,c,f,m){const _=un(l);if(u)m?_?l.addClass(c,f):c.classList.add(f):_?l.removeClass(c,f):c.classList.remove(f);else{let b=-1===f.indexOf("-")?void 0:Cs.DashCase;if(null==m)_?l.removeStyle(c,f,b):c.style.removeProperty(f);else{const E="string"==typeof m&&m.endsWith("!important");E&&(m=m.slice(0,-10),b|=Cs.Important),_?l.setStyle(c,f,m,b):c.style.setProperty(f,m,E?"important":"")}}}(f,b,Xa(Ur(),c),m,_))}function Nb(l,u,c,f,m,_){const b=null===u;let E;for(;m>0;){const I=l[m],A=Array.isArray(I),M=A?I[1]:I,k=null===M;let F=c[m+1];F===gt&&(F=k?W:void 0);let j=k?$n(F,f):M===f?F:void 0;if(A&&!G_(j)&&(j=$n(I,f)),G_(j)&&(E=j,b))return E;const Z=l[m+1];m=b?eo(Z):wa(Z)}if(null!==u){let I=_?u.residualClasses:u.residualStyles;null!=I&&(E=$n(I,f))}return E}function G_(l){return void 0!==l}function $g(l,u){return 0!=(l.flags&(u?16:32))}function j_(l,u=""){const c=Ae(),f=Rt(),m=l+20,_=f.firstCreatePass?Ia(f,m,1,u,null):f.data[m],b=c[m]=d_(c[11],u);wg(f,c,b,_),ei(_,!1)}function Mb(l){return H_("",l,""),Mb}function H_(l,u,c){const f=Ae(),m=Jd(f,l,u,c);return m!==gt&&function(l,u,c){const f=Xa(u,l);FE(l[11],f,c)}(f,Ur(),m),H_}function G1(l,u,c,f,m,_,b,E,I){Wr(Fn,no,th(Ae(),l,u,c,f,m,_,b,E,I),!0)}function cc(l,u,c){const f=Ae();return ai(f,Eo(),u)&&Gi(Rt(),jn(),f,l,u,f[11],c,!0),cc}const Fl=void 0;var z1=["en",[["a","p"],["AM","PM"],Fl],[["AM","PM"],Fl,Fl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fl,"{1} 'at' {0}",Fl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(l){const u=Math.floor(Math.abs(l)),c=l.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Wg={};function Bb(l){const u=function(l){return l.toLowerCase().replace(/_/g,"-")}(l);let c=ON(u);if(c)return c;const f=u.split("-")[0];if(c=ON(f),c)return c;if("en"===f)return z1;throw new Error(`Missing locale data for the locale "${l}".`)}function RN(l){return Bb(l)[ct.PluralCase]}function ON(l){return l in Wg||(Wg[l]=zt.ng&&zt.ng.common&&zt.ng.common.locales&&zt.ng.common.locales[l]),Wg[l]}var ct=(()=>((ct=ct||{})[ct.LocaleId=0]="LocaleId",ct[ct.DayPeriodsFormat=1]="DayPeriodsFormat",ct[ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",ct[ct.DaysFormat=3]="DaysFormat",ct[ct.DaysStandalone=4]="DaysStandalone",ct[ct.MonthsFormat=5]="MonthsFormat",ct[ct.MonthsStandalone=6]="MonthsStandalone",ct[ct.Eras=7]="Eras",ct[ct.FirstDayOfWeek=8]="FirstDayOfWeek",ct[ct.WeekendRange=9]="WeekendRange",ct[ct.DateFormat=10]="DateFormat",ct[ct.TimeFormat=11]="TimeFormat",ct[ct.DateTimeFormat=12]="DateTimeFormat",ct[ct.NumberSymbols=13]="NumberSymbols",ct[ct.NumberFormats=14]="NumberFormats",ct[ct.CurrencyCode=15]="CurrencyCode",ct[ct.CurrencySymbol=16]="CurrencySymbol",ct[ct.CurrencyName=17]="CurrencyName",ct[ct.Currencies=18]="Currencies",ct[ct.Directionality=19]="Directionality",ct[ct.PluralCase=20]="PluralCase",ct[ct.ExtraData=21]="ExtraData",ct))();const pF=["zero","one","two","few","many"],Ub="en-US",Gb={marker:"element"},jb={marker:"ICU"};var Xn=(()=>((Xn=Xn||{})[Xn.SHIFT=2]="SHIFT",Xn[Xn.APPEND_EAGERLY=1]="APPEND_EAGERLY",Xn[Xn.COMMENT=2]="COMMENT",Xn))();let kN=Ub;function Z1(l){(function(l,u){null==l&&ut(u,l,null,"!=")})(l,"Expected localeId to be defined"),"string"==typeof l&&(kN=l.toLowerCase().replace(/_/g,"-"))}function PN(l,u,c){const f=u.insertBeforeIndex,m=Array.isArray(f)?f[0]:f;return null===m?__(l,0,c):gn(c[m])}function FN(l,u,c,f,m){const _=u.insertBeforeIndex;if(Array.isArray(_)){let b=f,E=null;if(3&u.type||(E=b,b=m),null!==b&&0==(2&u.flags))for(let I=1;I<_.length;I++)Sl(l,b,c[_[I]],E,!1)}}function LN(l,u){if(l.push(u),l.length>1)for(let c=l.length-2;c>=0;c--){const f=l[c];Hb(f)||bF(f,u)&&null===io(f)&&Sn(f,u.index)}}function Hb(l){return!(64&l.type)}function bF(l,u){return Hb(u)||l.index>u.index}function io(l){const u=l.insertBeforeIndex;return Array.isArray(u)?u[0]:u}function Sn(l,u){const c=l.insertBeforeIndex;Array.isArray(c)?c[0]=u:(jE(PN,FN),l.insertBeforeIndex=u)}function dc(l,u){const c=l.data[u];return null===c||"string"==typeof c?null:c.hasOwnProperty("currentCaseLViewIndex")?c:c.value}function VN(l,u,c){const f=U0(l,c,64,null,null);return LN(u,f),f}function W_(l,u){const c=u[l.currentCaseLViewIndex];return null===c?c:c<0?~c:c}function q_(l){return l>>>17}function BN(l){return(131070&l)>>>1}let gh=0,qg=0;function hc(l,u,c,f){const m=c[11];let b,_=null;for(let E=0;E<u.length;E++){const I=u[E];if("string"==typeof I){const A=u[++E];null===c[A]&&(c[A]=d_(m,I))}else if("number"==typeof I)switch(1&I){case 0:const A=q_(I);let M,k;if(null===_&&(_=A,b=g_(m,f)),A===_?(M=f,k=b):(M=null,k=gn(c[A])),null!==k){const de=BN(I);Sl(m,k,c[de],M,!1);const Re=dc(l,de);if(null!==Re&&"object"==typeof Re){const De=W_(Re,c);null!==De&&hc(l,Re.create[De],c,c[Re.anchorIdx])}}break;case 1:const j=u[++E],Z=u[++E];I_(m,Xa(I>>>1,c),null,null,j,Z,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${I}"`)}else switch(I){case jb:const A=u[++E],M=u[++E];null===c[M]&&lr(c[M]=FA(m,A),c);break;case Gb:const k=u[++E],F=u[++E];null===c[F]&&lr(c[F]=w0(m,k,null),c)}}}function Ll(l,u,c,f,m){for(let _=0;_<c.length;_++){const b=c[_],E=c[++_];if(b&m){let I="";for(let A=_+1;A<=_+E;A++){const M=c[A];if("string"==typeof M)I+=M;else if("number"==typeof M)if(M<0)I+=se(u[f-M]);else{const k=M>>>2;switch(3&M){case 1:const F=c[++A],j=c[++A],Z=l.data[k];"string"==typeof Z?I_(u[11],u[k],null,Z,F,I,j):Gi(l,Z,u,F,I,u[11],j,!1);break;case 0:const de=u[k];null!==de&&FE(u[11],de,I);break;case 2:z_(l,dc(l,k),u,I);break;case 3:ph(l,dc(l,k),f,u)}}}}else{const I=c[_+1];if(I>0&&3==(3&I)){const M=dc(l,I>>>2);u[M.currentCaseLViewIndex]<0&&ph(l,M,f,u)}}_+=E}}function ph(l,u,c,f){let m=f[u.currentCaseLViewIndex];if(null!==m){let _=gh;m<0&&(m=f[u.currentCaseLViewIndex]=~m,_=-1),Ll(l,f,u.update[m],c,_)}}function z_(l,u,c,f){const m=function(l,u){let c=l.cases.indexOf(u);if(-1===c)switch(l.type){case 1:{const f=function(l,u){const c=RN(u)(parseInt(l,10)),f=pF[c];return void 0!==f?f:"other"}(u,kN);c=l.cases.indexOf(f),-1===c&&"other"!==f&&(c=l.cases.indexOf("other"));break}case 0:c=l.cases.indexOf("other")}return-1===c?null:c}(u,f);if(W_(u,c)!==m&&(Wb(l,u,c),c[u.currentCaseLViewIndex]=null===m?null:~m,null!==m)){const b=c[u.anchorIdx];b&&hc(l,u.create[m],c,b)}}function Wb(l,u,c){let f=W_(u,c);if(null!==f){const m=u.remove[f];for(let _=0;_<m.length;_++){const b=m[_];if(b>0){const E=Xa(b,c);null!==E&&I0(c[11],E)}else Wb(l,dc(l,~b),c)}}}function fc(){const l=[];let c,f,u=-1;function _(E,I){u=0;const A=W_(E,I);f=null!==A?E.remove[A]:W}function b(){if(u<f.length){const E=f[u++];return E>0?c[E]:(l.push(u,f),_(c[1].data[~E],c),b())}return 0===l.length?null:(f=l.pop(),u=l.pop(),b())}return function(E,I){for(c=I;l.length;)l.pop();return _(E.value,I),b}}const qb=/\ufffd(\d+):?\d*\ufffd/gi,CF=/\ufffd(\d+)\ufffd/,WN=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,EF=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,DF=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,xF=/\uE500/g;function qN(l,u,c,f,m,_,b){const E=Bd(l,f,1,null);let I=E<<Xn.SHIFT,A=ea();u===A&&(A=null),null===A&&(I|=Xn.APPEND_EAGERLY),b&&(I|=Xn.COMMENT,function(l){void 0===v0&&(v0=l())}(fc)),m.push(I,null===_?"":_);const M=U0(l,E,b?32:1,null===_?"":_,null);LN(c,M);const k=M.index;return ei(M,!1),null!==A&&u!==A&&function(l,u){let c=l.insertBeforeIndex;null===c?(jE(PN,FN),c=l.insertBeforeIndex=[null,u]):(function(l,u,c){l!=u&&ut(c,l,u,"==")}(Array.isArray(c),!0,"Expecting array here"),c.push(u))}(A,k),M}function Q1(l,u,c,f,m,_,b){const E=b.match(qb),I=qN(l,u,c,_,f,E?null:b,!1);E&&gc(m,b,I.index,null,0,null)}function gc(l,u,c,f,m,_){const b=l.length,E=b+1;l.push(null,null);const I=b+2,A=u.split(qb);let M=0;for(let k=0;k<A.length;k++){const F=A[k];if(1&k){const j=m+parseInt(F,10);l.push(-1-j),M|=Yb(j)}else""!==F&&l.push(F)}return l.push(c<<2|(f?1:0)),f&&l.push(f,_),l[b]=M,l[E]=l.length-I,M}function Yb(l){return 1<<Math.min(l,31)}function X1(l){let u,_,c="",f=0,m=!1;for(;null!==(u=EF.exec(l));)m?u[0]===`\ufffd/*${_}\ufffd`&&(f=u.index,m=!1):(c+=l.substring(f,u.index+u[0].length),_=u[1],m=!0);return c+=l.substr(f),c}function zN(l,u,c,f,m,_){let b=0;const E={type:m.type,currentCaseLViewIndex:Bd(l,u,1,null),anchorIdx:_,cases:[],create:[],remove:[],update:[]};(function(l,u,c){l.push(Yb(u.mainBinding),2,-1-u.mainBinding,c<<2|2)})(c,m,_),function(l,u,c){const f=l.data[u];null===f?l.data[u]=c:f.value=c}(l,_,E);const I=m.values;for(let A=0;A<I.length;A++){const M=I[A],k=[];for(let F=0;F<M.length;F++){const j=M[F];if("string"!=typeof j){const Z=k.push(j)-1;M[F]=`\x3c!--\ufffd${Z}\ufffd--\x3e`}}b=pc(l,E,u,c,f,m.cases[A],M.join(""),k)|b}b&&function(l,u,c){l.push(u,1,c<<2|3)}(c,b,_)}function ex(l){const u=[],c=[];let f=1,m=0;const _=X_(l=l.replace(WN,function(b,E,I){return f="select"===I?0:1,m=parseInt(E.substr(1),10),""}));for(let b=0;b<_.length;){let E=_[b++].trim();1===f&&(E=E.replace(/\s*(?:=)?(\w+)\s*/,"$1")),E.length&&u.push(E);const I=X_(_[b++]);u.length>c.length&&c.push(I)}return{type:f,mainBinding:m,cases:u,values:c}}function X_(l){if(!l)return[];let u=0;const c=[],f=[],m=/[{}]/g;let _;for(m.lastIndex=0;_=m.exec(l);){const E=_.index;if("}"==_[0]){if(c.pop(),0==c.length){const I=l.substring(u,E);WN.test(I)?f.push(ex(I)):f.push(I),u=E+1}}else{if(0==c.length){const I=l.substring(u,E);f.push(I),u=E+1}c.push("{")}}const b=l.substring(u);return f.push(b),f}function pc(l,u,c,f,m,_,b,E){const I=[],A=[],M=[];u.cases.push(_),u.create.push(I),u.remove.push(A),u.update.push(M);const F=Hu(zc()).getInertBodyElement(b),j=cg(F)||F;return j?ey(l,u,c,f,I,A,M,j,m,E,0):0}function ey(l,u,c,f,m,_,b,E,I,A,M){let k=0,F=E.firstChild;for(;F;){const j=Bd(l,c,1,null);switch(F.nodeType){case Node.ELEMENT_NODE:const Z=F,de=Z.tagName.toLowerCase();if(bl.hasOwnProperty(de)){ty(m,Gb,de,I,j),l.data[j]=de;const Je=Z.attributes;for(let dt=0;dt<Je.length;dt++){const Lt=Je.item(dt),Tr=Lt.name.toLowerCase();Lt.value.match(qb)?lg.hasOwnProperty(Tr)&&gc(b,Lt.value,j,Lt.name,0,wl[Tr]?vl:ya[Tr]?Ad:null):KN(m,j,Lt)}k=ey(l,u,c,f,m,_,b,F,j,A,M+1)|k,tx(_,j,M)}break;case Node.TEXT_NODE:const ee=F.textContent||"",Re=ee.match(qb);ty(m,null,Re?"":ee,I,j),tx(_,j,M),Re&&(k=gc(b,ee,j,null,0,null)|k);break;case Node.COMMENT_NODE:const De=CF.exec(F.textContent||"");if(De){const dt=A[parseInt(De[1],10)];ty(m,jb,"",I,j),zN(l,c,f,I,dt,j),AF(_,j,M)}}F=F.nextSibling}return k}function tx(l,u,c){0===c&&l.push(u)}function AF(l,u,c){0===c&&(l.push(~u),l.push(u))}function ty(l,u,c,f,m){null!==u&&l.push(u),l.push(c,m,function(l,u,c){return 0|u<<17|c<<1}(0,f,m))}function KN(l,u,c){l.push(u<<1|1,c.name,c.value)}function zb(l,u,c=-1){const f=Rt(),m=Ae(),_=20+l,b=_s(f.consts,u),E=ea();f.firstCreatePass&&function(l,u,c,f,m,_){const b=ea(),E=[],I=[],A=[[]],M=function(l){return l.replace(xF," ")}(m=function(l,u){if(function(l){return-1===l}(u))return X1(l);{const c=l.indexOf(`:${u}\ufffd`)+2+u.toString().length,f=l.search(new RegExp(`\ufffd\\/\\*\\d+:${u}\ufffd`));return X1(l.substring(c,f))}}(m,_)).split(DF);for(let k=0;k<M.length;k++){let F=M[k];if(0==(1&k)){const j=X_(F);for(let Z=0;Z<j.length;Z++){let de=j[Z];if(0==(1&Z)){const ee=de;""!==ee&&Q1(l,b,A[0],E,I,c,ee)}else{const ee=de;if("object"!=typeof ee)throw new Error(`Unable to parse ICU expression in "${m}" message.`);zN(l,c,I,u,ee,qN(l,b,A[0],c,E,"",!0).index)}}}else{const j=47===F.charCodeAt(0),de=(F.charCodeAt(j?1:0),20+Number.parseInt(F.substring(j?2:1)));if(j)A.shift(),ei(ea(),!1);else{const ee=VN(l,A[0],de);A.unshift([]),ei(ee,!0)}}}l.data[f]={create:E,update:I}}(f,null===E?0:E.index,m,_,b,c);const I=f.data[_],M=BE(f,E===m[6]?null:E,m);(function(l,u,c,f){const m=l[11];for(let _=0;_<u.length;_++){const b=u[_++],E=u[_],I=(b&Xn.COMMENT)===Xn.COMMENT,A=(b&Xn.APPEND_EAGERLY)===Xn.APPEND_EAGERLY,M=b>>>Xn.SHIFT;let k=l[M];null===k&&(k=l[M]=I?m.createComment(E):d_(m,E)),A&&null!==c&&Sl(m,c,k,f,!1)}})(m,I.create,M,E&&8&E.type?m[E.index]:null),nd(!0)}function ry(l,u,c){zb(l,u,c),nd(!1)}function Zb(l){return function(l){l&&(gh|=1<<Math.min(qg,31)),qg++}(ai(Ae(),Eo(),l)),Zb}function lx(l){!function(l,u,c){if(qg>0){const f=l.data[c];Ll(l,u,Array.isArray(f)?f:f.update,Qi()-qg-1,gh)}gh=0,qg=0}(Rt(),Ae(),l+20)}function ux(l,u,c,f,m){if(l=G(l),Array.isArray(l))for(let _=0;_<l.length;_++)ux(l[_],u,c,f,m);else{const _=Rt(),b=Ae();let E=Pg(l)?l:G(l.provide),I=DD(l);const A=cn(),M=1048575&A.providerIndexes,k=A.directiveStart,F=A.providerIndexes>>20;if(Pg(l)||!l.multi){const j=new Cu(I,m,Gg),Z=sy(E,u,m?M:M+F,k);-1===Z?(Yt(Tu(A,b),_,E),iy(_,l,u.length),u.push(E),A.directiveStart++,A.directiveEnd++,m&&(A.providerIndexes+=1048576),c.push(j),b.push(j)):(c[Z]=j,b[Z]=j)}else{const j=sy(E,u,M+F,k),Z=sy(E,u,M,M+F),de=j>=0&&c[j],ee=Z>=0&&c[Z];if(m&&!ee||!m&&!de){Yt(Tu(A,b),_,E);const Re=function(l,u,c,f,m){const _=new Cu(l,c,Gg);return _.multi=[],_.index=u,_.componentProviders=0,cx(_,m,f&&!c),_}(m?hx:dx,c.length,m,f,I);!m&&ee&&(c[Z].providerFactory=Re),iy(_,l,u.length,0),u.push(E),A.directiveStart++,A.directiveEnd++,m&&(A.providerIndexes+=1048576),c.push(Re),b.push(Re)}else iy(_,l,j>-1?j:Z,cx(c[m?Z:j],I,!m&&f));!m&&f&&ee&&c[Z].componentProviders++}}}function iy(l,u,c,f){const m=Pg(u);if(m||function(l){return!!l.useClass}(u)){const b=(u.useClass||u).prototype.ngOnDestroy;if(b){const E=l.destroyHooks||(l.destroyHooks=[]);if(!m&&u.multi){const I=E.indexOf(c);-1===I?E.push(c,[f,b]):E[I+1].push(f,b)}else E.push(c,b)}}}function cx(l,u,c){return c&&l.componentProviders++,l.multi.push(u)-1}function sy(l,u,c,f){for(let m=c;m<f;m++)if(u[m]===l)return m;return-1}function dx(l,u,c,f){return oy(this.multi,[])}function hx(l,u,c,f){const m=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=In(c,c[1],this.providerFactory.index,f);_=E.slice(0,b),oy(m,_);for(let I=b;I<E.length;I++)_.push(E[I])}else _=[],oy(m,_);return _}function oy(l,u){for(let c=0;c<l.length;c++)u.push((0,l[c])());return u}function Qb(l,u=[]){return c=>{c.providersResolver=(f,m)=>function(l,u,c){const f=Rt();if(f.firstCreatePass){const m=Fi(l);ux(c,f.data,f.blueprint,m,!0),ux(u,f.data,f.blueprint,m,!1)}}(f,m?m(l):l,u)}}class px{}const Jb="ngComponent";class nM{resolveComponentFactory(u){throw function(l){const u=Error(`No component factory found for ${J(l)}. Did you add it to @NgModule.entryComponents?`);return u[Jb]=l,u}(u)}}class mc{}function Xb(...l){}function _c(l,u){return new Aa(bi(l,u))}mc.NULL=new nM;const sM=function(){return _c(cn(),Ae())};let Aa=(()=>{class l{constructor(c){this.nativeElement=c}}return l.__NG_ELEMENT_ID__=sM,l})();function ew(l){return l instanceof Aa?l.nativeElement:l}class tw{}let mx=(()=>{class l{}return l.__NG_ELEMENT_ID__=()=>_x(),l})();const _x=function(){const l=Ae(),c=wi(cn().index,l);return function(l){return l[11]}(Zi(c)?c:l)};let nw=(()=>{class l{}return l.\u0275prov=mt({token:l,providedIn:"root",factory:()=>null}),l})();class rw{constructor(u){this.full=u,this.major=u.split(".")[0],this.minor=u.split(".")[1],this.patch=u.split(".").slice(2).join(".")}}const iw=new rw("12.2.3");class vx{constructor(){}supports(u){return Bg(u)}create(u){return new lM(u)}}const bx=(l,u)=>u;class lM{constructor(u){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=u||bx}forEachItem(u){let c;for(c=this._itHead;null!==c;c=c._next)u(c)}forEachOperation(u){let c=this._itHead,f=this._removalsHead,m=0,_=null;for(;c||f;){const b=!f||c&&c.currentIndex<Ex(f,m,_)?c:f,E=Ex(b,m,_),I=b.currentIndex;if(b===f)m--,f=f._nextRemoved;else if(c=c._next,null==b.previousIndex)m++;else{_||(_=[]);const A=E-m,M=I-m;if(A!=M){for(let F=0;F<A;F++){const j=F<_.length?_[F]:_[F]=0,Z=j+F;M<=Z&&Z<A&&(_[F]=j+1)}_[b.previousIndex]=M-A}}E!==I&&u(b,E,I)}}forEachPreviousItem(u){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)u(c)}forEachAddedItem(u){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)u(c)}forEachMovedItem(u){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)u(c)}forEachRemovedItem(u){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)u(c)}forEachIdentityChange(u){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)u(c)}diff(u){if(null==u&&(u=[]),!Bg(u))throw new Error(`Error trying to diff '${J(u)}'. Only arrays and iterables are allowed`);return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let m,_,b,c=this._itHead,f=!1;if(Array.isArray(u)){this.length=u.length;for(let E=0;E<this.length;E++)_=u[E],b=this._trackByFn(E,_),null!==c&&Object.is(c.trackById,b)?(f&&(c=this._verifyReinsertion(c,_,b,E)),Object.is(c.item,_)||this._addIdentityChange(c,_)):(c=this._mismatch(c,_,b,E),f=!0),c=c._next}else m=0,function(l,u){if(Array.isArray(l))for(let c=0;c<l.length;c++)u(l[c]);else{const c=l[Kd()]();let f;for(;!(f=c.next()).done;)u(f.value)}}(u,E=>{b=this._trackByFn(m,E),null!==c&&Object.is(c.trackById,b)?(f&&(c=this._verifyReinsertion(c,E,b,m)),Object.is(c.item,E)||this._addIdentityChange(c,E)):(c=this._mismatch(c,E,b,m),f=!0),c=c._next,m++}),this.length=m;return this._truncate(c),this.collection=u,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let u;for(u=this._previousItHead=this._itHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._additionsHead;null!==u;u=u._nextAdded)u.previousIndex=u.currentIndex;for(this._additionsHead=this._additionsTail=null,u=this._movesHead;null!==u;u=u._nextMoved)u.previousIndex=u.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(u,c,f,m){let _;return null===u?_=this._itTail:(_=u._prev,this._remove(u)),null!==(u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(u.item,c)||this._addIdentityChange(u,c),this._reinsertAfter(u,_,m)):null!==(u=null===this._linkedRecords?null:this._linkedRecords.get(f,m))?(Object.is(u.item,c)||this._addIdentityChange(u,c),this._moveAfter(u,_,m)):u=this._addAfter(new PF(c,f),_,m),u}_verifyReinsertion(u,c,f,m){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==_?u=this._reinsertAfter(_,u._prev,m):u.currentIndex!=m&&(u.currentIndex=m,this._addToMoves(u,m)),u}_truncate(u){for(;null!==u;){const c=u._next;this._addToRemovals(this._unlink(u)),u=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(u,c,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(u);const m=u._prevRemoved,_=u._nextRemoved;return null===m?this._removalsHead=_:m._nextRemoved=_,null===_?this._removalsTail=m:_._prevRemoved=m,this._insertAfter(u,c,f),this._addToMoves(u,f),u}_moveAfter(u,c,f){return this._unlink(u),this._insertAfter(u,c,f),this._addToMoves(u,f),u}_addAfter(u,c,f){return this._insertAfter(u,c,f),this._additionsTail=null===this._additionsTail?this._additionsHead=u:this._additionsTail._nextAdded=u,u}_insertAfter(u,c,f){const m=null===c?this._itHead:c._next;return u._next=m,u._prev=c,null===m?this._itTail=u:m._prev=u,null===c?this._itHead=u:c._next=u,null===this._linkedRecords&&(this._linkedRecords=new Cx),this._linkedRecords.put(u),u.currentIndex=f,u}_remove(u){return this._addToRemovals(this._unlink(u))}_unlink(u){null!==this._linkedRecords&&this._linkedRecords.remove(u);const c=u._prev,f=u._next;return null===c?this._itHead=f:c._next=f,null===f?this._itTail=c:f._prev=c,u}_addToMoves(u,c){return u.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=u:this._movesTail._nextMoved=u),u}_addToRemovals(u){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Cx),this._unlinkedRecords.put(u),u.currentIndex=null,u._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=u,u._prevRemoved=null):(u._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=u),u}_addIdentityChange(u,c){return u.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=u:this._identityChangesTail._nextIdentityChange=u,u}}class PF{constructor(u,c){this.item=u,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wx{constructor(){this._head=null,this._tail=null}add(u){null===this._head?(this._head=this._tail=u,u._nextDup=null,u._prevDup=null):(this._tail._nextDup=u,u._prevDup=this._tail,u._nextDup=null,this._tail=u)}get(u,c){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===c||c<=f.currentIndex)&&Object.is(f.trackById,u))return f;return null}remove(u){const c=u._prevDup,f=u._nextDup;return null===c?this._head=f:c._nextDup=f,null===f?this._tail=c:f._prevDup=c,null===this._head}}class Cx{constructor(){this.map=new Map}put(u){const c=u.trackById;let f=this.map.get(c);f||(f=new wx,this.map.set(c,f)),f.add(u)}get(u,c){const m=this.map.get(u);return m?m.get(u,c):null}remove(u){const c=u.trackById;return this.map.get(c).remove(u)&&this.map.delete(c),u}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ex(l,u,c){const f=l.previousIndex;if(null===f)return f;let m=0;return c&&f<c.length&&(m=c[f]),f+u+m}class Dx{constructor(){}supports(u){return u instanceof Map||db(u)}create(){return new uM}}class uM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(u){let c;for(c=this._mapHead;null!==c;c=c._next)u(c)}forEachPreviousItem(u){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)u(c)}forEachChangedItem(u){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)u(c)}forEachAddedItem(u){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)u(c)}forEachRemovedItem(u){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)u(c)}diff(u){if(u){if(!(u instanceof Map||db(u)))throw new Error(`Error trying to diff '${J(u)}'. Only maps and objects are allowed`)}else u=new Map;return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(u,(f,m)=>{if(c&&c.key===m)this._maybeAddToChanges(c,f),this._appendAfter=c,c=c._next;else{const _=this._getOrCreateRecordForKey(m,f);c=this._insertBeforeOrAppend(c,_)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let f=c;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(u,c){if(u){const f=u._prev;return c._next=u,c._prev=f,u._prev=c,f&&(f._next=c),u===this._mapHead&&(this._mapHead=c),this._appendAfter=u,u}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(u,c){if(this._records.has(u)){const m=this._records.get(u);this._maybeAddToChanges(m,c);const _=m._prev,b=m._next;return _&&(_._next=b),b&&(b._prev=_),m._next=null,m._prev=null,m}const f=new FF(u);return this._records.set(u,f),f.currentValue=c,this._addToAdditions(f),f}_reset(){if(this.isDirty){let u;for(this._previousMapHead=this._mapHead,u=this._previousMapHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._changesHead;null!==u;u=u._nextChanged)u.previousValue=u.currentValue;for(u=this._additionsHead;null!=u;u=u._nextAdded)u.previousValue=u.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(u,c){Object.is(c,u.currentValue)||(u.previousValue=u.currentValue,u.currentValue=c,this._addToChanges(u))}_addToAdditions(u){null===this._additionsHead?this._additionsHead=this._additionsTail=u:(this._additionsTail._nextAdded=u,this._additionsTail=u)}_addToChanges(u){null===this._changesHead?this._changesHead=this._changesTail=u:(this._changesTail._nextChanged=u,this._changesTail=u)}_forEach(u,c){u instanceof Map?u.forEach(c):Object.keys(u).forEach(f=>c(u[f],f))}}class FF{constructor(u){this.key=u,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sw(){return new ly([new vx])}let ly=(()=>{class l{constructor(c){this.factories=c}static create(c,f){if(null!=f){const m=f.factories.slice();c=c.concat(m)}return new l(c)}static extend(c){return{provide:l,useFactory:f=>l.create(c,f||sw()),deps:[[l,new yr,new Ao]]}}find(c){const f=this.factories.find(m=>m.supports(c));if(null!=f)return f;throw new Error(`Cannot find a differ supporting object '${c}' of type '${function(l){return l.name||typeof l}(c)}'`)}}return l.\u0275prov=mt({token:l,providedIn:"root",factory:sw}),l})();function xx(){return new ow([new Dx])}let ow=(()=>{class l{constructor(c){this.factories=c}static create(c,f){if(f){const m=f.factories.slice();c=c.concat(m)}return new l(c)}static extend(c){return{provide:l,useFactory:f=>l.create(c,f||xx()),deps:[[l,new yr,new Ao]]}}find(c){const f=this.factories.find(m=>m.supports(c));if(f)return f;throw new Error(`Cannot find a differ supporting object '${c}'`)}}return l.\u0275prov=mt({token:l,providedIn:"root",factory:xx}),l})();function Yg(l,u,c,f,m=!1){for(;null!==c;){const _=u[c.index];if(null!==_&&f.push(gn(_)),Pi(_))for(let E=10;E<_.length;E++){const I=_[E],A=I[1].firstChild;null!==A&&Yg(I[1],I,A,f)}const b=c.type;if(8&b)Yg(l,u,c.child,f);else if(32&b){const E=u_(c,u);let I;for(;I=E();)f.push(I)}else if(16&b){const E=D0(u,c);if(Array.isArray(E))f.push(...E);else{const I=bg(u[16]);Yg(I[1],I,E,f,!0)}}c=m?c.projectionNext:c.next}return f}class zg{constructor(u,c){this._lView=u,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const u=this._lView,c=u[1];return Yg(c,u,c.firstChild,[])}get context(){return this._lView[8]}set context(u){this._lView[8]=u}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const u=this._lView[3];if(Pi(u)){const c=u[8],f=c?c.indexOf(this):-1;f>-1&&(f_(u,f),ua(c,f))}this._attachedToViewContainer=!1}LE(this._lView[1],this._lView)}onDestroy(u){Sg(this._lView[1],this._lView,null,u)}markForCheck(){Wd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Q0(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(l,u,c){td(!0);try{Q0(l,u,c)}finally{td(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var u;this._appRef=null,Xu(this._lView[1],u=this._lView,u[11],2,null,null)}attachToAppRef(u){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=u}}class dM extends zg{constructor(u){super(u),this._view=u}detectChanges(){A_(this._view)}checkNoChanges(){!function(l){td(!0);try{A_(l)}finally{td(!1)}}(this._view)}get context(){return null}}const Tx=function(l){return function(l,u,c){if(ms(l)&&!c){const f=wi(l.index,u);return new zg(f,f)}return 47&l.type?new zg(u[16],u):null}(cn(),Ae(),16==(16&l))};let hM=(()=>{class l{}return l.__NG_ELEMENT_ID__=Tx,l})();const VF=[new Dx],pM=new ly([new vx]),mM=new ow(VF),_M=function(){return Kg(cn(),Ae())};let Zg=(()=>{class l{}return l.__NG_ELEMENT_ID__=_M,l})();const _h=Zg,Ts=class extends _h{constructor(u,c,f){super(),this._declarationLView=u,this._declarationTContainer=c,this.elementRef=f}createEmbeddedView(u){const c=this._declarationTContainer.tViews,f=tc(this._declarationLView,c,u,16,null,c.declTNode,null,null,null,null);f[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(f[19]=_.createEmbeddedView(c)),Ud(c,f,u),new zg(f)}};function Kg(l,u){return 4&l.type?new Ts(u,l,_c(l,u)):null}class Ee{}class yc{}const L=function(){return yt(cn(),Ae())};let yh=(()=>{class l{}return l.__NG_ELEMENT_ID__=L,l})();const Nx=yh,Mx=class extends Nx{constructor(u,c,f){super(),this._lContainer=u,this._hostTNode=c,this._hostLView=f}get element(){return _c(this._hostTNode,this._hostLView)}get injector(){return new qs(this._hostTNode,this._hostLView)}get parentInjector(){const u=ze(this._hostTNode,this._hostLView);if(ol(u)){const c=Du(u,this._hostLView),f=sa(u);return new qs(c[1].data[f+8],c)}return new qs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(u){const c=$e(this._lContainer);return null!==c&&c[u]||null}get length(){return this._lContainer.length-10}createEmbeddedView(u,c,f){const m=u.createEmbeddedView(c||{});return this.insert(m,f),m}createComponent(u,c,f,m,_){const b=f||this.parentInjector;if(!_&&null==u.ngModule&&b){const I=b.get(Ee,null);I&&(_=I)}const E=u.create(b,m,void 0,_);return this.insert(E.hostView,c),E}insert(u,c){const f=u._lView,m=f[1];if(Pi(f[3])){const M=this.indexOf(u);if(-1!==M)this.detach(M);else{const k=f[3],F=new Mx(k,k[6],k[3]);F.detach(F.indexOf(u))}}const _=this._adjustIndex(c),b=this._lContainer;!function(l,u,c,f){const m=10+f,_=c.length;f>0&&(c[m-1][4]=u),f<_-10?(u[4]=c[m],Ru(c,10+f,u)):(c.push(u),u[4]=null),u[3]=c;const b=u[17];null!==b&&c!==b&&function(l,u){const c=l[9];u[16]!==u[3][3][16]&&(l[2]=!0),null===c?l[9]=[u]:c.push(u)}(b,u);const E=u[19];null!==E&&E.insertView(l),u[2]|=128}(m,f,b,_);const E=x0(_,b),I=f[11],A=g_(I,b[7]);return null!==A&&function(l,u,c,f,m,_){f[0]=m,f[6]=u,Xu(l,f,c,1,m,_)}(m,b[6],I,f,A,E),u.attachToViewContainerRef(),Ru(Qg(b),_,u),u}move(u,c){return this.insert(u,c)}indexOf(u){const c=$e(this._lContainer);return null!==c?c.indexOf(u):-1}remove(u){const c=this._adjustIndex(u,-1),f=f_(this._lContainer,c);f&&(ua(Qg(this._lContainer),c),LE(f[1],f))}detach(u){const c=this._adjustIndex(u,-1),f=f_(this._lContainer,c);return f&&null!=ua(Qg(this._lContainer),c)?new zg(f):null}_adjustIndex(u,c=0){return null==u?this.length+c:u}};function $e(l){return l[8]}function Qg(l){return l[8]||(l[8]=[])}function yt(l,u){let c;const f=u[l.index];if(Pi(f))c=f;else{let m;if(8&l.type)m=gn(f);else{const _=u[11];m=_.createComment("");const b=bi(l,u);Sl(_,g_(_,b),m,function(l,u){return un(l)?l.nextSibling(u):u.nextSibling}(_,b),!1)}u[l.index]=c=dD(f,u,m,l),T_(u,c)}return new Mx(c,l,u)}const wc={};class Th extends mc{constructor(u){super(),this.ngModule=u}resolveComponentFactory(u){const c=Pn(u);return new xy(c,this.ngModule)}}function Nw(l){const u=[];for(let c in l)l.hasOwnProperty(c)&&u.push({propName:l[c],templateName:c});return u}const Mw=new Tn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Fd});class xy extends px{constructor(u,c){super(),this.componentDef=u,this.ngModule=c,this.componentType=u.type,this.selector=u.selectors.map(KA).join(","),this.ngContentSelectors=u.ngContentSelectors?u.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return Nw(this.componentDef.inputs)}get outputs(){return Nw(this.componentDef.outputs)}create(u,c,f,m){const _=(m=m||this.ngModule)?function(l,u){return{get:(c,f,m)=>{const _=l.get(c,wc,m);return _!==wc||f===wc?_:u.get(c,f,m)}}}(u,m.injector):u,b=_.get(tw,Jo),E=_.get(nw,null),I=b.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",M=f?function(l,u,c){if(un(l))return l.selectRootElement(u,c===Pe.ShadowDom);let f="string"==typeof u?l.querySelector(u):u;return f.textContent="",f}(I,f,this.componentDef.encapsulation):w0(b.createRenderer(null,this.componentDef),A,function(l){const u=l.toLowerCase();return"svg"===u?"http://www.w3.org/2000/svg":"math"===u?"http://www.w3.org/1998/MathML/":null}(A)),k=this.componentDef.onPush?576:528,F=function(l,u){return{components:[],scheduler:l||Fd,clean:mD,playerHandler:u||null,flags:0}}(),j=Tg(0,null,null,1,0,null,null,null,null,null),Z=tc(null,j,F,k,null,null,b,I,E,_);let de,ee;vu(Z);try{const Re=function(l,u,c,f,m,_){const b=c[1];c[20]=l;const I=Ia(b,20,2,"#host",null),A=I.mergedAttrs=u.hostAttrs;null!==A&&(eb(I,A,!0),null!==l&&($f(m,l,A),null!==I.classes&&T0(m,l,I.classes),null!==I.styles&&$E(m,l,I.styles)));const M=f.createRenderer(l,u),k=tc(c,sD(u),null,u.onPush?64:16,c[20],I,f,M,_||null,null);return b.firstCreatePass&&(Yt(Tu(I,c),b,u.type),z0(b,I),Z0(I,c.length,1)),T_(c,k),c[20]=k}(M,this.componentDef,Z,b,I);if(M)if(f)$f(I,M,["ng-version",iw.full]);else{const{attrs:De,classes:Je}=function(l){const u=[],c=[];let f=1,m=2;for(;f<l.length;){let _=l[f];if("string"==typeof _)2===m?""!==_&&u.push(_,l[++f]):8===m&&c.push(_);else{if(!Xs(m))break;m=_}f++}return{attrs:u,classes:c}}(this.componentDef.selectors[0]);De&&$f(I,M,De),Je&&Je.length>0&&T0(I,M,Je.join(" "))}if(ee=Qc(j,20),void 0!==c){const De=ee.projection=[];for(let Je=0;Je<this.ngContentSelectors.length;Je++){const dt=c[Je];De.push(null!=dt?Array.from(dt):null)}}de=function(l,u,c,f,m){const _=c[1],b=function(l,u,c){const f=cn();l.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),K0(l,f,u,Bd(l,u,1,null),c));const m=In(u,l,f.directiveStart,f);lr(m,u);const _=bi(f,u);return _&&lr(_,u),m}(_,c,u);if(f.components.push(b),l[8]=b,m&&m.forEach(I=>I(b,u)),u.contentQueries){const I=cn();u.contentQueries(1,b,I.directiveStart)}const E=cn();return!_.firstCreatePass||null===u.hostBindings&&null===u.hostAttrs||(rl(E.index),dS(c[1],E,0,E.directiveStart,E.directiveEnd,u),hS(u,b)),b}(Re,this.componentDef,Z,F,[WD]),Ud(j,Z,null)}finally{bu()}return new rI(this.componentType,de,_c(ee,Z),Z,ee)}}class rI extends class{}{constructor(u,c,f,m,_){super(),this.location=f,this._rootLView=m,this._tNode=_,this.instance=c,this.hostView=this.changeDetectorRef=new dM(m),this.componentType=u}get injector(){return new qs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(u){this.hostView.onDestroy(u)}}const Vo=new Map;class RM extends Ee{constructor(u,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Th(this);const f=ki(u),m=u[Oe]||null;m&&Z1(m),this._bootstrapComponents=rs(f.bootstrap),this._r3Injector=ib(u,c,[{provide:Ee,useValue:this},{provide:mc,useValue:this.componentFactoryResolver}],J(u)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(u)}get(u,c=tn.THROW_IF_NOT_FOUND,f=Qe.Default){return u===tn||u===Ee||u===rc?this:this._r3Injector.get(u,c,f)}destroy(){const u=this._r3Injector;!u.destroyed&&u.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(u){this.destroyCbs.push(u)}}class dp extends yc{constructor(u){super(),this.moduleType=u,null!==ki(u)&&function(l){const u=new Set;!function c(f){const m=ki(f,!0),_=m.id;null!==_&&(function(l,u,c){if(u&&u!==c)throw new Error(`Duplicate module registered for ${l} - ${J(u)} vs ${J(u.name)}`)}(_,Vo.get(_),f),Vo.set(_,f));const b=rs(m.imports);for(const E of b)u.has(E)||(u.add(E),c(E))}(l)}(u)}create(u){return new RM(this.moduleType,u)}}function Ty(l,u,c,f){return vn(Ae(),Gn(),l,u,c,f)}function jl(l,u,c,f,m){return function(l,u,c,f,m,_,b){const E=u+c;return oc(l,E,m,_)?ko(l,E+2,b?f.call(b,m,_):f(m,_)):Nh(l,E+2)}(Ae(),Gn(),l,u,c,f,m)}function Rw(l,u,c,f,m,_){return function(l,u,c,f,m,_,b,E){const I=u+c;return function(l,u,c,f,m){const _=oc(l,u,c,f);return ai(l,u+2,m)||_}(l,I,m,_,b)?ko(l,I+3,E?f.call(E,m,_,b):f(m,_,b)):Nh(l,I+3)}(Ae(),Gn(),l,u,c,f,m,_)}function Nh(l,u){const c=l[u];return c===gt?void 0:c}function vn(l,u,c,f,m,_){const b=u+c;return ai(l,b,m)?ko(l,b+1,_?f.call(_,m):f(m)):Nh(l,b+1)}function Rh(l,u){const c=Rt();let f;const m=l+20;c.firstCreatePass?(f=function(l,u){if(u)for(let c=u.length-1;c>=0;c--){const f=u[c];if(l===f.name)return f}throw new Ie("302",`The pipe '${l}' could not be found!`)}(u,c.pipeRegistry),c.data[m]=f,f.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(m,f.onDestroy)):f=c.data[m];const _=f.factory||(f.factory=Qo(f.type)),b=sr(Gg);try{const E=xu(!1),I=_();return xu(E),function(l,u,c,f){c>=l.data.length&&(l.data[c]=null,l.blueprint[c]=null),u[c]=f}(c,Ae(),m,I),I}finally{sr(b)}}function Ow(l,u,c){const f=l+20,m=Ae(),_=Co(m,f);return function(l,u){to.isWrapped(u)&&(u=to.unwrap(u),l[Qi()]=gt);return u}(m,function(l,u){return l[1].data[u].pure}(m,f)?vn(m,Gn(),u,_.transform,c,_):_.transform(c))}function My(l){return u=>{setTimeout(l,void 0,u)}}const so=class extends h.xQ{constructor(u=!1){super(),this.__isAsync=u}emit(u){super.next(u)}subscribe(u,c,f){var m,_,b;let E=u,I=c||(()=>null),A=f;if(u&&"object"==typeof u){const k=u;E=null===(m=k.next)||void 0===m?void 0:m.bind(k),I=null===(_=k.error)||void 0===_?void 0:_.bind(k),A=null===(b=k.complete)||void 0===b?void 0:b.bind(k)}this.__isAsync&&(I=My(I),E&&(E=My(E)),A&&(A=My(A)));const M=super.subscribe({next:E,error:I,complete:A});return u instanceof ue.w&&u.add(M),M}};function Oh(){return this._results[Kd()]()}class Ry{constructor(u=!1){this._emitDistinctChangesOnly=u,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Kd(),f=Ry.prototype;f[c]||(f[c]=Oh)}get changes(){return this._changes||(this._changes=new so)}get(u){return this._results[u]}map(u){return this._results.map(u)}filter(u){return this._results.filter(u)}find(u){return this._results.find(u)}reduce(u,c){return this._results.reduce(u,c)}forEach(u){this._results.forEach(u)}some(u){return this._results.some(u)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(u,c){const f=this;f.dirty=!1;const m=ni(u);(this._changesDetected=!function(l,u,c){if(l.length!==u.length)return!1;for(let f=0;f<l.length;f++){let m=l[f],_=u[f];if(c&&(m=c(m),_=c(_)),_!==m)return!1}return!0}(f._results,m,c))&&(f._results=m,f.length=m.length,f.last=m[this.length-1],f.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Oy{constructor(u){this.queryList=u,this.matches=null}clone(){return new Oy(this.queryList)}setDirty(){this.queryList.setDirty()}}class ky{constructor(u=[]){this.queries=u}createEmbeddedView(u){const c=u.queries;if(null!==c){const f=null!==u.contentQueries?u.contentQueries[0]:c.length,m=[];for(let _=0;_<f;_++){const b=c.getByIndex(_);m.push(this.queries[b.indexInDeclarationView].clone())}return new ky(m)}return null}insertView(u){this.dirtyQueriesWithMatches(u)}detachView(u){this.dirtyQueriesWithMatches(u)}dirtyQueriesWithMatches(u){for(let c=0;c<this.queries.length;c++)null!==Fw(u,c).matches&&this.queries[c].setDirty()}}class Py{constructor(u,c,f=null){this.predicate=u,this.flags=c,this.read=f}}class fp{constructor(u=[]){this.queries=u}elementStart(u,c){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(u,c)}elementEnd(u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(u)}embeddedTView(u){let c=null;for(let f=0;f<this.length;f++){const m=null!==c?c.length:0,_=this.getByIndex(f).embeddedTView(u,m);_&&(_.indexInDeclarationView=f,null!==c?c.push(_):c=[_])}return null!==c?new fp(c):null}template(u,c){for(let f=0;f<this.queries.length;f++)this.queries[f].template(u,c)}getByIndex(u){return this.queries[u]}get length(){return this.queries.length}track(u){this.queries.push(u)}}class Fy{constructor(u,c=-1){this.metadata=u,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(u,c){this.isApplyingToNode(c)&&this.matchTNode(u,c)}elementEnd(u){this._declarationNodeIndex===u.index&&(this._appliesToNextNode=!1)}template(u,c){this.elementStart(u,c)}embeddedTView(u,c){return this.isApplyingToNode(u)?(this.crossesNgTemplate=!0,this.addMatch(-u.index,c),new Fy(this.metadata)):null}isApplyingToNode(u){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let f=u.parent;for(;null!==f&&8&f.type&&f.index!==c;)f=f.parent;return c===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(u,c){const f=this.metadata.predicate;if(Array.isArray(f))for(let m=0;m<f.length;m++){const _=f[m];this.matchTNodeWithReadOption(u,c,lI(c,_)),this.matchTNodeWithReadOption(u,c,dd(c,u,_,!1,!1))}else f===Zg?4&c.type&&this.matchTNodeWithReadOption(u,c,-1):this.matchTNodeWithReadOption(u,c,dd(c,u,f,!1,!1))}matchTNodeWithReadOption(u,c,f){if(null!==f){const m=this.metadata.read;if(null!==m)if(m===Aa||m===yh||m===Zg&&4&c.type)this.addMatch(c.index,-2);else{const _=dd(c,u,m,!1,!1);null!==_&&this.addMatch(c.index,_)}else this.addMatch(c.index,f)}}addMatch(u,c){null===this.matches?this.matches=[u,c]:this.matches.push(u,c)}}function lI(l,u){const c=l.localNames;if(null!==c)for(let f=0;f<c.length;f+=2)if(c[f]===u)return c[f+1];return null}function UM(l,u,c,f){return-1===c?function(l,u){return 11&l.type?_c(l,u):4&l.type?Kg(l,u):null}(u,l):-2===c?function(l,u,c){return c===Aa?_c(u,l):c===Zg?Kg(u,l):c===yh?yt(u,l):void 0}(l,u,f):In(l,l[1],c,u)}function uI(l,u,c,f){const m=u[19].queries[f];if(null===m.matches){const _=l.data,b=c.matches,E=[];for(let I=0;I<b.length;I+=2){const A=b[I];E.push(A<0?null:UM(u,_[A],b[I+1],c.metadata.read))}m.matches=E}return m.matches}function kh(l,u,c,f){const m=l.queries.getByIndex(c),_=m.matches;if(null!==_){const b=uI(l,u,m,c);for(let E=0;E<_.length;E+=2){const I=_[E];if(I>0)f.push(b[E/2]);else{const A=_[E+1],M=u[-I];for(let k=10;k<M.length;k++){const F=M[k];F[17]===F[3]&&kh(F[1],F,A,f)}if(null!==M[9]){const k=M[9];for(let F=0;F<k.length;F++){const j=k[F];kh(j[1],j,A,f)}}}}}return f}function Ph(l){const u=Ae(),c=Rt(),f=Gf();ta(f+1);const m=Fw(c,f);if(l.dirty&&Mf(u)===(2==(2&m.metadata.flags))){if(null===m.matches)l.reset([]);else{const _=m.crossesNgTemplate?kh(c,u,f,[]):uI(c,u,m,f);l.reset(_,ew),l.notifyOnChanges()}return!0}return!1}function gp(l,u,c){const f=Rt();f.firstCreatePass&&(cI(f,new Py(l,u,c),-1),2==(2&u)&&(f.staticViewQueries=!0)),Fh(f,Ae(),u)}function Ly(l,u,c,f){const m=Rt();if(m.firstCreatePass){const _=cn();cI(m,new Py(u,c,f),_.index),function(l,u){const c=l.contentQueries||(l.contentQueries=[]);u!==(c.length?c[c.length-1]:-1)&&c.push(l.queries.length-1,u)}(m,l),2==(2&c)&&(m.staticContentQueries=!0)}Fh(m,Ae(),c)}function Pw(){return l=Ae(),u=Gf(),l[19].queries[u].queryList;var l,u}function Fh(l,u,c){const f=new Ry(4==(4&c));Sg(l,u,f,f.destroy),null===u[19]&&(u[19]=new ky),u[19].queries.push(new Oy(f))}function cI(l,u,c){null===l.queries&&(l.queries=new fp),l.queries.track(new Fy(u,c))}function Fw(l,u){return l.queries.getByIndex(u)}function dI(l,u){return Kg(l,u)}const xt=new Tn("Application Initializer");let xc=(()=>{class l{constructor(c){this.appInits=c,this.resolve=Xb,this.reject=Xb,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,m)=>{this.resolve=f,this.reject=m})}runInitializers(){if(this.initialized)return;const c=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const _=this.appInits[m]();if(P_(_))c.push(_);else if(Rl(_)){const b=new Promise((E,I)=>{_.subscribe({complete:E,error:I})});c.push(b)}}Promise.all(c).then(()=>{f()}).catch(m=>{this.reject(m)}),0===c.length&&f(),this.initialized=!0}}return l.\u0275fac=function(c){return new(c||l)(en(xt,8))},l.\u0275prov=mt({token:l,factory:l.\u0275fac}),l})();const Wl=new Tn("AppId"),Dp={provide:Wl,useFactory:function(){return`${qt()}${qt()}${qt()}`},deps:[]};function qt(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const TI=new Tn("Platform Initializer"),kr=new Tn("Platform ID"),Ic=new Tn("appBootstrapListener");let Dr=(()=>{class l{log(c){console.log(c)}warn(c){console.warn(c)}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275prov=mt({token:l,factory:l.\u0275fac}),l})();const Wy=new Tn("LocaleId"),ka=new Tn("DefaultCurrencyCode");class Yy{constructor(u,c){this.ngModuleFactory=u,this.componentFactories=c}}const Pa=function(l){return new dp(l)},Uo=Pa,NI=function(l){return Promise.resolve(Pa(l))},Zy=function(l){const u=Pa(l),f=rs(ki(l).declarations).reduce((m,_)=>{const b=Pn(_);return b&&m.push(new xy(b)),m},[]);return new Yy(u,f)},Ky=Zy,kI=function(l){return Promise.resolve(Zy(l))};let Uh=(()=>{class l{constructor(){this.compileModuleSync=Uo,this.compileModuleAsync=NI,this.compileModuleAndAllComponentsSync=Ky,this.compileModuleAndAllComponentsAsync=kI}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275prov=mt({token:l,factory:l.\u0275fac}),l})();const fi=(()=>Promise.resolve(0))();function Jy(l){"undefined"==typeof Zone?fi.then(()=>{l&&l.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",l)}class as{constructor({enableLongStackTrace:u=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new so(!1),this.onMicrotaskEmpty=new so(!1),this.onStable=new so(!1),this.onError=new so(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),u&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!f&&c,m.shouldCoalesceRunChangeDetection=f,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function(){let l=zt.requestAnimationFrame,u=zt.cancelAnimationFrame;if("undefined"!=typeof Zone&&l&&u){const c=l[Zone.__symbol__("OriginalDelegate")];c&&(l=c);const f=u[Zone.__symbol__("OriginalDelegate")];f&&(u=f)}return{nativeRequestAnimationFrame:l,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function(l){const u=()=>{!function(l){l.isCheckStableRunning||-1!==l.lastRequestAnimationFrameId||(l.lastRequestAnimationFrameId=l.nativeRequestAnimationFrame.call(zt,()=>{l.fakeTopEventTask||(l.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{l.lastRequestAnimationFrameId=-1,Gh(l),l.isCheckStableRunning=!0,Tc(l),l.isCheckStableRunning=!1},void 0,()=>{},()=>{})),l.fakeTopEventTask.invoke()}),Gh(l))}(l)};l._inner=l._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,f,m,_,b,E)=>{try{return gi(l),c.invokeTask(m,_,b,E)}finally{(l.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||l.shouldCoalesceRunChangeDetection)&&u(),FI(l)}},onInvoke:(c,f,m,_,b,E,I)=>{try{return gi(l),c.invoke(m,_,b,E,I)}finally{l.shouldCoalesceRunChangeDetection&&u(),FI(l)}},onHasTask:(c,f,m,_)=>{c.hasTask(m,_),f===m&&("microTask"==_.change?(l._hasPendingMicrotasks=_.microTask,Gh(l),Tc(l)):"macroTask"==_.change&&(l.hasPendingMacrotasks=_.macroTask))},onHandleError:(c,f,m,_)=>(c.handleError(m,_),l.runOutsideAngular(()=>l.onError.emit(_)),!1)})}(m)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!as.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(as.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(u,c,f){return this._inner.run(u,c,f)}runTask(u,c,f,m){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+m,u,PI,Xb,Xb);try{return _.runTask(b,c,f)}finally{_.cancelTask(b)}}runGuarded(u,c,f){return this._inner.runGuarded(u,c,f)}runOutsideAngular(u){return this._outer.run(u)}}const PI={};function Tc(l){if(0==l._nesting&&!l.hasPendingMicrotasks&&!l.isStable)try{l._nesting++,l.onMicrotaskEmpty.emit(null)}finally{if(l._nesting--,!l.hasPendingMicrotasks)try{l.runOutsideAngular(()=>l.onStable.emit(null))}finally{l.isStable=!0}}}function Gh(l){l.hasPendingMicrotasks=!!(l._hasPendingMicrotasks||(l.shouldCoalesceEventChangeDetection||l.shouldCoalesceRunChangeDetection)&&-1!==l.lastRequestAnimationFrameId)}function gi(l){l._nesting++,l.isStable&&(l.isStable=!1,l.onUnstable.emit(null))}function FI(l){l._nesting--,Tc(l)}class JM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new so,this.onMicrotaskEmpty=new so,this.onStable=new so,this.onError=new so}run(u,c,f){return u.apply(c,f)}runGuarded(u,c,f){return u.apply(c,f)}runOutsideAngular(u){return u()}runTask(u,c,f,m){return u.apply(c,f)}}let LI=(()=>{class l{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{as.assertNotInAngularZone(),Jy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Jy(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(c)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,f,m){let _=-1;f&&f>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),c(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:c,timeoutId:_,updateCb:m})}whenStable(c,f,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,f,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,f,m){return[]}}return l.\u0275fac=function(c){return new(c||l)(en(as))},l.\u0275prov=mt({token:l,factory:l.\u0275fac}),l})(),VI=(()=>{class l{constructor(){this._applications=new Map,Kw.addToWindow(this)}registerApplication(c,f){this._applications.set(c,f)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,f=!0){return Kw.findTestabilityInTree(this,c,f)}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275prov=mt({token:l,factory:l.\u0275fac}),l})();class BI{addToWindow(u){}findTestabilityInTree(u,c,f){return null}}function XM(l){Kw=l}let Kw=new BI,UI=!0,GI=!1;function Ac(){return GI=!0,UI}function ev(){if(GI)throw new Error("Cannot enable prod mode after platform setup.");UI=!1}let pi;const nv=new Tn("AllowMultipleToken");class Xw{constructor(u,c){this.name=u,this.token=c}}function ls(l,u,c=[]){const f=`Platform: ${u}`,m=new Tn(f);return(_=[])=>{let b=eC();if(!b||b.injector.get(nv,!1))if(l)l(c.concat(_).concat({provide:m,useValue:!0}));else{const E=c.concat(_).concat({provide:m,useValue:!0},{provide:qd,useValue:"platform"});!function(l){if(pi&&!pi.destroyed&&!pi.injector.get(nv,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");pi=l.get(iv);const u=l.get(TI,null);u&&u.forEach(c=>c())}(tn.create({providers:E,name:f}))}return function(l){const u=eC();if(!u)throw new Error("No platform exists!");if(!u.injector.get(l,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return u}(m)}}function eC(){return pi&&!pi.destroyed?pi:null}let iv=(()=>{class l{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,f){const E=function(l,u){let c;return c="noop"===l?new JM:("zone.js"===l?void 0:l)||new as({enableLongStackTrace:Ac(),shouldCoalesceEventChangeDetection:!!(null==u?void 0:u.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==u?void 0:u.ngZoneRunCoalescing)}),c}(f?f.ngZone:void 0,{ngZoneEventCoalescing:f&&f.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:f&&f.ngZoneRunCoalescing||!1}),I=[{provide:as,useValue:E}];return E.run(()=>{const A=tn.create({providers:I,parent:this.injector,name:c.moduleType.name}),M=c.create(A),k=M.injector.get(x,null);if(!k)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return E.runOutsideAngular(()=>{const F=E.onError.subscribe({next:j=>{k.handleError(j)}});M.onDestroy(()=>{sv(this._modules,M),F.unsubscribe()})}),function(l,u,c){try{const f=c();return P_(f)?f.catch(m=>{throw u.runOutsideAngular(()=>l.handleError(m)),m}):f}catch(f){throw u.runOutsideAngular(()=>l.handleError(f)),f}}(k,E,()=>{const F=M.injector.get(xc);return F.runInitializers(),F.donePromise.then(()=>(Z1(M.injector.get(Wy,Ub)||Ub),this._moduleDoBootstrap(M),M))})})}bootstrapModule(c,f=[]){const m=qI({},f);return function(l,u,c){const f=new dp(c);return Promise.resolve(f)}(0,0,c).then(_=>this.bootstrapModuleFactory(_,m))}_moduleDoBootstrap(c){const f=c.injector.get($h);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(m=>f.bootstrap(m));else{if(!c.instance.ngDoBootstrap)throw new Error(`The module ${J(c.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);c.instance.ngDoBootstrap(f)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c()),this._destroyed=!0}get destroyed(){return this._destroyed}}return l.\u0275fac=function(c){return new(c||l)(en(tn))},l.\u0275prov=mt({token:l,factory:l.\u0275fac}),l})();function qI(l,u){return Array.isArray(u)?u.reduce(qI,l):Object.assign(Object.assign({},l),u)}let $h=(()=>{class l{constructor(c,f,m,_,b){this._zone=c,this._injector=f,this._exceptionHandler=m,this._componentFactoryResolver=_,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new q.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new q.y(A=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{as.assertNotInAngularZone(),Jy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{as.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{M.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ae.T)(E,I.pipe((0,pe.B)()))}bootstrap(c,f){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let m;m=c instanceof px?c:this._componentFactoryResolver.resolveComponentFactory(c),this.componentTypes.push(m.componentType);const _=function(l){return l.isBoundToModule}(m)?void 0:this._injector.get(Ee),E=m.create(tn.NULL,[],f||m.selector,_),I=E.location.nativeElement,A=E.injector.get(LI,null),M=A&&E.injector.get(VI);return A&&M&&M.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),sv(this.components,E),M&&M.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const f=c;this._views.push(f),f.attachToAppRef(this)}detachView(c){const f=c;sv(this._views,f),f.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(Ic,[]).concat(this._bootstrapListeners).forEach(m=>m(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return l.\u0275fac=function(c){return new(c||l)(en(as),en(tn),en(x),en(mc),en(xc))},l.\u0275prov=mt({token:l,factory:l.\u0275fac}),l})();function sv(l,u){const c=l.indexOf(u);c>-1&&l.splice(c,1)}class nR{}class YI{}const Wh={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let zI=(()=>{class l{constructor(c,f){this._compiler=c,this._config=f||Wh}load(c){return this.loadAndCompile(c)}loadAndCompile(c){let[f,m]=c.split("#");return void 0===m&&(m="default"),U(8255)(f).then(_=>_[m]).then(_=>rC(_,f,m)).then(_=>this._compiler.compileModuleAsync(_))}loadFactory(c){let[f,m]=c.split("#"),_="NgFactory";return void 0===m&&(m="default",_=""),U(8255)(this._config.factoryPathPrefix+f+this._config.factoryPathSuffix).then(b=>b[m+_]).then(b=>rC(b,f,m))}}return l.\u0275fac=function(c){return new(c||l)(en(Uh),en(YI,8))},l.\u0275prov=mt({token:l,factory:l.\u0275fac}),l})();function rC(l,u,c){if(!l)throw new Error(`Cannot find '${c}' in '${u}'`);return l}const Yr=function(l){return null},aR=ls(null,"core",[{provide:kr,useValue:"unknown"},{provide:iv,deps:[tn]},{provide:VI,deps:[]},{provide:Dr,deps:[]}]),Op=[{provide:$h,useClass:$h,deps:[as,tn,x,mc,xc]},{provide:Mw,deps:[as],useFactory:function(l){let u=[];return l.onStable.subscribe(()=>{for(;u.length;)u.pop()()}),function(c){u.push(c)}}},{provide:xc,useClass:xc,deps:[[new Ao,xt]]},{provide:Uh,useClass:Uh,deps:[]},Dp,{provide:ly,useFactory:function(){return pM},deps:[]},{provide:ow,useFactory:function(){return mM},deps:[]},{provide:Wy,useFactory:function(l){return Z1(l=l||"undefined"!=typeof $localize&&$localize.locale||Ub),l},deps:[[new ha(Wy),new Ao,new yr]]},{provide:ka,useValue:"USD"}];let hv=(()=>{class l{constructor(c){}}return l.\u0275fac=function(c){return new(c||l)(en($h))},l.\u0275mod=za({type:l}),l.\u0275inj=On({providers:Op}),l})()},9958:(qe,xe,U)=>{"use strict";U.d(xe,{hO:()=>Ie,xv:()=>z,Dh:()=>B,GT:()=>J,on:()=>G,pX:()=>ie});var h=U(7716),ue=U(4486);ue.Z.registerVersion("firebase","9.0.0","app-compat");var pe=U(9126);qe=U.hmd(qe);const X=["ngOnDestroy"],ie=(ye,Me,se,ce={})=>new Proxy(ye,{get:(Ge,Le)=>se.runOutsideAngular(()=>{var rt;if(ye[Le])return(null===(rt=null==ce?void 0:ce.spy)||void 0===rt?void 0:rt.get)&&ce.spy.get(Le,ye[Le]),ye[Le];if(X.indexOf(Le)>-1)return()=>{};const At=Me.toPromise().then(ve=>{const It=ve&&ve[Le];return"function"==typeof It?It.bind(ve):It&&It.then?It.then(ht=>se.run(()=>ht)):se.run(()=>It)});return new Proxy(()=>{},{get:(ve,It)=>At[It],apply:(ve,It,ht)=>At.then(fe=>{var oe;const be=fe&&fe(...ht);return(null===(oe=null==ce?void 0:ce.spy)||void 0===oe?void 0:oe.apply)&&ce.spy.apply(Le,ht,be),be})})})}),J=(ye,Me)=>{Me.forEach(se=>{Object.getOwnPropertyNames(se.prototype||se).forEach(ce=>{Object.defineProperty(ye.prototype,ce,Object.getOwnPropertyDescriptor(se.prototype||se,ce))})})};class ${constructor(Me){return Me}}const B=new h.OlP("angularfire2.app.options"),z=new h.OlP("angularfire2.app.name");function G(ye,Me,se){const Ge="object"==typeof se&&se||{};Ge.name=Ge.name||"string"==typeof se&&se||"[DEFAULT]";const rt=ue.Z.apps.filter(At=>At&&At.name===Ge.name)[0]||Me.runOutsideAngular(()=>ue.Z.initializeApp(ye,Ge));try{JSON.stringify(ye)!==JSON.stringify(rt.options)&&K("error",`${rt.name} Firebase App already initialized with different options${qe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(At){}return new $(rt)}const K=(ye,...Me)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[ye](...Me)},Ce={provide:$,useFactory:G,deps:[B,h.R0b,[new h.FiY,z]]};let Ie=(()=>{class ye{constructor(se){ue.Z.registerVersion("angularfire",pe.q4.full,`compat-${se.toString()}`),ue.Z.registerVersion("angular",h.q4F.full)}static initializeApp(se,ce){return{ngModule:ye,providers:[{provide:B,useValue:se},{provide:z,useValue:ce}]}}}return ye.\u0275fac=function(se){return new(se||ye)(h.LFG(h.Lbi))},ye.\u0275mod=h.oAB({type:ye}),ye.\u0275inj=h.cJS({providers:[Ce]}),ye})()},9126:(qe,xe,U)=>{"use strict";U.d(xe,{q4:()=>B,iC:()=>fe,f6:()=>ht,HU:()=>Le,cc:()=>K});var h=U(7716);(0,U(5452).registerVersion)("firebase","9.0.0","app");var pe=U(7771),X=U(3637),ie=U(8307),J=U(9746),$=U(2639);qe=U.hmd(qe);const B=new h.GfV("7.0.0"),z=!!qe.hot,G=(ge,...te)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[ge](...te)};function K(ge,te,Be,it,Zt){const[,Ke,lt]=globalThis.\u0275AngularfireInstanceCache.find(ut=>ut[0]===ge)||[];if(Ke)return function(ge,te){try{return ge.toString()===te.toString()}catch(Be){return ge===te}}(Zt,lt)||(G("error",`${te} was already initialized on the ${Be} Firebase App with different settings.${z?" You may need to reload as Firebase is not HMR aware.":""}`),G("warn",{is:Zt,was:lt})),Ke;{const ut=it();return globalThis.\u0275AngularfireInstanceCache.push([ge,ut,Zt]),ut}}function se(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class ce{constructor(te,Be=pe.N){this.zone=te,this.delegate=Be}now(){return this.delegate.now()}schedule(te,Be,it){const Zt=this.zone;return this.delegate.schedule(function(lt){Zt.runGuarded(()=>{te.apply(this,[lt])})},Be,it)}}class Ge{constructor(te){this.zone=te,this.task=null}call(te,Be){const it=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",se,{},se,se)),Be.pipe((0,ie.b)({next:it,complete:it,error:it})).subscribe(te).add(it)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Le=(()=>{class ge{constructor(Be){this.ngZone=Be,this.outsideAngular=Be.runOutsideAngular(()=>new ce(Zone.current)),this.insideAngular=Be.run(()=>new ce(Zone.current,X.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return ge.\u0275fac=function(Be){return new(Be||ge)(h.LFG(h.R0b))},ge.\u0275prov=h.Yz7({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge})();function rt(){const ge=globalThis.\u0275AngularFireScheduler;if(!ge)throw new Error("AngularFireModule has not been provided");return ge}function ht(ge){return ge.pipe((0,J.QV)(rt().insideAngular))}function fe(ge){return rt(),function(ge){return function(Be){return(Be=Be.lift(new Ge(ge.ngZone))).pipe((0,$.R)(ge.outsideAngular),(0,J.QV)(ge.insideAngular))}}(rt())(ge)}},4486:(qe,xe,U)=>{"use strict";U.d(xe,{Z:()=>ye});var h=U(4685),ue=U(6034),q=U(5452),ae=U(300);class pe{constructor(se,ce){this._delegate=se,this.firebase=ce,(0,q._addComponent)(se,new ue.wA("app-compat",()=>this,"PUBLIC")),this.container=se.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(se){this._delegate.automaticDataCollectionEnabled=se}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(se=>{this._delegate.checkDestroyed(),se()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,q.deleteApp)(this._delegate)))}_getService(se,ce=q._DEFAULT_ENTRY_NAME){var Ge;this._delegate.checkDestroyed();const Le=this._delegate.container.getProvider(se);return!Le.isInitialized()&&"EXPLICIT"===(null===(Ge=Le.getComponent())||void 0===Ge?void 0:Ge.instantiationMode)&&Le.initialize(),Le.getImmediate({identifier:ce})}_removeServiceInstance(se,ce=q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(se).clearInstance(ce)}_addComponent(se){(0,q._addComponent)(this._delegate,se)}_addOrOverwriteComponent(se){(0,q._addOrOverwriteComponent)(this._delegate,se)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function $(){const Me=function(Me){const se={},ce={__esModule:!0,initializeApp:function(ht,fe={}){const oe=q.initializeApp(ht,fe);if((0,h.r3)(se,oe.name))return se[oe.name];const be=new Me(oe,ce);return se[oe.name]=be,be},app:Le,registerVersion:q.registerVersion,setLogLevel:q.setLogLevel,onLog:q.onLog,apps:null,SDK_VERSION:q.SDK_VERSION,INTERNAL:{registerComponent:function(ht){const fe=ht.name,oe=fe.replace("-compat","");if(q._registerComponent(ht)&&"PUBLIC"===ht.type){const be=(me=Le())=>{if("function"!=typeof me[oe])throw ie.create("invalid-app-argument",{appName:fe});return me[oe]()};void 0!==ht.serviceProps&&(0,h.ZB)(be,ht.serviceProps),ce[oe]=be,Me.prototype[oe]=function(...me){return this._getService.bind(this,fe).apply(this,ht.multipleInstances?me:[])}}return"PUBLIC"===ht.type?ce[oe]:null},removeApp:function(ht){delete se[ht]},useAsService:function(ht,fe){return"serverAuth"===fe?null:fe},modularAPIs:q}};function Le(ht){if(!(0,h.r3)(se,ht=ht||q._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:ht});return se[ht]}return ce.default=ce,Object.defineProperty(ce,"apps",{get:function(){return Object.keys(se).map(ht=>se[ht])}}),Le.App=Me,ce}(pe);return Me.INTERNAL=Object.assign(Object.assign({},Me.INTERNAL),{createFirebaseNamespace:$,extendNamespace:function(ce){(0,h.ZB)(Me,ce)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Me}(),z=new ae.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Me=self.firebase.SDK_VERSION;Me&&Me.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=B;(0,q.registerVersion)("@firebase/app-compat","0.1.0",undefined);const ye=Ie},5452:(qe,xe,U)=>{"use strict";U.r(xe),U.d(xe,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Wa,_DEFAULT_ENTRY_NAME:()=>Zt,_addComponent:()=>Un,_addOrOverwriteComponent:()=>Fs,_apps:()=>lt,_clearComponents:()=>On,_components:()=>ut,_getProvider:()=>mt,_registerComponent:()=>sn,_removeServiceInstance:()=>Ls,deleteApp:()=>mo,getApp:()=>Wi,getApps:()=>po,initializeApp:()=>qa,onLog:()=>mr,registerVersion:()=>Qe,setLogLevel:()=>Vs});var h=U(8239),ue=U(6034),q=U(300),ae=U(4685);class pe{constructor(at){this.container=at}getPlatformInfoString(){return this.container.getProviders().map(Vt=>{if(function(Dt){const at=Dt.getComponent();return"VERSION"===(null==at?void 0:at.type)}(Vt)){const kt=Vt.getImmediate();return`${kt.library}/${kt.version}`}return null}).filter(Vt=>Vt).join(" ")}}const ie="@firebase/app",$=new q.Yd("@firebase/app"),Zt="[DEFAULT]",Ke={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},lt=new Map,ut=new Map;function Un(Dt,at){try{Dt.container.addComponent(at)}catch(Vt){$.debug(`Component ${at.name} failed to register with FirebaseApp ${Dt.name}`,Vt)}}function Fs(Dt,at){Dt.container.addOrOverwriteComponent(at)}function sn(Dt){const at=Dt.name;if(ut.has(at))return $.debug(`There were multiple attempts to register component ${at}.`),!1;ut.set(at,Dt);for(const Vt of lt.values())Un(Vt,Dt);return!0}function mt(Dt,at){return Dt.container.getProvider(at)}function Ls(Dt,at,Vt=Zt){mt(Dt,at).clearInstance(Vt)}function On(){ut.clear()}const pr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Yo{constructor(at,Vt,kt){this._isDeleted=!1,this._options=Object.assign({},at),this._config=Object.assign({},Vt),this._name=Vt.name,this._automaticDataCollectionEnabled=Vt.automaticDataCollectionEnabled,this._container=kt,this.container.addComponent(new ue.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(at){this.checkDestroyed(),this._automaticDataCollectionEnabled=at}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(at){this._isDeleted=at}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}const Wa="9.0.0";function qa(Dt,at={}){"object"!=typeof at&&(at={name:at});const Vt=Object.assign({name:Zt,automaticDataCollectionEnabled:!1},at),kt=Vt.name;if("string"!=typeof kt||!kt)throw pr.create("bad-app-name",{appName:String(kt)});const _r=lt.get(kt);if(_r){if((0,ae.vZ)(Dt,_r.options)&&(0,ae.vZ)(Vt,_r.config))return _r;throw pr.create("duplicate-app",{appName:kt})}const Xt=new ue.H0(kt);for(const st of ut.values())Xt.addComponent(st);const Pe=new Yo(Dt,Vt,Xt);return lt.set(kt,Pe),Pe}function Wi(Dt=Zt){const at=lt.get(Dt);if(!at)throw pr.create("no-app",{appName:Dt});return at}function po(){return Array.from(lt.values())}function mo(Dt){return zo.apply(this,arguments)}function zo(){return(zo=(0,h.Z)(function*(Dt){const at=Dt.name;lt.has(at)&&(lt.delete(at),yield Promise.all(Dt.container.getProviders().map(Vt=>Vt.delete())),Dt.isDeleted=!0)})).apply(this,arguments)}function Qe(Dt,at,Vt){var kt;let _r=null!==(kt=Ke[Dt])&&void 0!==kt?kt:Dt;Vt&&(_r+=`-${Vt}`);const Xt=_r.match(/\s|\//),Pe=at.match(/\s|\//);if(Xt||Pe){const st=[`Unable to register library "${_r}" with version "${at}":`];return Xt&&st.push(`library name "${_r}" contains illegal characters (whitespace or "/")`),Xt&&Pe&&st.push("and"),Pe&&st.push(`version name "${at}" contains illegal characters (whitespace or "/")`),void $.warn(st.join(" "))}sn(new ue.wA(`${_r}-version`,()=>({library:_r,version:at}),"VERSION"))}function mr(Dt,at){if(null!==Dt&&"function"!=typeof Dt)throw pr.create("invalid-log-argument");(0,q.Am)(Dt,at)}function Vs(Dt){(0,q.Ub)(Dt)}sn(new ue.wA("platform-logger",at=>new pe(at),"PRIVATE")),Qe(ie,"0.7.0",undefined),Qe("fire-js","")},6034:(qe,xe,U)=>{"use strict";U.d(xe,{wA:()=>q,H0:()=>J,zt:()=>pe});var h=U(4762),ue=U(4685),q=function(){function $(B,z,G){this.name=B,this.instanceFactory=z,this.type=G,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return $.prototype.setInstantiationMode=function(B){return this.instantiationMode=B,this},$.prototype.setMultipleInstances=function(B){return this.multipleInstances=B,this},$.prototype.setServiceProps=function(B){return this.serviceProps=B,this},$.prototype.setInstanceCreatedCallback=function(B){return this.onInstanceCreated=B,this},$}(),ae="[DEFAULT]",pe=function(){function $(B,z){this.name=B,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return $.prototype.get=function(B){var z=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(z)){var G=new ue.BH;if(this.instancesDeferred.set(z,G),this.isInitialized(z)||this.shouldAutoInitialize())try{var K=this.getOrInitializeService({instanceIdentifier:z});K&&G.resolve(K)}catch(Ce){}}return this.instancesDeferred.get(z).promise},$.prototype.getImmediate=function(B){var z,G=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),K=null!==(z=null==B?void 0:B.optional)&&void 0!==z&&z;if(!this.isInitialized(G)&&!this.shouldAutoInitialize()){if(K)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:G})}catch(Ce){if(K)return null;throw Ce}},$.prototype.getComponent=function(){return this.component},$.prototype.setComponent=function(B){var z,G;if(B.name!==this.name)throw Error("Mismatching Component "+B.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=B,this.shouldAutoInitialize()){if(function($){return"EAGER"===$.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(Ge){}try{for(var K=(0,h.XA)(this.instancesDeferred.entries()),Ce=K.next();!Ce.done;Ce=K.next()){var Ie=(0,h.CR)(Ce.value,2),Me=Ie[1],se=this.normalizeInstanceIdentifier(Ie[0]);try{var ce=this.getOrInitializeService({instanceIdentifier:se});Me.resolve(ce)}catch(Ge){}}}catch(Ge){z={error:Ge}}finally{try{Ce&&!Ce.done&&(G=K.return)&&G.call(K)}finally{if(z)throw z.error}}}},$.prototype.clearInstance=function(B){void 0===B&&(B=ae),this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)},$.prototype.delete=function(){return(0,h.mG)(this,void 0,void 0,function(){var B;return(0,h.Jh)(this,function(z){switch(z.label){case 0:return B=Array.from(this.instances.values()),[4,Promise.all((0,h.ev)((0,h.ev)([],(0,h.CR)(B.filter(function(G){return"INTERNAL"in G}).map(function(G){return G.INTERNAL.delete()}))),(0,h.CR)(B.filter(function(G){return"_delete"in G}).map(function(G){return G._delete()}))))];case 1:return z.sent(),[2]}})})},$.prototype.isComponentSet=function(){return null!=this.component},$.prototype.isInitialized=function(B){return void 0===B&&(B=ae),this.instances.has(B)},$.prototype.getOptions=function(B){return void 0===B&&(B=ae),this.instancesOptions.get(B)||{}},$.prototype.initialize=function(B){var z,G;void 0===B&&(B={});var K=B.options,Ce=void 0===K?{}:K,Ie=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Ie))throw Error(this.name+"("+Ie+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var ye=this.getOrInitializeService({instanceIdentifier:Ie,options:Ce});try{for(var Me=(0,h.XA)(this.instancesDeferred.entries()),se=Me.next();!se.done;se=Me.next()){var ce=(0,h.CR)(se.value,2),Le=ce[1];Ie===this.normalizeInstanceIdentifier(ce[0])&&Le.resolve(ye)}}catch(At){z={error:At}}finally{try{se&&!se.done&&(G=Me.return)&&G.call(Me)}finally{if(z)throw z.error}}return ye},$.prototype.onInit=function(B,z){var G,K=this.normalizeInstanceIdentifier(z),Ce=null!==(G=this.onInitCallbacks.get(K))&&void 0!==G?G:new Set;Ce.add(B),this.onInitCallbacks.set(K,Ce);var Ie=this.instances.get(K);return Ie&&B(Ie,K),function(){Ce.delete(B)}},$.prototype.invokeOnInitCallbacks=function(B,z){var G,K,Ce=this.onInitCallbacks.get(z);if(Ce)try{for(var Ie=(0,h.XA)(Ce),ye=Ie.next();!ye.done;ye=Ie.next()){var Me=ye.value;try{Me(B,z)}catch(se){}}}catch(se){G={error:se}}finally{try{ye&&!ye.done&&(K=Ie.return)&&K.call(Ie)}finally{if(G)throw G.error}}},$.prototype.getOrInitializeService=function(B){var z=B.instanceIdentifier,G=B.options,K=void 0===G?{}:G,Ce=this.instances.get(z);if(!Ce&&this.component&&(Ce=this.component.instanceFactory(this.container,{instanceIdentifier:X(z),options:K}),this.instances.set(z,Ce),this.instancesOptions.set(z,K),this.invokeOnInitCallbacks(Ce,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,Ce)}catch(Ie){}return Ce||null},$.prototype.normalizeInstanceIdentifier=function(B){return void 0===B&&(B=ae),this.component?this.component.multipleInstances?B:ae:B},$.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},$}();function X($){return $===ae?void 0:$}var J=function(){function $(B){this.name=B,this.providers=new Map}return $.prototype.addComponent=function(B){var z=this.getProvider(B.name);if(z.isComponentSet())throw new Error("Component "+B.name+" has already been registered with "+this.name);z.setComponent(B)},$.prototype.addOrOverwriteComponent=function(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)},$.prototype.getProvider=function(B){if(this.providers.has(B))return this.providers.get(B);var z=new pe(B,this);return this.providers.set(B,z),z},$.prototype.getProviders=function(){return Array.from(this.providers.values())},$}()},300:(qe,xe,U)=>{"use strict";function h(){for(var G=0,K=0,Ce=arguments.length;K<Ce;K++)G+=arguments[K].length;var Ie=Array(G),ye=0;for(K=0;K<Ce;K++)for(var Me=arguments[K],se=0,ce=Me.length;se<ce;se++,ye++)Ie[ye]=Me[se];return Ie}U.d(xe,{in:()=>ae,Yd:()=>$,Ub:()=>B,Am:()=>z});var ue,q=[],ae=(()=>{return(G=ae||(ae={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",ae;var G})(),pe={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},X=ae.INFO,ie=((ue={})[ae.DEBUG]="log",ue[ae.VERBOSE]="log",ue[ae.INFO]="info",ue[ae.WARN]="warn",ue[ae.ERROR]="error",ue),J=function(G,K){for(var Ce=[],Ie=2;Ie<arguments.length;Ie++)Ce[Ie-2]=arguments[Ie];if(!(K<G.logLevel)){var ye=(new Date).toISOString(),Me=ie[K];if(!Me)throw new Error("Attempted to log a message with an invalid logType (value: "+K+")");console[Me].apply(console,h(["["+ye+"]  "+G.name+":"],Ce))}},$=function(){function G(K){this.name=K,this._logLevel=X,this._logHandler=J,this._userLogHandler=null,q.push(this)}return Object.defineProperty(G.prototype,"logLevel",{get:function(){return this._logLevel},set:function(K){if(!(K in ae))throw new TypeError('Invalid value "'+K+'" assigned to `logLevel`');this._logLevel=K},enumerable:!1,configurable:!0}),G.prototype.setLogLevel=function(K){this._logLevel="string"==typeof K?pe[K]:K},Object.defineProperty(G.prototype,"logHandler",{get:function(){return this._logHandler},set:function(K){if("function"!=typeof K)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=K},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(K){this._userLogHandler=K},enumerable:!1,configurable:!0}),G.prototype.debug=function(){for(var K=[],Ce=0;Ce<arguments.length;Ce++)K[Ce]=arguments[Ce];this._userLogHandler&&this._userLogHandler.apply(this,h([this,ae.DEBUG],K)),this._logHandler.apply(this,h([this,ae.DEBUG],K))},G.prototype.log=function(){for(var K=[],Ce=0;Ce<arguments.length;Ce++)K[Ce]=arguments[Ce];this._userLogHandler&&this._userLogHandler.apply(this,h([this,ae.VERBOSE],K)),this._logHandler.apply(this,h([this,ae.VERBOSE],K))},G.prototype.info=function(){for(var K=[],Ce=0;Ce<arguments.length;Ce++)K[Ce]=arguments[Ce];this._userLogHandler&&this._userLogHandler.apply(this,h([this,ae.INFO],K)),this._logHandler.apply(this,h([this,ae.INFO],K))},G.prototype.warn=function(){for(var K=[],Ce=0;Ce<arguments.length;Ce++)K[Ce]=arguments[Ce];this._userLogHandler&&this._userLogHandler.apply(this,h([this,ae.WARN],K)),this._logHandler.apply(this,h([this,ae.WARN],K))},G.prototype.error=function(){for(var K=[],Ce=0;Ce<arguments.length;Ce++)K[Ce]=arguments[Ce];this._userLogHandler&&this._userLogHandler.apply(this,h([this,ae.ERROR],K)),this._logHandler.apply(this,h([this,ae.ERROR],K))},G}();function B(G){q.forEach(function(K){K.setLogLevel(G)})}function z(G,K){for(var Ce=function(se){var ce=null;K&&K.level&&(ce=pe[K.level]),se.userLogHandler=null===G?null:function(Ge,Le){for(var rt=[],At=2;At<arguments.length;At++)rt[At-2]=arguments[At];var ve=rt.map(function(It){if(null==It)return null;if("string"==typeof It)return It;if("number"==typeof It||"boolean"==typeof It)return It.toString();if(It instanceof Error)return It.message;try{return JSON.stringify(It)}catch(ht){return null}}).filter(function(It){return It}).join(" ");Le>=(null!=ce?ce:Ge.logLevel)&&G({level:ae[Le].toLowerCase(),message:ve,args:rt,type:Ge.name})}},Ie=0,ye=q;Ie<ye.length;Ie++)Ce(ye[Ie])}},4685:(qe,xe,U)=>{"use strict";U.d(xe,{BH:()=>Ce,LL:()=>Be,ZR:()=>te,gQ:()=>mo,hu:()=>q,g5:()=>ae,US:()=>ie,tV:()=>B,h$:()=>J,r3:()=>Ls,Sg:()=>Ie,ne:()=>zo,p$:()=>z,vZ:()=>Yo,ZB:()=>G,gK:()=>at,pd:()=>po,m9:()=>Kt,z$:()=>ye,GJ:()=>mt,jU:()=>ce,ru:()=>Ge,d:()=>rt,xb:()=>gr,w1:()=>At,hl:()=>fe,uI:()=>Me,UG:()=>se,Yr:()=>It,b$:()=>Le,G6:()=>ht,Mn:()=>ve,w9:()=>sn,cI:()=>Ke,UI:()=>pr,xO:()=>qa,zd:()=>Wi,DV:()=>On,ug:()=>Pe,dS:()=>Xt,Pz:()=>lt,Dv:()=>Dt,Wj:()=>kt,lb:()=>_r});var h=U(4762),q=function(W,H){if(!W)throw ae(H)},ae=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},pe=function(W){for(var H=[],re=0,he=0;he<W.length;he++){var ne=W.charCodeAt(he);ne<128?H[re++]=ne:ne<2048?(H[re++]=ne>>6|192,H[re++]=63&ne|128):55296==(64512&ne)&&he+1<W.length&&56320==(64512&W.charCodeAt(he+1))?(ne=65536+((1023&ne)<<10)+(1023&W.charCodeAt(++he)),H[re++]=ne>>18|240,H[re++]=ne>>12&63|128,H[re++]=ne>>6&63|128,H[re++]=63&ne|128):(H[re++]=ne>>12|224,H[re++]=ne>>6&63|128,H[re++]=63&ne|128)}return H},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(W,H){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var re=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,he=[],ne=0;ne<W.length;ne+=3){var Oe=W[ne],Ye=ne+1<W.length,Bt=Ye?W[ne+1]:0,$t=ne+2<W.length,St=$t?W[ne+2]:0,Vr=(15&Bt)<<2|St>>6,Bs=63&St;$t||(Bs=64,Ye||(Vr=64)),he.push(re[Oe>>2],re[(3&Oe)<<4|Bt>>4],re[Vr],re[Bs])}return he.join("")},encodeString:function(W,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(W):this.encodeByteArray(pe(W),H)},decodeString:function(W,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(W):function(W){for(var H=[],re=0,he=0;re<W.length;){var ne=W[re++];if(ne<128)H[he++]=String.fromCharCode(ne);else if(ne>191&&ne<224){var Oe=W[re++];H[he++]=String.fromCharCode((31&ne)<<6|63&Oe)}else if(ne>239&&ne<365){var $t=((7&ne)<<18|(63&(Oe=W[re++]))<<12|(63&(Ye=W[re++]))<<6|63&W[re++])-65536;H[he++]=String.fromCharCode(55296+($t>>10)),H[he++]=String.fromCharCode(56320+(1023&$t))}else{Oe=W[re++];var Ye=W[re++];H[he++]=String.fromCharCode((15&ne)<<12|(63&Oe)<<6|63&Ye)}}return H.join("")}(this.decodeStringToByteArray(W,H))},decodeStringToByteArray:function(W,H){this.init_();for(var re=H?this.charToByteMapWebSafe_:this.charToByteMap_,he=[],ne=0;ne<W.length;){var Oe=re[W.charAt(ne++)],Bt=ne<W.length?re[W.charAt(ne)]:0,St=++ne<W.length?re[W.charAt(ne)]:64,Lr=++ne<W.length?re[W.charAt(ne)]:64;if(++ne,null==Oe||null==Bt||null==St||null==Lr)throw Error();he.push(Oe<<2|Bt>>4),64!==St&&(he.push(Bt<<4&240|St>>2),64!==Lr&&he.push(St<<6&192|Lr))}return he},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},J=function(W){var H=pe(W);return ie.encodeByteArray(H,!0)},$=function(W){return J(W).replace(/\./g,"")},B=function(W){try{return ie.decodeString(W,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function z(W){return G(void 0,W)}function G(W,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return H}for(var he in H)!H.hasOwnProperty(he)||!K(he)||(W[he]=G(W[he],H[he]));return W}function K(W){return"__proto__"!==W}var Ce=function(){function W(){var H=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(re,he){H.resolve=re,H.reject=he})}return W.prototype.wrapCallback=function(H){var re=this;return function(he,ne){he?re.reject(he):re.resolve(ne),"function"==typeof H&&(re.promise.catch(function(){}),1===H.length?H(he):H(he,ne))}},W}();function Ie(W,H){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var he=H||"demo-project",ne=W.iat||0,Oe=W.sub||W.user_id;if(!Oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var Ye=(0,h.pi)({iss:"https://securetoken.google.com/"+he,aud:he,iat:ne,exp:ne+3600,auth_time:ne,sub:Oe,user_id:Oe,firebase:{sign_in_provider:"custom",identities:{}}},W);return[$(JSON.stringify({alg:"none",type:"JWT"})),$(JSON.stringify(Ye)),""].join(".")}function ye(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Me(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ye())}function se(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W){return!1}}function ce(){return"object"==typeof self&&self.self===self}function Ge(){var W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function Le(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rt(){return ye().indexOf("Electron/")>=0}function At(){var W=ye();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function ve(){return ye().indexOf("MSAppHost/")>=0}function It(){return!1}function ht(){return!se()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){return"indexedDB"in self&&null!=indexedDB}var te=function(W){function H(re,he,ne){var Oe=W.call(this,he)||this;return Oe.code=re,Oe.customData=ne,Oe.name="FirebaseError",Object.setPrototypeOf(Oe,H.prototype),Error.captureStackTrace&&Error.captureStackTrace(Oe,Be.prototype.create),Oe}return(0,h.ZT)(H,W),H}(Error),Be=function(){function W(H,re,he){this.service=H,this.serviceName=re,this.errors=he}return W.prototype.create=function(H){for(var re=[],he=1;he<arguments.length;he++)re[he-1]=arguments[he];var ne=re[0]||{},Oe=this.service+"/"+H,Ye=this.errors[H],Bt=Ye?it(Ye,ne):"Error",$t=this.serviceName+": "+Bt+" ("+Oe+").",St=new te(Oe,$t,ne);return St},W}();function it(W,H){return W.replace(Zt,function(re,he){var ne=H[he];return null!=ne?String(ne):"<"+he+"?>"})}var Zt=/\{\$([^}]+)}/g;function Ke(W){return JSON.parse(W)}function lt(W){return JSON.stringify(W)}var ut=function(W){var H={},re={},he={},ne="";try{var Oe=W.split(".");H=Ke(B(Oe[0])||""),re=Ke(B(Oe[1])||""),ne=Oe[2],he=re.d||{},delete re.d}catch(Ye){}return{header:H,claims:re,data:he,signature:ne}},sn=function(W){var re=ut(W).claims;return!!re&&"object"==typeof re&&re.hasOwnProperty("iat")},mt=function(W){var H=ut(W).claims;return"object"==typeof H&&!0===H.admin};function Ls(W,H){return Object.prototype.hasOwnProperty.call(W,H)}function On(W,H){if(Object.prototype.hasOwnProperty.call(W,H))return W[H]}function gr(W){for(var H in W)if(Object.prototype.hasOwnProperty.call(W,H))return!1;return!0}function pr(W,H,re){var he={};for(var ne in W)Object.prototype.hasOwnProperty.call(W,ne)&&(he[ne]=H.call(re,W[ne],ne,W));return he}function Yo(W,H){if(W===H)return!0;for(var re=Object.keys(W),he=Object.keys(H),ne=0,Oe=re;ne<Oe.length;ne++){if(!he.includes(Ye=Oe[ne]))return!1;var Bt=W[Ye],$t=H[Ye];if(Wa(Bt)&&Wa($t)){if(!Yo(Bt,$t))return!1}else if(Bt!==$t)return!1}for(var St=0,kn=he;St<kn.length;St++){var Ye;if(!re.includes(Ye=kn[St]))return!1}return!0}function Wa(W){return null!==W&&"object"==typeof W}function qa(W){for(var H=[],re=function($t,St){Array.isArray(St)?St.forEach(function(kn){H.push(encodeURIComponent($t)+"="+encodeURIComponent(kn))}):H.push(encodeURIComponent($t)+"="+encodeURIComponent(St))},he=0,ne=Object.entries(W);he<ne.length;he++){var Oe=ne[he];re(Oe[0],Oe[1])}return H.length?"&"+H.join("&"):""}function Wi(W){var H={};return W.replace(/^\?/,"").split("&").forEach(function(he){if(he){var ne=he.split("="),Ye=ne[1];H[decodeURIComponent(ne[0])]=decodeURIComponent(Ye)}}),H}function po(W){var H=W.indexOf("?");if(!H)return"";var re=W.indexOf("#",H);return W.substring(H,re>0?re:void 0)}var mo=function(){function W(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}return W.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},W.prototype.compress_=function(H,re){re||(re=0);var he=this.W_;if("string"==typeof H)for(var ne=0;ne<16;ne++)he[ne]=H.charCodeAt(re)<<24|H.charCodeAt(re+1)<<16|H.charCodeAt(re+2)<<8|H.charCodeAt(re+3),re+=4;else for(ne=0;ne<16;ne++)he[ne]=H[re]<<24|H[re+1]<<16|H[re+2]<<8|H[re+3],re+=4;for(ne=16;ne<80;ne++)he[ne]=4294967295&((Oe=he[ne-3]^he[ne-8]^he[ne-14]^he[ne-16])<<1|Oe>>>31);var Lr,Vr,Ye=this.chain_[0],Bt=this.chain_[1],$t=this.chain_[2],St=this.chain_[3],kn=this.chain_[4];for(ne=0;ne<80;ne++){ne<40?ne<20?(Lr=St^Bt&($t^St),Vr=1518500249):(Lr=Bt^$t^St,Vr=1859775393):ne<60?(Lr=Bt&$t|St&(Bt|$t),Vr=2400959708):(Lr=Bt^$t^St,Vr=3395469782);var Oe=(Ye<<5|Ye>>>27)+Lr+kn+Vr+he[ne]&4294967295;kn=St,St=$t,$t=4294967295&(Bt<<30|Bt>>>2),Bt=Ye,Ye=Oe}this.chain_[0]=this.chain_[0]+Ye&4294967295,this.chain_[1]=this.chain_[1]+Bt&4294967295,this.chain_[2]=this.chain_[2]+$t&4294967295,this.chain_[3]=this.chain_[3]+St&4294967295,this.chain_[4]=this.chain_[4]+kn&4294967295},W.prototype.update=function(H,re){if(null!=H){void 0===re&&(re=H.length);for(var he=re-this.blockSize,ne=0,Oe=this.buf_,Ye=this.inbuf_;ne<re;){if(0===Ye)for(;ne<=he;)this.compress_(H,ne),ne+=this.blockSize;if("string"==typeof H){for(;ne<re;)if(Oe[Ye]=H.charCodeAt(ne),++ne,++Ye===this.blockSize){this.compress_(Oe),Ye=0;break}}else for(;ne<re;)if(Oe[Ye]=H[ne],++ne,++Ye===this.blockSize){this.compress_(Oe),Ye=0;break}}this.inbuf_=Ye,this.total_+=re}},W.prototype.digest=function(){var H=[],re=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var he=this.blockSize-1;he>=56;he--)this.buf_[he]=255&re,re/=256;this.compress_(this.buf_);var ne=0;for(he=0;he<5;he++)for(var Oe=24;Oe>=0;Oe-=8)H[ne]=this.chain_[he]>>Oe&255,++ne;return H},W}();function zo(W,H){var re=new Qe(W,H);return re.subscribe.bind(re)}var Qe=function(){function W(H,re){var he=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=re,this.task.then(function(){H(he)}).catch(function(ne){he.error(ne)})}return W.prototype.next=function(H){this.forEachObserver(function(re){re.next(H)})},W.prototype.error=function(H){this.forEachObserver(function(re){re.error(H)}),this.close(H)},W.prototype.complete=function(){this.forEachObserver(function(H){H.complete()}),this.close()},W.prototype.subscribe=function(H,re,he){var Oe,ne=this;if(void 0===H&&void 0===re&&void 0===he)throw new Error("Missing Observer.");void 0===(Oe=function(W,H){if("object"!=typeof W||null===W)return!1;for(var re=0,he=["next","error","complete"];re<he.length;re++){var ne=he[re];if(ne in W&&"function"==typeof W[ne])return!0}return!1}(H)?H:{next:H,error:re,complete:he}).next&&(Oe.next=sr),void 0===Oe.error&&(Oe.error=sr),void 0===Oe.complete&&(Oe.complete=sr);var Ye=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{ne.finalError?Oe.error(ne.finalError):Oe.complete()}catch(Bt){}}),this.observers.push(Oe),Ye},W.prototype.unsubscribeOne=function(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},W.prototype.forEachObserver=function(H){if(!this.finalized)for(var re=0;re<this.observers.length;re++)this.sendOne(re,H)},W.prototype.sendOne=function(H,re){var he=this;this.task.then(function(){if(void 0!==he.observers&&void 0!==he.observers[H])try{re(he.observers[H])}catch(ne){"undefined"!=typeof console&&console.error&&console.error(ne)}})},W.prototype.close=function(H){var re=this;this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(function(){re.observers=void 0,re.onNoObservers=void 0}))},W}();function sr(){}var Dt=function(W,H,re,he){var ne;if(he<H?ne="at least "+H:he>re&&(ne=0===re?"none":"no more than "+re),ne)throw new Error(W+" failed: Was called with "+he+(1===he?" argument.":" arguments.")+" Expects "+ne+".")};function at(W,H){return W+" failed: "+H+" argument "}function kt(W,H,re,he){if((!he||re)&&"function"!=typeof re)throw new Error(at(W,H)+"must be a valid function.")}function _r(W,H,re,he){if((!he||re)&&("object"!=typeof re||null===re))throw new Error(at(W,H)+"must be a valid context object.")}var Xt=function(W){for(var H=[],re=0,he=0;he<W.length;he++){var ne=W.charCodeAt(he);if(ne>=55296&&ne<=56319){var Oe=ne-55296;he++,q(he<W.length,"Surrogate pair missing trail surrogate."),ne=65536+(Oe<<10)+(W.charCodeAt(he)-56320)}ne<128?H[re++]=ne:ne<2048?(H[re++]=ne>>6|192,H[re++]=63&ne|128):ne<65536?(H[re++]=ne>>12|224,H[re++]=ne>>6&63|128,H[re++]=63&ne|128):(H[re++]=ne>>18|240,H[re++]=ne>>12&63|128,H[re++]=ne>>6&63|128,H[re++]=63&ne|128)}return H},Pe=function(W){for(var H=0,re=0;re<W.length;re++){var he=W.charCodeAt(re);he<128?H++:he<2048?H+=2:he>=55296&&he<=56319?(H+=4,re++):H+=3}return H};function Kt(W){return W&&W._delegate?W._delegate:W}},6300:(qe,xe,U)=>{"use strict";U.r(xe);var h=U(8239),ue=U(4486),q=U(4685),ae=U(5452),pe=U(4762),X=U(300),ie=U(6034);const Ie=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Me=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ce=new X.Yd("@firebase/auth");function Ge(D,...v){ce.logLevel<=X.in.ERROR&&ce.error(`Auth (${ae.SDK_VERSION}): ${D}`,...v)}function Le(D,...v){throw At(D,...v)}function rt(D,...v){return At(D,...v)}function At(D,...v){if("string"!=typeof D){const w=v[0],x=[...v.slice(1)];return x[0]&&(x[0].appName=D.name),D._errorFactory.create(w,...x)}return Me.create(D,...v)}function ve(D,v,...w){if(!D)throw At(v,...w)}function It(D){const v="INTERNAL ASSERTION FAILED: "+D;throw Ge(v),new Error(v)}function ht(D,v){D||It(v)}const fe=new Map;function oe(D){ht(D instanceof Function,"Expected a class definition");let v=fe.get(D);return v?(ht(v instanceof D,"Instance stored in cache mismatched with class"),v):(v=new D,fe.set(D,v),v)}function ge(){var D;return"undefined"!=typeof self&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function te(){return"http:"===Be()||"https:"===Be()}function Be(){var D;return"undefined"!=typeof self&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class Ke{constructor(v,w){this.shortDelay=v,this.longDelay=w,ht(w>v,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(te()||(0,q.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function lt(D,v){ht(D.emulator,"Emulator should always be set here");const{url:w}=D.emulator;return v?`${w}${v.startsWith("/")?v.slice(1):v}`:w}class ut{static initialize(v,w,x){this.fetchImpl=v,w&&(this.headersImpl=w),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void It("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void It("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void It("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Un={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"},Fs=new Ke(3e4,6e4);function sn(D,v){return D.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:D.tenantId}):v}function mt(D,v,w,x){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,h.Z)(function*(D,v,w,x,R={}){return On(D,R,()=>{let P={},Q={};x&&("GET"===v?Q=x:P={body:JSON.stringify(x)});const we=(0,q.xO)(Object.assign({key:D.config.apiKey},Q)).slice(1),Ve=new(ut.headers());return Ve.set("Content-Type","application/json"),Ve.set("X-Client-Version",D._getSdkClientVersion()),D.languageCode&&Ve.set("X-Firebase-Locale",D.languageCode),ut.fetch()(Wa(D,D.config.apiHost,w,we),Object.assign({method:v,headers:Ve,referrerPolicy:"no-referrer"},P))})})).apply(this,arguments)}function On(D,v,w){return gr.apply(this,arguments)}function gr(){return(gr=(0,h.Z)(function*(D,v,w){D._canInitEmulator=!1;const x=Object.assign(Object.assign({},Un),v);try{const R=new qa(D),P=yield Promise.race([w(),R.promise]);R.clearNetworkTimeout();const Q=yield P.json();if("needConfirmation"in Q)throw Wi(D,"account-exists-with-different-credential",Q);if(P.ok&&!("errorMessage"in Q))return Q;{const Ve=(P.ok?Q.errorMessage:Q.error.message).split(" : ")[0];if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Wi(D,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Ve)throw Wi(D,"email-already-in-use",Q);Le(D,x[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-"))}}catch(R){if(R instanceof q.ZR)throw R;Le(D,"network-request-failed")}})).apply(this,arguments)}function pr(D,v,w,x){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,h.Z)(function*(D,v,w,x,R={}){const P=yield mt(D,v,w,x,R);return"mfaPendingCredential"in P&&Le(D,"multi-factor-auth-required",{serverResponse:P}),P})).apply(this,arguments)}function Wa(D,v,w,x){const R=`${v}${w}?${x}`;return D.config.emulator?lt(D.config,R):`${D.config.apiScheme}://${R}`}class qa{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((w,x)=>{this.timer=setTimeout(()=>x(rt(this.auth,"timeout")),Fs.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wi(D,v,w){const x={appName:D.name};w.email&&(x.email=w.email),w.phoneNumber&&(x.phoneNumber=w.phoneNumber);const R=rt(D,v,x);return R.customData._tokenResponse=w,R}function mo(){return(mo=(0,h.Z)(function*(D,v){return mt(D,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function zo(D,v){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,h.Z)(function*(D,v){return mt(D,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function mr(D,v){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,h.Z)(function*(D,v){return mt(D,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function sr(D){if(D)try{const v=new Date(Number(D));if(!isNaN(v.getTime()))return v.toUTCString()}catch(v){}}function Vt(){return(Vt=(0,h.Z)(function*(D,v=!1){const w=(0,q.m9)(D),x=yield w.getIdToken(v),R=_r(x);ve(R&&R.exp&&R.auth_time&&R.iat,w.auth,"internal-error");const P="object"==typeof R.firebase?R.firebase:void 0,Q=null==P?void 0:P.sign_in_provider;return{claims:R,token:x,authTime:sr(kt(R.auth_time)),issuedAtTime:sr(kt(R.iat)),expirationTime:sr(kt(R.exp)),signInProvider:Q||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function kt(D){return 1e3*Number(D)}function _r(D){const[v,w,x]=D.split(".");if(void 0===v||void 0===w||void 0===x)return Ge("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,q.tV)(w);return R?JSON.parse(R):(Ge("Failed to decode base64 JWT payload"),null)}catch(R){return Ge("Caught error parsing JWT payload as JSON",R),null}}function Pe(D,v){return st.apply(this,arguments)}function st(){return(st=(0,h.Z)(function*(D,v,w=!1){if(w)return v;try{return yield v}catch(x){throw x instanceof q.ZR&&jc(x)&&D.auth.currentUser===D&&(yield D.auth.signOut()),x}})).apply(this,arguments)}function jc({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}class Ya{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var w;if(v){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const R=(null!==(w=this.user.stsTokenManager.expirationTime)&&void 0!==w?w:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(v=!1){var w=this;if(!this.isRunning)return;const x=this.getInterval(v);this.timerId=setTimeout((0,h.Z)(function*(){yield w.iteration()}),x)}iteration(){var v=this;return(0,h.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===w.code&&v.schedule(!0))}v.schedule()})()}}class Oi{constructor(v,w){this.createdAt=v,this.lastLoginAt=w,this._initializeTime()}_initializeTime(){this.lastSignInTime=sr(this.lastLoginAt),this.creationTime=sr(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zt(D){return vi.apply(this,arguments)}function vi(){return(vi=(0,h.Z)(function*(D){var v;const w=D.auth,x=yield D.getIdToken(),R=yield Pe(D,mr(w,{idToken:x}));ve(null==R?void 0:R.users.length,w,"internal-error");const P=R.users[0];D._notifyReloadListener(P);const Q=(null===(v=P.providerUserInfo)||void 0===v?void 0:v.length)?H(P.providerUserInfo):[],we=W(D.providerData,Q),Ze=!!D.isAnonymous&&!(D.email&&P.passwordHash||(null==we?void 0:we.length)),ot={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:we,metadata:new Oi(P.createdAt,P.lastLoginAt),isAnonymous:Ze};Object.assign(D,ot)})).apply(this,arguments)}function Kt(){return(Kt=(0,h.Z)(function*(D){const v=(0,q.m9)(D);yield zt(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function W(D,v){return[...D.filter(x=>!v.some(R=>R.providerId===x.providerId)),...v]}function H(D){return D.map(v=>{var{providerId:w}=v,x=(0,pe._T)(v,["providerId"]);return{providerId:w,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}function he(){return(he=(0,h.Z)(function*(D,v){const w=yield On(D,{},()=>{const x=(0,q.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:R,apiKey:P}=D.config,Q=Wa(D,R,"/v1/token",`key=${P}`);return ut.fetch()(Q,{method:"POST",headers:{"X-Client-Version":D._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:x})});return{accessToken:w.access_token,expiresIn:w.expires_in,refreshToken:w.refresh_token}})).apply(this,arguments)}class ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){ve(v.idToken,"internal-error"),ve(void 0!==v.idToken,"internal-error"),ve(void 0!==v.refreshToken,"internal-error");const w="expiresIn"in v&&void 0!==v.expiresIn?Number(v.expiresIn):function(D){const v=_r(D);return ve(v,"internal-error"),ve(void 0!==v.exp,"internal-error"),ve(void 0!==v.iat,"internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,w)}getToken(v,w=!1){var x=this;return(0,h.Z)(function*(){return ve(!x.accessToken||x.refreshToken,v,"user-token-expired"),w||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(v,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,w){var x=this;return(0,h.Z)(function*(){const{accessToken:R,refreshToken:P,expiresIn:Q}=yield function(D,v){return he.apply(this,arguments)}(v,w);x.updateTokensAndExpiration(R,P,Number(Q))})()}updateTokensAndExpiration(v,w,x){this.refreshToken=w||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(v,w){const{refreshToken:x,accessToken:R,expirationTime:P}=w,Q=new ne;return x&&(ve("string"==typeof x,"internal-error",{appName:v}),Q.refreshToken=x),R&&(ve("string"==typeof R,"internal-error",{appName:v}),Q.accessToken=R),P&&(ve("number"==typeof P,"internal-error",{appName:v}),Q.expirationTime=P),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new ne,this.toJSON())}_performRefresh(){return It("not implemented")}}function Oe(D,v){ve("string"==typeof D||void 0===D,"internal-error",{appName:v})}class Ye{constructor(v){var{uid:w,auth:x,stsTokenManager:R}=v,P=(0,pe._T)(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Ya(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=w,this.auth=x,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.metadata=new Oi(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(v){var w=this;return(0,h.Z)(function*(){const x=yield Pe(w,w.stsTokenManager.getToken(w.auth,v));return ve(x,w.auth,"internal-error"),w.accessToken!==x&&(w.accessToken=x,yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)),x})()}getIdTokenResult(v){return function(D){return Vt.apply(this,arguments)}(this,v)}reload(){return function(D){return Kt.apply(this,arguments)}(this)}_assign(v){this!==v&&(ve(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(w=>Object.assign({},w)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){return new Ye(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(v){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,w=!1){var x=this;return(0,h.Z)(function*(){let R=!1;v.idToken&&v.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(v),R=!0),w&&(yield zt(x)),yield x.auth._persistUserIfCurrent(x),R&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var v=this;return(0,h.Z)(function*(){const w=yield v.getIdToken();return yield Pe(v,function(D,v){return mo.apply(this,arguments)}(v.auth,{idToken:w})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,w){var x,R,P,Q,we,Ve,We,Ze;const ot=null!==(x=w.displayName)&&void 0!==x?x:void 0,Qn=null!==(R=w.email)&&void 0!==R?R:void 0,ri=null!==(P=w.phoneNumber)&&void 0!==P?P:void 0,Zu=null!==(Q=w.photoURL)&&void 0!==Q?Q:void 0,Ku=null!==(we=w.tenantId)&&void 0!==we?we:void 0,Fd=null!==(Ve=w._redirectEventId)&&void 0!==Ve?Ve:void 0,s_=null!==(We=w.createdAt)&&void 0!==We?We:void 0,Tl=null!==(Ze=w.lastLoginAt)&&void 0!==Ze?Ze:void 0,{uid:vg,emailVerified:ba,isAnonymous:rs,providerData:o_,stsTokenManager:y0}=w;ve(vg&&y0,v,"internal-error");const a_=ne.fromJSON(this.name,y0);ve("string"==typeof vg,v,"internal-error"),Oe(ot,v.name),Oe(Qn,v.name),ve("boolean"==typeof ba,v,"internal-error"),ve("boolean"==typeof rs,v,"internal-error"),Oe(ri,v.name),Oe(Zu,v.name),Oe(Ku,v.name),Oe(Fd,v.name),Oe(s_,v.name),Oe(Tl,v.name);const l_=new Ye({uid:vg,auth:v,email:Qn,emailVerified:ba,displayName:ot,isAnonymous:rs,photoURL:Zu,phoneNumber:ri,tenantId:Ku,stsTokenManager:a_,createdAt:s_,lastLoginAt:Tl});return o_&&Array.isArray(o_)&&(l_.providerData=o_.map(Cs=>Object.assign({},Cs))),Fd&&(l_._redirectEventId=Fd),l_}static _fromIdTokenResponse(v,w,x=!1){return(0,h.Z)(function*(){const R=new ne;R.updateFromServerResponse(w);const P=new Ye({uid:w.localId,auth:v,stsTokenManager:R,isAnonymous:x});return yield zt(P),P})()}}const $t=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(w,x){var R=this;return(0,h.Z)(function*(){R.storage[w]=x})()}_get(w){var x=this;return(0,h.Z)(function*(){const R=x.storage[w];return void 0===R?null:R})()}_remove(w){var x=this;return(0,h.Z)(function*(){delete x.storage[w]})()}_addListener(w,x){}_removeListener(w,x){}}return D.type="NONE",D})();function St(D,v,w){return`firebase:${D}:${v}:${w}`}class kn{constructor(v,w,x){this.persistence=v,this.auth=w,this.userKey=x;const{config:R,name:P}=this.auth;this.fullUserKey=St(this.userKey,R.apiKey,P),this.fullPersistenceKey=St("persistence",R.apiKey,P),this.boundEventHandler=w._onStorageEvent.bind(w),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,h.Z)(function*(){const w=yield v.persistence._get(v.fullUserKey);return w?Ye._fromJSON(v.auth,w):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var w=this;return(0,h.Z)(function*(){if(w.persistence===v)return;const x=yield w.getCurrentUser();return yield w.removeCurrentUser(),w.persistence=v,x?w.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,w,x="authUser"){return(0,h.Z)(function*(){if(!w.length)return new kn(oe($t),v,x);const R=(yield Promise.all(w.map(function(){var We=(0,h.Z)(function*(Ze){if(yield Ze._isAvailable())return Ze});return function(Ze){return We.apply(this,arguments)}}()))).filter(We=>We);let P=R[0]||oe($t);const Q=St(x,v.config.apiKey,v.name);let we=null;for(const We of w)try{const Ze=yield We._get(Q);if(Ze){const ot=Ye._fromJSON(v,Ze);We!==P&&(we=ot),P=We;break}}catch(Ze){}const Ve=R.filter(We=>We._shouldAllowMigration);return P._shouldAllowMigration&&Ve.length?(P=Ve[0],we&&(yield P._set(Q,we.toJSON())),yield Promise.all(w.map(function(){var We=(0,h.Z)(function*(Ze){if(Ze!==P)try{yield Ze._remove(Q)}catch(ot){}});return function(Ze){return We.apply(this,arguments)}}())),new kn(P,v,x)):new kn(P,v,x)})()}}function Lr(D){const v=D.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(wf(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(Vr(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(Hc(v))return"Blackberry";if(Cf(v))return"Webos";if(Bs(v))return"Safari";if((v.includes("chrome/")||za(v))&&!v.includes("edge/"))return"Chrome";if(Za(v))return"Android";{const x=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==x?void 0:x.length))return x[1]}return"Other"}function Vr(D=(0,q.z$)()){return/firefox\//i.test(D)}function Bs(D=(0,q.z$)()){const v=D.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function za(D=(0,q.z$)()){return/crios\//i.test(D)}function wf(D=(0,q.z$)()){return/iemobile/i.test(D)}function Za(D=(0,q.z$)()){return/android/i.test(D)}function Hc(D=(0,q.z$)()){return/blackberry/i.test(D)}function Cf(D=(0,q.z$)()){return/webos/i.test(D)}function Pn(D=(0,q.z$)()){return/iphone|ipad|ipod/i.test(D)}function cm(D=(0,q.z$)()){return Pn(D)||Za(D)||Cf(D)||Hc(D)||/windows phone/i.test(D)||wf(D)}function je(D,v=[]){let w;switch(D){case"Browser":w=Lr((0,q.z$)());break;case"Worker":w=`${Lr((0,q.z$)())}-${D}`;break;default:w=D}const x=v.length?v.join(","):"FirebaseCore-web";return`${w}/JsCore/${ae.SDK_VERSION}/${x}`}class Mt{constructor(v,w){this.app=v,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qr(this),this.idTokenSubscription=new Qr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(v,w){var x=this;return w&&(this._popupRedirectResolver=oe(w)),this._initializationPromise=this.queue((0,h.Z)(function*(){var R;x._deleted||(x.persistenceManager=yield kn.create(x,v),!x._deleted&&((null===(R=x._popupRedirectResolver)||void 0===R?void 0:R._shouldInitProactively)&&(yield x._popupRedirectResolver._initialize(x)),yield x.initializeCurrentUser(w),!x._deleted&&(x._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,h.Z)(function*(){if(v._deleted)return;const w=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||w){if(v.currentUser&&w&&v.currentUser.uid===w.uid)return v._currentUser._assign(w),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(w)}})()}initializeCurrentUser(v){var w=this;return(0,h.Z)(function*(){var x;let R=yield w.assertedPersistence.getCurrentUser();if(v&&w.config.authDomain){yield w.getOrInitRedirectPersistenceManager();const P=null===(x=w.redirectUser)||void 0===x?void 0:x._redirectEventId,Q=null==R?void 0:R._redirectEventId,we=yield w.tryRedirectSignIn(v);(!P||P===Q)&&(null==we?void 0:we.user)&&(R=we.user)}return R?R._redirectEventId?(ve(w._popupRedirectResolver,w,"argument-error"),yield w.getOrInitRedirectPersistenceManager(),w.redirectUser&&w.redirectUser._redirectEventId===R._redirectEventId?w.directlySetCurrentUser(R):w.reloadAndSetCurrentUserOrClear(R)):w.reloadAndSetCurrentUserOrClear(R):w.directlySetCurrentUser(null)})()}tryRedirectSignIn(v){var w=this;return(0,h.Z)(function*(){let x=null;try{x=yield w._popupRedirectResolver._completeRedirectFn(w,v,!0)}catch(R){yield w._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(v){var w=this;return(0,h.Z)(function*(){try{yield zt(v)}catch(x){if("auth/network-request-failed"!==x.code)return w.directlySetCurrentUser(null)}return w.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var v=this;return(0,h.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var w=this;return(0,h.Z)(function*(){const x=v?(0,q.m9)(v):null;return x&&ve(x.auth.config.apiKey===w.config.apiKey,w,"invalid-user-token"),w._updateCurrentUser(x&&x._clone(w))})()}_updateCurrentUser(v){var w=this;return(0,h.Z)(function*(){if(!w._deleted)return v&&ve(w.tenantId===v.tenantId,w,"tenant-id-mismatch"),w.queue((0,h.Z)(function*(){yield w.directlySetCurrentUser(v),w.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,h.Z)(function*(){return(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null)})()}setPersistence(v){var w=this;return this.queue((0,h.Z)(function*(){yield w.assertedPersistence.setPersistence(oe(v))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new q.LL("auth","Firebase",v())}onAuthStateChanged(v,w,x){return this.registerStateListener(this.authStateSubscription,v,w,x)}onIdTokenChanged(v,w,x){return this.registerStateListener(this.idTokenSubscription,v,w,x)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,w){var x=this;return(0,h.Z)(function*(){const R=yield x.getOrInitRedirectPersistenceManager(w);return null===v?R.removeCurrentUser():R.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var w=this;return(0,h.Z)(function*(){if(!w.redirectPersistenceManager){const x=v&&oe(v)||w._popupRedirectResolver;ve(x,w,"argument-error"),w.redirectPersistenceManager=yield kn.create(w,[oe(x._redirectPersistence)],"redirectUser"),w.redirectUser=yield w.redirectPersistenceManager.getCurrentUser()}return w.redirectPersistenceManager})()}_redirectUserForId(v){var w=this;return(0,h.Z)(function*(){var x,R;return w._isInitialized&&(yield w.queue((0,h.Z)(function*(){}))),(null===(x=w._currentUser)||void 0===x?void 0:x._redirectEventId)===v?w._currentUser:(null===(R=w.redirectUser)||void 0===R?void 0:R._redirectEventId)===v?w.redirectUser:null})()}_persistUserIfCurrent(v){var w=this;return(0,h.Z)(function*(){if(v===w.currentUser)return w.queue((0,h.Z)(function*(){return w.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,w;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(w=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==w?w:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,w,x,R){if(this._deleted)return()=>{};const P="function"==typeof w?w:w.next.bind(w),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return ve(Q,this,"internal-error"),Q.then(()=>P(this.currentUser)),"function"==typeof w?v.addObserver(w,x,R):v.addObserver(w)}directlySetCurrentUser(v){var w=this;return(0,h.Z)(function*(){w.currentUser&&w.currentUser!==v&&(w._currentUser._stopProactiveRefresh(),v&&w.isProactiveRefreshEnabled&&v._startProactiveRefresh()),w.currentUser=v,v?yield w.assertedPersistence.setCurrentUser(v):yield w.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=je(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Ct(D){return(0,q.m9)(D)}class Qr{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,q.ne)(w=>this.observer=w)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function zn(D){const v=D.indexOf(":");return v<0?"":D.substr(0,v+1)}function Cn(D){if(!D)return null;const v=Number(D);return isNaN(v)?null:v}class zi{constructor(v,w){this.providerId=v,this.signInMethod=w}toJSON(){return It("not implemented")}_getIdTokenResponse(v){return It("not implemented")}_linkToIdToken(v,w){return It("not implemented")}_getReauthenticationResolver(v){return It("not implemented")}}function _t(D,v){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,h.Z)(function*(D,v){return mt(D,"POST","/v1/accounts:resetPassword",sn(D,v))})).apply(this,arguments)}function _o(D,v){return fu.apply(this,arguments)}function fu(){return(fu=(0,h.Z)(function*(D,v){return mt(D,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function gu(D,v){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,h.Z)(function*(D,v){return mt(D,"POST","/v1/accounts:update",sn(D,v))})).apply(this,arguments)}function vo(){return(vo=(0,h.Z)(function*(D,v){return pr(D,"POST","/v1/accounts:signInWithPassword",sn(D,v))})).apply(this,arguments)}function Jr(D,v){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,h.Z)(function*(D,v){return mt(D,"POST","/v1/accounts:sendOobCode",sn(D,v))})).apply(this,arguments)}function dm(D,v){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,h.Z)(function*(D,v){return Jr(D,v)})).apply(this,arguments)}function or(D,v){return pu.apply(this,arguments)}function pu(){return(pu=(0,h.Z)(function*(D,v){return Jr(D,v)})).apply(this,arguments)}function Ka(D,v){return bo.apply(this,arguments)}function bo(){return(bo=(0,h.Z)(function*(D,v){return Jr(D,v)})).apply(this,arguments)}function js(D,v){return ar.apply(this,arguments)}function ar(){return(ar=(0,h.Z)(function*(D,v){return Jr(D,v)})).apply(this,arguments)}function Zi(){return(Zi=(0,h.Z)(function*(D,v){return pr(D,"POST","/v1/accounts:signInWithEmailLink",sn(D,v))})).apply(this,arguments)}function mu(){return(mu=(0,h.Z)(function*(D,v){return pr(D,"POST","/v1/accounts:signInWithEmailLink",sn(D,v))})).apply(this,arguments)}class ms extends zi{constructor(v,w,x,R=null){super("password",x),this._email=v,this._password=w,this._tenantId=R}static _fromEmailAndPassword(v,w){return new ms(v,w,"password")}static _fromEmailAndCode(v,w,x=null){return new ms(v,w,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const w="string"==typeof v?JSON.parse(v):v;if((null==w?void 0:w.email)&&(null==w?void 0:w.password)){if("password"===w.signInMethod)return this._fromEmailAndPassword(w.email,w.password);if("emailLink"===w.signInMethod)return this._fromEmailAndCode(w.email,w.password,w.tenantId)}return null}_getIdTokenResponse(v){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return function(D,v){return vo.apply(this,arguments)}(v,{returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(D,v){return Zi.apply(this,arguments)}(v,{email:w._email,oobCode:w._password});default:Le(v,"internal-error")}})()}_linkToIdToken(v,w){var x=this;return(0,h.Z)(function*(){switch(x.signInMethod){case"password":return _o(v,{idToken:w,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function(D,v){return mu.apply(this,arguments)}(v,{idToken:w,email:x._email,oobCode:x._password});default:Le(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function En(D,v){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,h.Z)(function*(D,v){return pr(D,"POST","/v1/accounts:signInWithIdp",sn(D,v))})).apply(this,arguments)}class Hs extends zi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const w=new Hs(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(w.idToken=v.idToken),v.accessToken&&(w.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(w.nonce=v.nonce),v.pendingToken&&(w.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(w.accessToken=v.oauthToken,w.secret=v.oauthTokenSecret):Le("argument-error"),w}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const w="string"==typeof v?JSON.parse(v):v,{providerId:x,signInMethod:R}=w,P=(0,pe._T)(w,["providerId","signInMethod"]);if(!x||!R)return null;const Q=new Hs(x,R);return Object.assign(Q,P),Q}_getIdTokenResponse(v){return En(v,this.buildRequest())}_linkToIdToken(v,w){const x=this.buildRequest();return x.idToken=w,En(v,x)}_getReauthenticationResolver(v){const w=this.buildRequest();return w.autoCreate=!1,En(v,w)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const w={};this.idToken&&(w.id_token=this.idToken),this.accessToken&&(w.access_token=this.accessToken),this.secret&&(w.oauth_token_secret=this.secret),w.providerId=this.providerId,this.nonce&&!this.pendingToken&&(w.nonce=this.nonce),v.postBody=(0,q.xO)(w)}return v}}function Zv(D,v){return Df.apply(this,arguments)}function Df(){return(Df=(0,h.Z)(function*(D,v){return mt(D,"POST","/v1/accounts:sendVerificationCode",sn(D,v))})).apply(this,arguments)}function hm(){return(hm=(0,h.Z)(function*(D,v){return pr(D,"POST","/v1/accounts:signInWithPhoneNumber",sn(D,v))})).apply(this,arguments)}function fm(){return(fm=(0,h.Z)(function*(D,v){const w=yield pr(D,"POST","/v1/accounts:signInWithPhoneNumber",sn(D,v));if(w.temporaryProof)throw Wi(D,"account-exists-with-different-credential",w);return w})).apply(this,arguments)}const gE={USER_NOT_FOUND:"user-not-found"};function gm(){return(gm=(0,h.Z)(function*(D,v){return pr(D,"POST","/v1/accounts:signInWithPhoneNumber",sn(D,Object.assign(Object.assign({},v),{operation:"REAUTH"})),gE)})).apply(this,arguments)}class Qa extends zi{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,w){return new Qa({verificationId:v,verificationCode:w})}static _fromTokenResponse(v,w){return new Qa({phoneNumber:v,temporaryProof:w})}_getIdTokenResponse(v){return function(D,v){return hm.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,w){return function(D,v){return fm.apply(this,arguments)}(v,Object.assign({idToken:w},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function(D,v){return gm.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:w,verificationId:x,verificationCode:R}=this.params;return v&&w?{temporaryProof:v,phoneNumber:w}:{sessionInfo:x,code:R}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:w,verificationCode:x,phoneNumber:R,temporaryProof:P}=v;return x||w||R||P?new Qa({verificationId:w,verificationCode:x,phoneNumber:R,temporaryProof:P}):null}}class $c{constructor(v){var w,x,R,P,Q,we;const Ve=(0,q.zd)((0,q.pd)(v)),We=null!==(w=Ve.apiKey)&&void 0!==w?w:null,Ze=null!==(x=Ve.oobCode)&&void 0!==x?x:null,ot=function(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=Ve.mode)&&void 0!==R?R:null);ve(We&&Ze&&ot,"argument-error"),this.apiKey=We,this.operation=ot,this.code=Ze,this.continueUrl=null!==(P=Ve.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Q=Ve.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(we=Ve.tenantId)&&void 0!==we?we:null}static parseLink(v){const w=function(D){const v=(0,q.zd)((0,q.pd)(D)).link,w=v?(0,q.zd)((0,q.pd)(v)).deep_link_id:null,x=(0,q.zd)((0,q.pd)(D)).deep_link_id;return(x?(0,q.zd)((0,q.pd)(x)).link:null)||x||w||v||D}(v);try{return new $c(w)}catch(x){return null}}}let pm=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(w,x){return ms._fromEmailAndPassword(w,x)}static credentialWithLink(w,x){const R=$c.parseLink(x);return ve(R,"argument-error"),ms._fromEmailAndCode(w,R.code,R.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class wo{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class Ko extends wo{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class $s extends Ko{static credentialFromJSON(v){const w="string"==typeof v?JSON.parse(v):v;return ve("providerId"in w&&"signInMethod"in w,"argument-error"),Hs._fromParams(w)}credential(v){return this._credential(v)}_credential(v){return ve(v.idToken||v.accessToken,"argument-error"),Hs._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return $s.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return $s.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:w,oauthAccessToken:x,oauthTokenSecret:R,pendingToken:P,nonce:Q,providerId:we}=v;if(!x&&!R&&!w&&!P||!we)return null;try{return new $s(we)._credential({idToken:w,accessToken:x,rawNonce:Q,pendingToken:P})}catch(Ve){return null}}}let Kv=(()=>{class D extends Ko{constructor(){super("facebook.com")}static credential(w){return Hs._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return D.credentialFromTaggedObject(w)}static credentialFromError(w){return D.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return D.credential(w.oauthAccessToken)}catch(x){return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),xf=(()=>{class D extends Ko{constructor(){super("google.com"),this.addScope("profile")}static credential(w,x){return Hs._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:w,accessToken:x})}static credentialFromResult(w){return D.credentialFromTaggedObject(w)}static credentialFromError(w){return D.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthIdToken:x,oauthAccessToken:R}=w;if(!x&&!R)return null;try{return D.credential(x,R)}catch(P){return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),If=(()=>{class D extends Ko{constructor(){super("github.com")}static credential(w){return Hs._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return D.credentialFromTaggedObject(w)}static credentialFromError(w){return D.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return D.credential(w.oauthAccessToken)}catch(x){return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class Ja extends zi{constructor(v,w){super(v,v),this.pendingToken=w}_getIdTokenResponse(v){return En(v,this.buildRequest())}_linkToIdToken(v,w){const x=this.buildRequest();return x.idToken=w,En(v,x)}_getReauthenticationResolver(v){const w=this.buildRequest();return w.autoCreate=!1,En(v,w)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const w="string"==typeof v?JSON.parse(v):v,{providerId:x,signInMethod:R,pendingToken:P}=w;return x&&R&&P&&x===R?new Ja(x,P):null}static _create(v,w){return new Ja(v,w)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let mm=(()=>{class D extends Ko{constructor(){super("twitter.com")}static credential(w,x){return Hs._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:w,oauthTokenSecret:x})}static credentialFromResult(w){return D.credentialFromTaggedObject(w)}static credentialFromError(w){return D.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthAccessToken:x,oauthTokenSecret:R}=w;if(!x||!R)return null;try{return D.credential(x,R)}catch(P){return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function _m(D,v){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,h.Z)(function*(D,v){return pr(D,"POST","/v1/accounts:signUp",sn(D,v))})).apply(this,arguments)}class Zn{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,w,x,R=!1){return(0,h.Z)(function*(){const P=yield Ye._fromIdTokenResponse(v,x,R),Q=Ws(x);return new Zn({user:P,providerId:Q,_tokenResponse:x,operationType:w})})()}static _forOperation(v,w,x){return(0,h.Z)(function*(){yield v._updateTokensIfNecessary(x,!0);const R=Ws(x);return new Zn({user:v,providerId:R,_tokenResponse:x,operationType:w})})()}}function Ws(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function vm(){return(vm=(0,h.Z)(function*(D){var v;const w=Ct(D);if(yield w._initializationPromise,null===(v=w.currentUser)||void 0===v?void 0:v.isAnonymous)return new Zn({user:w.currentUser,providerId:null,operationType:"signIn"});const x=yield _m(w,{returnSecureToken:!0}),R=yield Zn._fromIdTokenResponse(w,"signIn",x,!0);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}class Xr extends q.ZR{constructor(v,w,x,R){var P;super(w.code,w.message),this.operationType=x,this.user=R,this.name="FirebaseError",Object.setPrototypeOf(this,Xr.prototype),this.appName=v.name,this.code=w.code,this.tenantId=null!==(P=v.tenantId)&&void 0!==P?P:void 0,this.serverResponse=w.customData.serverResponse}static _fromErrorAndOperation(v,w,x,R){return new Xr(v,w,x,R)}}function qc(D,v,w,x){return("reauthenticate"===v?w._getReauthenticationResolver(D):w._getIdTokenResponse(D)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Xr._fromErrorAndOperation(D,P,v,x):P})}function Tf(D){return new Set(D.map(({providerId:v})=>v).filter(v=>!!v))}function Af(){return(Af=(0,h.Z)(function*(D,v){const w=(0,q.m9)(D);yield un(!0,w,v);const{providerUserInfo:x}=yield zo(w.auth,{idToken:yield w.getIdToken(),deleteProvider:[v]}),R=Tf(x||[]);return w.providerData=w.providerData.filter(P=>R.has(P.providerId)),R.has("phone")||(w.phoneNumber=null),yield w.auth._persistUserIfCurrent(w),w})).apply(this,arguments)}function zc(D,v){return bm.apply(this,arguments)}function bm(){return(bm=(0,h.Z)(function*(D,v,w=!1){const x=yield Pe(D,v._linkToIdToken(D.auth,yield D.getIdToken()),w);return Zn._forOperation(D,"link",x)})).apply(this,arguments)}function un(D,v,w){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,h.Z)(function*(D,v,w){yield zt(v);const R=!1===D?"provider-already-linked":"no-such-provider";ve(Tf(v.providerData).has(w)===D,v.auth,R)})).apply(this,arguments)}function Jo(D,v){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,h.Z)(function*(D,v,w=!1){const{auth:x}=D,R="reauthenticate";try{const P=yield Pe(D,qc(x,R,v,D),w);ve(P.idToken,x,"internal-error");const Q=_r(P.idToken);ve(Q,x,"internal-error");const{sub:we}=Q;return ve(D.uid===we,x,"user-mismatch"),Zn._forOperation(D,R,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&Le(x,"user-mismatch"),P}})).apply(this,arguments)}function gn(D,v){return Nf.apply(this,arguments)}function Nf(){return(Nf=(0,h.Z)(function*(D,v,w=!1){const x="signIn",R=yield qc(D,x,v),P=yield Zn._fromIdTokenResponse(D,x,R);return w||(yield D._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Kc(D,v){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,h.Z)(function*(D,v){return gn(Ct(D),v)})).apply(this,arguments)}function bi(D,v){return yu.apply(this,arguments)}function yu(){return(yu=(0,h.Z)(function*(D,v){const w=(0,q.m9)(D);return yield un(!1,w,v.providerId),zc(w,v)})).apply(this,arguments)}function Qc(D,v){return Co.apply(this,arguments)}function Co(){return(Co=(0,h.Z)(function*(D,v){return Jo((0,q.m9)(D),v)})).apply(this,arguments)}function wi(D,v){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,h.Z)(function*(D,v){return pr(D,"POST","/v1/accounts:signInWithCustomToken",sn(D,v))})).apply(this,arguments)}function el(){return(el=(0,h.Z)(function*(D,v){const w=Ct(D),x=yield wi(w,{token:v,returnSecureToken:!0}),R=yield Zn._fromIdTokenResponse(w,"signIn",x);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}class _s{constructor(v,w){this.factorId=v,this.uid=w.mfaEnrollmentId,this.enrollmentTime=new Date(w.enrolledAt).toUTCString(),this.displayName=w.displayName}static _fromServerResponse(v,w){return"phoneInfo"in w?Jc._fromServerResponse(v,w):Le(v,"internal-error")}}class Jc extends _s{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,w){return new Jc(w)}}function tl(D,v,w){var x;ve((null===(x=w.url)||void 0===x?void 0:x.length)>0,D,"invalid-continue-uri"),ve(void 0===w.dynamicLinkDomain||w.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),v.continueUrl=w.url,v.dynamicLinkDomain=w.dynamicLinkDomain,v.canHandleCodeInApp=w.handleCodeInApp,w.iOS&&(ve(w.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),v.iosBundleId=w.iOS.bundleId),w.android&&(ve(w.android.packageName.length>0,D,"missing-android-pkg-name"),v.androidInstallApp=w.android.installApp,v.androidMinimumVersionCode=w.android.minimumVersion,v.androidPackageName=w.android.packageName)}function Rf(){return(Rf=(0,h.Z)(function*(D,v,w){const x=(0,q.m9)(D),R={requestType:"PASSWORD_RESET",email:v};w&&tl(x,R,w),yield or(x,R)})).apply(this,arguments)}function Of(){return(Of=(0,h.Z)(function*(D,v,w){yield _t((0,q.m9)(D),{oobCode:v,newPassword:w})})).apply(this,arguments)}function kf(){return(kf=(0,h.Z)(function*(D,v){yield gu((0,q.m9)(D),{oobCode:v})})).apply(this,arguments)}function Cm(D,v){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,h.Z)(function*(D,v){const w=(0,q.m9)(D),x=yield _t(w,{oobCode:v}),R=x.requestType;switch(ve(R,w,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ve(x.newEmail,w,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ve(x.mfaInfo,w,"internal-error");default:ve(x.email,w,"internal-error")}let P=null;return x.mfaInfo&&(P=_s._fromServerResponse(Ct(w),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:P},operation:R}})).apply(this,arguments)}function Rt(){return(Rt=(0,h.Z)(function*(D,v){const{data:w}=yield Cm((0,q.m9)(D),v);return w.email})).apply(this,arguments)}function cn(){return(cn=(0,h.Z)(function*(D,v,w){const x=Ct(D),R=yield _m(x,{returnSecureToken:!0,email:v,password:w}),P=yield Zn._fromIdTokenResponse(x,"signIn",R);return yield x._updateCurrentUser(P.user),P})).apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(D,v,w){const x=(0,q.m9)(D),R={requestType:"EMAIL_SIGNIN",email:v};ve(w.handleCodeInApp,x,"argument-error"),w&&tl(x,R,w),yield Ka(x,R)})).apply(this,arguments)}function Em(){return(Em=(0,h.Z)(function*(D,v,w){const x=(0,q.m9)(D),R=pm.credentialWithLink(v,w||ge());return ve(R._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),Kc(x,R)})).apply(this,arguments)}function Xv(D,v){return nl.apply(this,arguments)}function nl(){return(nl=(0,h.Z)(function*(D,v){return mt(D,"POST","/v1/accounts:createAuthUri",sn(D,v))})).apply(this,arguments)}function Gn(){return(Gn=(0,h.Z)(function*(D,v){const x={identifier:v,continueUri:te()?ge():"http://localhost"},{signinMethods:R}=yield Xv((0,q.m9)(D),x);return R||[]})).apply(this,arguments)}function Lf(){return(Lf=(0,h.Z)(function*(D,v){const w=(0,q.m9)(D),R={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};v&&tl(w.auth,R,v);const{email:P}=yield dm(w.auth,R);P!==D.email&&(yield D.reload())})).apply(this,arguments)}function Ci(){return(Ci=(0,h.Z)(function*(D,v,w){const x=(0,q.m9)(D),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:v};w&&tl(x.auth,P,w);const{email:Q}=yield js(x.auth,P);Q!==D.email&&(yield D.reload())})).apply(this,arguments)}function yE(D,v){return nd.apply(this,arguments)}function nd(){return(nd=(0,h.Z)(function*(D,v){return mt(D,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Vf(){return(Vf=(0,h.Z)(function*(D,{displayName:v,photoURL:w}){if(void 0===v&&void 0===w)return;const x=(0,q.m9)(D),P={idToken:yield x.getIdToken(),displayName:v,photoUrl:w,returnSecureToken:!0},Q=yield Pe(x,yE(x.auth,P));x.displayName=Q.displayName||null,x.photoURL=Q.photoUrl||null;const we=x.providerData.find(({providerId:Ve})=>"password"===Ve);we&&(we.displayName=x.displayName,we.photoURL=x.photoURL),yield x._updateTokensIfNecessary(Q)})).apply(this,arguments)}function Gf(D,v,w){return ta.apply(this,arguments)}function ta(){return(ta=(0,h.Z)(function*(D,v,w){const{auth:x}=D,P={idToken:yield D.getIdToken(),returnSecureToken:!0};v&&(P.email=v),w&&(P.password=w);const Q=yield Pe(D,_o(x,P));yield D._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class na{constructor(v,w,x={}){this.isNewUser=v,this.providerId=w,this.profile=x}}class vu extends na{constructor(v,w,x,R){super(v,w,x),this.username=R}}class Im extends na{constructor(v,w){super(v,"facebook.com",w)}}class e0 extends vu{constructor(v,w){super(v,"github.com",w,"string"==typeof(null==w?void 0:w.login)?null==w?void 0:w.login:null)}}class Tm extends na{constructor(v,w){super(v,"google.com",w)}}class t0 extends vu{constructor(v,w,x){super(v,"twitter.com",w,x)}}function bu(D){const{user:v,_tokenResponse:w}=D;return v.isAnonymous&&!w?{providerId:null,isNewUser:!1,profile:null}:function(D){var v,w;if(!D)return null;const{providerId:x}=D,R=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},P=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!x&&(null==D?void 0:D.idToken)){const Q=null===(w=null===(v=_r(D.idToken))||void 0===v?void 0:v.firebase)||void 0===w?void 0:w.sign_in_provider;if(Q)return new na(P,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!x)return null;switch(x){case"facebook.com":return new Im(P,R);case"github.com":return new e0(P,R);case"google.com":return new Tm(P,R);case"twitter.com":return new t0(P,R,D.screenName||null);case"custom":case"anonymous":return new na(P,null);default:return new na(P,x,R)}}(w)}class ra{constructor(v,w){this.type=v,this.credential=w}static _fromIdtoken(v){return new ra("enroll",v)}static _fromMfaPendingCredential(v){return new ra("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var w,x;if(null==v?void 0:v.multiFactorSession){if(null===(w=v.multiFactorSession)||void 0===w?void 0:w.pendingCredential)return ra._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null===(x=v.multiFactorSession)||void 0===x?void 0:x.idToken)return ra._fromIdtoken(v.multiFactorSession.idToken)}return null}}class Hf{constructor(v,w,x){this.session=v,this.hints=w,this.signInResolver=x}static _fromError(v,w){const x=Ct(v),R=(w.serverResponse.mfaInfo||[]).map(Q=>_s._fromServerResponse(x,Q));ve(w.serverResponse.mfaPendingCredential,x,"internal-error");const P=ra._fromMfaPendingCredential(w.serverResponse.mfaPendingCredential);return new Hf(P,R,function(){var Q=(0,h.Z)(function*(we){const Ve=yield we._process(x,P);delete w.serverResponse.mfaInfo,delete w.serverResponse.mfaPendingCredential;const We=Object.assign(Object.assign({},w.serverResponse),{idToken:Ve.idToken,refreshToken:Ve.refreshToken});switch(w.operationType){case"signIn":const Ze=yield Zn._fromIdTokenResponse(x,w.operationType,We);return yield x._updateCurrentUser(Ze.user),Ze;case"reauthenticate":return ve(w.user,x,"internal-error"),Zn._forOperation(w.user,w.operationType,We);default:Le(x,"internal-error")}});return function(we){return Q.apply(this,arguments)}}())}resolveSignIn(v){var w=this;return(0,h.Z)(function*(){return w.signInResolver(v)})()}}function id(D,v){return mt(D,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:D.tenantId},v))}class wu{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(w=>{w.mfaInfo&&(this.enrolledFactors=w.mfaInfo.map(x=>_s._fromServerResponse(v.auth,x)))})}static _fromUser(v){return new wu(v)}getSession(){var v=this;return(0,h.Z)(function*(){return ra._fromIdtoken(yield v.user.getIdToken())})()}enroll(v,w){var x=this;return(0,h.Z)(function*(){const R=v,P=yield x.getSession(),Q=yield Pe(x.user,R._process(x.user.auth,P,w));return yield x.user._updateTokensIfNecessary(Q),x.user.reload()})()}unenroll(v){var w=this;return(0,h.Z)(function*(){const x="string"==typeof v?v:v.uid,R=yield w.user.getIdToken(),P=yield Pe(w.user,function(D,v){return mt(D,"POST","/v2/accounts/mfaEnrollment:withdraw",Object.assign({tenantId:D.tenantId},v))}(w.user.auth,{idToken:R,mfaEnrollmentId:x}));w.enrolledFactors=w.enrolledFactors.filter(({uid:Q})=>Q!==x),yield w.user._updateTokensIfNecessary(P);try{yield w.user.reload()}catch(Q){if("auth/user-token-expired"!==Q.code)throw Q}})()}}const od=new WeakMap,Ji="__sak";class Cu{constructor(v,w){this.storage=v,this.type=w}_isAvailable(){try{return this.storage?(this.storage.setItem(Ji,"1"),this.storage.removeItem(Ji),Promise.resolve(!0)):Promise.resolve(!1)}catch(v){return Promise.resolve(!1)}}_set(v,w){return this.storage.setItem(v,JSON.stringify(w)),Promise.resolve()}_get(v){const w=this.storage.getItem(v);return Promise.resolve(w?JSON.parse(w):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}}const ad=(()=>{class D extends Cu{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const D=(0,q.z$)();return Bs(D)||Pn(D)}()&&function(){try{return!(!window||window===window.top)}catch(D){return!1}}(),this.fallbackToPolling=cm(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(w){for(const x of Object.keys(this.listeners)){const R=this.storage.getItem(x),P=this.localCache[x];R!==P&&w(x,P,R)}}onStorageEvent(w,x=!1){if(!w.key)return void this.forAllChangedKeys((we,Ve,We)=>{this.notifyListeners(we,We)});const R=w.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const we=this.storage.getItem(R);if(w.newValue!==we)null!==w.newValue?this.storage.setItem(R,w.newValue):this.storage.removeItem(R);else if(this.localCache[R]===w.newValue&&!x)return}const P=()=>{const we=this.storage.getItem(R);!x&&this.localCache[R]===we||this.notifyListeners(R,we)},Q=this.storage.getItem(R);(0,q.w1)()&&10===document.documentMode&&Q!==w.newValue&&w.newValue!==w.oldValue?setTimeout(P,10):P()}notifyListeners(w,x){this.localCache[w]=x;const R=this.listeners[w];if(R)for(const P of Array.from(R))P(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((w,x,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:w,oldValue:x,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(w,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[w]||(this.listeners[w]=new Set,this.localCache[w]=this.storage.getItem(w)),this.listeners[w].add(x)}_removeListener(w,x){this.listeners[w]&&(this.listeners[w].delete(x),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(w,x){var R=()=>super._set,P=this;return(0,h.Z)(function*(){yield R().call(P,w,x),P.localCache[w]=JSON.stringify(x)})()}_get(w){var x=()=>super._get,R=this;return(0,h.Z)(function*(){const P=yield x().call(R,w);return R.localCache[w]=JSON.stringify(P),P})()}_remove(w){var x=()=>super._remove,R=this;return(0,h.Z)(function*(){yield x().call(R,w),delete R.localCache[w]})()}}return D.type="LOCAL",D})(),ia=(()=>{class D extends Cu{constructor(){super(window.sessionStorage,"SESSION")}_addListener(w,x){}_removeListener(w,x){}}return D.type="SESSION",D})();let $f=(()=>{class D{constructor(w){this.eventTarget=w,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(w){const x=this.receivers.find(P=>P.isListeningto(w));if(x)return x;const R=new D(w);return this.receivers.push(R),R}isListeningto(w){return this.eventTarget===w}handleEvent(w){var x=this;return(0,h.Z)(function*(){const R=w,{eventId:P,eventType:Q,data:we}=R.data,Ve=x.handlersMap[Q];if(!(null==Ve?void 0:Ve.size))return;R.ports[0].postMessage({status:"ack",eventId:P,eventType:Q});const We=Array.from(Ve).map(function(){var ot=(0,h.Z)(function*(Qn){return Qn(R.origin,we)});return function(Qn){return ot.apply(this,arguments)}}()),Ze=yield function(D){return Promise.all(D.map(function(){var v=(0,h.Z)(function*(w){try{return{fulfilled:!0,value:yield w}}catch(x){return{fulfilled:!1,reason:x}}});return function(w){return v.apply(this,arguments)}}()))}(We);R.ports[0].postMessage({status:"done",eventId:P,eventType:Q,response:Ze})})()}_subscribe(w,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[w]||(this.handlersMap[w]=new Set),this.handlersMap[w].add(x)}_unsubscribe(w,x){this.handlersMap[w]&&x&&this.handlersMap[w].delete(x),(!x||0===this.handlersMap[w].size)&&delete this.handlersMap[w],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function sl(D="",v=10){let w="";for(let x=0;x<v;x++)w+=Math.floor(10*Math.random());return D+w}class ys{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,w,x=50){var R=this;return(0,h.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Q,we;return new Promise((Ve,We)=>{const Ze=sl("",20);P.port1.start();const ot=setTimeout(()=>{We(new Error("unsupported_event"))},x);we={messageChannel:P,onMessage(Qn){const ri=Qn;if(ri.data.eventId===Ze)switch(ri.data.status){case"ack":clearTimeout(ot),Q=setTimeout(()=>{We(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Ve(ri.data.response);break;default:clearTimeout(ot),clearTimeout(Q),We(new Error("invalid_response"))}}},R.handlers.add(we),P.port1.addEventListener("message",we.onMessage),R.target.postMessage({eventType:v,eventId:Ze,data:w},[P.port2])}).finally(()=>{we&&R.removeMessageHandler(we)})})()}}function Dn(){return window}function ol(){return void 0!==Dn().WorkerGlobalScope&&"function"==typeof Dn().importScripts}function Nm(){return(Nm=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(D){return null}})).apply(this,arguments)}const xu="firebaseLocalStorageDb",Iu="firebaseLocalStorage",Rm="fbase_key";class ld{constructor(v){this.request=v}toPromise(){return new Promise((v,w)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{w(this.request.error)})})}}function Wf(D,v){return D.transaction([Iu],v?"readwrite":"readonly").objectStore(Iu)}function ud(){const D=indexedDB.open(xu,1);return new Promise((v,w)=>{D.addEventListener("error",()=>{w(D.error)}),D.addEventListener("upgradeneeded",()=>{const x=D.result;try{x.createObjectStore(Iu,{keyPath:Rm})}catch(R){w(R)}}),D.addEventListener("success",(0,h.Z)(function*(){const x=D.result;x.objectStoreNames.contains(Iu)?v(x):(x.close(),yield function(){const D=indexedDB.deleteDatabase(xu);return new ld(D).toPromise()}(),v(yield ud()))}))})}function dn(D,v,w){return ze.apply(this,arguments)}function ze(){return(ze=(0,h.Z)(function*(D,v,w){const x=Wf(D,!0).put({[Rm]:v,value:w});return new ld(x).toPromise()})).apply(this,arguments)}function cd(){return(cd=(0,h.Z)(function*(D,v){const w=Wf(D,!1).get(v),x=yield new ld(w).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function xn(D,v){const w=Wf(D,!0).delete(v);return new ld(w).toPromise()}const aa=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var w=this;return(0,h.Z)(function*(){return w.db||(w.db=yield ud()),w.db})()}_withRetries(w){var x=this;return(0,h.Z)(function*(){let R=0;for(;;)try{const P=yield x._openDb();return yield w(P)}catch(P){if(R++>3)throw P;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var w=this;return(0,h.Z)(function*(){return ol()?w.initializeReceiver():w.initializeSender()})()}initializeReceiver(){var w=this;return(0,h.Z)(function*(){w.receiver=$f._getInstance(ol()?self:null),w.receiver._subscribe("keyChanged",function(){var x=(0,h.Z)(function*(R,P){return{keyProcessed:(yield w._poll()).includes(P.key)}});return function(R,P){return x.apply(this,arguments)}}()),w.receiver._subscribe("ping",function(){var x=(0,h.Z)(function*(R,P){return["keyChanged"]});return function(R,P){return x.apply(this,arguments)}}())})()}initializeSender(){var w=this;return(0,h.Z)(function*(){var x,R;if(w.activeServiceWorker=yield function(){return Nm.apply(this,arguments)}(),!w.activeServiceWorker)return;w.sender=new ys(w.activeServiceWorker);const P=yield w.sender._send("ping",{},800);!P||(null===(x=P[0])||void 0===x?void 0:x.fulfilled)&&(null===(R=P[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(w.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(w){var x=this;return(0,h.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function(){var D;return(null===(D=null==navigator?void 0:navigator.serviceWorker)||void 0===D?void 0:D.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:w},x.serviceWorkerReceiverAvailable?800:50)}catch(R){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const w=yield ud();return yield dn(w,Ji,"1"),yield xn(w,Ji),!0}catch(w){}return!1})()}_withPendingWrite(w){var x=this;return(0,h.Z)(function*(){x.pendingWrites++;try{yield w()}finally{x.pendingWrites--}})()}_set(w,x){var R=this;return(0,h.Z)(function*(){return R._withPendingWrite((0,h.Z)(function*(){return yield R._withRetries(P=>dn(P,w,x)),R.localCache[w]=x,R.notifyServiceWorker(w)}))})()}_get(w){var x=this;return(0,h.Z)(function*(){const R=yield x._withRetries(P=>function(D,v){return cd.apply(this,arguments)}(P,w));return x.localCache[w]=R,R})()}_remove(w){var x=this;return(0,h.Z)(function*(){return x._withPendingWrite((0,h.Z)(function*(){return yield x._withRetries(R=>xn(R,w)),delete x.localCache[w],x.notifyServiceWorker(w)}))})()}_poll(){var w=this;return(0,h.Z)(function*(){const x=yield w._withRetries(Q=>{const we=Wf(Q,!1).getAll();return new ld(we).toPromise()});if(!x)return[];if(0!==w.pendingWrites)return[];const R=[],P=new Set;for(const{fbase_key:Q,value:we}of x)P.add(Q),JSON.stringify(w.localCache[Q])!==JSON.stringify(we)&&(w.notifyListeners(Q,we),R.push(Q));for(const Q of Object.keys(w.localCache))w.localCache[Q]&&!P.has(Q)&&(w.notifyListeners(Q,null),R.push(Q));return R})()}notifyListeners(w,x){this.localCache[w]=x;const R=this.listeners[w];if(R)for(const P of Array.from(R))P(x)}startPolling(){var w=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return w._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(w,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[w]||(this.listeners[w]=new Set,this._get(w)),this.listeners[w].add(x)}_removeListener(w,x){this.listeners[w]&&(this.listeners[w].delete(x),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})();function s0(D,v){return mt(D,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:D.tenantId},v))}function Su(){return(Su=(0,h.Z)(function*(D){return(yield mt(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function fd(D){return new Promise((v,w)=>{const x=document.createElement("script");x.setAttribute("src",D),x.onload=v,x.onerror=R=>{const P=rt("internal-error");P.customData=R,w(P)},x.type="text/javascript",x.charset="UTF-8",function(){var D,v;return null!==(v=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==v?v:document}().appendChild(x)})}function qs(D){return`__${D}${Math.floor(1e6*Math.random())}`}const Nu=1e12;class Ys{constructor(v){this.auth=v,this.counter=Nu,this._widgets=new Map}render(v,w){const x=this.counter;return this._widgets.set(x,new zs(v,this.auth.name,w||{})),this.counter++,x}reset(v){var w;const x=v||Nu;null===(w=this._widgets.get(x))||void 0===w||w.delete(),this._widgets.delete(x)}getResponse(v){var w;return(null===(w=this._widgets.get(v||Nu))||void 0===w?void 0:w.getResponse())||""}execute(v){var w=this;return(0,h.Z)(function*(){var x;return null===(x=w._widgets.get(v||Nu))||void 0===x||x.execute(),""})()}}class zs{constructor(v,w,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof v?document.getElementById(v):v;ve(R,"argument-error",{appName:w}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(D){const v=[],w="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<50;x++)v.push(w.charAt(Math.floor(Math.random()*w.length)));return v.join("")}();const{callback:v,"expired-callback":w}=this.params;if(v)try{v(this.responseToken)}catch(x){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,w)try{w()}catch(x){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const vs=qs("rcb"),Xi=new Ke(3e4,6e4);class CE{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Dn().grecaptcha}load(v,w=""){return ve((D=w).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D),v,"argument-error"),this.shouldResolveImmediately(w)?Promise.resolve(Dn().grecaptcha):new Promise((x,R)=>{const P=Dn().setTimeout(()=>{R(rt(v,"network-request-failed"))},Xi.get());Dn()[vs]=()=>{Dn().clearTimeout(P),delete Dn()[vs];const we=Dn().grecaptcha;if(!we)return void R(rt(v,"internal-error"));const Ve=we.render;we.render=(We,Ze)=>{const ot=Ve(We,Ze);return this.counter++,ot},this.hostLanguage=w,x(we)},fd(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:vs,render:"explicit",hl:w})}`).catch(()=>{clearTimeout(P),R(rt(v,"internal-error"))})});var D}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){return!!Dn().grecaptcha&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Li{load(v){return(0,h.Z)(function*(){return new Ys(v)})()}clearedOneInstance(){}}const Hn="recaptcha",o0={theme:"light",type:"image"};class Tn{constructor(v,w=Object.assign({},o0),x){this.parameters=w,this.type=Hn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ct(x),this.isInvisible="invisible"===this.parameters.size,ve("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof v?document.getElementById(v):v;ve(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Li:new CE,this.validateStartingState()}verify(){var v=this;return(0,h.Z)(function*(){v.assertNotDestroyed();const w=yield v.render(),x=v.getAssertedRecaptcha();return x.getResponse(w)||new Promise(P=>{const Q=we=>{!we||(v.tokenChangeListeners.delete(Q),P(we))};v.tokenChangeListeners.add(Q),v.isInvisible&&x.execute(w)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){ve(!this.parameters.sitekey,this.auth,"argument-error"),ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ve("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return w=>{if(this.tokenChangeListeners.forEach(x=>x(w)),"function"==typeof v)v(w);else if("string"==typeof v){const x=Dn()[v];"function"==typeof x&&x(w)}}}assertNotDestroyed(){ve(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,h.Z)(function*(){if(yield v.init(),!v.widgetId){let w=v.container;if(!v.isInvisible){const x=document.createElement("div");w.appendChild(x),w=x}v.widgetId=v.getAssertedRecaptcha().render(w,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,h.Z)(function*(){ve(te()&&!ol(),v.auth,"internal-error"),yield function(){let D=null;return new Promise(v=>{"complete"!==document.readyState?(D=()=>v(),window.addEventListener("load",D)):v()}).catch(v=>{throw D&&window.removeEventListener("load",D),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const w=yield function(D){return Su.apply(this,arguments)}(v.auth);ve(w,v.auth,"internal-error"),v.parameters.sitekey=w})()}getAssertedRecaptcha(){return ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Mu{constructor(v,w){this.verificationId=v,this.onConfirmation=w}confirm(v){const w=Qa._fromVerification(this.verificationId,v);return this.onConfirmation(w)}}function km(){return(km=(0,h.Z)(function*(D,v,w){const x=Ct(D),R=yield Yf(x,v,(0,q.m9)(w));return new Mu(R,P=>Kc(x,P))})).apply(this,arguments)}function xo(){return(xo=(0,h.Z)(function*(D,v,w){const x=(0,q.m9)(D);yield un(!1,x,"phone");const R=yield Yf(x.auth,v,(0,q.m9)(w));return new Mu(R,P=>bi(x,P))})).apply(this,arguments)}function Pm(){return(Pm=(0,h.Z)(function*(D,v,w){const x=(0,q.m9)(D),R=yield Yf(x.auth,v,(0,q.m9)(w));return new Mu(R,P=>Qc(x,P))})).apply(this,arguments)}function Yf(D,v,w){return on.apply(this,arguments)}function on(){return(on=(0,h.Z)(function*(D,v,w){var x;const R=yield w.verify();try{let P;if(ve("string"==typeof R,D,"argument-error"),ve(w.type===Hn,D,"argument-error"),P="string"==typeof v?{phoneNumber:v}:v,"session"in P){const Q=P.session;if("phoneNumber"in P)return ve("enroll"===Q.type,D,"internal-error"),(yield id(D,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{ve("signin"===Q.type,D,"internal-error");const we=(null===(x=P.multiFactorHint)||void 0===x?void 0:x.uid)||P.multiFactorUid;return ve(we,D,"missing-multi-factor-info"),(yield s0(D,{mfaPendingCredential:Q.credential,mfaEnrollmentId:we,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield Zv(D,{phoneNumber:P.phoneNumber,recaptchaToken:R});return Q}}finally{w._reset()}})).apply(this,arguments)}function la(){return(la=(0,h.Z)(function*(D,v){yield zc((0,q.m9)(D),v)})).apply(this,arguments)}let bs=(()=>{class D{constructor(w){this.providerId=D.PROVIDER_ID,this.auth=Ct(w)}verifyPhoneNumber(w,x){return Yf(this.auth,w,(0,q.m9)(x))}static credential(w,x){return Qa._fromVerification(w,x)}static credentialFromResult(w){return D.credentialFromTaggedObject(w)}static credentialFromError(w){return D.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{phoneNumber:x,temporaryProof:R}=w;return x&&R?Qa._fromTokenResponse(x,R):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function hn(D,v){return v?oe(v):(ve(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class ul extends zi{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return En(v,this._buildIdpRequest())}_linkToIdToken(v,w){return En(v,this._buildIdpRequest(w))}_getReauthenticationResolver(v){return En(v,this._buildIdpRequest())}_buildIdpRequest(v){const w={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(w.idToken=v),w}}function Kn(D){return gn(D.auth,new ul(D),D.bypassAuthState)}function gd(D){const{auth:v,user:w}=D;return ve(w,v,"internal-error"),Jo(w,new ul(D),D.bypassAuthState)}function zf(D){return ni.apply(this,arguments)}function ni(){return(ni=(0,h.Z)(function*(D){const{auth:v,user:w}=D;return ve(w,v,"internal-error"),zc(w,new ul(D),D.bypassAuthState)})).apply(this,arguments)}class es{constructor(v,w,x,R,P=!1){this.auth=v,this.resolver=x,this.user=R,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(w)?w:[w]}execute(){var v=this;return new Promise(function(){var w=(0,h.Z)(function*(x,R){v.pendingPromise={resolve:x,reject:R};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(P){v.reject(P)}});return function(x,R){return w.apply(this,arguments)}}())}onAuthEvent(v){var w=this;return(0,h.Z)(function*(){const{urlResponse:x,sessionId:R,postBody:P,tenantId:Q,error:we,type:Ve}=v;if(we)return void w.reject(we);const We={auth:w.auth,requestUri:x,sessionId:R,tenantId:Q||void 0,postBody:P||void 0,user:w.user,bypassAuthState:w.bypassAuthState};try{w.resolve(yield w.getIdpTask(Ve)(We))}catch(Ze){w.reject(Ze)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return Kn;case"linkViaPopup":case"linkViaRedirect":return zf;case"reauthViaPopup":case"reauthViaRedirect":return gd;default:Le(this.auth,"internal-error")}}resolve(v){ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ru=new Ke(2e3,1e4);function ws(){return(ws=(0,h.Z)(function*(D,v,w){const x=Ct(D);ve(v instanceof wo,D,"argument-error");const R=hn(x,w);return new Zf(x,"signInViaPopup",v,R).executeNotNull()})).apply(this,arguments)}function pd(){return(pd=(0,h.Z)(function*(D,v,w){const x=(0,q.m9)(D);ve(v instanceof wo,x.auth,"argument-error");const R=hn(x.auth,w);return new Zf(x.auth,"reauthViaPopup",v,R,x).executeNotNull()})).apply(this,arguments)}function Lm(){return(Lm=(0,h.Z)(function*(D,v,w){const x=(0,q.m9)(D);ve(v instanceof wo,x.auth,"argument-error");const R=hn(x.auth,w);return new Zf(x.auth,"linkViaPopup",v,R,x).executeNotNull()})).apply(this,arguments)}let Zf=(()=>{class D extends es{constructor(w,x,R,P,Q){super(w,x,P,Q),this.provider=R,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var w=this;return(0,h.Z)(function*(){const x=yield w.execute();return ve(x,w.auth,"internal-error"),x})()}onExecution(){var w=this;return(0,h.Z)(function*(){ht(1===w.filter.length,"Popup operations only handle one event");const x=sl();w.authWindow=yield w.resolver._openPopup(w.auth,w.provider,w.filter[0],x),w.authWindow.associatedEvent=x,w.resolver._originValidation(w.auth).catch(R=>{w.reject(R)}),w.resolver._isIframeWebStorageSupported(w.auth,R=>{R||w.reject(rt(w.auth,"web-storage-unsupported"))}),w.pollUserCancellation()})()}get eventId(){var w;return(null===(w=this.authWindow)||void 0===w?void 0:w.associatedEvent)||null}cancel(){this.reject(rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const w=()=>{var x,R;this.pollId=(null===(R=null===(x=this.authWindow)||void 0===x?void 0:x.window)||void 0===R?void 0:R.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(rt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(w,Ru.get())};w()}}return D.currentPopupAction=null,D})();const Fn=new Map;class $n extends es{constructor(v,w,x=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],w,void 0,x),this.eventId=null}execute(){var v=()=>super.execute,w=this;return(0,h.Z)(function*(){let x=Fn.get(w.auth._key());if(!x){try{const P=(yield function(D,v){return Kf.apply(this,arguments)}(w.resolver,w.auth))?yield v().call(w):null;x=()=>Promise.resolve(P)}catch(R){x=()=>Promise.reject(R)}Fn.set(w.auth._key(),x)}return x()})()}onAuthEvent(v){var w=()=>super.onAuthEvent,x=this;return(0,h.Z)(function*(){if("signInViaRedirect"===v.type)return w().call(x,v);if("unknown"!==v.type){if(v.eventId){const R=yield x.auth._redirectUserForId(v.eventId);if(R)return x.user=R,w().call(x,v);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Kf(){return(Kf=(0,h.Z)(function*(D,v){const w=_d(v),x="true"===(yield ts(D)._get(w));return yield ts(D)._remove(w),x})).apply(this,arguments)}function md(D,v){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,h.Z)(function*(D,v){return ts(D)._set(_d(v),"true")})).apply(this,arguments)}function ts(D){return oe(D._redirectPersistence)}function _d(D){return St("pendingRedirect",D.config.apiKey,D.name)}function ku(){return(ku=(0,h.Z)(function*(D,v,w){const x=Ct(D);ve(v instanceof wo,D,"argument-error");const R=hn(x,w);return yield md(R,x),R._openRedirect(x,v,"signInViaRedirect")})).apply(this,arguments)}function ca(){return(ca=(0,h.Z)(function*(D,v,w){const x=(0,q.m9)(D);ve(v instanceof wo,x.auth,"argument-error");const R=hn(x.auth,w);yield md(R,x.auth);const P=yield bd(x);return R._openRedirect(x.auth,v,"reauthViaRedirect",P)})).apply(this,arguments)}function vd(){return(vd=(0,h.Z)(function*(D,v,w){const x=(0,q.m9)(D);ve(v instanceof wo,x.auth,"argument-error");const R=hn(x.auth,w);yield un(!1,x,v.providerId),yield md(R,x.auth);const P=yield bd(x);return R._openRedirect(x.auth,v,"linkViaRedirect",P)})).apply(this,arguments)}function Xf(){return(Xf=(0,h.Z)(function*(D,v){return yield Ct(D)._initializationPromise,fl(D,v,!1)})).apply(this,arguments)}function fl(D,v){return Um.apply(this,arguments)}function Um(){return(Um=(0,h.Z)(function*(D,v,w=!1){const x=Ct(D),R=hn(x,v),Q=yield new $n(x,R,w).execute();return Q&&!w&&(delete Q.user._redirectEventId,yield x._persistUserIfCurrent(Q.user),yield x._setRedirectUser(null,v)),Q})).apply(this,arguments)}function bd(D){return Io.apply(this,arguments)}function Io(){return(Io=(0,h.Z)(function*(D){const v=sl(`${D.uid}:::`);return D._redirectEventId=v,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),v})).apply(this,arguments)}class Gm{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let w=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(v,x)&&(w=!0,this.sendToConsumer(v,x),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wd(D);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,w||(this.queuedRedirectEvent=v,w=!0)),w}sendToConsumer(v,w){var x;if(v.error&&!wd(v)){const R=(null===(x=v.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";w.onError(rt(this.auth,R))}else w.onAuthEvent(v)}isEventForConsumer(v,w){const x=null===w.eventId||!!v.eventId&&v.eventId===w.eventId;return w.filter.includes(v.type)&&x}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(en(v))}saveEventToCache(v){this.cachedEventUids.add(en(v)),this.lastProcessedEventTime=Date.now()}}function en(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(v=>v).join("-")}function wd({type:D,error:v}){return"unknown"===D&&"auth/no-auth-event"===(null==v?void 0:v.code)}function To(D){return da.apply(this,arguments)}function da(){return(da=(0,h.Z)(function*(D,v={}){return mt(D,"GET","/v1/projects",v)})).apply(this,arguments)}const u0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ns=/^https?/;function ng(){return(ng=(0,h.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:v}=yield To(D);for(const w of v)try{if(ha(w))return}catch(x){}Le(D,"unauthorized-domain")})).apply(this,arguments)}function ha(D){const v=ge(),{protocol:w,hostname:x}=new URL(v);if(D.startsWith("chrome-extension://")){const Q=new URL(D);return""===Q.hostname&&""===x?"chrome-extension:"===w&&D.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===w&&Q.hostname===x}if(!ns.test(w))return!1;if(u0.test(D))return x===D;const R=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(x)}const Ao=new Ke(3e4,6e4);function Ln(){const D=Dn().___jsl;if(null==D?void 0:D.H)for(const v of Object.keys(D.H))if(D.H[v].r=D.H[v].r||[],D.H[v].L=D.H[v].L||[],D.H[v].r=[...D.H[v].L],D.CP)for(let w=0;w<D.CP.length;w++)D.CP[w]=null}let Cd=null;function jm(D){return Cd=Cd||function(D){return new Promise((v,w)=>{var x,R,P;function Q(){Ln(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{Ln(),w(rt(D,"network-request-failed"))},timeout:Ao.get()})}if(null===(R=null===(x=Dn().gapi)||void 0===x?void 0:x.iframes)||void 0===R?void 0:R.Iframe)v(gapi.iframes.getContext());else{if(!(null===(P=Dn().gapi)||void 0===P?void 0:P.load)){const we=qs("iframefcb");return Dn()[we]=()=>{gapi.load?Q():w(rt(D,"network-request-failed"))},fd(`https://apis.google.com/js/api.js?onload=${we}`)}Q()}}).catch(v=>{throw Cd=null,v})}(D),Cd}const Ed=new Ke(5e3,15e3),$m={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},c0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fa(D){const v=D.config;ve(v.authDomain,D,"auth-domain-config-required");const w=v.emulator?lt(v,"emulator/auth/iframe"):`https://${D.config.authDomain}/__/auth/iframe`,x={apiKey:v.apiKey,appName:D.name,v:ae.SDK_VERSION},R=c0.get(D.config.apiHost);R&&(x.eid=R);const P=D._getFrameworks();return P.length&&(x.fw=P.join(",")),`${w}?${(0,q.xO)(x).slice(1)}`}function pl(){return(pl=(0,h.Z)(function*(D){const v=yield jm(D),w=Dn().gapi;return ve(w,D,"internal-error"),v.open({where:document.body,url:fa(D),messageHandlersFilter:w.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$m,dontclear:!0},x=>new Promise(function(){var R=(0,h.Z)(function*(P,Q){yield x.restyle({setHideOnLeave:!1});const we=rt(D,"network-request-failed"),Ve=Dn().setTimeout(()=>{Q(we)},Ed.get());function We(){Dn().clearTimeout(Ve),P(x)}x.ping(We).then(We,()=>{Q(we)})});return function(P,Q){return R.apply(this,arguments)}}()))})).apply(this,arguments)}const ml={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wm{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(v){}}}function pa(D,v,w,x,R,P){ve(D.config.authDomain,D,"auth-domain-config-required"),ve(D.config.apiKey,D,"invalid-api-key");const Q={apiKey:D.config.apiKey,appName:D.name,authType:w,redirectUrl:x,v:ae.SDK_VERSION,eventId:R};if(v instanceof wo){v.setDefaultLanguage(D.languageCode),Q.providerId=v.providerId||"",(0,q.xb)(v.getCustomParameters())||(Q.customParameters=JSON.stringify(v.getCustomParameters()));for(const[Ve,We]of Object.entries(P||{}))Q[Ve]=We}if(v instanceof Ko){const Ve=v.getScopes().filter(We=>""!==We);Ve.length>0&&(Q.scopes=Ve.join(","))}D.tenantId&&(Q.tid=D.tenantId);const we=Q;for(const Ve of Object.keys(we))void 0===we[Ve]&&delete we[Ve];return`${function({config:D}){return D.emulator?lt(D,"emulator/auth/handler"):`https://${D.authDomain}/__/auth/handler`}(D)}?${(0,q.xO)(we).slice(1)}`}const Vu="webStorageSupport";class Uu extends class{constructor(v){this.factorId=v}_process(v,w,x){switch(w.type){case"enroll":return this._finalizeEnroll(v,w.credential,x);case"signin":return this._finalizeSignIn(v,w.credential);default:return It("unexpected MultiFactorSessionType")}}}{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new Uu(v)}_finalizeEnroll(v,w,x){return function(D,v){return mt(D,"POST","/v2/accounts/mfaEnrollment:finalize",Object.assign({tenantId:D.tenantId},v))}(v,{idToken:w,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,w){return function(D,v){return mt(D,"POST","/v2/accounts/mfaSignIn:finalize",Object.assign({tenantId:D.tenantId},v))}(v,{mfaPendingCredential:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class sg{constructor(){}static assertion(v){return Uu._fromCredential(v)}}var D;class h0{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var w=this;return(0,h.Z)(function*(){return w.assertAuthConfigured(),yield w.auth._initializationPromise,w.auth.currentUser?{accessToken:yield w.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const w=this.auth.onIdTokenChanged(x=>{var R;v((null===(R=x)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(v,w),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const w=this.internalListeners.get(v);!w||(this.internalListeners.delete(v),w(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function jr(){return window}function Id(){return(Id=(0,h.Z)(function*(D,v,w){var x;const{BuildInfo:R}=jr();ht(v.sessionId,"AuthEvent did not contain a session ID");const P=yield g0(v.sessionId),Q={};return Pn()?Q.ibi=R.packageName:Za()?Q.apn=R.packageName:Le(D,"operation-not-supported-in-this-environment"),R.displayName&&(Q.appDisplayName=R.displayName),Q.sessionId=P,pa(D,w,v.type,void 0,null!==(x=v.eventId)&&void 0!==x?x:void 0,Q)})).apply(this,arguments)}function Gu(){return(Gu=(0,h.Z)(function*(D){const{BuildInfo:v}=jr(),w={};Pn()?w.iosBundleId=v.packageName:Za()?w.androidPackageName=v.packageName:Le(D,"operation-not-supported-in-this-environment"),yield To(D,w)})).apply(this,arguments)}function Hu(){return(Hu=(0,h.Z)(function*(D,v,w){const{cordova:x}=jr();let R=()=>{};try{yield new Promise((P,Q)=>{let we=null;function Ve(){var ot;P();const Qn=null===(ot=x.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof Qn&&Qn(),"function"==typeof(null==w?void 0:w.close)&&w.close()}function We(){we||(we=window.setTimeout(()=>{Q(rt(D,"redirect-cancelled-by-user"))},2e3))}function Ze(){"visible"===(null==document?void 0:document.visibilityState)&&We()}v.addPassiveListener(Ve),document.addEventListener("resume",We,!1),Za()&&document.addEventListener("visibilitychange",Ze,!1),R=()=>{v.removePassiveListener(Ve),document.removeEventListener("resume",We,!1),document.removeEventListener("visibilitychange",Ze,!1),we&&window.clearTimeout(we)}})}finally{R()}})).apply(this,arguments)}function g0(D){return So.apply(this,arguments)}function So(){return(So=(0,h.Z)(function*(D){const v=Zm(D),w=yield crypto.subtle.digest("SHA-256",v);return Array.from(new Uint8Array(w)).map(R=>R.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Zm(D){if(ht(/[0-9a-zA-Z]+/.test(D),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(D);const v=new ArrayBuffer(D.length),w=new Uint8Array(v);for(let x=0;x<D.length;x++)w[x]=D.charCodeAt(x);return w}D="Browser",(0,ae._registerComponent)(new ie.wA("auth",(v,{options:w})=>{const x=v.getProvider("app").getImmediate(),{apiKey:R,authDomain:P}=x.options;return(Q=>{ve(R&&!R.includes(":"),"invalid-api-key",{appName:Q.name}),ve(!(null==P?void 0:P.includes(":")),"argument-error",{appName:Q.name});const we={apiKey:R,authDomain:P,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:je(D)},Ve=new Mt(Q,we);return function(D,v){const w=(null==v?void 0:v.persistence)||[],x=(Array.isArray(w)?w:[w]).map(oe);(null==v?void 0:v.errorMap)&&D._updateErrorMap(v.errorMap),D._initializeWithPersistence(x,null==v?void 0:v.popupRedirectResolver)}(Ve,w),Ve})(x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,w,x)=>{v.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ie.wA("auth-internal",v=>{const w=Ct(v.getProvider("auth").getImmediate());return new h0(w)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)("@firebase/auth","0.17.0",void 0);class Td extends Gm{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(v=>{this.resolveInialized=v})}addPassiveListener(v){this.passiveListeners.add(v)}removePassiveListener(v){this.passiveListeners.delete(v)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(v){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(v)),super.onEvent(v)}initialized(){var v=this;return(0,h.Z)(function*(){yield v.initPromise})()}}function Vi(D){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,h.Z)(function*(D){const v=yield _a()._get(ag(D));return v&&(yield _a()._remove(ag(D))),v})).apply(this,arguments)}function Km(){const D=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<20;w++){const x=Math.floor(Math.random()*v.length);D.push(v.charAt(x))}return D.join("")}function _a(){return oe(ad)}function ag(D){return St("authEvent",D.config.apiKey,D.name)}function bl(D){if(!(null==D?void 0:D.includes("?")))return{};const[v,...w]=D.split("?");return(0,q.zd)(w.join("?"))}function Jm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:rt("no-auth-event")}}function Nd(){var D;return(null===(D=null==self?void 0:self.location)||void 0===D?void 0:D.protocol)||null}function Cl(D=(0,q.z$)()){return!("file:"!==Nd()&&"ionic:"!==Nd()||!D.toLowerCase().match(/iphone|ipad|ipod|android/))}function hg(){try{const D=self.localStorage,v=sl();if(D)return D.setItem(v,"1"),D.removeItem(v),!function(D=(0,q.z$)()){return(0,q.w1)()&&11===(null==document?void 0:document.documentMode)||function(D=(0,q.z$)()){return/Edge\/\d+/.test(D)}(D)}()||(0,q.hl)()}catch(D){return Md()&&(0,q.hl)()}return!1}function Md(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wu(){return("http:"===Nd()||"https:"===Nd()||(0,q.ru)()||Cl())&&!((0,q.b$)()||(0,q.UG)())&&hg()&&!Md()}function fg(){return Cl()&&"undefined"!=typeof document}function gg(){return(gg=(0,h.Z)(function*(){return!!fg()&&new Promise(D=>{const v=setTimeout(()=>{D(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(v),D(!0)})})})).apply(this,arguments)}const Hr={LOCAL:"local",NONE:"none",SESSION:"session"},Bi=ve,t_="persistence";function n_(D){return va.apply(this,arguments)}function va(){return(va=(0,h.Z)(function*(D){yield D._initializationPromise;const v=Rd(),w=St(t_,D.config.apiKey,D.name);(null==v?void 0:v.sessionStorage)&&v.sessionStorage.setItem(w,D._getPersistence())})).apply(this,arguments)}function Rd(){return"undefined"!=typeof window?window:null}const Dl=ve;class Ei{constructor(){this.browserResolver=oe(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ia,this._completeRedirectFn=fl}_openPopup(v,w,x,R){var P=this;return(0,h.Z)(function*(){var Q;ht(null===(Q=P.eventManagers[v._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const we=pa(v,w,x,ge(),R);return function(D,v,w,x=500,R=600){const P=Math.max((window.screen.availHeight-R)/2,0).toString(),Q=Math.max((window.screen.availWidth-x)/2,0).toString();let we="";const Ve=Object.assign(Object.assign({},ml),{width:x.toString(),height:R.toString(),top:P,left:Q}),We=(0,q.z$)().toLowerCase();w&&(we=za(We)?"_blank":w),Vr(We)&&(v=v||"http://localhost",Ve.scrollbars="yes");const Ze=Object.entries(Ve).reduce((Qn,[ri,Zu])=>`${Qn}${ri}=${Zu},`,"");if(function(D=(0,q.z$)()){var v;return Pn(D)&&!!(null===(v=window.navigator)||void 0===v?void 0:v.standalone)}(We)&&"_self"!==we)return function(D,v){const w=document.createElement("a");w.href=D,w.target=v;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),w.dispatchEvent(x)}(v||"",we),new Wm(null);const ot=window.open(v||"",we,Ze);ve(ot,D,"popup-blocked");try{ot.focus()}catch(Qn){}return new Wm(ot)}(v,we,sl())})()}_openRedirect(v,w,x,R){var P=this;return(0,h.Z)(function*(){return yield P._originValidation(v),D=pa(v,w,x,ge(),R),Dn().location.href=D,new Promise(()=>{});var D})()}_initialize(v){const w=v._key();if(this.eventManagers[w]){const{manager:R,promise:P}=this.eventManagers[w];return R?Promise.resolve(R):(ht(P,"If manager is not set, promise should be"),P)}const x=this.initAndGetManager(v);return this.eventManagers[w]={promise:x},x}initAndGetManager(v){var w=this;return(0,h.Z)(function*(){const x=yield function(D){return pl.apply(this,arguments)}(v),R=new Gm(v);return x.register("authEvent",P=>(ve(null==P?void 0:P.authEvent,v,"invalid-auth-event"),{status:R.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),w.eventManagers[v._key()]={manager:R},w.iframes[v._key()]=x,R})()}_isIframeWebStorageSupported(v,w){this.iframes[v._key()].send(Vu,{type:Vu},R=>{var P;const Q=null===(P=null==R?void 0:R[0])||void 0===P?void 0:P[Vu];void 0!==Q&&w(!!Q),Le(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const w=v._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function(D){return ng.apply(this,arguments)}(v)),this.originValidationPromises[w]}get _shouldInitProactively(){return cm()||Bs()||Pn()}}),this.cordovaResolver=oe(class{constructor(){this._redirectPersistence=ia,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fl}_initialize(v){var w=this;return(0,h.Z)(function*(){const x=v._key();let R=w.eventManagers.get(x);return R||(R=new Td(v),w.eventManagers.set(x,R),w.attachCallbackListeners(v,R)),R})()}_openPopup(v){Le(v,"operation-not-supported-in-this-environment")}_openRedirect(v,w,x,R){var P=this;return(0,h.Z)(function*(){!function(D){var v,w,x,R,P,Q,we,Ve,We,Ze;const ot=jr();ve("function"==typeof(null===(v=null==ot?void 0:ot.universalLinks)||void 0===v?void 0:v.subscribe),D,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ve(void 0!==(null===(w=null==ot?void 0:ot.BuildInfo)||void 0===w?void 0:w.packageName),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ve("function"==typeof(null===(P=null===(R=null===(x=null==ot?void 0:ot.cordova)||void 0===x?void 0:x.plugins)||void 0===R?void 0:R.browsertab)||void 0===P?void 0:P.openUrl),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ve("function"==typeof(null===(Ve=null===(we=null===(Q=null==ot?void 0:ot.cordova)||void 0===Q?void 0:Q.plugins)||void 0===we?void 0:we.browsertab)||void 0===Ve?void 0:Ve.isAvailable),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ve("function"==typeof(null===(Ze=null===(We=null==ot?void 0:ot.cordova)||void 0===We?void 0:We.InAppBrowser)||void 0===Ze?void 0:Ze.open),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(v);const Q=yield P._initialize(v);yield Q.initialized(),Q.resetRedirect(),Fn.clear(),yield P._originValidation(v);const we=function(D,v,w=null){return{type:v,eventId:w,urlResponse:null,sessionId:Km(),postBody:null,tenantId:D.tenantId,error:rt(D,"no-auth-event")}}(v,x,R);yield function(D,v){return _a()._set(ag(D),v)}(v,we);const Ve=yield function(D,v,w){return Id.apply(this,arguments)}(v,we,w),We=yield function(D){const{cordova:v}=jr();return new Promise(w=>{v.plugins.browsertab.isAvailable(x=>{let R=null;x?v.plugins.browsertab.openUrl(D):R=v.InAppBrowser.open(D,function(D=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}()?"_blank":"_system","location=yes"),w(R)})})}(Ve);return function(D,v,w){return Hu.apply(this,arguments)}(v,Q,We)})()}_isIframeWebStorageSupported(v,w){throw new Error("Method not implemented.")}_originValidation(v){const w=v._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function(D){return Gu.apply(this,arguments)}(v)),this.originValidationPromises[w]}attachCallbackListeners(v,w){const{universalLinks:x,handleOpenURL:R,BuildInfo:P}=jr(),Q=setTimeout((0,h.Z)(function*(){yield Vi(v),w.onEvent(Jm())}),500),we=function(){var Ze=(0,h.Z)(function*(ot){clearTimeout(Q);const Qn=yield Vi(v);let ri=null;Qn&&(null==ot?void 0:ot.url)&&(ri=function(D,v){var w,x;const R=function(D){const v=bl(D),w=v.link?decodeURIComponent(v.link):void 0,x=bl(w).link,R=v.deep_link_id?decodeURIComponent(v.deep_link_id):void 0;return bl(R).link||R||x||w||D}(v);if(R.includes("/__/auth/callback")){const P=bl(R),Q=P.firebaseError?function(D){try{return JSON.parse(D)}catch(v){return null}}(decodeURIComponent(P.firebaseError)):null,we=null===(x=null===(w=null==Q?void 0:Q.code)||void 0===w?void 0:w.split("auth/"))||void 0===x?void 0:x[1],Ve=we?rt(we):null;return Ve?{type:D.type,eventId:D.eventId,tenantId:D.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:D.type,eventId:D.eventId,tenantId:D.tenantId,sessionId:D.sessionId,urlResponse:R,postBody:null}}return null}(Qn,ot.url)),w.onEvent(ri||Jm())});return function(Qn){return Ze.apply(this,arguments)}}();void 0!==x&&"function"==typeof x.subscribe&&x.subscribe(null,we);const Ve=R,We=`${P.packageName.toLowerCase()}://`;jr().handleOpenURL=function(){var Ze=(0,h.Z)(function*(ot){if(ot.toLowerCase().startsWith(We)&&we({url:ot}),"function"==typeof Ve)try{Ve(ot)}catch(Qn){console.error(Qn)}});return function(ot){return Ze.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ia,this._completeRedirectFn=fl}_initialize(v){var w=this;return(0,h.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(v)})()}_openPopup(v,w,x,R){var P=this;return(0,h.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(v,w,x,R)})()}_openRedirect(v,w,x,R){var P=this;return(0,h.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(v,w,x,R)})()}_isIframeWebStorageSupported(v,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(v,w)}_originValidation(v){return this.assertedUnderlyingResolver._originValidation(v)}get _shouldInitProactively(){return fg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Dl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var v=this;return(0,h.Z)(function*(){if(v.underlyingResolver)return;const w=yield function(){return gg.apply(this,arguments)}();v.underlyingResolver=w?v.cordovaResolver:v.browserResolver})()}}function lr(D){return D.unwrap()}function pg(D){return Od(D)}function _0(D,v){var w;const x=null===(w=v.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===v.code)v.resolver=new Yu(D,function(D,v){var w;const x=(0,q.m9)(D),R=v;return ve(v.operationType,x,"argument-error"),ve(null===(w=R.serverResponse)||void 0===w?void 0:w.mfaPendingCredential,x,"argument-error"),Hf._fromError(x,R)}(D,v));else if(x){const R=Od(v),P=v;R&&(P.credential=R,P.tenantId=x.tenantId||void 0,P.email=x.email||void 0,P.phoneNumber=x.phoneNumber||void 0)}}function Od(D){const{_tokenResponse:v}=D instanceof q.ZR?D.customData:D;if(!v)return null;if(!(D instanceof q.ZR)&&"temporaryProof"in v&&"phoneNumber"in v)return bs.credentialFromResult(D);const w=v.providerId;if(!w||"password"===w)return null;let x;switch(w){case"google.com":x=xf;break;case"facebook.com":x=Kv;break;case"github.com":x=If;break;case"twitter.com":x=mm;break;default:const{oauthIdToken:R,oauthAccessToken:P,oauthTokenSecret:Q,pendingToken:we,nonce:Ve}=v;return P||Q||R||we?we?w.startsWith("saml.")?Ja._create(w,we):Hs._fromParams({providerId:w,signInMethod:w,pendingToken:we,idToken:R,accessToken:P}):new $s(w).credential({idToken:R,accessToken:P,rawNonce:Ve}):null}return D instanceof q.ZR?x.credentialFromError(D):x.credentialFromResult(D)}function an(D,v){return kd.apply(this,arguments)}function kd(){return(kd=(0,h.Z)(function*(D,v){let w;try{w=yield v}catch(P){throw P instanceof q.ZR&&_0(D,P),P}const{operationType:x,user:R}=w;return{operationType:x,credential:pg(w),additionalUserInfo:bu(w),user:Js.getOrCreate(R)}})).apply(this,arguments)}function qu(D,v){return Il.apply(this,arguments)}function Il(){return(Il=(0,h.Z)(function*(D,v){const w=yield v;return{verificationId:w.verificationId,confirm:x=>an(D,w.confirm(x))}})).apply(this,arguments)}class Yu{constructor(v,w){this.resolver=w,this.auth=function(D){return D.wrapped()}(v)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(v){return an(lr(this.auth),this.resolver.resolveSignIn(v))}}class Js{constructor(v){this._delegate=v,this.multiFactor=function(D){const v=(0,q.m9)(D);return od.has(v)||od.set(v,wu._fromUser(v)),od.get(v)}(v)}static getOrCreate(v){return Js.USER_MAP.has(v)||Js.USER_MAP.set(v,new Js(v)),Js.USER_MAP.get(v)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(v){return this._delegate.getIdTokenResult(v)}getIdToken(v){return this._delegate.getIdToken(v)}linkAndRetrieveDataWithCredential(v){return this.linkWithCredential(v)}linkWithCredential(v){var w=this;return(0,h.Z)(function*(){return an(w.auth,bi(w._delegate,v))})()}linkWithPhoneNumber(v,w){var x=this;return(0,h.Z)(function*(){return qu(x.auth,function(D,v,w){return xo.apply(this,arguments)}(x._delegate,v,w))})()}linkWithPopup(v){var w=this;return(0,h.Z)(function*(){return an(w.auth,function(D,v,w){return Lm.apply(this,arguments)}(w._delegate,v,Ei))})()}linkWithRedirect(v){var w=this;return(0,h.Z)(function*(){return yield n_(Ct(w.auth)),function(D,v,w){return function(D,v,w){return vd.apply(this,arguments)}(D,v,w)}(w._delegate,v,Ei)})()}reauthenticateAndRetrieveDataWithCredential(v){return this.reauthenticateWithCredential(v)}reauthenticateWithCredential(v){var w=this;return(0,h.Z)(function*(){return an(w.auth,Qc(w._delegate,v))})()}reauthenticateWithPhoneNumber(v,w){return qu(this.auth,function(D,v,w){return Pm.apply(this,arguments)}(this._delegate,v,w))}reauthenticateWithPopup(v){return an(this.auth,function(D,v,w){return pd.apply(this,arguments)}(this._delegate,v,Ei))}reauthenticateWithRedirect(v){var w=this;return(0,h.Z)(function*(){return yield n_(Ct(w.auth)),function(D,v,w){return function(D,v,w){return ca.apply(this,arguments)}(D,v,w)}(w._delegate,v,Ei)})()}sendEmailVerification(v){return function(D,v){return Lf.apply(this,arguments)}(this._delegate,v)}unlink(v){var w=this;return(0,h.Z)(function*(){return yield function(D,v){return Af.apply(this,arguments)}(w._delegate,v),w})()}updateEmail(v){return function(D,v){return Gf((0,q.m9)(D),v,null)}(this._delegate,v)}updatePassword(v){return function(D,v){return Gf((0,q.m9)(D),null,v)}(this._delegate,v)}updatePhoneNumber(v){return function(D,v){return la.apply(this,arguments)}(this._delegate,v)}updateProfile(v){return function(D,v){return Vf.apply(this,arguments)}(this._delegate,v)}verifyBeforeUpdateEmail(v,w){return function(D,v,w){return Ci.apply(this,arguments)}(this._delegate,v,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Js.USER_MAP=new WeakMap;const zu=ve;let r_=(()=>{class D{constructor(w,x){if(this.app=w,x.isInitialized())return this._delegate=x.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:R}=w.options;zu(R,"invalid-api-key",{appName:w.name});let P=[$t];if("undefined"!=typeof window){P=function(D,v){const w=Rd();if(!(null==w?void 0:w.sessionStorage))return[];const x=St(t_,D,v);switch(w.sessionStorage.getItem(x)){case Hr.NONE:return[$t];case Hr.LOCAL:return[aa,ia];case Hr.SESSION:return[ia];default:return[]}}(R,w.name);for(const we of[aa,ad,ia])P.includes(we)||P.push(we)}zu(R,"invalid-api-key",{appName:w.name});const Q="undefined"!=typeof window?Ei:void 0;this._delegate=x.initialize({options:{persistence:P,popupRedirectResolver:Q}}),this._delegate._updateErrorMap(Ie),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Js.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,x){!function(D,v,w){const x=Ct(D);ve(x._canInitEmulator,x,"emulator-config-failed"),ve(/^https?:\/\//.test(v),x,"invalid-emulator-scheme");const R=!!(null==w?void 0:w.disableWarnings),P=zn(v),{host:Q,port:we}=function(D){const v=zn(D),w=/(\/\/)?([^?#/]+)/.exec(D.substr(v.length));if(!w)return{host:"",port:null};const x=w[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(x);if(R){const P=R[1];return{host:P,port:Cn(x.substr(P.length+1))}}{const[P,Q]=x.split(":");return{host:P,port:Cn(Q)}}}(v);x.config.emulator={url:`${P}//${Q}${null===we?"":`:${we}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:Q,port:we,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:R})}),function(D){function v(){const w=document.createElement("p"),x=w.style;w.innerText="Running in emulator mode. Do not use with production credentials.",x.position="fixed",x.width="100%",x.backgroundColor="#ffffff",x.border=".1em solid #000000",x.color="#b50000",x.bottom="0px",x.left="0px",x.margin="0px",x.zIndex="10000",x.textAlign="center",w.classList.add("firebase-emulator-warning"),document.body.appendChild(w)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&!D&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}(R)}(this._delegate,w,x)}applyActionCode(w){return function(D,v){return kf.apply(this,arguments)}(this._delegate,w)}checkActionCode(w){return Cm(this._delegate,w)}confirmPasswordReset(w,x){return function(D,v,w){return Of.apply(this,arguments)}(this._delegate,w,x)}createUserWithEmailAndPassword(w,x){var R=this;return(0,h.Z)(function*(){return an(R._delegate,function(D,v,w){return cn.apply(this,arguments)}(R._delegate,w,x))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return function(D,v){return Gn.apply(this,arguments)}(this._delegate,w)}isSignInWithEmailLink(w){return function(D,v){const w=$c.parseLink(v);return"EMAIL_SIGNIN"===(null==w?void 0:w.operation)}(0,w)}getRedirectResult(){var w=this;return(0,h.Z)(function*(){zu(Wu(),w._delegate,"operation-not-supported-in-this-environment");const x=yield function(D,v){return Xf.apply(this,arguments)}(w._delegate,Ei);return x?an(w._delegate,Promise.resolve(x)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function(D,v){Ct(D)._logFramework(v)}(this._delegate,w)}onAuthStateChanged(w,x,R){const{next:P,error:Q,complete:we}=mg(w,x,R);return this._delegate.onAuthStateChanged(P,Q,we)}onIdTokenChanged(w,x,R){const{next:P,error:Q,complete:we}=mg(w,x,R);return this._delegate.onIdTokenChanged(P,Q,we)}sendSignInLinkToEmail(w,x){return function(D,v,w){return ei.apply(this,arguments)}(this._delegate,w,x)}sendPasswordResetEmail(w,x){return function(D,v,w){return Rf.apply(this,arguments)}(this._delegate,w,x||void 0)}setPersistence(w){var x=this;return(0,h.Z)(function*(){let R;switch(function(D,v){Bi(Object.values(Hr).includes(v),D,"invalid-persistence-type"),(0,q.b$)()?Bi(v!==Hr.SESSION,D,"unsupported-persistence-type"):(0,q.UG)()?Bi(v===Hr.NONE,D,"unsupported-persistence-type"):Md()?Bi(v===Hr.NONE||v===Hr.LOCAL&&(0,q.hl)(),D,"unsupported-persistence-type"):Bi(v===Hr.NONE||hg(),D,"unsupported-persistence-type")}(x._delegate,w),w){case Hr.SESSION:R=ia;break;case Hr.LOCAL:R=(yield oe(aa)._isAvailable())?aa:ad;break;case Hr.NONE:R=$t;break;default:return Le("argument-error",{appName:x._delegate.name})}return x._delegate.setPersistence(R)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return an(this._delegate,function(D){return vm.apply(this,arguments)}(this._delegate))}signInWithCredential(w){return an(this._delegate,Kc(this._delegate,w))}signInWithCustomToken(w){return an(this._delegate,function(D,v){return el.apply(this,arguments)}(this._delegate,w))}signInWithEmailAndPassword(w,x){return an(this._delegate,function(D,v,w){return Kc((0,q.m9)(D),pm.credential(v,w))}(this._delegate,w,x))}signInWithEmailLink(w,x){return an(this._delegate,function(D,v,w){return Em.apply(this,arguments)}(this._delegate,w,x))}signInWithPhoneNumber(w,x){return qu(this._delegate,function(D,v,w){return km.apply(this,arguments)}(this._delegate,w,x))}signInWithPopup(w){var x=this;return(0,h.Z)(function*(){return zu(Wu(),x._delegate,"operation-not-supported-in-this-environment"),an(x._delegate,function(D,v,w){return ws.apply(this,arguments)}(x._delegate,w,Ei))})()}signInWithRedirect(w){var x=this;return(0,h.Z)(function*(){return zu(Wu(),x._delegate,"operation-not-supported-in-this-environment"),yield n_(x._delegate),function(D,v,w){return function(D,v,w){return ku.apply(this,arguments)}(D,v,w)}(x._delegate,w,Ei)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return function(D,v){return Rt.apply(this,arguments)}(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return D.Persistence=Hr,D})();function mg(D,v,w){let x=D;"function"!=typeof D&&({next:x,error:v,complete:w}=D);const R=x;return{next:Q=>R(Q&&Js.getOrCreate(Q)),error:v,complete:w}}class No{constructor(){this.providerId="phone",this._delegate=new bs(lr(ue.Z.auth()))}static credential(v,w){return bs.credential(v,w)}verifyPhoneNumber(v,w){return this._delegate.verifyPhoneNumber(v,w)}unwrap(){return this._delegate}}No.PHONE_SIGN_IN_METHOD=bs.PHONE_SIGN_IN_METHOD,No.PROVIDER_ID=bs.PROVIDER_ID;const _g=ve;class i_{constructor(v,w,x=ue.Z.app()){var R;_g(null===(R=x.options)||void 0===R?void 0:R.apiKey,"invalid-api-key",{appName:x.name}),this._delegate=new Tn(v,w,x.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(D){D.INTERNAL.registerComponent(new ie.wA("auth-compat",v=>{const w=v.getProvider("app-compat").getImmediate(),x=v.getProvider("auth");return new r_(w,x)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:pm,FacebookAuthProvider:Kv,GithubAuthProvider:If,GoogleAuthProvider:xf,OAuthProvider:$s,PhoneAuthProvider:No,PhoneMultiFactorGenerator:sg,RecaptchaVerifier:i_,TwitterAuthProvider:mm,Auth:r_,AuthCredential:zi,Error:q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),D.registerVersion("@firebase/auth-compat","0.1.0")}(ue.Z)},1593:(qe,xe,U)=>{"use strict";U.d(xe,{P:()=>ie});var h=U(9193),ue=U(5917),q=U(7574);class ie{constructor($,B,z){this.kind=$,this.value=B,this.error=z,this.hasValue="N"===$}observe($){switch(this.kind){case"N":return $.next&&$.next(this.value);case"E":return $.error&&$.error(this.error);case"C":return $.complete&&$.complete()}}do($,B,z){switch(this.kind){case"N":return $&&$(this.value);case"E":return B&&B(this.error);case"C":return z&&z()}}accept($,B,z){return $&&"function"==typeof $.next?this.observe($):this.do($,B,z)}toObservable(){switch(this.kind){case"N":return(0,ue.of)(this.value);case"E":return J=this.error,new q.y(B=>B.error(J));case"C":return(0,h.c)()}var J;throw new Error("unexpected notification kind value")}static createNext($){return void 0!==$?new ie("N",$):ie.undefinedValueNotification}static createError($){return new ie("E",void 0,$)}static createComplete(){return ie.completeNotification}}ie.completeNotification=new ie("C"),ie.undefinedValueNotification=new ie("N",void 0)},7574:(qe,xe,U)=>{"use strict";U.d(xe,{y:()=>z});var h=U(7393),q=U(9181),ae=U(6490),X=U(6554),ie=U(4487);var B=U(2494);let z=(()=>{class K{constructor(Ie){this._isScalar=!1,Ie&&(this._subscribe=Ie)}lift(Ie){const ye=new K;return ye.source=this,ye.operator=Ie,ye}subscribe(Ie,ye,Me){const{operator:se}=this,ce=function(K,Ce,Ie){if(K){if(K instanceof h.L)return K;if(K[q.b])return K[q.b]()}return K||Ce||Ie?new h.L(K,Ce,Ie):new h.L(ae.c)}(Ie,ye,Me);if(ce.add(se?se.call(ce,this.source):this.source||B.v.useDeprecatedSynchronousErrorHandling&&!ce.syncErrorThrowable?this._subscribe(ce):this._trySubscribe(ce)),B.v.useDeprecatedSynchronousErrorHandling&&ce.syncErrorThrowable&&(ce.syncErrorThrowable=!1,ce.syncErrorThrown))throw ce.syncErrorValue;return ce}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch(ye){B.v.useDeprecatedSynchronousErrorHandling&&(Ie.syncErrorThrown=!0,Ie.syncErrorValue=ye),function(K){for(;K;){const{closed:Ce,destination:Ie,isStopped:ye}=K;if(Ce||ye)return!1;K=Ie&&Ie instanceof h.L?Ie:null}return!0}(Ie)?Ie.error(ye):console.warn(ye)}}forEach(Ie,ye){return new(ye=G(ye))((Me,se)=>{let ce;ce=this.subscribe(Ge=>{try{Ie(Ge)}catch(Le){se(Le),ce&&ce.unsubscribe()}},se,Me)})}_subscribe(Ie){const{source:ye}=this;return ye&&ye.subscribe(Ie)}[X.L](){return this}pipe(...Ie){return 0===Ie.length?this:function(K){return 0===K.length?ie.y:1===K.length?K[0]:function(Ie){return K.reduce((ye,Me)=>Me(ye),Ie)}}(Ie)(this)}toPromise(Ie){return new(Ie=G(Ie))((ye,Me)=>{let se;this.subscribe(ce=>se=ce,ce=>Me(ce),()=>ye(se))})}}return K.create=Ce=>new K(Ce),K})();function G(K){if(K||(K=B.v.Promise||Promise),!K)throw new Error("no Promise impl found");return K}},6490:(qe,xe,U)=>{"use strict";U.d(xe,{c:()=>q});var h=U(2494),ue=U(4449);const q={closed:!0,next(ae){},error(ae){if(h.v.useDeprecatedSynchronousErrorHandling)throw ae;(0,ue.z)(ae)},complete(){}}},9765:(qe,xe,U)=>{"use strict";U.d(xe,{Yc:()=>ie,xQ:()=>J});var h=U(7574),ue=U(7393),q=U(5319),ae=U(7971),pe=U(8858),X=U(9181);class ie extends ue.L{constructor(z){super(z),this.destination=z}}let J=(()=>{class B extends h.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[X.b](){return new ie(this)}lift(G){const K=new $(this,this);return K.operator=G,K}next(G){if(this.closed)throw new ae.N;if(!this.isStopped){const{observers:K}=this,Ce=K.length,Ie=K.slice();for(let ye=0;ye<Ce;ye++)Ie[ye].next(G)}}error(G){if(this.closed)throw new ae.N;this.hasError=!0,this.thrownError=G,this.isStopped=!0;const{observers:K}=this,Ce=K.length,Ie=K.slice();for(let ye=0;ye<Ce;ye++)Ie[ye].error(G);this.observers.length=0}complete(){if(this.closed)throw new ae.N;this.isStopped=!0;const{observers:G}=this,K=G.length,Ce=G.slice();for(let Ie=0;Ie<K;Ie++)Ce[Ie].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(G){if(this.closed)throw new ae.N;return super._trySubscribe(G)}_subscribe(G){if(this.closed)throw new ae.N;return this.hasError?(G.error(this.thrownError),q.w.EMPTY):this.isStopped?(G.complete(),q.w.EMPTY):(this.observers.push(G),new pe.W(this,G))}asObservable(){const G=new h.y;return G.source=this,G}}return B.create=(z,G)=>new $(z,G),B})();class $ extends J{constructor(z,G){super(),this.destination=z,this.source=G}next(z){const{destination:G}=this;G&&G.next&&G.next(z)}error(z){const{destination:G}=this;G&&G.error&&this.destination.error(z)}complete(){const{destination:z}=this;z&&z.complete&&this.destination.complete()}_subscribe(z){const{source:G}=this;return G?this.source.subscribe(z):q.w.EMPTY}}},8858:(qe,xe,U)=>{"use strict";U.d(xe,{W:()=>ue});var h=U(5319);class ue extends h.w{constructor(ae,pe){super(),this.subject=ae,this.subscriber=pe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ae=this.subject,pe=ae.observers;if(this.subject=null,!pe||0===pe.length||ae.isStopped||ae.closed)return;const X=pe.indexOf(this.subscriber);-1!==X&&pe.splice(X,1)}}},7393:(qe,xe,U)=>{"use strict";U.d(xe,{L:()=>ie});var h=U(9105),ue=U(6490),q=U(5319),ae=U(9181),pe=U(2494),X=U(4449);class ie extends q.w{constructor(B,z,G){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=ue.c;break;case 1:if(!B){this.destination=ue.c;break}if("object"==typeof B){B instanceof ie?(this.syncErrorThrowable=B.syncErrorThrowable,this.destination=B,B.add(this)):(this.syncErrorThrowable=!0,this.destination=new J(this,B));break}default:this.syncErrorThrowable=!0,this.destination=new J(this,B,z,G)}}[ae.b](){return this}static create(B,z,G){const K=new ie(B,z,G);return K.syncErrorThrowable=!1,K}next(B){this.isStopped||this._next(B)}error(B){this.isStopped||(this.isStopped=!0,this._error(B))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(B){this.destination.next(B)}_error(B){this.destination.error(B),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:B}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=B,this}}class J extends ie{constructor(B,z,G,K){super(),this._parentSubscriber=B;let Ce,Ie=this;(0,h.m)(z)?Ce=z:z&&(Ce=z.next,G=z.error,K=z.complete,z!==ue.c&&(Ie=Object.create(z),(0,h.m)(Ie.unsubscribe)&&this.add(Ie.unsubscribe.bind(Ie)),Ie.unsubscribe=this.unsubscribe.bind(this))),this._context=Ie,this._next=Ce,this._error=G,this._complete=K}next(B){if(!this.isStopped&&this._next){const{_parentSubscriber:z}=this;pe.v.useDeprecatedSynchronousErrorHandling&&z.syncErrorThrowable?this.__tryOrSetError(z,this._next,B)&&this.unsubscribe():this.__tryOrUnsub(this._next,B)}}error(B){if(!this.isStopped){const{_parentSubscriber:z}=this,{useDeprecatedSynchronousErrorHandling:G}=pe.v;if(this._error)G&&z.syncErrorThrowable?(this.__tryOrSetError(z,this._error,B),this.unsubscribe()):(this.__tryOrUnsub(this._error,B),this.unsubscribe());else if(z.syncErrorThrowable)G?(z.syncErrorValue=B,z.syncErrorThrown=!0):(0,X.z)(B),this.unsubscribe();else{if(this.unsubscribe(),G)throw B;(0,X.z)(B)}}}complete(){if(!this.isStopped){const{_parentSubscriber:B}=this;if(this._complete){const z=()=>this._complete.call(this._context);pe.v.useDeprecatedSynchronousErrorHandling&&B.syncErrorThrowable?(this.__tryOrSetError(B,z),this.unsubscribe()):(this.__tryOrUnsub(z),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(B,z){try{B.call(this._context,z)}catch(G){if(this.unsubscribe(),pe.v.useDeprecatedSynchronousErrorHandling)throw G;(0,X.z)(G)}}__tryOrSetError(B,z,G){if(!pe.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{z.call(this._context,G)}catch(K){return pe.v.useDeprecatedSynchronousErrorHandling?(B.syncErrorValue=K,B.syncErrorThrown=!0,!0):((0,X.z)(K),!0)}return!1}_unsubscribe(){const{_parentSubscriber:B}=this;this._context=null,this._parentSubscriber=null,B.unsubscribe()}}},5319:(qe,xe,U)=>{"use strict";U.d(xe,{w:()=>X});var h=U(9796),ue=U(1555),q=U(9105);const pe=(()=>{function J($){return Error.call(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((B,z)=>`${z+1}) ${B.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$,this}return J.prototype=Object.create(Error.prototype),J})();class X{constructor($){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,$&&(this._ctorUnsubscribe=!0,this._unsubscribe=$)}unsubscribe(){let $;if(this.closed)return;let{_parentOrParents:B,_ctorUnsubscribe:z,_unsubscribe:G,_subscriptions:K}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,B instanceof X)B.remove(this);else if(null!==B)for(let Ce=0;Ce<B.length;++Ce)B[Ce].remove(this);if((0,q.m)(G)){z&&(this._unsubscribe=void 0);try{G.call(this)}catch(Ce){$=Ce instanceof pe?ie(Ce.errors):[Ce]}}if((0,h.k)(K)){let Ce=-1,Ie=K.length;for(;++Ce<Ie;){const ye=K[Ce];if((0,ue.K)(ye))try{ye.unsubscribe()}catch(Me){$=$||[],Me instanceof pe?$=$.concat(ie(Me.errors)):$.push(Me)}}}if($)throw new pe($)}add($){let B=$;if(!$)return X.EMPTY;switch(typeof $){case"function":B=new X($);case"object":if(B===this||B.closed||"function"!=typeof B.unsubscribe)return B;if(this.closed)return B.unsubscribe(),B;if(!(B instanceof X)){const K=B;B=new X,B._subscriptions=[K]}break;default:throw new Error("unrecognized teardown "+$+" added to Subscription.")}let{_parentOrParents:z}=B;if(null===z)B._parentOrParents=this;else if(z instanceof X){if(z===this)return B;B._parentOrParents=[z,this]}else{if(-1!==z.indexOf(this))return B;z.push(this)}const G=this._subscriptions;return null===G?this._subscriptions=[B]:G.push(B),B}remove($){const B=this._subscriptions;if(B){const z=B.indexOf($);-1!==z&&B.splice(z,1)}}}var J;function ie(J){return J.reduce(($,B)=>$.concat(B instanceof pe?B.errors:B),[])}X.EMPTY=((J=new X).closed=!0,J)},2494:(qe,xe,U)=>{"use strict";U.d(xe,{v:()=>ue});let h=!1;const ue={Promise:void 0,set useDeprecatedSynchronousErrorHandling(q){if(q){const ae=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ae.stack)}else h&&console.log("RxJS: Back to a better error behavior. Thank you. <3");h=q},get useDeprecatedSynchronousErrorHandling(){return h}}},5345:(qe,xe,U)=>{"use strict";U.d(xe,{IY:()=>ae,Ds:()=>X,ft:()=>J});var h=U(7393),ue=U(7574),q=U(7444);class ae extends h.L{constructor(B){super(),this.parent=B}_next(B){this.parent.notifyNext(B)}_error(B){this.parent.notifyError(B),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class X extends h.L{notifyNext(B){this.destination.next(B)}notifyError(B){this.destination.error(B)}notifyComplete(){this.destination.complete()}}function J($,B){if(B.closed)return;if($ instanceof ue.y)return $.subscribe(B);let z;try{z=(0,q.s)($)(B)}catch(G){B.error(G)}return z}},2441:(qe,xe,U)=>{"use strict";U.d(xe,{c:()=>pe,N:()=>X});var h=U(9765),ue=U(7574),q=U(5319),ae=U(1307);class pe extends ue.y{constructor(z,G){super(),this.source=z,this.subjectFactory=G,this._refCount=0,this._isComplete=!1}_subscribe(z){return this.getSubject().subscribe(z)}getSubject(){const z=this._subject;return(!z||z.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let z=this._connection;return z||(this._isComplete=!1,z=this._connection=new q.w,z.add(this.source.subscribe(new ie(this.getSubject(),this))),z.closed&&(this._connection=null,z=q.w.EMPTY)),z}refCount(){return(0,ae.x)()(this)}}const X=(()=>{const B=pe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:B._subscribe},_isComplete:{value:B._isComplete,writable:!0},getSubject:{value:B.getSubject},connect:{value:B.connect},refCount:{value:B.refCount}}})();class ie extends h.Yc{constructor(z,G){super(z),this.connectable=G}_error(z){this._unsubscribe(),super._error(z)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const z=this.connectable;if(z){this.connectable=null;const G=z._connection;z._refCount=0,z._subject=null,z._connection=null,G&&G.unsubscribe()}}}},9193:(qe,xe,U)=>{"use strict";U.d(xe,{E:()=>ue,c:()=>q});var h=U(7574);const ue=new h.y(pe=>pe.complete());function q(pe){return pe?function(pe){return new h.y(X=>pe.schedule(()=>X.complete()))}(pe):ue}},4402:(qe,xe,U)=>{"use strict";U.d(xe,{D:()=>Ie});var h=U(7574),ue=U(7444),q=U(5319),ae=U(6554),ie=U(4087),J=U(377),z=U(4072),G=U(9489);function Ie(ye,Me){return Me?function(ye,Me){if(null!=ye){if(function(ye){return ye&&"function"==typeof ye[ae.L]}(ye))return function(ye,Me){return new h.y(se=>{const ce=new q.w;return ce.add(Me.schedule(()=>{const Ge=ye[ae.L]();ce.add(Ge.subscribe({next(Le){ce.add(Me.schedule(()=>se.next(Le)))},error(Le){ce.add(Me.schedule(()=>se.error(Le)))},complete(){ce.add(Me.schedule(()=>se.complete()))}}))})),ce})}(ye,Me);if((0,z.t)(ye))return function(ye,Me){return new h.y(se=>{const ce=new q.w;return ce.add(Me.schedule(()=>ye.then(Ge=>{ce.add(Me.schedule(()=>{se.next(Ge),ce.add(Me.schedule(()=>se.complete()))}))},Ge=>{ce.add(Me.schedule(()=>se.error(Ge)))}))),ce})}(ye,Me);if((0,G.z)(ye))return(0,ie.r)(ye,Me);if(function(ye){return ye&&"function"==typeof ye[J.hZ]}(ye)||"string"==typeof ye)return function(ye,Me){if(!ye)throw new Error("Iterable cannot be null");return new h.y(se=>{const ce=new q.w;let Ge;return ce.add(()=>{Ge&&"function"==typeof Ge.return&&Ge.return()}),ce.add(Me.schedule(()=>{Ge=ye[J.hZ](),ce.add(Me.schedule(function(){if(se.closed)return;let Le,rt;try{const At=Ge.next();Le=At.value,rt=At.done}catch(At){return void se.error(At)}rt?se.complete():(se.next(Le),this.schedule())}))})),ce})}(ye,Me)}throw new TypeError((null!==ye&&typeof ye||ye)+" is not observable")}(ye,Me):ye instanceof h.y?ye:new h.y((0,ue.s)(ye))}},6693:(qe,xe,U)=>{"use strict";U.d(xe,{n:()=>ae});var h=U(7574),ue=U(5015),q=U(4087);function ae(pe,X){return X?(0,q.r)(pe,X):new h.y((0,ue.V)(pe))}},6682:(qe,xe,U)=>{"use strict";U.d(xe,{T:()=>pe});var h=U(7574),ue=U(4869),q=U(3282),ae=U(6693);function pe(...X){let ie=Number.POSITIVE_INFINITY,J=null,$=X[X.length-1];return(0,ue.K)($)?(J=X.pop(),X.length>1&&"number"==typeof X[X.length-1]&&(ie=X.pop())):"number"==typeof $&&(ie=X.pop()),null===J&&1===X.length&&X[0]instanceof h.y?X[0]:(0,q.J)(ie)((0,ae.n)(X,J))}},5917:(qe,xe,U)=>{"use strict";U.d(xe,{of:()=>ae});var h=U(4869),ue=U(6693),q=U(4087);function ae(...pe){let X=pe[pe.length-1];return(0,h.K)(X)?(pe.pop(),(0,q.r)(pe,X)):(0,ue.n)(pe)}},8002:(qe,xe,U)=>{"use strict";U.d(xe,{U:()=>ue});var h=U(7393);function ue(pe,X){return function(J){if("function"!=typeof pe)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return J.lift(new q(pe,X))}}class q{constructor(X,ie){this.project=X,this.thisArg=ie}call(X,ie){return ie.subscribe(new ae(X,this.project,this.thisArg))}}class ae extends h.L{constructor(X,ie,J){super(X),this.project=ie,this.count=0,this.thisArg=J||this}_next(X){let ie;try{ie=this.project.call(this.thisArg,X,this.count++)}catch(J){return void this.destination.error(J)}this.destination.next(ie)}}},3282:(qe,xe,U)=>{"use strict";U.d(xe,{J:()=>q});var h=U(9773),ue=U(4487);function q(ae=Number.POSITIVE_INFINITY){return(0,h.zg)(ue.y,ae)}},9773:(qe,xe,U)=>{"use strict";U.d(xe,{zg:()=>ae});var h=U(8002),ue=U(4402),q=U(5345);function ae(J,$,B=Number.POSITIVE_INFINITY){return"function"==typeof $?z=>z.pipe(ae((G,K)=>(0,ue.D)(J(G,K)).pipe((0,h.U)((Ce,Ie)=>$(G,Ce,K,Ie))),B)):("number"==typeof $&&(B=$),z=>z.lift(new pe(J,B)))}class pe{constructor($,B=Number.POSITIVE_INFINITY){this.project=$,this.concurrent=B}call($,B){return B.subscribe(new X($,this.project,this.concurrent))}}class X extends q.Ds{constructor($,B,z=Number.POSITIVE_INFINITY){super($),this.project=B,this.concurrent=z,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next($){this.active<this.concurrent?this._tryNext($):this.buffer.push($)}_tryNext($){let B;const z=this.index++;try{B=this.project($,z)}catch(G){return void this.destination.error(G)}this.active++,this._innerSub(B)}_innerSub($){const B=new q.IY(this),z=this.destination;z.add(B);const G=(0,q.ft)($,B);G!==B&&z.add(G)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext($){this.destination.next($)}notifyComplete(){const $=this.buffer;this.active--,$.length>0?this._next($.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(qe,xe,U)=>{"use strict";U.d(xe,{QV:()=>q,ht:()=>pe});var h=U(7393),ue=U(1593);function q(ie,J=0){return function(B){return B.lift(new ae(ie,J))}}class ae{constructor(J,$=0){this.scheduler=J,this.delay=$}call(J,$){return $.subscribe(new pe(J,this.scheduler,this.delay))}}class pe extends h.L{constructor(J,$,B=0){super(J),this.scheduler=$,this.delay=B}static dispatch(J){const{notification:$,destination:B}=J;$.observe(B),this.unsubscribe()}scheduleMessage(J){this.destination.add(this.scheduler.schedule(pe.dispatch,this.delay,new X(J,this.destination)))}_next(J){this.scheduleMessage(ue.P.createNext(J))}_error(J){this.scheduleMessage(ue.P.createError(J)),this.unsubscribe()}_complete(){this.scheduleMessage(ue.P.createComplete()),this.unsubscribe()}}class X{constructor(J,$){this.notification=J,this.destination=$}}},1307:(qe,xe,U)=>{"use strict";U.d(xe,{x:()=>ue});var h=U(7393);function ue(){return function(X){return X.lift(new q(X))}}class q{constructor(X){this.connectable=X}call(X,ie){const{connectable:J}=this;J._refCount++;const $=new ae(X,J),B=ie.subscribe($);return $.closed||($.connection=J.connect()),B}}class ae extends h.L{constructor(X,ie){super(X),this.connectable=ie}_unsubscribe(){const{connectable:X}=this;if(!X)return void(this.connection=null);this.connectable=null;const ie=X._refCount;if(ie<=0)return void(this.connection=null);if(X._refCount=ie-1,ie>1)return void(this.connection=null);const{connection:J}=this,$=X._connection;this.connection=null,$&&(!J||$===J)&&$.unsubscribe()}}},8819:(qe,xe,U)=>{"use strict";U.d(xe,{B:()=>ie});var h=U(2441);var ae=U(1307),pe=U(9765);function X(){return new pe.xQ}function ie(){return J=>(0,ae.x)()(function(J,$){return function(z){let G;G="function"==typeof J?J:function(){return J};const K=Object.create(z,h.N);return K.source=z,K.subjectFactory=G,K}}(X)(J))}},2639:(qe,xe,U)=>{"use strict";U.d(xe,{R:()=>ye});var h=U(7574);let ue=1;const q=Promise.resolve(),ae={};function pe(se){return se in ae&&(delete ae[se],!0)}const X={setImmediate(se){const ce=ue++;return ae[ce]=!0,q.then(()=>pe(ce)&&se()),ce},clearImmediate(se){pe(se)}};var J=U(6465),B=U(6102);const K=new class extends B.v{flush(ce){this.active=!0,this.scheduled=void 0;const{actions:Ge}=this;let Le,rt=-1,At=Ge.length;ce=ce||Ge.shift();do{if(Le=ce.execute(ce.state,ce.delay))break}while(++rt<At&&(ce=Ge.shift()));if(this.active=!1,Le){for(;++rt<At&&(ce=Ge.shift());)ce.unsubscribe();throw Le}}}(class extends J.o{constructor(ce,Ge){super(ce,Ge),this.scheduler=ce,this.work=Ge}requestAsyncId(ce,Ge,Le=0){return null!==Le&&Le>0?super.requestAsyncId(ce,Ge,Le):(ce.actions.push(this),ce.scheduled||(ce.scheduled=X.setImmediate(ce.flush.bind(ce,null))))}recycleAsyncId(ce,Ge,Le=0){if(null!==Le&&Le>0||null===Le&&this.delay>0)return super.recycleAsyncId(ce,Ge,Le);0===ce.actions.length&&(X.clearImmediate(Ge),ce.scheduled=void 0)}});var Ce=U(6561);class Ie extends h.y{constructor(ce,Ge=0,Le=K){super(),this.source=ce,this.delayTime=Ge,this.scheduler=Le,(!(0,Ce.k)(Ge)||Ge<0)&&(this.delayTime=0),(!Le||"function"!=typeof Le.schedule)&&(this.scheduler=K)}static create(ce,Ge=0,Le=K){return new Ie(ce,Ge,Le)}static dispatch(ce){const{source:Ge,subscriber:Le}=ce;return this.add(Ge.subscribe(Le))}_subscribe(ce){return this.scheduler.schedule(Ie.dispatch,this.delayTime,{source:this.source,subscriber:ce})}}function ye(se,ce=0){return function(Le){return Le.lift(new Me(se,ce))}}class Me{constructor(ce,Ge){this.scheduler=ce,this.delay=Ge}call(ce,Ge){return new Ie(Ge,this.delay,this.scheduler).subscribe(ce)}}},8307:(qe,xe,U)=>{"use strict";U.d(xe,{b:()=>ae});var h=U(7393),ue=U(8640),q=U(9105);function ae(ie,J,$){return function(z){return z.lift(new pe(ie,J,$))}}class pe{constructor(J,$,B){this.nextOrObserver=J,this.error=$,this.complete=B}call(J,$){return $.subscribe(new X(J,this.nextOrObserver,this.error,this.complete))}}class X extends h.L{constructor(J,$,B,z){super(J),this._tapNext=ue.Z,this._tapError=ue.Z,this._tapComplete=ue.Z,this._tapError=B||ue.Z,this._tapComplete=z||ue.Z,(0,q.m)($)?(this._context=this,this._tapNext=$):$&&(this._context=$,this._tapNext=$.next||ue.Z,this._tapError=$.error||ue.Z,this._tapComplete=$.complete||ue.Z)}_next(J){try{this._tapNext.call(this._context,J)}catch($){return void this.destination.error($)}this.destination.next(J)}_error(J){try{this._tapError.call(this._context,J)}catch($){return void this.destination.error($)}this.destination.error(J)}_complete(){try{this._tapComplete.call(this._context)}catch(J){return void this.destination.error(J)}return this.destination.complete()}}},4087:(qe,xe,U)=>{"use strict";U.d(xe,{r:()=>q});var h=U(7574),ue=U(5319);function q(ae,pe){return new h.y(X=>{const ie=new ue.w;let J=0;return ie.add(pe.schedule(function(){J!==ae.length?(X.next(ae[J++]),X.closed||ie.add(this.schedule())):X.complete()})),ie})}},6465:(qe,xe,U)=>{"use strict";U.d(xe,{o:()=>q});var h=U(5319);class ue extends h.w{constructor(pe,X){super()}schedule(pe,X=0){return this}}class q extends ue{constructor(pe,X){super(pe,X),this.scheduler=pe,this.work=X,this.pending=!1}schedule(pe,X=0){if(this.closed)return this;this.state=pe;const ie=this.id,J=this.scheduler;return null!=ie&&(this.id=this.recycleAsyncId(J,ie,X)),this.pending=!0,this.delay=X,this.id=this.id||this.requestAsyncId(J,this.id,X),this}requestAsyncId(pe,X,ie=0){return setInterval(pe.flush.bind(pe,this),ie)}recycleAsyncId(pe,X,ie=0){if(null!==ie&&this.delay===ie&&!1===this.pending)return X;clearInterval(X)}execute(pe,X){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ie=this._execute(pe,X);if(ie)return ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,X){let J,ie=!1;try{this.work(pe)}catch($){ie=!0,J=!!$&&$||new Error($)}if(ie)return this.unsubscribe(),J}_unsubscribe(){const pe=this.id,X=this.scheduler,ie=X.actions,J=ie.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==J&&ie.splice(J,1),null!=pe&&(this.id=this.recycleAsyncId(X,pe,null)),this.delay=null}}},6102:(qe,xe,U)=>{"use strict";U.d(xe,{v:()=>ue});let h=(()=>{class q{constructor(pe,X=q.now){this.SchedulerAction=pe,this.now=X}schedule(pe,X=0,ie){return new this.SchedulerAction(this,pe).schedule(ie,X)}}return q.now=()=>Date.now(),q})();class ue extends h{constructor(ae,pe=h.now){super(ae,()=>ue.delegate&&ue.delegate!==this?ue.delegate.now():pe()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ae,pe=0,X){return ue.delegate&&ue.delegate!==this?ue.delegate.schedule(ae,pe,X):super.schedule(ae,pe,X)}flush(ae){const{actions:pe}=this;if(this.active)return void pe.push(ae);let X;this.active=!0;do{if(X=ae.execute(ae.state,ae.delay))break}while(ae=pe.shift());if(this.active=!1,X){for(;ae=pe.shift();)ae.unsubscribe();throw X}}}},3637:(qe,xe,U)=>{"use strict";U.d(xe,{z:()=>q,P:()=>ae});var h=U(6465);const q=new(U(6102).v)(h.o),ae=q},7771:(qe,xe,U)=>{"use strict";U.d(xe,{c:()=>X,N:()=>pe});var h=U(6465),q=U(6102);const pe=new class extends q.v{}(class extends h.o{constructor(J,$){super(J,$),this.scheduler=J,this.work=$}schedule(J,$=0){return $>0?super.schedule(J,$):(this.delay=$,this.state=J,this.scheduler.flush(this),this)}execute(J,$){return $>0||this.closed?super.execute(J,$):this._execute(J,$)}requestAsyncId(J,$,B=0){return null!==B&&B>0||null===B&&this.delay>0?super.requestAsyncId(J,$,B):J.flush(this)}}),X=pe},377:(qe,xe,U)=>{"use strict";U.d(xe,{hZ:()=>ue});const ue="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(qe,xe,U)=>{"use strict";U.d(xe,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(qe,xe,U)=>{"use strict";U.d(xe,{b:()=>h});const h="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(qe,xe,U)=>{"use strict";U.d(xe,{N:()=>ue});const ue=(()=>{function q(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return q.prototype=Object.create(Error.prototype),q})()},4449:(qe,xe,U)=>{"use strict";function h(ue){setTimeout(()=>{throw ue},0)}U.d(xe,{z:()=>h})},4487:(qe,xe,U)=>{"use strict";function h(ue){return ue}U.d(xe,{y:()=>h})},9796:(qe,xe,U)=>{"use strict";U.d(xe,{k:()=>h});const h=Array.isArray||(ue=>ue&&"number"==typeof ue.length)},9489:(qe,xe,U)=>{"use strict";U.d(xe,{z:()=>h});const h=ue=>ue&&"number"==typeof ue.length&&"function"!=typeof ue},9105:(qe,xe,U)=>{"use strict";function h(ue){return"function"==typeof ue}U.d(xe,{m:()=>h})},6561:(qe,xe,U)=>{"use strict";U.d(xe,{k:()=>ue});var h=U(9796);function ue(q){return!(0,h.k)(q)&&q-parseFloat(q)+1>=0}},1555:(qe,xe,U)=>{"use strict";function h(ue){return null!==ue&&"object"==typeof ue}U.d(xe,{K:()=>h})},4072:(qe,xe,U)=>{"use strict";function h(ue){return!!ue&&"function"!=typeof ue.subscribe&&"function"==typeof ue.then}U.d(xe,{t:()=>h})},4869:(qe,xe,U)=>{"use strict";function h(ue){return ue&&"function"==typeof ue.schedule}U.d(xe,{K:()=>h})},8640:(qe,xe,U)=>{"use strict";function h(){}U.d(xe,{Z:()=>h})},7444:(qe,xe,U)=>{"use strict";U.d(xe,{s:()=>z});var h=U(5015),ue=U(4449),ae=U(377),X=U(6554),J=U(9489),$=U(4072),B=U(1555);const z=G=>{if(G&&"function"==typeof G[X.L])return(G=>K=>{const Ce=G[X.L]();if("function"!=typeof Ce.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ce.subscribe(K)})(G);if((0,J.z)(G))return(0,h.V)(G);if((0,$.t)(G))return(G=>K=>(G.then(Ce=>{K.closed||(K.next(Ce),K.complete())},Ce=>K.error(Ce)).then(null,ue.z),K))(G);if(G&&"function"==typeof G[ae.hZ])return(G=>K=>{const Ce=G[ae.hZ]();for(;;){let Ie;try{Ie=Ce.next()}catch(ye){return K.error(ye),K}if(Ie.done){K.complete();break}if(K.next(Ie.value),K.closed)break}return"function"==typeof Ce.return&&K.add(()=>{Ce.return&&Ce.return()}),K})(G);{const Ce=`You provided ${(0,B.K)(G)?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ce)}}},5015:(qe,xe,U)=>{"use strict";U.d(xe,{V:()=>h});const h=ue=>q=>{for(let ae=0,pe=ue.length;ae<pe&&!q.closed;ae++)q.next(ue[ae]);q.complete()}},4104:(qe,xe,U)=>{"use strict";var h=U(7716);let ue=null;function q(){return ue}const ie=new h.OlP("DocumentToken");let J=(()=>{class s{historyGo(r){throw new Error("Not implemented")}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=(0,h.Yz7)({factory:$,token:s,providedIn:"platform"}),s})();function $(){return(0,h.LFG)(z)}const B=new h.OlP("Location Initialized");let z=(()=>{class s extends J{constructor(r){super(),this._doc=r,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(r){const o=q().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",r,!1),()=>o.removeEventListener("popstate",r)}onHashChange(r){const o=q().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",r,!1),()=>o.removeEventListener("hashchange",r)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(r){this.location.pathname=r}pushState(r,o,a){G()?this._history.pushState(r,o,a):this.location.hash=a}replaceState(r,o,a){G()?this._history.replaceState(r,o,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(ie))},s.\u0275prov=(0,h.Yz7)({factory:K,token:s,providedIn:"platform"}),s})();function G(){return!!window.history.pushState}function K(){return new z((0,h.LFG)(ie))}function Ce(s,i){if(0==s.length)return i;if(0==i.length)return s;let r=0;return s.endsWith("/")&&r++,i.startsWith("/")&&r++,2==r?s+i.substring(1):1==r?s+i:s+"/"+i}function Ie(s){const i=s.match(/#|\?|$/),r=i&&i.index||s.length;return s.slice(0,r-("/"===s[r-1]?1:0))+s.slice(r)}function ye(s){return s&&"?"!==s[0]?"?"+s:s}let Me=(()=>{class s{historyGo(r){throw new Error("Not implemented")}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=(0,h.Yz7)({factory:se,token:s,providedIn:"root"}),s})();function se(s){const i=(0,h.LFG)(ie).location;return new Ge((0,h.LFG)(J),i&&i.origin||"")}const ce=new h.OlP("appBaseHref");let Ge=(()=>{class s extends Me{constructor(r,o){if(super(),this._platformLocation=r,this._removeListenerFns=[],null==o&&(o=this._platformLocation.getBaseHrefFromDOM()),null==o)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=o}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Ce(this._baseHref,r)}path(r=!1){const o=this._platformLocation.pathname+ye(this._platformLocation.search),a=this._platformLocation.hash;return a&&r?`${o}${a}`:o}pushState(r,o,a,d){const g=this.prepareExternalUrl(a+ye(d));this._platformLocation.pushState(r,o,g)}replaceState(r,o,a,d){const g=this.prepareExternalUrl(a+ye(d));this._platformLocation.replaceState(r,o,g)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var o,a;null===(a=(o=this._platformLocation).historyGo)||void 0===a||a.call(o,r)}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(J),h.LFG(ce,8))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})(),Le=(()=>{class s extends Me{constructor(r,o){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=o&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let o=this._platformLocation.hash;return null==o&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(r){const o=Ce(this._baseHref,r);return o.length>0?"#"+o:o}pushState(r,o,a,d){let g=this.prepareExternalUrl(a+ye(d));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.pushState(r,o,g)}replaceState(r,o,a,d){let g=this.prepareExternalUrl(a+ye(d));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.replaceState(r,o,g)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var o,a;null===(a=(o=this._platformLocation).historyGo)||void 0===a||a.call(o,r)}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(J),h.LFG(ce,8))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})(),rt=(()=>{class s{constructor(r,o){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=r;const a=this._platformStrategy.getBaseHref();this._platformLocation=o,this._baseHref=Ie(It(a)),this._platformStrategy.onPopState(d=>{this._subject.emit({url:this.path(!0),pop:!0,state:d.state,type:d.type})})}path(r=!1){return this.normalize(this._platformStrategy.path(r))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(r,o=""){return this.path()==this.normalize(r+ye(o))}normalize(r){return s.stripTrailingSlash(function(s,i){return s&&i.startsWith(s)?i.substring(s.length):i}(this._baseHref,It(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}go(r,o="",a=null){this._platformStrategy.pushState(a,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ye(o)),a)}replaceState(r,o="",a=null){this._platformStrategy.replaceState(a,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ye(o)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(r=0){var o,a;null===(a=(o=this._platformStrategy).historyGo)||void 0===a||a.call(o,r)}onUrlChange(r){this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}))}_notifyUrlChangeListeners(r="",o){this._urlChangeListeners.forEach(a=>a(r,o))}subscribe(r,o,a){return this._subject.subscribe({next:r,error:o,complete:a})}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(Me),h.LFG(J))},s.normalizeQueryParams=ye,s.joinWithSlash=Ce,s.stripTrailingSlash=Ie,s.\u0275prov=(0,h.Yz7)({factory:At,token:s,providedIn:"root"}),s})();function At(){return new rt((0,h.LFG)(Me),(0,h.LFG)(J))}function It(s){return s.replace(/\/index.html$/,"")}var oe=(()=>((oe=oe||{})[oe.Zero=0]="Zero",oe[oe.One=1]="One",oe[oe.Two=2]="Two",oe[oe.Few=3]="Few",oe[oe.Many=4]="Many",oe[oe.Other=5]="Other",oe))();const Wi=h.kL8;class Gs{}let fu=(()=>{class s extends Gs{constructor(r){super(),this.locale=r}getPluralCategory(r,o){switch(Wi(o||this.locale)(r)){case oe.Zero:return"zero";case oe.One:return"one";case oe.Two:return"two";case oe.Few:return"few";case oe.Many:return"many";default:return"other"}}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(h.soG))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})(),yo=(()=>{class s{constructor(r,o,a,d){this._iterableDiffers=r,this._keyValueDiffers=o,this._ngEl=a,this._renderer=d,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(r){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof r?r.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(r){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof r?r.split(/\s+/):r,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const r=this._iterableDiffer.diff(this._rawClass);r&&this._applyIterableChanges(r)}else if(this._keyValueDiffer){const r=this._keyValueDiffer.diff(this._rawClass);r&&this._applyKeyValueChanges(r)}}_applyKeyValueChanges(r){r.forEachAddedItem(o=>this._toggleClass(o.key,o.currentValue)),r.forEachChangedItem(o=>this._toggleClass(o.key,o.currentValue)),r.forEachRemovedItem(o=>{o.previousValue&&this._toggleClass(o.key,!1)})}_applyIterableChanges(r){r.forEachAddedItem(o=>{if("string"!=typeof o.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(o.item)}`);this._toggleClass(o.item,!0)}),r.forEachRemovedItem(o=>this._toggleClass(o.item,!1))}_applyClasses(r){r&&(Array.isArray(r)||r instanceof Set?r.forEach(o=>this._toggleClass(o,!0)):Object.keys(r).forEach(o=>this._toggleClass(o,!!r[o])))}_removeClasses(r){r&&(Array.isArray(r)||r instanceof Set?r.forEach(o=>this._toggleClass(o,!1)):Object.keys(r).forEach(o=>this._toggleClass(o,!1)))}_toggleClass(r,o){(r=r.trim())&&r.split(/\s+/g).forEach(a=>{o?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return s.\u0275fac=function(r){return new(r||s)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},s.\u0275dir=h.lG2({type:s,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),s})();class Jr{constructor(i,r,o,a){this.$implicit=i,this.ngForOf=r,this.index=o,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Tt=(()=>{class s{constructor(r,o,a){this._viewContainer=r,this._template=o,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;if(!this._differ&&r)try{this._differ=this._differs.find(r).create(this.ngForTrackBy)}catch(o){throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(s){return s.name||typeof s}(r)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const o=[];r.forEachOperation((a,d,g)=>{if(null==a.previousIndex){const y=this._viewContainer.createEmbeddedView(this._template,new Jr(null,this._ngForOf,-1,-1),null===g?void 0:g),C=new dm(a,y);o.push(C)}else if(null==g)this._viewContainer.remove(null===d?void 0:d);else if(null!==d){const y=this._viewContainer.get(d);this._viewContainer.move(y,g);const C=new dm(a,y);o.push(C)}});for(let a=0;a<o.length;a++)this._perViewChange(o[a].view,o[a].record);for(let a=0,d=this._viewContainer.length;a<d;a++){const g=this._viewContainer.get(a);g.context.index=a,g.context.count=d,g.context.ngForOf=this._ngForOf}r.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(r,o){r.context.$implicit=o.item}static ngTemplateContextGuard(r,o){return!0}}return s.\u0275fac=function(r){return new(r||s)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},s.\u0275dir=h.lG2({type:s,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),s})();class dm{constructor(i,r){this.record=i,this.view=r}}let or=(()=>{class s{constructor(r,o){this._viewContainer=r,this._context=new pu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Ka("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Ka("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,o){return!0}}return s.\u0275fac=function(r){return new(r||s)(h.Y36(h.s_b),h.Y36(h.Rgc))},s.\u0275dir=h.lG2({type:s,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),s})();class pu{constructor(){this.$implicit=null,this.ngIf=null}}function Ka(s,i){if(i&&!i.createEmbeddedView)throw new Error(`${s} must be a TemplateRef, but received '${(0,h.AaK)(i)}'.`)}let Br=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({providers:[{provide:Gs,useClass:fu}]}),s})();function Zn(s){return"browser"===s}function Ws(s){return"server"===s}let qc=(()=>{class s{}return s.\u0275prov=(0,h.Yz7)({token:s,providedIn:"root",factory:()=>new Tf((0,h.LFG)(ie),window)}),s})();class Tf{constructor(i,r){this.document=i,this.window=r,this.offset=()=>[0,0]}setOffset(i){this.offset=Array.isArray(i)?()=>i:i}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(i){this.supportsScrolling()&&this.window.scrollTo(i[0],i[1])}scrollToAnchor(i){if(!this.supportsScrolling())return;const r=function(s,i){const r=s.getElementById(i)||s.getElementsByName(i)[0];if(r)return r;if("function"==typeof s.createTreeWalker&&s.body&&(s.body.createShadowRoot||s.body.attachShadow)){const o=s.createTreeWalker(s.body,NodeFilter.SHOW_ELEMENT);let a=o.currentNode;for(;a;){const d=a.shadowRoot;if(d){const g=d.getElementById(i)||d.querySelector(`[name="${i}"]`);if(g)return g}a=o.nextNode()}}return null}(this.document,i);r&&(this.scrollToElement(r),this.attemptFocus(r))}setHistoryScrollRestoration(i){if(this.supportScrollRestoration()){const r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=i)}}scrollToElement(i){const r=i.getBoundingClientRect(),o=r.left+this.window.pageXOffset,a=r.top+this.window.pageYOffset,d=this.offset();this.window.scrollTo(o-d[0],a-d[1])}attemptFocus(i){return i.focus(),this.document.activeElement===i}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const i=Yc(this.window.history)||Yc(Object.getPrototypeOf(this.window.history));return!(!i||!i.writable&&!i.set)}catch(i){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(i){return!1}}}function Yc(s){return Object.getOwnPropertyDescriptor(s,"scrollRestoration")}class Zc extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var s;s=new Zc,ue||(ue=s)}onAndCancel(i,r,o){return i.addEventListener(r,o,!1),()=>{i.removeEventListener(r,o,!1)}}dispatchEvent(i,r){i.dispatchEvent(r)}remove(i){i.parentNode&&i.parentNode.removeChild(i)}createElement(i,r){return(r=r||this.getDefaultDocument()).createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,r){return"window"===r?window:"document"===r?i:"body"===r?i.body:null}getBaseHref(i){const r=(Jo=Jo||document.querySelector("base"),Jo?Jo.getAttribute("href"):null);return null==r?null:function(s){gn=gn||document.createElement("a"),gn.setAttribute("href",s);const i=gn.pathname;return"/"===i.charAt(0)?i:`/${i}`}(r)}resetBaseElement(){Jo=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return function(s,i){i=encodeURIComponent(i);for(const r of s.split(";")){const o=r.indexOf("="),[a,d]=-1==o?[r,""]:[r.slice(0,o),r.slice(o+1)];if(a.trim()===i)return decodeURIComponent(d)}return null}(document.cookie,i)}}let gn,Jo=null;const Kc=new h.OlP("TRANSITION_ID"),bi=[{provide:h.ip1,useFactory:function(s,i,r){return()=>{r.get(h.CZH).donePromise.then(()=>{const o=q(),a=i.querySelectorAll(`style[ng-transition="${s}"]`);for(let d=0;d<a.length;d++)o.remove(a[d])})}},deps:[Kc,ie,h.zs3],multi:!0}];class yu{static init(){(0,h.VLi)(new yu)}addToWindow(i){h.dqk.getAngularTestability=(o,a=!0)=>{const d=i.findTestabilityInTree(o,a);if(null==d)throw new Error("Could not find testability for element.");return d},h.dqk.getAllAngularTestabilities=()=>i.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>i.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(o=>{const a=h.dqk.getAllAngularTestabilities();let d=a.length,g=!1;const y=function(C){g=g||C,d--,0==d&&o(g)};a.forEach(function(C){C.whenStable(y)})})}findTestabilityInTree(i,r,o){if(null==r)return null;const a=i.getTestability(r);return null!=a?a:o?q().isShadowRoot(r)?this.findTestabilityInTree(i,r.host,!0):this.findTestabilityInTree(i,r.parentElement,!0):null}}let Qc=(()=>{class s{build(){return new XMLHttpRequest}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})();const Xo=new h.OlP("EventManagerPlugins");let Ae=(()=>{class s{constructor(r,o){this._zone=o,this._eventNameToPlugin=new Map,r.forEach(a=>a.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,o,a){return this._findPluginFor(o).addEventListener(r,o,a)}addGlobalEventListener(r,o,a){return this._findPluginFor(o).addGlobalEventListener(r,o,a)}getZone(){return this._zone}_findPluginFor(r){const o=this._eventNameToPlugin.get(r);if(o)return o;const a=this._plugins;for(let d=0;d<a.length;d++){const g=a[d];if(g.supports(r))return this._eventNameToPlugin.set(r,g),g}throw new Error(`No event manager plugin found for event ${r}`)}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(Xo),h.LFG(h.R0b))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})();class Rt{constructor(i){this._doc=i}addGlobalEventListener(i,r,o){const a=q().getGlobalEventTarget(this._doc,i);if(!a)throw new Error(`Unsupported event target ${a} for event ${r}`);return this.addEventListener(a,r,o)}}let Pf=(()=>{class s{constructor(){this._stylesSet=new Set}addStyles(r){const o=new Set;r.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),o.add(a))}),this.onStylesAdded(o)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})(),cn=(()=>{class s extends Pf{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,o,a){r.forEach(d=>{const g=this._doc.createElement("style");g.textContent=d,a.push(o.appendChild(g))})}addHost(r){const o=[];this._addStylesToHost(this._stylesSet,r,o),this._hostNodes.set(r,o)}removeHost(r){const o=this._hostNodes.get(r);o&&o.forEach(Ff),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((o,a)=>{this._addStylesToHost(r,a,o)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(Ff))}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(ie))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})();function Ff(s){q().remove(s)}const ea={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ei=/%COMP%/g;function Gn(s,i,r){for(let o=0;o<i.length;o++){let a=i[o];Array.isArray(a)?Gn(s,a,r):(a=a.replace(ei,s),r.push(a))}return r}function Qi(s){return i=>{if("__ngUnwrap__"===i)return s;!1===s(i)&&(i.preventDefault(),i.returnValue=!1)}}let Eo=(()=>{class s{constructor(r,o,a){this.eventManager=r,this.sharedStylesHost=o,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Ci(r)}createRenderer(r,o){if(!r||!o)return this.defaultRenderer;switch(o.encapsulation){case h.ifc.Emulated:{let a=this.rendererByCompId.get(o.id);return a||(a=new Vf(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,a)),a.applyToHost(r),a}case 1:case h.ifc.ShadowDom:return new Bf(this.eventManager,this.sharedStylesHost,r,o);default:if(!this.rendererByCompId.has(o.id)){const a=Gn(o.id,o.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(Ae),h.LFG(cn),h.LFG(h.AFp))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})();class Ci{constructor(i){this.eventManager=i,this.data=Object.create(null)}destroy(){}createElement(i,r){return r?document.createElementNS(ea[r]||r,i):document.createElement(i)}createComment(i){return document.createComment(i)}createText(i){return document.createTextNode(i)}appendChild(i,r){i.appendChild(r)}insertBefore(i,r,o){i&&i.insertBefore(r,o)}removeChild(i,r){i&&i.removeChild(r)}selectRootElement(i,r){let o="string"==typeof i?document.querySelector(i):i;if(!o)throw new Error(`The selector "${i}" did not match any elements`);return r||(o.textContent=""),o}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,r,o,a){if(a){r=a+":"+r;const d=ea[a];d?i.setAttributeNS(d,r,o):i.setAttribute(r,o)}else i.setAttribute(r,o)}removeAttribute(i,r,o){if(o){const a=ea[o];a?i.removeAttributeNS(a,r):i.removeAttribute(`${o}:${r}`)}else i.removeAttribute(r)}addClass(i,r){i.classList.add(r)}removeClass(i,r){i.classList.remove(r)}setStyle(i,r,o,a){a&(h.JOm.DashCase|h.JOm.Important)?i.style.setProperty(r,o,a&h.JOm.Important?"important":""):i.style[r]=o}removeStyle(i,r,o){o&h.JOm.DashCase?i.style.removeProperty(r):i.style[r]=""}setProperty(i,r,o){i[r]=o}setValue(i,r){i.nodeValue=r}listen(i,r,o){return"string"==typeof i?this.eventManager.addGlobalEventListener(i,r,Qi(o)):this.eventManager.addEventListener(i,r,Qi(o))}}class Vf extends Ci{constructor(i,r,o,a){super(i),this.component=o;const d=Gn(a+"-"+o.id,o.styles,[]);r.addStyles(d),this.contentAttr="_ngcontent-%COMP%".replace(ei,a+"-"+o.id),this.hostAttr=function(s){return"_nghost-%COMP%".replace(ei,s)}(a+"-"+o.id)}applyToHost(i){super.setAttribute(i,this.hostAttr,"")}createElement(i,r){const o=super.createElement(i,r);return super.setAttribute(o,this.contentAttr,""),o}}class Bf extends Ci{constructor(i,r,o,a){super(i),this.sharedStylesHost=r,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=Gn(a.id,a.styles,[]);for(let g=0;g<d.length;g++){const y=document.createElement("style");y.textContent=d[g],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(i,r){return super.appendChild(this.nodeOrShadowRoot(i),r)}insertBefore(i,r,o){return super.insertBefore(this.nodeOrShadowRoot(i),r,o)}removeChild(i,r){return super.removeChild(this.nodeOrShadowRoot(i),r)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}}let Uf=(()=>{class s extends Rt{constructor(r){super(r)}supports(r){return!0}addEventListener(r,o,a){return r.addEventListener(o,a,!1),()=>this.removeEventListener(r,o,a)}removeEventListener(r,o,a){return r.removeEventListener(o,a)}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(ie))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})();const bu=["alt","control","meta","shift"],bE={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ur={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},jf={alt:s=>s.altKey,control:s=>s.ctrlKey,meta:s=>s.metaKey,shift:s=>s.shiftKey};let ra=(()=>{class s extends Rt{constructor(r){super(r)}supports(r){return null!=s.parseEventName(r)}addEventListener(r,o,a){const d=s.parseEventName(o),g=s.eventCallback(d.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>q().onAndCancel(r,d.domEventName,g))}static parseEventName(r){const o=r.toLowerCase().split("."),a=o.shift();if(0===o.length||"keydown"!==a&&"keyup"!==a)return null;const d=s._normalizeKey(o.pop());let g="";if(bu.forEach(C=>{const T=o.indexOf(C);T>-1&&(o.splice(T,1),g+=C+".")}),g+=d,0!=o.length||0===d.length)return null;const y={};return y.domEventName=a,y.fullKey=g,y}static getEventFullKey(r){let o="",a=function(s){let i=s.key;if(null==i){if(i=s.keyIdentifier,null==i)return"Unidentified";i.startsWith("U+")&&(i=String.fromCharCode(parseInt(i.substring(2),16)),3===s.location&&Ur.hasOwnProperty(i)&&(i=Ur[i]))}return bE[i]||i}(r);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),bu.forEach(d=>{d!=a&&jf[d](r)&&(o+=d+".")}),o+=a,o}static eventCallback(r,o,a){return d=>{s.getEventFullKey(d)===r&&a.runGuarded(()=>o(d))}}static _normalizeKey(r){switch(r){case"esc":return"escape";default:return r}}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(ie))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})();const Eu=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function(){Zc.makeCurrent(),yu.init()},multi:!0},{provide:ie,useFactory:function(){return(0,h.RDi)(document),document},deps:[]}]),Am=[[],{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function(){return new h.qLn},deps:[]},{provide:Xo,useClass:Uf,multi:!0,deps:[ie,h.R0b,h.Lbi]},{provide:Xo,useClass:ra,multi:!0,deps:[ie]},[],{provide:Eo,useClass:Eo,deps:[Ae,cn,h.AFp]},{provide:h.FYo,useExisting:Eo},{provide:Pf,useExisting:cn},{provide:cn,useClass:cn,deps:[ie]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:Ae,useClass:Ae,deps:[Xo,h.R0b]},{provide:class{},useClass:Qc,deps:[]},[]];let ad=(()=>{class s{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:s,providers:[{provide:h.AFp,useValue:r.appId},{provide:Kc,useExisting:h.AFp},bi]}}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(s,12))},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({providers:Am,imports:[Br,h.hGG]}),s})();"undefined"!=typeof window&&window;var dn=U(4402),ze=U(5917),Yt=U(9765),cd=U(7971);class xn extends Yt.xQ{constructor(i){super(),this._value=i}get value(){return this.getValue()}_subscribe(i){const r=super._subscribe(i);return r&&!r.closed&&i.next(this._value),r}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new cd.N;return this._value}next(i){super.next(this._value=i)}}var Au=U(4869),oa=U(9796),Gr=U(7393);class aa extends Gr.L{notifyNext(i,r,o,a,d){this.destination.next(r)}notifyError(i,r){this.destination.error(i)}notifyComplete(i){this.destination.complete()}}class s0 extends Gr.L{constructor(i,r,o){super(),this.parent=i,this.outerValue=r,this.outerIndex=o,this.index=0}_next(i){this.parent.notifyNext(this.outerValue,i,this.outerIndex,this.index++,this)}_error(i){this.parent.notifyError(i,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var dd=U(7444),In=U(7574);function Su(s,i,r,o,a=new s0(s,r,o)){if(!a.closed)return i instanceof In.y?i.subscribe(a):(0,dd.s)(i)(a)}var hd=U(6693);const fd={};class Om{constructor(i){this.resultSelector=i}call(i,r){return r.subscribe(new qf(i,this.resultSelector))}}class qf extends aa{constructor(i,r){super(i),this.resultSelector=r,this.active=0,this.values=[],this.observables=[]}_next(i){this.values.push(fd),this.observables.push(i)}_complete(){const i=this.observables,r=i.length;if(0===r)this.destination.complete();else{this.active=r,this.toRespond=r;for(let o=0;o<r;o++)this.add(Su(this,i[o],void 0,o))}}notifyComplete(i){0==(this.active-=1)&&this.destination.complete()}notifyNext(i,r,o){const a=this.values,g=this.toRespond?a[o]===fd?--this.toRespond:this.toRespond:0;a[o]=r,0===g&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(i){let r;try{r=this.resultSelector.apply(this,i)}catch(o){return void this.destination.error(o)}this.destination.next(r)}}const Ys=(()=>{function s(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return s.prototype=Object.create(Error.prototype),s})();var zs=U(3282);function vs(...s){return(0,zs.J)(1)((0,ze.of)(...s))}var Xi=U(9193);function Do(s){return new In.y(i=>{let r;try{r=s()}catch(a){return void i.error(a)}return(r?(0,dn.D)(r):(0,Xi.c)()).subscribe(i)})}var CE=U(2441),et=U(8002),Li=U(5345);function Hn(s,i){return"function"==typeof i?r=>r.pipe(Hn((o,a)=>(0,dn.D)(s(o,a)).pipe((0,et.U)((d,g)=>i(o,d,a,g))))):r=>r.lift(new o0(s))}class o0{constructor(i){this.project=i}call(i,r){return r.subscribe(new Tn(i,this.project))}}class Tn extends Li.Ds{constructor(i,r){super(i),this.project=r,this.index=0}_next(i){let r;const o=this.index++;try{r=this.project(i,o)}catch(a){return void this.destination.error(a)}this._innerSub(r)}_innerSub(i){const r=this.innerSubscription;r&&r.unsubscribe();const o=new Li.IY(this),a=this.destination;a.add(o),this.innerSubscription=(0,Li.ft)(i,o),this.innerSubscription!==o&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:i}=this;(!i||i.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(i){this.destination.next(i)}}const Mu=(()=>{function s(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return s.prototype=Object.create(Error.prototype),s})();function ti(s){return i=>0===s?(0,Xi.c)():i.lift(new km(s))}class km{constructor(i){if(this.total=i,this.total<0)throw new Mu}call(i,r){return r.subscribe(new DE(i,this.total))}}class DE extends Gr.L{constructor(i,r){super(i),this.total=r,this.count=0}_next(i){const r=this.total,o=++this.count;o<=r&&(this.destination.next(i),o===r&&(this.destination.complete(),this.unsubscribe()))}}function xo(...s){const i=s[s.length-1];return(0,Au.K)(i)?(s.pop(),r=>vs(s,r,i)):r=>vs(s,r)}function ll(s,i){let r=!1;return arguments.length>=2&&(r=!0),function(a){return a.lift(new Pm(s,i,r))}}class Pm{constructor(i,r,o=!1){this.accumulator=i,this.seed=r,this.hasSeed=o}call(i,r){return r.subscribe(new Yf(i,this.accumulator,this.seed,this.hasSeed))}}class Yf extends Gr.L{constructor(i,r,o,a){super(i),this.accumulator=r,this._seed=o,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(i){this.hasSeed=!0,this._seed=i}_next(i){if(this.hasSeed)return this._tryNext(i);this.seed=i,this.destination.next(i)}_tryNext(i){const r=this.index++;let o;try{o=this.accumulator(this.seed,i,r)}catch(a){this.destination.error(a)}this.seed=o,this.destination.next(o)}}function on(s,i){return function(o){return o.lift(new xE(s,i))}}class xE{constructor(i,r){this.predicate=i,this.thisArg=r}call(i,r){return r.subscribe(new la(i,this.predicate,this.thisArg))}}class la extends Gr.L{constructor(i,r,o){super(i),this.predicate=r,this.thisArg=o,this.count=0}_next(i){let r;try{r=this.predicate.call(this.thisArg,i,this.count++)}catch(o){return void this.destination.error(o)}r&&this.destination.next(i)}}function bs(s){return function(r){const o=new hn(s),a=r.lift(o);return o.caught=a}}class hn{constructor(i){this.selector=i}call(i,r){return r.subscribe(new ul(i,this.selector,this.caught))}}class ul extends Li.Ds{constructor(i,r,o){super(i),this.selector=r,this.caught=o}error(i){if(!this.isStopped){let r;try{r=this.selector(i,this.caught)}catch(d){return void super.error(d)}this._unsubscribeAndRecycle();const o=new Li.IY(this);this.add(o);const a=(0,Li.ft)(r,o);a!==o&&this.add(a)}}}var Kn=U(9773);function gd(s,i){return(0,Kn.zg)(s,i,1)}function zf(s){return function(r){return 0===s?(0,Xi.c)():r.lift(new ni(s))}}class ni{constructor(i){if(this.total=i,this.total<0)throw new Mu}call(i,r){return r.subscribe(new es(i,this.total))}}class es extends Gr.L{constructor(i,r){super(i),this.total=r,this.ring=new Array,this.count=0}_next(i){const r=this.ring,o=this.total,a=this.count++;r.length<o?r.push(i):r[a%o]=i}_complete(){const i=this.destination;let r=this.count;if(r>0){const o=this.count>=this.total?this.total:this.count,a=this.ring;for(let d=0;d<o;d++){const g=r++%o;i.next(a[g])}}i.complete()}}function Ru(s=Fm){return i=>i.lift(new ua(s))}class ua{constructor(i){this.errorFactory=i}call(i,r){return r.subscribe(new ws(i,this.errorFactory))}}class ws extends Gr.L{constructor(i,r){super(i),this.errorFactory=r,this.hasValue=!1}_next(i){this.hasValue=!0,this.destination.next(i)}_complete(){if(this.hasValue)return this.destination.complete();{let i;try{i=this.errorFactory()}catch(r){i=r}this.destination.error(i)}}}function Fm(){return new Ys}function pd(s=null){return i=>i.lift(new a0(s))}class a0{constructor(i){this.defaultValue=i}call(i,r){return r.subscribe(new Lm(i,this.defaultValue))}}class Lm extends Gr.L{constructor(i,r){super(i),this.defaultValue=r,this.isEmpty=!0}_next(i){this.isEmpty=!1,this.destination.next(i)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Zf=U(4487);function Fn(s,i){const r=arguments.length>=2;return o=>o.pipe(s?on((a,d)=>s(a,d,o)):Zf.y,ti(1),r?pd(i):Ru(()=>new Ys))}var $n=U(8307),cl=U(1307),Kf=U(5319);class Qf{constructor(i){this.callback=i}call(i,r){return r.subscribe(new l0(i,this.callback))}}class l0 extends Gr.L{constructor(i,r){super(i),this.add(new Kf.w(r))}}class ts{constructor(i,r){this.id=i,this.url=r}}class _d extends ts{constructor(i,r,o="imperative",a=null){super(i,r),this.navigationTrigger=o,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ou extends ts{constructor(i,r,o){super(i,r),this.urlAfterRedirects=o}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dl extends ts{constructor(i,r,o){super(i,r),this.reason=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ku extends ts{constructor(i,r,o){super(i,r),this.error=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yd extends ts{constructor(i,r,o,a){super(i,r),this.urlAfterRedirects=o,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IE extends ts{constructor(i,r,o,a){super(i,r),this.urlAfterRedirects=o,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ca extends ts{constructor(i,r,o,a,d){super(i,r),this.urlAfterRedirects=o,this.state=a,this.shouldActivate=d}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Jf extends ts{constructor(i,r,o,a){super(i,r),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hl extends ts{constructor(i,r,o,a){super(i,r),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vd{constructor(i){this.route=i}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bm{constructor(i){this.route=i}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Xf{constructor(i){this.snapshot=i}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fl{constructor(i){this.snapshot=i}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Um{constructor(i){this.snapshot=i}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bd{constructor(i){this.snapshot=i}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Io{constructor(i,r,o){this.routerEvent=i,this.position=r,this.anchor=o}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Et="primary";class Gm{constructor(i){this.params=i||{}}has(i){return Object.prototype.hasOwnProperty.call(this.params,i)}get(i){if(this.has(i)){const r=this.params[i];return Array.isArray(r)?r[0]:r}return null}getAll(i){if(this.has(i)){const r=this.params[i];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}}function en(s){return new Gm(s)}const wd="ngNavigationCancelingError";function eg(s){const i=Error("NavigationCancelingError: "+s);return i[wd]=!0,i}function da(s,i,r){const o=r.path.split("/");if(o.length>s.length||"full"===r.pathMatch&&(i.hasChildren()||o.length<s.length))return null;const a={};for(let d=0;d<o.length;d++){const g=o[d],y=s[d];if(g.startsWith(":"))a[g.substring(1)]=y;else if(g!==y.path)return null}return{consumed:s.slice(0,o.length),posParams:a}}function ns(s,i){const r=s?Object.keys(s):void 0,o=i?Object.keys(i):void 0;if(!r||!o||r.length!=o.length)return!1;let a;for(let d=0;d<r.length;d++)if(a=r[d],!tg(s[a],i[a]))return!1;return!0}function tg(s,i){if(Array.isArray(s)&&Array.isArray(i)){if(s.length!==i.length)return!1;const r=[...s].sort(),o=[...i].sort();return r.every((a,d)=>o[d]===a)}return s===i}function ng(s){return Array.prototype.concat.apply([],s)}function ha(s){return s.length>0?s[s.length-1]:null}function Ln(s,i){for(const r in s)s.hasOwnProperty(r)&&i(s[r],r)}function yr(s){return(0,h.CqO)(s)?s:(0,h.QGY)(s)?(0,dn.D)(Promise.resolve(s)):(0,ze.of)(s)}const jm={exact:function $m(s,i,r){if(!ga(s.segments,i.segments)||!pl(s.segments,i.segments,r)||s.numberOfChildren!==i.numberOfChildren)return!1;for(const o in i.children)if(!s.children[o]||!$m(s.children[o],i.children[o],r))return!1;return!0},subset:fa},Ed={exact:function(s,i){return ns(s,i)},subset:function(s,i){return Object.keys(i).length<=Object.keys(s).length&&Object.keys(i).every(r=>tg(s[r],i[r]))},ignored:()=>!0};function Pu(s,i,r){return jm[r.paths](s.root,i.root,r.matrixParams)&&Ed[r.queryParams](s.queryParams,i.queryParams)&&!("exact"===r.fragment&&s.fragment!==i.fragment)}function fa(s,i,r){return gl(s,i,i.segments,r)}function gl(s,i,r,o){if(s.segments.length>r.length){const a=s.segments.slice(0,r.length);return!(!ga(a,r)||i.hasChildren()||!pl(a,r,o))}if(s.segments.length===r.length){if(!ga(s.segments,r)||!pl(s.segments,r,o))return!1;for(const a in i.children)if(!s.children[a]||!fa(s.children[a],i.children[a],o))return!1;return!0}{const a=r.slice(0,s.segments.length),d=r.slice(s.segments.length);return!!(ga(s.segments,a)&&pl(s.segments,a,o)&&s.children[Et])&&gl(s.children[Et],i,d,o)}}function pl(s,i,r){return i.every((o,a)=>Ed[r](s[a].parameters,o.parameters))}class ml{constructor(i,r,o){this.root=i,this.queryParams=r,this.fragment=o}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=en(this.queryParams)),this._queryParamMap}toString(){return ig.serialize(this)}}class Pt{constructor(i,r){this.segments=i,this.children=r,this.parent=null,Ln(r,(o,a)=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zs(this)}}class Fu{constructor(i,r){this.path=i,this.parameters=r}get parameterMap(){return this._parameterMap||(this._parameterMap=en(this.parameters)),this._parameterMap}toString(){return sg(this)}}function ga(s,i){return s.length===i.length&&s.every((r,o)=>r.path===i[o].path)}class rg{}class Lu{parse(i){const r=new Ym(i);return new ml(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(i){var s;return`${`/${pa(i.root,!0)}`}${function(s){const i=Object.keys(s).map(r=>{const o=s[r];return Array.isArray(o)?o.map(a=>`${Vu(r)}=${Vu(a)}`).join("&"):`${Vu(r)}=${Vu(o)}`}).filter(r=>!!r);return i.length?`?${i.join("&")}`:""}(i.queryParams)}${"string"==typeof i.fragment?`#${s=i.fragment,encodeURI(s)}`:""}`}}const ig=new Lu;function Zs(s){return s.segments.map(i=>sg(i)).join("/")}function pa(s,i){if(!s.hasChildren())return Zs(s);if(i){const r=s.children[Et]?pa(s.children[Et],!1):"",o=[];return Ln(s.children,(a,d)=>{d!==Et&&o.push(`${d}:${pa(a,!1)}`)}),o.length>0?`${r}(${o.join("//")})`:r}{const r=function(s,i){let r=[];return Ln(s.children,(o,a)=>{a===Et&&(r=r.concat(i(o,a)))}),Ln(s.children,(o,a)=>{a!==Et&&(r=r.concat(i(o,a)))}),r}(s,(o,a)=>a===Et?[pa(s.children[Et],!1)]:[`${a}:${pa(o,!1)}`]);return 1===Object.keys(s.children).length&&null!=s.children[Et]?`${Zs(s)}/${r[0]}`:`${Zs(s)}/(${r.join("//")})`}}function qm(s){return encodeURIComponent(s).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vu(s){return qm(s).replace(/%3B/gi,";")}function _l(s){return qm(s).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bu(s){return decodeURIComponent(s)}function Uu(s){return Bu(s.replace(/\+/g,"%20"))}function sg(s){return`${_l(s.path)}${function(s){return Object.keys(s).map(i=>`;${_l(i)}=${_l(s[i])}`).join("")}(s.parameters)}`}const h0=/^[^\/()?;=#]+/;function xd(s){const i=s.match(h0);return i?i[0]:""}const f0=/^[^=?&#]+/,jr=/^[^?&#]+/;class Ym{constructor(i){this.url=i,this.remaining=i}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pt([],{}):new Pt([],this.parseChildren())}parseQueryParams(){const i={};if(this.consumeOptional("?"))do{this.parseQueryParam(i)}while(this.consumeOptional("&"));return i}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const i=[];for(this.peekStartsWith("(")||i.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),i.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(i.length>0||Object.keys(r).length>0)&&(o[Et]=new Pt(i,r)),o}parseSegment(){const i=xd(this.remaining);if(""===i&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(i),new Fu(Bu(i),this.parseMatrixParams())}parseMatrixParams(){const i={};for(;this.consumeOptional(";");)this.parseParam(i);return i}parseParam(i){const r=xd(this.remaining);if(!r)return;this.capture(r);let o="";if(this.consumeOptional("=")){const a=xd(this.remaining);a&&(o=a,this.capture(o))}i[Bu(r)]=Bu(o)}parseQueryParam(i){const r=function(s){const i=s.match(f0);return i?i[0]:""}(this.remaining);if(!r)return;this.capture(r);let o="";if(this.consumeOptional("=")){const g=function(s){const i=s.match(jr);return i?i[0]:""}(this.remaining);g&&(o=g,this.capture(o))}const a=Uu(r),d=Uu(o);if(i.hasOwnProperty(a)){let g=i[a];Array.isArray(g)||(g=[g],i[a]=g),g.push(d)}else i[a]=d}parseParens(i){const r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const o=xd(this.remaining),a=this.remaining[o.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let d;o.indexOf(":")>-1?(d=o.substr(0,o.indexOf(":")),this.capture(d),this.capture(":")):i&&(d=Et);const g=this.parseChildren();r[d]=1===Object.keys(g).length?g[Et]:new Pt([],g),this.consumeOptional("//")}return r}peekStartsWith(i){return this.remaining.startsWith(i)}consumeOptional(i){return!!this.peekStartsWith(i)&&(this.remaining=this.remaining.substring(i.length),!0)}capture(i){if(!this.consumeOptional(i))throw new Error(`Expected "${i}".`)}}class Id{constructor(i){this._root=i}get root(){return this._root.value}parent(i){const r=this.pathFromRoot(i);return r.length>1?r[r.length-2]:null}children(i){const r=og(i,this._root);return r?r.children.map(o=>o.value):[]}firstChild(i){const r=og(i,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(i){const r=Gu(i,this._root);return r.length<2?[]:r[r.length-2].children.map(a=>a.value).filter(a=>a!==i)}pathFromRoot(i){return Gu(i,this._root).map(r=>r.value)}}function og(s,i){if(s===i.value)return i;for(const r of i.children){const o=og(s,r);if(o)return o}return null}function Gu(s,i){if(s===i.value)return[i];for(const r of i.children){const o=Gu(s,r);if(o.length)return o.unshift(i),o}return[]}class Ks{constructor(i,r){this.value=i,this.children=r}toString(){return`TreeNode(${this.value})`}}function ju(s){const i={};return s&&s.children.forEach(r=>i[r.value.outlet]=r),i}class Hu extends Id{constructor(i,r){super(i),this.snapshot=r,Ad(this,i)}toString(){return this.snapshot.toString()}}function zm(s,i){const r=function(s,i){const g=new Td([],{},{},"",{},Et,i,null,s.root,-1,{});return new vl("",new Ks(g,[]))}(s,i),o=new xn([new Fu("",{})]),a=new xn({}),d=new xn({}),g=new xn({}),y=new xn(""),C=new So(o,a,g,y,d,Et,i,r.root);return C.snapshot=r.root,new Hu(new Ks(C,[]),r)}class So{constructor(i,r,o,a,d,g,y,C){this.url=i,this.params=r,this.queryParams=o,this.fragment=a,this.data=d,this.outlet=g,this.component=y,this._futureSnapshot=C}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,et.U)(i=>en(i)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,et.U)(i=>en(i)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Zm(s,i="emptyOnly"){const r=s.pathFromRoot;let o=0;if("always"!==i)for(o=r.length-1;o>=1;){const a=r[o],d=r[o-1];if(a.routeConfig&&""===a.routeConfig.path)o--;else{if(d.component)break;o--}}return function(s){return s.reduce((i,r)=>({params:Object.assign(Object.assign({},i.params),r.params),data:Object.assign(Object.assign({},i.data),r.data),resolve:Object.assign(Object.assign({},i.resolve),r._resolvedData)}),{params:{},data:{},resolve:{}})}(r.slice(o))}class Td{constructor(i,r,o,a,d,g,y,C,T,S,N){this.url=i,this.params=r,this.queryParams=o,this.fragment=a,this.data=d,this.outlet=g,this.component=y,this.routeConfig=C,this._urlSegment=T,this._lastPathIndex=S,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=en(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=en(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(o=>o.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vl extends Id{constructor(i,r){super(r),this.url=i,Ad(this,r)}toString(){return Vi(this._root)}}function Ad(s,i){i.value._routerState=s,i.children.forEach(r=>Ad(s,r))}function Vi(s){const i=s.children.length>0?` { ${s.children.map(Vi).join(", ")} } `:"";return`${s.value}${i}`}function Qs(s){if(s.snapshot){const i=s.snapshot,r=s._futureSnapshot;s.snapshot=r,ns(i.queryParams,r.queryParams)||s.queryParams.next(r.queryParams),i.fragment!==r.fragment&&s.fragment.next(r.fragment),ns(i.params,r.params)||s.params.next(r.params),function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(!ns(s[r],i[r]))return!1;return!0}(i.url,r.url)||s.url.next(r.url),ns(i.data,r.data)||s.data.next(r.data)}else s.snapshot=s._futureSnapshot,s.data.next(s._futureSnapshot.data)}function Sd(s,i){return ns(s.params,i.params)&&function(s,i){return ga(s,i)&&s.every((r,o)=>ns(r.parameters,i[o].parameters))}(s.url,i.url)&&!(!s.parent!=!i.parent)&&(!s.parent||Sd(s.parent,i.parent))}function _a(s,i,r){if(r&&s.shouldReuseRoute(i.value,r.value.snapshot)){const o=r.value;o._futureSnapshot=i.value;const a=function(s,i,r){return i.children.map(o=>{for(const a of r.children)if(s.shouldReuseRoute(o.value,a.value.snapshot))return _a(s,o,a);return _a(s,o)})}(s,i,r);return new Ks(o,a)}{if(s.shouldAttach(i.value)){const d=s.retrieve(i.value);if(null!==d){const g=d.route;return ag(i,g),g}}const o=function(s){return new So(new xn(s.url),new xn(s.params),new xn(s.queryParams),new xn(s.fragment),new xn(s.data),s.outlet,s.component,s)}(i.value),a=i.children.map(d=>_a(s,d));return new Ks(o,a)}}function ag(s,i){if(s.value.routeConfig!==i.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(s.children.length!==i.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");i.value._futureSnapshot=s.value;for(let r=0;r<s.children.length;++r)ag(s.children[r],i.children[r])}function wl(s){return"object"==typeof s&&null!=s&&!s.outlets&&!s.segmentPath}function ya(s){return"object"==typeof s&&null!=s&&s.outlets}function Qm(s,i,r,o,a){let d={};return o&&Ln(o,(g,y)=>{d[y]=Array.isArray(g)?g.map(C=>`${C}`):`${g}`}),new ml(r.root===s?i:Jm(r.root,s,i),d,a)}function Jm(s,i,r){const o={};return Ln(s.children,(a,d)=>{o[d]=a===i?r:Jm(a,i,r)}),new Pt(s.segments,o)}class lg{constructor(i,r,o){if(this.isAbsolute=i,this.numberOfDoubleDots=r,this.commands=o,i&&o.length>0&&wl(o[0]))throw new Error("Root segment cannot have matrix parameters");const a=o.find(ya);if(a&&a!==ha(o))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ug{constructor(i,r,o){this.segmentGroup=i,this.processChildren=r,this.index=o}}function Cl(s,i,r){if(s||(s=new Pt([],{})),0===s.segments.length&&s.hasChildren())return $u(s,i,r);const o=function(s,i,r){let o=0,a=i;const d={match:!1,pathIndex:0,commandIndex:0};for(;a<s.segments.length;){if(o>=r.length)return d;const g=s.segments[a],y=r[o];if(ya(y))break;const C=`${y}`,T=o<r.length-1?r[o+1]:null;if(a>0&&void 0===C)break;if(C&&T&&"object"==typeof T&&void 0===T.outlets){if(!Md(C,T,g))return d;o+=2}else{if(!Md(C,{},g))return d;o++}a++}return{match:!0,pathIndex:a,commandIndex:o}}(s,i,r),a=r.slice(o.commandIndex);if(o.match&&o.pathIndex<s.segments.length){const d=new Pt(s.segments.slice(0,o.pathIndex),{});return d.children[Et]=new Pt(s.segments.slice(o.pathIndex),s.children),$u(d,0,a)}return o.match&&0===a.length?new Pt(s.segments,{}):o.match&&!s.hasChildren()?dg(s,i,r):o.match?$u(s,0,a):dg(s,i,r)}function $u(s,i,r){if(0===r.length)return new Pt(s.segments,{});{const o=function(s){return ya(s[0])?s[0].outlets:{[Et]:s}}(r),a={};return Ln(o,(d,g)=>{"string"==typeof d&&(d=[d]),null!==d&&(a[g]=Cl(s.children[g],i,d))}),Ln(s.children,(d,g)=>{void 0===o[g]&&(a[g]=d)}),new Pt(s.segments,a)}}function dg(s,i,r){const o=s.segments.slice(0,i);let a=0;for(;a<r.length;){const d=r[a];if(ya(d)){const C=An(d.outlets);return new Pt(o,C)}if(0===a&&wl(r[0])){o.push(new Fu(s.segments[i].path,hg(r[0]))),a++;continue}const g=ya(d)?d.outlets[Et]:`${d}`,y=a<r.length-1?r[a+1]:null;g&&y&&wl(y)?(o.push(new Fu(g,hg(y))),a+=2):(o.push(new Fu(g,{})),a++)}return new Pt(o,{})}function An(s){const i={};return Ln(s,(r,o)=>{"string"==typeof r&&(r=[r]),null!==r&&(i[o]=dg(new Pt([],{}),0,r))}),i}function hg(s){const i={};return Ln(s,(r,o)=>i[o]=`${r}`),i}function Md(s,i,r){return s==r.path&&ns(i,r.parameters)}class fg{constructor(i,r,o,a){this.routeReuseStrategy=i,this.futureState=r,this.currState=o,this.forwardEvent=a}activate(i){const r=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,o,i),Qs(this.futureState.root),this.activateChildRoutes(r,o,i)}deactivateChildRoutes(i,r,o){const a=ju(r);i.children.forEach(d=>{const g=d.value.outlet;this.deactivateRoutes(d,a[g],o),delete a[g]}),Ln(a,(d,g)=>{this.deactivateRouteAndItsChildren(d,o)})}deactivateRoutes(i,r,o){const a=i.value,d=r?r.value:null;if(a===d)if(a.component){const g=o.getContext(a.outlet);g&&this.deactivateChildRoutes(i,r,g.children)}else this.deactivateChildRoutes(i,r,o);else d&&this.deactivateRouteAndItsChildren(r,o)}deactivateRouteAndItsChildren(i,r){this.routeReuseStrategy.shouldDetach(i.value.snapshot)?this.detachAndStoreRouteSubtree(i,r):this.deactivateRouteAndOutlet(i,r)}detachAndStoreRouteSubtree(i,r){const o=r.getContext(i.value.outlet);if(o&&o.outlet){const a=o.outlet.detach(),d=o.children.onOutletDeactivated();this.routeReuseStrategy.store(i.value.snapshot,{componentRef:a,route:i,contexts:d})}}deactivateRouteAndOutlet(i,r){const o=r.getContext(i.value.outlet),a=o&&i.value.component?o.children:r,d=ju(i);for(const g of Object.keys(d))this.deactivateRouteAndItsChildren(d[g],a);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}activateChildRoutes(i,r,o){const a=ju(r);i.children.forEach(d=>{this.activateRoutes(d,a[d.value.outlet],o),this.forwardEvent(new bd(d.value.snapshot))}),i.children.length&&this.forwardEvent(new fl(i.value.snapshot))}activateRoutes(i,r,o){const a=i.value,d=r?r.value:null;if(Qs(a),a===d)if(a.component){const g=o.getOrCreateContext(a.outlet);this.activateChildRoutes(i,r,g.children)}else this.activateChildRoutes(i,r,o);else if(a.component){const g=o.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const y=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),g.children.onOutletReAttached(y.contexts),g.attachRef=y.componentRef,g.route=y.route.value,g.outlet&&g.outlet.attach(y.componentRef,y.route.value),e_(y.route)}else{const y=function(s){for(let i=s.parent;i;i=i.parent){const r=i.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig;if(r&&r.component)return null}return null}(a.snapshot),C=y?y.module.componentFactoryResolver:null;g.attachRef=null,g.route=a,g.resolver=C,g.outlet&&g.outlet.activateWith(a,C),this.activateChildRoutes(i,null,g.children)}}else this.activateChildRoutes(i,null,o)}}function e_(s){Qs(s.value),s.children.forEach(e_)}class Hr{constructor(i,r){this.routes=i,this.module=r}}function Bi(s){return"function"==typeof s}function El(s){return s instanceof ml}const Dl=Symbol("INITIAL_VALUE");function Ei(){return Hn(s=>function(...s){let i,r;return(0,Au.K)(s[s.length-1])&&(r=s.pop()),"function"==typeof s[s.length-1]&&(i=s.pop()),1===s.length&&(0,oa.k)(s[0])&&(s=s[0]),(0,hd.n)(s,r).lift(new Om(i))}(s.map(i=>i.pipe(ti(1),xo(Dl)))).pipe(ll((i,r)=>{let o=!1;return r.reduce((a,d,g)=>a!==Dl?a:(d===Dl&&(o=!0),o||!1!==d&&g!==r.length-1&&!El(d)?a:d),i)},Dl),on(i=>i!==Dl),(0,et.U)(i=>El(i)?i:!0===i),ti(1)))}let lr=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275cmp=h.Xpm({type:s,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,o){1&r&&h._UZ(0,"router-outlet")},directives:function(){return[wg]},encapsulation:2}),s})();function xl(s,i=""){for(let r=0;r<s.length;r++){const o=s[r];pg(o,_0(i,o))}}function pg(s,i){s.children&&xl(s.children,i)}function _0(s,i){return i?s||i.path?s&&!i.path?`${s}/`:!s&&i.path?i.path:`${s}/${i.path}`:"":s}function Od(s){const i=s.children&&s.children.map(Od),r=i?Object.assign(Object.assign({},s),{children:i}):Object.assign({},s);return!r.component&&(i||r.loadChildren)&&r.outlet&&r.outlet!==Et&&(r.component=lr),r}function an(s){return s.outlet||Et}function kd(s,i){const r=s.filter(o=>an(o)===i);return r.push(...s.filter(o=>an(o)!==i)),r}const qu={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Il(s,i,r){var o;if(""===i.path)return"full"===i.pathMatch&&(s.hasChildren()||r.length>0)?Object.assign({},qu):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const d=(i.matcher||da)(r,s,i);if(!d)return Object.assign({},qu);const g={};Ln(d.posParams,(C,T)=>{g[T]=C.path});const y=d.consumed.length>0?Object.assign(Object.assign({},g),d.consumed[d.consumed.length-1].parameters):g;return{matched:!0,consumedSegments:d.consumed,lastChild:d.consumed.length,parameters:y,positionalParamSegments:null!==(o=d.posParams)&&void 0!==o?o:{}}}function Yu(s,i,r,o,a="corrected"){if(r.length>0&&function(s,i,r){return r.some(o=>No(s,i,o)&&an(o)!==Et)}(s,r,o)){const g=new Pt(i,function(s,i,r,o){const a={};a[Et]=o,o._sourceSegment=s,o._segmentIndexShift=i.length;for(const d of r)if(""===d.path&&an(d)!==Et){const g=new Pt([],{});g._sourceSegment=s,g._segmentIndexShift=i.length,a[an(d)]=g}return a}(s,i,o,new Pt(r,s.children)));return g._sourceSegment=s,g._segmentIndexShift=i.length,{segmentGroup:g,slicedSegments:[]}}if(0===r.length&&function(s,i,r){return r.some(o=>No(s,i,o))}(s,r,o)){const g=new Pt(s.segments,function(s,i,r,o,a,d){const g={};for(const y of o)if(No(s,r,y)&&!a[an(y)]){const C=new Pt([],{});C._sourceSegment=s,C._segmentIndexShift="legacy"===d?s.segments.length:i.length,g[an(y)]=C}return Object.assign(Object.assign({},a),g)}(s,i,r,o,s.children,a));return g._sourceSegment=s,g._segmentIndexShift=i.length,{segmentGroup:g,slicedSegments:r}}const d=new Pt(s.segments,s.children);return d._sourceSegment=s,d._segmentIndexShift=i.length,{segmentGroup:d,slicedSegments:r}}function No(s,i,r){return(!(s.hasChildren()||i.length>0)||"full"!==r.pathMatch)&&""===r.path}function _g(s,i,r,o){return!!(an(s)===o||o!==Et&&No(i,r,s))&&("**"===s.path||Il(i,s,r).matched)}function i_(s,i,r){return 0===i.length&&!s.children[r]}class Pd{constructor(i){this.segmentGroup=i||null}}class yg{constructor(i){this.urlTree=i}}function D(s){return new In.y(i=>i.error(new Pd(s)))}function v(s){return new In.y(i=>i.error(new yg(s)))}function w(s){return new In.y(i=>i.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${s}'`)))}class P{constructor(i,r,o,a,d){this.configLoader=r,this.urlSerializer=o,this.urlTree=a,this.config=d,this.allowRedirects=!0,this.ngModule=i.get(h.h0i)}apply(){const i=Yu(this.urlTree.root,[],[],this.config).segmentGroup,r=new Pt(i.segments,i.children);return this.expandSegmentGroup(this.ngModule,this.config,r,Et).pipe((0,et.U)(d=>this.createUrlTree(we(d),this.urlTree.queryParams,this.urlTree.fragment))).pipe(bs(d=>{if(d instanceof yg)return this.allowRedirects=!1,this.match(d.urlTree);throw d instanceof Pd?this.noMatchError(d):d}))}match(i){return this.expandSegmentGroup(this.ngModule,this.config,i.root,Et).pipe((0,et.U)(a=>this.createUrlTree(we(a),i.queryParams,i.fragment))).pipe(bs(a=>{throw a instanceof Pd?this.noMatchError(a):a}))}noMatchError(i){return new Error(`Cannot match any routes. URL Segment: '${i.segmentGroup}'`)}createUrlTree(i,r,o){const a=i.segments.length>0?new Pt([],{[Et]:i}):i;return new ml(a,r,o)}expandSegmentGroup(i,r,o,a){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(i,r,o).pipe((0,et.U)(d=>new Pt([],d))):this.expandSegment(i,o,r,o.segments,a,!0)}expandChildren(i,r,o){const a=[];for(const d of Object.keys(o.children))"primary"===d?a.unshift(d):a.push(d);return(0,dn.D)(a).pipe(gd(d=>{const g=o.children[d],y=kd(r,d);return this.expandSegmentGroup(i,y,g,d).pipe((0,et.U)(C=>({segment:C,outlet:d})))}),ll((d,g)=>(d[g.outlet]=g.segment,d),{}),function(s,i){const r=arguments.length>=2;return o=>o.pipe(s?on((a,d)=>s(a,d,o)):Zf.y,zf(1),r?pd(i):Ru(()=>new Ys))}())}expandSegment(i,r,o,a,d,g){return(0,dn.D)(o).pipe(gd(y=>this.expandSegmentAgainstRoute(i,r,o,y,a,d,g).pipe(bs(T=>{if(T instanceof Pd)return(0,ze.of)(null);throw T}))),Fn(y=>!!y),bs((y,C)=>{if(y instanceof Ys||"EmptyError"===y.name){if(i_(r,a,d))return(0,ze.of)(new Pt([],{}));throw new Pd(r)}throw y}))}expandSegmentAgainstRoute(i,r,o,a,d,g,y){return _g(a,r,d,g)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(i,r,a,d,g):y&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(i,r,o,a,d,g):D(r):D(r)}expandSegmentAgainstRouteUsingRedirect(i,r,o,a,d,g){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(i,o,a,g):this.expandRegularSegmentAgainstRouteUsingRedirect(i,r,o,a,d,g)}expandWildCardWithParamsAgainstRouteUsingRedirect(i,r,o,a){const d=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?v(d):this.lineralizeSegments(o,d).pipe((0,Kn.zg)(g=>{const y=new Pt(g,{});return this.expandSegment(i,y,r,g,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(i,r,o,a,d,g){const{matched:y,consumedSegments:C,lastChild:T,positionalParamSegments:S}=Il(r,a,d);if(!y)return D(r);const N=this.applyRedirectCommands(C,a.redirectTo,S);return a.redirectTo.startsWith("/")?v(N):this.lineralizeSegments(a,N).pipe((0,Kn.zg)(O=>this.expandSegment(i,r,o,O.concat(d.slice(T)),g,!1)))}matchSegmentAgainstRoute(i,r,o,a,d){if("**"===o.path)return o.loadChildren?(o._loadedConfig?(0,ze.of)(o._loadedConfig):this.configLoader.load(i.injector,o)).pipe((0,et.U)(O=>(o._loadedConfig=O,new Pt(a,{})))):(0,ze.of)(new Pt(a,{}));const{matched:g,consumedSegments:y,lastChild:C}=Il(r,o,a);if(!g)return D(r);const T=a.slice(C);return this.getChildConfig(i,o,a).pipe((0,Kn.zg)(N=>{const O=N.module,V=N.routes,{segmentGroup:Y,slicedSegments:le}=Yu(r,y,T,V),Te=new Pt(Y.segments,Y.children);if(0===le.length&&Te.hasChildren())return this.expandChildren(O,V,Te).pipe((0,et.U)(Ot=>new Pt(y,Ot)));if(0===V.length&&0===le.length)return(0,ze.of)(new Pt(y,{}));const ke=an(o)===d;return this.expandSegment(O,Te,V,le,ke?Et:d,!0).pipe((0,et.U)(nt=>new Pt(y.concat(nt.segments),nt.children)))}))}getChildConfig(i,r,o){return r.children?(0,ze.of)(new Hr(r.children,i)):r.loadChildren?void 0!==r._loadedConfig?(0,ze.of)(r._loadedConfig):this.runCanLoadGuards(i.injector,r,o).pipe((0,Kn.zg)(a=>{return a?this.configLoader.load(i.injector,r).pipe((0,et.U)(d=>(r._loadedConfig=d,d))):(s=r,new In.y(i=>i.error(eg(`Cannot load children because the guard of the route "path: '${s.path}'" returned false`))));var s})):(0,ze.of)(new Hr([],i))}runCanLoadGuards(i,r,o){const a=r.canLoad;if(!a||0===a.length)return(0,ze.of)(!0);const d=a.map(g=>{const y=i.get(g);let C;if((s=y)&&Bi(s.canLoad))C=y.canLoad(r,o);else{if(!Bi(y))throw new Error("Invalid CanLoad guard");C=y(r,o)}var s;return yr(C)});return(0,ze.of)(d).pipe(Ei(),(0,$n.b)(g=>{if(!El(g))return;const y=eg(`Redirecting to "${this.urlSerializer.serialize(g)}"`);throw y.url=g,y}),(0,et.U)(g=>!0===g))}lineralizeSegments(i,r){let o=[],a=r.root;for(;;){if(o=o.concat(a.segments),0===a.numberOfChildren)return(0,ze.of)(o);if(a.numberOfChildren>1||!a.children[Et])return w(i.redirectTo);a=a.children[Et]}}applyRedirectCommands(i,r,o){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),i,o)}applyRedirectCreatreUrlTree(i,r,o,a){const d=this.createSegmentGroup(i,r.root,o,a);return new ml(d,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(i,r){const o={};return Ln(i,(a,d)=>{if("string"==typeof a&&a.startsWith(":")){const y=a.substring(1);o[d]=r[y]}else o[d]=a}),o}createSegmentGroup(i,r,o,a){const d=this.createSegments(i,r.segments,o,a);let g={};return Ln(r.children,(y,C)=>{g[C]=this.createSegmentGroup(i,y,o,a)}),new Pt(d,g)}createSegments(i,r,o,a){return r.map(d=>d.path.startsWith(":")?this.findPosParam(i,d,a):this.findOrReturn(d,o))}findPosParam(i,r,o){const a=o[r.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${i}'. Cannot find '${r.path}'.`);return a}findOrReturn(i,r){let o=0;for(const a of r){if(a.path===i.path)return r.splice(o),a;o++}return i}}function we(s){const i={};for(const o of Object.keys(s.children)){const d=we(s.children[o]);(d.segments.length>0||d.hasChildren())&&(i[o]=d)}return function(s){if(1===s.numberOfChildren&&s.children[Et]){const i=s.children[Et];return new Pt(s.segments.concat(i.segments),i.children)}return s}(new Pt(s.segments,i))}class We{constructor(i){this.path=i,this.route=this.path[this.path.length-1]}}class Ze{constructor(i,r){this.component=i,this.route=r}}function ot(s,i,r){const o=s._root;return Ku(o,i?i._root:null,r,[o.value])}function ri(s,i,r){const o=function(s){if(!s)return null;for(let i=s.parent;i;i=i.parent){const r=i.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig}return null}(i);return(o?o.module.injector:r).get(s)}function Ku(s,i,r,o,a={canDeactivateChecks:[],canActivateChecks:[]}){const d=ju(i);return s.children.forEach(g=>{(function(s,i,r,o,a={canDeactivateChecks:[],canActivateChecks:[]}){const d=s.value,g=i?i.value:null,y=r?r.getContext(s.value.outlet):null;if(g&&d.routeConfig===g.routeConfig){const C=function(s,i,r){if("function"==typeof r)return r(s,i);switch(r){case"pathParamsChange":return!ga(s.url,i.url);case"pathParamsOrQueryParamsChange":return!ga(s.url,i.url)||!ns(s.queryParams,i.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sd(s,i)||!ns(s.queryParams,i.queryParams);case"paramsChange":default:return!Sd(s,i)}}(g,d,d.routeConfig.runGuardsAndResolvers);C?a.canActivateChecks.push(new We(o)):(d.data=g.data,d._resolvedData=g._resolvedData),Ku(s,i,d.component?y?y.children:null:r,o,a),C&&y&&y.outlet&&y.outlet.isActivated&&a.canDeactivateChecks.push(new Ze(y.outlet.component,g))}else g&&Tl(i,y,a),a.canActivateChecks.push(new We(o)),Ku(s,null,d.component?y?y.children:null:r,o,a)})(g,d[g.value.outlet],r,o.concat([g.value]),a),delete d[g.value.outlet]}),Ln(d,(g,y)=>Tl(g,r.getContext(y),a)),a}function Tl(s,i,r){const o=ju(s),a=s.value;Ln(o,(d,g)=>{Tl(d,a.component?i?i.children.getContext(g):null:i,r)}),r.canDeactivateChecks.push(new Ze(a.component&&i&&i.outlet&&i.outlet.isActivated?i.outlet.component:null,a))}class v0{}function u_(s){return new In.y(i=>i.error(s))}class RE{constructor(i,r,o,a,d,g){this.rootComponentType=i,this.config=r,this.urlTree=o,this.url=a,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=g}recognize(){const i=Yu(this.urlTree.root,[],[],this.config.filter(g=>void 0===g.redirectTo),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,i,Et);if(null===r)return null;const o=new Td([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Et,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Ks(o,r),d=new vl(this.url,a);return this.inheritParamsAndData(d._root),d}inheritParamsAndData(i){const r=i.value,o=Zm(r,this.paramsInheritanceStrategy);r.params=Object.freeze(o.params),r.data=Object.freeze(o.data),i.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(i,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(i,r):this.processSegment(i,r,r.segments,o)}processChildren(i,r){const o=[];for(const d of Object.keys(r.children)){const g=r.children[d],y=kd(i,d),C=this.processSegmentGroup(y,g,d);if(null===C)return null;o.push(...C)}const a=c_(o);return a.sort((i,r)=>i.value.outlet===Et?-1:r.value.outlet===Et?1:i.value.outlet.localeCompare(r.value.outlet)),a}processSegment(i,r,o,a){for(const d of i){const g=this.processSegmentAgainstRoute(d,r,o,a);if(null!==g)return g}return i_(r,o,a)?[]:null}processSegmentAgainstRoute(i,r,o,a){if(i.redirectTo||!_g(i,r,o,a))return null;let d,g=[],y=[];if("**"===i.path){const V=o.length>0?ha(o).parameters:{};d=new Td(o,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qu(i),an(i),i.component,i,b0(r),PA(r)+o.length,d_(i))}else{const V=Il(r,i,o);if(!V.matched)return null;g=V.consumedSegments,y=o.slice(V.lastChild),d=new Td(g,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qu(i),an(i),i.component,i,b0(r),PA(r)+g.length,d_(i))}const C=(s=i).children?s.children:s.loadChildren?s._loadedConfig.routes:[],{segmentGroup:T,slicedSegments:S}=Yu(r,g,y,C.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);var s;if(0===S.length&&T.hasChildren()){const V=this.processChildren(C,T);return null===V?null:[new Ks(d,V)]}if(0===C.length&&0===S.length)return[new Ks(d,[])];const N=an(i)===a,O=this.processSegment(C,T,S,N?Et:a);return null===O?null:[new Ks(d,O)]}}function kE(s){const i=s.value.routeConfig;return i&&""===i.path&&void 0===i.redirectTo}function c_(s){const i=[],r=new Set;for(const o of s){if(!kE(o)){i.push(o);continue}const a=i.find(d=>o.value.routeConfig===d.value.routeConfig);void 0!==a?(a.children.push(...o.children),r.add(a)):i.push(o)}for(const o of r){const a=c_(o.children);i.push(new Ks(o.value,a))}return i.filter(o=>!r.has(o))}function b0(s){let i=s;for(;i._sourceSegment;)i=i._sourceSegment;return i}function PA(s){let i=s,r=i._segmentIndexShift?i._segmentIndexShift:0;for(;i._sourceSegment;)i=i._sourceSegment,r+=i._segmentIndexShift?i._segmentIndexShift:0;return r-1}function Qu(s){return s.data||{}}function d_(s){return s.resolve||{}}function C0(s){return Hn(i=>{const r=s(i);return r?(0,dn.D)(r).pipe((0,et.U)(()=>i)):(0,ze.of)(i)})}class GA extends class{shouldDetach(i){return!1}store(i,r){}shouldAttach(i){return!1}retrieve(i){return null}shouldReuseRoute(i,r){return i.routeConfig===r.routeConfig}}{}const h_=new h.OlP("ROUTES");class f_{constructor(i,r,o,a){this.loader=i,this.compiler=r,this.onLoadStartListener=o,this.onLoadEndListener=a}load(i,r){if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactory(r.loadChildren).pipe((0,et.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);const g=d.create(i);return new Hr(ng(g.injector.get(h_,void 0,h.XFs.Self|h.XFs.Optional)).map(Od),g)}),bs(d=>{throw r._loader$=void 0,d}));return r._loader$=new CE.c(a,()=>new Yt.xQ).pipe((0,cl.x)()),r._loader$}loadModuleFactory(i){return"string"==typeof i?(0,dn.D)(this.loader.load(i)):yr(i()).pipe((0,Kn.zg)(r=>r instanceof h.YKP?(0,ze.of)(r):(0,dn.D)(this.compiler.compileModuleAsync(r))))}}class LE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Al,this.attachRef=null}}class Al{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){const o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){const r=this.getContext(i);r&&(r.outlet=null)}onOutletDeactivated(){const i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new LE,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}}class HA{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}}function VE(s){throw s}function BE(s,i,r){return i.parse("/")}function Sl(s,i){return(0,ze.of)(null)}const UE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ui=(()=>{class s{constructor(r,o,a,d,g,y,C,T){this.rootComponentType=r,this.urlSerializer=o,this.rootContexts=a,this.location=d,this.config=T,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Yt.xQ,this.errorHandler=VE,this.malformedUriErrorHandler=BE,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Sl,afterPreactivation:Sl},this.urlHandlingStrategy=new HA,this.routeReuseStrategy=new GA,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=g.get(h.h0i),this.console=g.get(h.c2e);const O=g.get(h.R0b);this.isNgZoneEnabled=O instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(T),this.currentUrlTree=new ml(new Pt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new f_(y,C,V=>this.triggerEvent(new vd(V)),V=>this.triggerEvent(new Bm(V))),this.routerState=zm(this.currentUrlTree,this.rootComponentType),this.transitions=new xn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}setupNavigations(r){const o=this.events;return r.pipe(on(a=>0!==a.id),(0,et.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Hn(a=>{let d=!1,g=!1;return(0,ze.of)(a).pipe((0,$n.b)(y=>{this.currentNavigation={id:y.id,initialUrl:y.currentRawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Hn(y=>{const C=!this.navigated||y.extractedUrl.toString()!==this.browserUrlTree.toString(),T=("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(y.rawUrl);if(p_(y.source)&&(this.browserUrlTree=y.rawUrl),T)return(0,ze.of)(y).pipe(Hn(S=>{const N=this.transitions.getValue();return o.next(new _d(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?Xi.E:Promise.resolve(S)}),function(s,i,r,o){return Hn(a=>function(s,i,r,o,a){return new P(s,i,r,o,a).apply()}(s,i,r,a.extractedUrl,o).pipe((0,et.U)(d=>Object.assign(Object.assign({},a),{urlAfterRedirects:d}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,$n.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function(s,i,r,o,a){return(0,Kn.zg)(d=>function(s,i,r,o,a="emptyOnly",d="legacy"){try{const g=new RE(s,i,r,o,a,d).recognize();return null===g?u_(new v0):(0,ze.of)(g)}catch(g){return u_(g)}}(s,i,d.urlAfterRedirects,r(d.urlAfterRedirects),o,a).pipe((0,et.U)(g=>Object.assign(Object.assign({},d),{targetSnapshot:g}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,$n.b)(S=>{"eager"===this.urlUpdateStrategy&&(S.extras.skipLocationChange||this.setBrowserUrl(S.urlAfterRedirects,S),this.browserUrlTree=S.urlAfterRedirects);const N=new yd(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);o.next(N)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:O,source:V,restoredState:Y,extras:le}=y,Te=new _d(N,this.serializeUrl(O),V,Y);o.next(Te);const ke=zm(O,this.rootComponentType).snapshot;return(0,ze.of)(Object.assign(Object.assign({},y),{targetSnapshot:ke,urlAfterRedirects:O,extras:Object.assign(Object.assign({},le),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=y.rawUrl,this.browserUrlTree=y.urlAfterRedirects,y.resolve(null),Xi.E}),C0(y=>{const{targetSnapshot:C,id:T,extractedUrl:S,rawUrl:N,extras:{skipLocationChange:O,replaceUrl:V}}=y;return this.hooks.beforePreactivation(C,{navigationId:T,appliedUrlTree:S,rawUrlTree:N,skipLocationChange:!!O,replaceUrl:!!V})}),(0,$n.b)(y=>{const C=new IE(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(C)}),(0,et.U)(y=>Object.assign(Object.assign({},y),{guards:ot(y.targetSnapshot,y.currentSnapshot,this.rootContexts)})),function(s,i){return(0,Kn.zg)(r=>{const{targetSnapshot:o,currentSnapshot:a,guards:{canActivateChecks:d,canDeactivateChecks:g}}=r;return 0===g.length&&0===d.length?(0,ze.of)(Object.assign(Object.assign({},r),{guardsResult:!0})):function(s,i,r,o){return(0,dn.D)(s).pipe((0,Kn.zg)(a=>function(s,i,r,o,a){const d=i&&i.routeConfig?i.routeConfig.canDeactivate:null;if(!d||0===d.length)return(0,ze.of)(!0);const g=d.map(y=>{const C=ri(y,i,a);let T;if(function(s){return s&&Bi(s.canDeactivate)}(C))T=yr(C.canDeactivate(s,i,r,o));else{if(!Bi(C))throw new Error("Invalid CanDeactivate guard");T=yr(C(s,i,r,o))}return T.pipe(Fn())});return(0,ze.of)(g).pipe(Ei())}(a.component,a.route,r,i,o)),Fn(a=>!0!==a,!0))}(g,o,a,s).pipe((0,Kn.zg)(y=>y&&function(s){return"boolean"==typeof s}(y)?function(s,i,r,o){return(0,dn.D)(i).pipe(gd(a=>vs(function(s,i){return null!==s&&i&&i(new Xf(s)),(0,ze.of)(!0)}(a.route.parent,o),function(s,i){return null!==s&&i&&i(new Um(s)),(0,ze.of)(!0)}(a.route,o),function(s,i,r){const o=i[i.length-1],d=i.slice(0,i.length-1).reverse().map(g=>function(s){const i=s.routeConfig?s.routeConfig.canActivateChild:null;return i&&0!==i.length?{node:s,guards:i}:null}(g)).filter(g=>null!==g).map(g=>Do(()=>{const y=g.guards.map(C=>{const T=ri(C,g.node,r);let S;if(function(s){return s&&Bi(s.canActivateChild)}(T))S=yr(T.canActivateChild(o,s));else{if(!Bi(T))throw new Error("Invalid CanActivateChild guard");S=yr(T(o,s))}return S.pipe(Fn())});return(0,ze.of)(y).pipe(Ei())}));return(0,ze.of)(d).pipe(Ei())}(s,a.path,r),function(s,i,r){const o=i.routeConfig?i.routeConfig.canActivate:null;if(!o||0===o.length)return(0,ze.of)(!0);const a=o.map(d=>Do(()=>{const g=ri(d,i,r);let y;if(function(s){return s&&Bi(s.canActivate)}(g))y=yr(g.canActivate(i,s));else{if(!Bi(g))throw new Error("Invalid CanActivate guard");y=yr(g(i,s))}return y.pipe(Fn())}));return(0,ze.of)(a).pipe(Ei())}(s,a.route,r))),Fn(a=>!0!==a,!0))}(o,d,s,i):(0,ze.of)(y)),(0,et.U)(y=>Object.assign(Object.assign({},r),{guardsResult:y})))})}(this.ngModule.injector,y=>this.triggerEvent(y)),(0,$n.b)(y=>{if(El(y.guardsResult)){const T=eg(`Redirecting to "${this.serializeUrl(y.guardsResult)}"`);throw T.url=y.guardsResult,T}const C=new ca(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.triggerEvent(C)}),on(y=>!!y.guardsResult||(this.restoreHistory(y),this.cancelNavigationTransition(y,""),!1)),C0(y=>{if(y.guards.canActivateChecks.length)return(0,ze.of)(y).pipe((0,$n.b)(C=>{const T=new Jf(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(T)}),Hn(C=>{let T=!1;return(0,ze.of)(C).pipe(function(s,i){return(0,Kn.zg)(r=>{const{targetSnapshot:o,guards:{canActivateChecks:a}}=r;if(!a.length)return(0,ze.of)(r);let d=0;return(0,dn.D)(a).pipe(gd(g=>function(s,i,r,o){return function(s,i,r,o){const a=Object.keys(s);if(0===a.length)return(0,ze.of)({});const d={};return(0,dn.D)(a).pipe((0,Kn.zg)(g=>function(s,i,r,o){const a=ri(s,i,o);return yr(a.resolve?a.resolve(i,r):a(i,r))}(s[g],i,r,o).pipe((0,$n.b)(y=>{d[g]=y}))),zf(1),(0,Kn.zg)(()=>Object.keys(d).length===a.length?(0,ze.of)(d):Xi.E))}(s._resolve,s,i,o).pipe((0,et.U)(d=>(s._resolvedData=d,s.data=Object.assign(Object.assign({},s.data),Zm(s,r).resolve),null)))}(g.route,o,s,i)),(0,$n.b)(()=>d++),zf(1),(0,Kn.zg)(g=>d===a.length?(0,ze.of)(r):Xi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,$n.b)({next:()=>T=!0,complete:()=>{T||(this.restoreHistory(C),this.cancelNavigationTransition(C,"At least one route resolver didn't emit any value."))}}))}),(0,$n.b)(C=>{const T=new hl(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(T)}))}),C0(y=>{const{targetSnapshot:C,id:T,extractedUrl:S,rawUrl:N,extras:{skipLocationChange:O,replaceUrl:V}}=y;return this.hooks.afterPreactivation(C,{navigationId:T,appliedUrlTree:S,rawUrlTree:N,skipLocationChange:!!O,replaceUrl:!!V})}),(0,et.U)(y=>{const C=function(s,i,r){const o=_a(s,i._root,r?r._root:void 0);return new Hu(o,i)}(this.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return Object.assign(Object.assign({},y),{targetRouterState:C})}),(0,$n.b)(y=>{this.currentUrlTree=y.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl),this.routerState=y.targetRouterState,"deferred"===this.urlUpdateStrategy&&(y.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,y),this.browserUrlTree=y.urlAfterRedirects)}),((s,i,r)=>(0,et.U)(o=>(new fg(i,o.targetRouterState,o.currentRouterState,r).activate(s),o)))(this.rootContexts,this.routeReuseStrategy,y=>this.triggerEvent(y)),(0,$n.b)({next(){d=!0},complete(){d=!0}}),function(s){return i=>i.lift(new Qf(s))}(()=>{if(!d&&!g){const y=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,y)):this.cancelNavigationTransition(a,y)}this.currentNavigation=null}),bs(y=>{if(g=!0,function(s){return s&&s[wd]}(y)){const C=El(y.url);C||(this.navigated=!0,this.restoreHistory(a,!0));const T=new dl(a.id,this.serializeUrl(a.extractedUrl),y.message);o.next(T),C?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(y.url,this.rawUrlTree),N={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||p_(a.source)};this.scheduleNavigation(S,"imperative",null,N,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const C=new ku(a.id,this.serializeUrl(a.extractedUrl),y);o.next(C);try{a.resolve(this.errorHandler(y))}catch(T){a.reject(T)}}return Xi.E}))}))}resetRootComponentType(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}getTransition(){const r=this.transitions.value;return r.urlAfterRedirects=this.browserUrlTree,r}setTransition(r){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),r))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const o=this.extractLocationChangeInfoFromEvent(r);this.shouldScheduleNavigation(this.lastLocationChangeInfo,o)&&setTimeout(()=>{const{source:a,state:d,urlTree:g}=o,y={replaceUrl:!0};if(d){const C=Object.assign({},d);delete C.navigationId,delete C.\u0275routerPageId,0!==Object.keys(C).length&&(y.state=C)}this.scheduleNavigation(g,a,d,y)},0),this.lastLocationChangeInfo=o}))}extractLocationChangeInfoFromEvent(r){var o;return{source:"popstate"===r.type?"popstate":"hashchange",urlTree:this.parseUrl(r.url),state:(null===(o=r.state)||void 0===o?void 0:o.navigationId)?r.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(r,o){if(!r)return!0;const a=o.urlTree.toString()===r.urlTree.toString();return o.transitionId!==r.transitionId||!a||!("hashchange"===o.source&&"popstate"===r.source||"popstate"===o.source&&"hashchange"===r.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(r){this.events.next(r)}resetConfig(r){xl(r),this.config=r.map(Od),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,o={}){const{relativeTo:a,queryParams:d,fragment:g,queryParamsHandling:y,preserveFragment:C}=o,T=a||this.routerState.root,S=C?this.currentUrlTree.fragment:g;let N=null;switch(y){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),d);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=d||null}return null!==N&&(N=this.removeEmptyProps(N)),function(s,i,r,o,a){if(0===r.length)return Qm(i.root,i.root,i,o,a);const d=function(s){if("string"==typeof s[0]&&1===s.length&&"/"===s[0])return new lg(!0,0,s);let i=0,r=!1;const o=s.reduce((a,d,g)=>{if("object"==typeof d&&null!=d){if(d.outlets){const y={};return Ln(d.outlets,(C,T)=>{y[T]="string"==typeof C?C.split("/"):C}),[...a,{outlets:y}]}if(d.segmentPath)return[...a,d.segmentPath]}return"string"!=typeof d?[...a,d]:0===g?(d.split("/").forEach((y,C)=>{0==C&&"."===y||(0==C&&""===y?r=!0:".."===y?i++:""!=y&&a.push(y))}),a):[...a,d]},[]);return new lg(r,i,o)}(r);if(d.toRoot())return Qm(i.root,new Pt([],{}),i,o,a);const g=function(s,i,r){if(s.isAbsolute)return new ug(i.root,!0,0);if(-1===r.snapshot._lastPathIndex){const d=r.snapshot._urlSegment;return new ug(d,d===i.root,0)}const o=wl(s.commands[0])?0:1;return function(s,i,r){let o=s,a=i,d=r;for(;d>a;){if(d-=a,o=o.parent,!o)throw new Error("Invalid number of '../'");a=o.segments.length}return new ug(o,!1,a-d)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+o,s.numberOfDoubleDots)}(d,i,s),y=g.processChildren?$u(g.segmentGroup,g.index,d.commands):Cl(g.segmentGroup,g.index,d.commands);return Qm(g.segmentGroup,y,i,o,a)}(T,this.currentUrlTree,r,N,null!=S?S:null)}navigateByUrl(r,o={skipLocationChange:!1}){const a=El(r)?r:this.parseUrl(r),d=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(d,"imperative",null,o)}navigate(r,o={skipLocationChange:!1}){return function(s){for(let i=0;i<s.length;i++){const r=s[i];if(null==r)throw new Error(`The requested path contains ${r} segment at index ${i}`)}}(r),this.navigateByUrl(this.createUrlTree(r,o),o)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let o;try{o=this.urlSerializer.parse(r)}catch(a){o=this.malformedUriErrorHandler(a,this.urlSerializer,r)}return o}isActive(r,o){let a;if(a=!0===o?Object.assign({},UE):!1===o?Object.assign({},GE):o,El(r))return Pu(this.currentUrlTree,r,a);const d=this.parseUrl(r);return Pu(this.currentUrlTree,d,a)}removeEmptyProps(r){return Object.keys(r).reduce((o,a)=>{const d=r[a];return null!=d&&(o[a]=d),o},{})}processNavigations(){this.navigations.subscribe(r=>{this.navigated=!0,this.lastSuccessfulId=r.id,this.currentPageId=r.targetPageId,this.events.next(new Ou(r.id,this.serializeUrl(r.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,r.resolve(!0)},r=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(r,o,a,d,g){var y,C;if(this.disposed)return Promise.resolve(!1);const T=this.getTransition(),S=p_(o)&&T&&!p_(T.source),V=(this.lastSuccessfulId===T.id||this.currentNavigation?T.rawUrl:T.urlAfterRedirects).toString()===r.toString();if(S&&V)return Promise.resolve(!0);let Y,le,Te;g?(Y=g.resolve,le=g.reject,Te=g.promise):Te=new Promise((nt,Ot)=>{Y=nt,le=Ot});const ke=++this.navigationId;let Ue;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),Ue=a&&a.\u0275routerPageId?a.\u0275routerPageId:d.replaceUrl||d.skipLocationChange?null!==(y=this.browserPageId)&&void 0!==y?y:0:(null!==(C=this.browserPageId)&&void 0!==C?C:0)+1):Ue=0,this.setTransition({id:ke,targetPageId:Ue,source:o,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:d,resolve:Y,reject:le,promise:Te,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Te.catch(nt=>Promise.reject(nt))}setBrowserUrl(r,o){const a=this.urlSerializer.serialize(r),d=Object.assign(Object.assign({},o.extras.state),this.generateNgRouterState(o.id,o.targetPageId));this.location.isCurrentPathEqualTo(a)||o.extras.replaceUrl?this.location.replaceState(a,"",d):this.location.go(a,"",d)}restoreHistory(r,o=!1){var a,d;if("computed"===this.canceledNavigationResolution){const g=this.currentPageId-r.targetPageId;"popstate"!==r.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===g?this.currentUrlTree===(null===(d=this.currentNavigation)||void 0===d?void 0:d.finalUrl)&&0===g&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(g)}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(r,o){const a=new dl(r.id,this.serializeUrl(r.extractedUrl),o);this.triggerEvent(a),r.resolve(!1)}generateNgRouterState(r,o){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:o}:{navigationId:r}}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(h.DyG),h.LFG(rg),h.LFG(Al),h.LFG(rt),h.LFG(h.zs3),h.LFG(h.v3s),h.LFG(h.Sil),h.LFG(void 0))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})();function p_(s){return"imperative"!==s}let wg=(()=>{class s{constructor(r,o,a,d,g){this.parentContexts=r,this.location=o,this.resolver=a,this.changeDetector=g,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.name=d||Et,r.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,r}attach(r,o){this.activated=r,this._activatedRoute=o,this.location.insert(r.hostView)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,o){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;const g=(o=o||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),y=this.parentContexts.getOrCreateContext(this.name).children,C=new y_(r,y,this.location.injector);this.activated=this.location.createComponent(g,this.location.length,C),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return s.\u0275fac=function(r){return new(r||s)(h.Y36(Al),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},s.\u0275dir=h.lG2({type:s,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),s})();class y_{constructor(i,r,o){this.route=i,this.childContexts=r,this.parent=o}get(i,r){return i===So?this.route:i===Al?this.childContexts:this.parent.get(i,r)}}class D0{}class I0{preload(i,r){return(0,ze.of)(null)}}let v_=(()=>{class s{constructor(r,o,a,d,g){this.router=r,this.injector=d,this.preloadingStrategy=g,this.loader=new f_(o,a,T=>r.triggerEvent(new vd(T)),T=>r.triggerEvent(new Bm(T)))}setUpPreloading(){this.subscription=this.router.events.pipe(on(r=>r instanceof Ou),gd(()=>this.preload())).subscribe(()=>{})}preload(){const r=this.injector.get(h.h0i);return this.processRoutes(r,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,o){const a=[];for(const d of o)if(d.loadChildren&&!d.canLoad&&d._loadedConfig){const g=d._loadedConfig;a.push(this.processRoutes(g.module,g.routes))}else d.loadChildren&&!d.canLoad?a.push(this.preloadConfig(r,d)):d.children&&a.push(this.processRoutes(r,d.children));return(0,dn.D)(a).pipe((0,zs.J)(),(0,et.U)(d=>{}))}preloadConfig(r,o){return this.preloadingStrategy.preload(o,()=>(o._loadedConfig?(0,ze.of)(o._loadedConfig):this.loader.load(r.injector,o)).pipe((0,Kn.zg)(d=>(o._loadedConfig=d,this.processRoutes(d.module,d.routes)))))}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(Ui),h.LFG(h.v3s),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(D0))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})(),Xu=(()=>{class s{constructor(r,o,a={}){this.router=r,this.viewportScroller=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(r=>{r instanceof _d?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Ou&&(this.lastId=r.id,this.scheduleScrollEvent(r,this.router.parseUrl(r.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(r=>{r instanceof Io&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,o){this.router.triggerEvent(new Io(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(Ui),h.LFG(qc),h.LFG(void 0))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})();const Nl=new h.OlP("ROUTER_CONFIGURATION"),HE=new h.OlP("ROUTER_FORROOT_GUARD"),$E=[rt,{provide:rg,useClass:Lu},{provide:Ui,useFactory:function(s,i,r,o,a,d,g,y={},C,T){const S=new Ui(null,s,i,r,o,a,d,ng(g));return C&&(S.urlHandlingStrategy=C),T&&(S.routeReuseStrategy=T),function(s,i){s.errorHandler&&(i.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(i.malformedUriErrorHandler=s.malformedUriErrorHandler),s.onSameUrlNavigation&&(i.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(i.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.relativeLinkResolution&&(i.relativeLinkResolution=s.relativeLinkResolution),s.urlUpdateStrategy&&(i.urlUpdateStrategy=s.urlUpdateStrategy)}(y,S),y.enableTracing&&S.events.subscribe(N=>{var O,V;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${N.constructor.name}`),console.log(N.toString()),console.log(N),null===(V=console.groupEnd)||void 0===V||V.call(console)}),S},deps:[rg,Al,rt,h.zs3,h.v3s,h.Sil,h_,Nl,[class{},new h.FiY],[class{},new h.FiY]]},Al,{provide:So,useFactory:function(s){return s.routerState.root},deps:[Ui]},{provide:h.v3s,useClass:h.EAV},v_,I0,class{preload(i,r){return r().pipe(bs(()=>(0,ze.of)(null)))}},{provide:Nl,useValue:{enableTracing:!1}}];function T0(){return new h.PXZ("Router",Ui)}let A0=(()=>{class s{constructor(r,o){}static forRoot(r,o){return{ngModule:s,providers:[$E,S0(r),{provide:HE,useFactory:WA,deps:[[Ui,new h.FiY,new h.tp0]]},{provide:Nl,useValue:o||{}},{provide:Me,useFactory:WE,deps:[J,[new h.tBr(ce),new h.FiY],Nl]},{provide:Xu,useFactory:MP,deps:[Ui,qc,Nl]},{provide:D0,useExisting:o&&o.preloadingStrategy?o.preloadingStrategy:I0},{provide:h.PXZ,multi:!0,useFactory:T0},[N0,{provide:h.ip1,multi:!0,useFactory:qE,deps:[N0]},{provide:YE,useFactory:zA,deps:[N0]},{provide:h.tb,multi:!0,useExisting:YE}]]}}static forChild(r){return{ngModule:s,providers:[S0(r)]}}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(HE,8),h.LFG(Ui,8))},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({}),s})();function MP(s,i,r){return r.scrollOffset&&i.setOffset(r.scrollOffset),new Xu(s,i,r)}function WE(s,i,r={}){return r.useHash?new Le(s,i):new Ge(s,i)}function WA(s){return"guarded"}function S0(s){return[{provide:h.deG,multi:!0,useValue:s},{provide:h_,multi:!0,useValue:s}]}let N0=(()=>{class s{constructor(r){this.injector=r,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Yt.xQ}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let o=null;const a=new Promise(y=>o=y),d=this.injector.get(Ui),g=this.injector.get(Nl);return"disabled"===g.initialNavigation?(d.setUpLocationChangeListener(),o(!0)):"enabled"===g.initialNavigation||"enabledBlocking"===g.initialNavigation?(d.hooks.afterPreactivation=()=>this.initNavigation?(0,ze.of)(null):(this.initNavigation=!0,o(!0),this.resultOfPreactivationDone),d.initialNavigation()):o(!0),a})}bootstrapListener(r){const o=this.injector.get(Nl),a=this.injector.get(v_),d=this.injector.get(Xu),g=this.injector.get(Ui),y=this.injector.get(h.z2F);r===y.components[0]&&(("enabledNonBlocking"===o.initialNavigation||void 0===o.initialNavigation)&&g.initialNavigation(),a.setUpPreloading(),d.init(),g.resetRootComponentType(y.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(h.zs3))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})();function qE(s){return s.appInitializer.bind(s)}function zA(s){return s.bootstrapListener.bind(s)}const YE=new h.OlP("Router Initializer"),zE=[];let KA=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[A0.forRoot(zE)],A0]}),s})();var QA=U(1555);function gt(s,i){return new In.y(r=>{const o=s.length;if(0===o)return void r.complete();const a=new Array(o);let d=0,g=0;for(let y=0;y<o;y++){const C=(0,dn.D)(s[y]);let T=!1;r.add(C.subscribe({next:S=>{T||(T=!0,g++),a[y]=S},error:S=>r.error(S),complete:()=>{d++,(d===o||!T)&&(g===o&&r.next(i?i.reduce((S,N,O)=>(S[N]=a[O],S),{}):a),r.complete())}}))}})}let M0=(()=>{class s{constructor(r,o){this._renderer=r,this._elementRef=o,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(r,o){this._renderer.setProperty(this._elementRef.nativeElement,r,o)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return s.\u0275fac=function(r){return new(r||s)(h.Y36(h.Qsj),h.Y36(h.SBq))},s.\u0275dir=h.lG2({type:s}),s})(),Ml=(()=>{class s extends M0{}return s.\u0275fac=function(){let i;return function(o){return(i||(i=h.n5z(s)))(o||s)}}(),s.\u0275dir=h.lG2({type:s,features:[h.qOj]}),s})();const ur=new h.OlP("NgValueAccessor"),XA={provide:ur,useExisting:(0,h.Gpc)(()=>Ld),multi:!0},wa=new h.OlP("CompositionEventMode");let Ld=(()=>{class s extends M0{constructor(r,o,a){super(r,o),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const s=q()?q().getUserAgent():"";return/android (\d+)/.test(s.toLowerCase())}())}writeValue(r){this.setProperty("value",null==r?"":r)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return s.\u0275fac=function(r){return new(r||s)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(wa,8))},s.\u0275dir=h.lG2({type:s,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){1&r&&h.NdJ("input",function(d){return o._handleInput(d.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(d){return o._compositionEnd(d.target.value)})},features:[h._Bn([XA]),h.qOj]}),s})();function Ca(s){return null==s||0===s.length}function b_(s){return null!=s&&"number"==typeof s.length}const ii=new h.OlP("NgValidators"),Ea=new h.OlP("NgAsyncValidators"),OP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Es{static min(i){return function(s){return i=>{if(Ca(i.value)||Ca(s))return null;const r=parseFloat(i.value);return!isNaN(r)&&r<s?{min:{min:s,actual:i.value}}:null}}(i)}static max(i){return function(s){return i=>{if(Ca(i.value)||Ca(s))return null;const r=parseFloat(i.value);return!isNaN(r)&&r>s?{max:{max:s,actual:i.value}}:null}}(i)}static required(i){return function(s){return Ca(s.value)?{required:!0}:null}(i)}static requiredTrue(i){return function(s){return!0===s.value?null:{required:!0}}(i)}static email(i){return function(s){return Ca(s.value)||OP.test(s.value)?null:{email:!0}}(i)}static minLength(i){return function(s){return i=>Ca(i.value)||!b_(i.value)?null:i.value.length<s?{minlength:{requiredLength:s,actualLength:i.value.length}}:null}(i)}static maxLength(i){return function(s){return i=>b_(i.value)&&i.value.length>s?{maxlength:{requiredLength:s,actualLength:i.value.length}}:null}(i)}static pattern(i){return function(s){if(!s)return ec;let i,r;return"string"==typeof s?(r="","^"!==s.charAt(0)&&(r+="^"),r+=s,"$"!==s.charAt(s.length-1)&&(r+="$"),i=new RegExp(r)):(r=s.toString(),i=s),o=>{if(Ca(o.value))return null;const a=o.value;return i.test(a)?null:{pattern:{requiredPattern:r,actualValue:a}}}}(i)}static nullValidator(i){return null}static compose(i){return rS(i)}static composeAsync(i){return iS(i)}}function ec(s){return null}function P0(s){return null!=s}function F0(s){const i=(0,h.QGY)(s)?(0,dn.D)(s):s;return(0,h.CqO)(i),i}function QE(s){let i={};return s.forEach(r=>{i=null!=r?Object.assign(Object.assign({},i),r):i}),0===Object.keys(i).length?null:i}function C_(s,i){return i.map(r=>r(s))}function nS(s){return s.map(i=>function(s){return!s.validate}(i)?i:r=>i.validate(r))}function rS(s){if(!s)return null;const i=s.filter(P0);return 0==i.length?null:function(r){return QE(C_(r,i))}}function JE(s){return null!=s?rS(nS(s)):null}function iS(s){if(!s)return null;const i=s.filter(P0);return 0==i.length?null:function(r){return function(...s){if(1===s.length){const i=s[0];if((0,oa.k)(i))return gt(i,null);if((0,QA.K)(i)&&Object.getPrototypeOf(i)===Object.prototype){const r=Object.keys(i);return gt(r.map(o=>i[o]),r)}}if("function"==typeof s[s.length-1]){const i=s.pop();return gt(s=1===s.length&&(0,oa.k)(s[0])?s[0]:s,null).pipe((0,et.U)(r=>i(...r)))}return gt(s,null)}(C_(r,i).map(F0)).pipe((0,et.U)(QE))}}function XE(s){return null!=s?iS(nS(s)):null}function sS(s,i){return null===s?[i]:Array.isArray(s)?[...s,i]:[s,i]}function oS(s){return s._rawValidators}function aS(s){return s._rawAsyncValidators}function eD(s){return s?Array.isArray(s)?s:[s]:[]}function L0(s,i){return Array.isArray(s)?s.includes(i):s===i}function Da(s,i){const r=eD(i);return eD(s).forEach(a=>{L0(r,a)||r.push(a)}),r}function E_(s,i){return eD(i).filter(r=>!L0(s,r))}let tD=(()=>{class s{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(r){this._rawValidators=r||[],this._composedValidatorFn=JE(this._rawValidators)}_setAsyncValidators(r){this._rawAsyncValidators=r||[],this._composedAsyncValidatorFn=XE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(r){this._onDestroyCallbacks.push(r)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(r=>r()),this._onDestroyCallbacks=[]}reset(r){this.control&&this.control.reset(r)}hasError(r,o){return!!this.control&&this.control.hasError(r,o)}getError(r,o){return this.control?this.control.getError(r,o):null}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275dir=h.lG2({type:s}),s})(),si=(()=>{class s extends tD{get formDirective(){return null}get path(){return null}}return s.\u0275fac=function(){let i;return function(o){return(i||(i=h.n5z(s)))(o||s)}}(),s.\u0275dir=h.lG2({type:s,features:[h.qOj]}),s})();class Mo extends tD{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class V0{constructor(i){this._cd=i}is(i){var r,o,a;return"submitted"===i?!!(null===(r=this._cd)||void 0===r?void 0:r.submitted):!!(null===(a=null===(o=this._cd)||void 0===o?void 0:o.control)||void 0===a?void 0:a[i])}}let xa=(()=>{class s extends V0{constructor(r){super(r)}}return s.\u0275fac=function(r){return new(r||s)(h.Y36(Mo,2))},s.\u0275dir=h.lG2({type:s,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){2&r&&h.ekj("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))},features:[h.qOj]}),s})(),B0=(()=>{class s extends V0{constructor(r){super(r)}}return s.\u0275fac=function(r){return new(r||s)(h.Y36(si,10))},s.\u0275dir=h.lG2({type:s,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){2&r&&h.ekj("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))("ng-submitted",o.is("submitted"))},features:[h.qOj]}),s})();function Dg(s,i){tc(s,i),i.valueAccessor.writeValue(s.value),function(s,i){i.valueAccessor.registerOnChange(r=>{s._pendingValue=r,s._pendingChange=!0,s._pendingDirty=!0,"change"===s.updateOn&&Ud(s,i)})}(s,i),function(s,i){const r=(o,a)=>{i.valueAccessor.writeValue(o),a&&i.viewToModelUpdate(o)};s.registerOnChange(r),i._registerOnDestroy(()=>{s._unregisterOnChange(r)})}(s,i),function(s,i){i.valueAccessor.registerOnTouched(()=>{s._pendingTouched=!0,"blur"===s.updateOn&&s._pendingChange&&Ud(s,i),"submit"!==s.updateOn&&s.markAsTouched()})}(s,i),function(s,i){if(i.valueAccessor.setDisabledState){const r=o=>{i.valueAccessor.setDisabledState(o)};s.registerOnDisabledChange(r),i._registerOnDestroy(()=>{s._unregisterOnDisabledChange(r)})}}(s,i)}function xg(s,i,r=!0){const o=()=>{};i.valueAccessor&&(i.valueAccessor.registerOnChange(o),i.valueAccessor.registerOnTouched(o)),Ia(s,i),s&&(i._invokeOnDestroyCallbacks(),s._registerOnCollectionChange(()=>{}))}function D_(s,i){s.forEach(r=>{r.registerOnValidatorChange&&r.registerOnValidatorChange(i)})}function tc(s,i){const r=oS(s);null!==i.validator?s.setValidators(sS(r,i.validator)):"function"==typeof r&&s.setValidators([r]);const o=aS(s);null!==i.asyncValidator?s.setAsyncValidators(sS(o,i.asyncValidator)):"function"==typeof o&&s.setAsyncValidators([o]);const a=()=>s.updateValueAndValidity();D_(i._rawValidators,a),D_(i._rawAsyncValidators,a)}function Ia(s,i){let r=!1;if(null!==s){if(null!==i.validator){const a=oS(s);if(Array.isArray(a)&&a.length>0){const d=a.filter(g=>g!==i.validator);d.length!==a.length&&(r=!0,s.setValidators(d))}}if(null!==i.asyncValidator){const a=aS(s);if(Array.isArray(a)&&a.length>0){const d=a.filter(g=>g!==i.asyncValidator);d.length!==a.length&&(r=!0,s.setAsyncValidators(d))}}}const o=()=>{};return D_(i._rawValidators,o),D_(i._rawAsyncValidators,o),r}function Ud(s,i){s._pendingDirty&&s.markAsDirty(),s.setValue(s._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(s._pendingValue),s._pendingChange=!1}function Ag(s,i){const r=s.indexOf(i);r>-1&&s.splice(r,1)}const jd="VALID",Sg="INVALID",Hd="PENDING",$d="DISABLED";function H0(s){return(aD(s)?s.validators:s)||null}function Gi(s){return Array.isArray(s)?JE(s):s||null}function $0(s,i){return(aD(i)?i.asyncValidators:s)||null}function oD(s){return Array.isArray(s)?XE(s):s||null}function aD(s){return null!=s&&!Array.isArray(s)&&"object"==typeof s}class lD{constructor(i,r){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=i,this._rawAsyncValidators=r,this._composedValidatorFn=Gi(this._rawValidators),this._composedAsyncValidatorFn=oD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get valid(){return this.status===jd}get invalid(){return this.status===Sg}get pending(){return this.status==Hd}get disabled(){return this.status===$d}get enabled(){return this.status!==$d}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._rawValidators=i,this._composedValidatorFn=Gi(i)}setAsyncValidators(i){this._rawAsyncValidators=i,this._composedAsyncValidatorFn=oD(i)}addValidators(i){this.setValidators(Da(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(Da(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(E_(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(E_(i,this._rawAsyncValidators))}hasValidator(i){return L0(this._rawValidators,i)}hasAsyncValidator(i){return L0(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){this.touched=!0,this._parent&&!i.onlySelf&&this._parent.markAsTouched(i)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(i=>i.markAllAsTouched())}markAsUntouched(i={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}markAsDirty(i={}){this.pristine=!1,this._parent&&!i.onlySelf&&this._parent.markAsDirty(i)}markAsPristine(i={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(r=>{r.markAsPristine({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}markAsPending(i={}){this.status=Hd,!1!==i.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!i.onlySelf&&this._parent.markAsPending(i)}disable(i={}){const r=this._parentMarkedDirty(i.onlySelf);this.status=$d,this.errors=null,this._forEachChild(o=>{o.disable(Object.assign(Object.assign({},i),{onlySelf:!0}))}),this._updateValue(),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},i),{skipPristineCheck:r})),this._onDisabledChange.forEach(o=>o(!0))}enable(i={}){const r=this._parentMarkedDirty(i.onlySelf);this.status=jd,this._forEachChild(o=>{o.enable(Object.assign(Object.assign({},i),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},i),{skipPristineCheck:r})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(i){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(i){this._parent=i}updateValueAndValidity(i={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jd||this.status===Hd)&&this._runAsyncValidator(i.emitEvent)),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity(i)}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(r=>r._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$d:jd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i){if(this.asyncValidator){this.status=Hd,this._hasOwnPendingAsyncValidator=!0;const r=F0(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:i})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(i,r={}){this.errors=i,this._updateControlsErrors(!1!==r.emitEvent)}get(i){return function(s,i,r){if(null==i||(Array.isArray(i)||(i=i.split(".")),Array.isArray(i)&&0===i.length))return null;let o=s;return i.forEach(a=>{o=o instanceof x_?o.controls.hasOwnProperty(a)?o.controls[a]:null:o instanceof W0&&o.at(a)||null}),o}(this,i)}getError(i,r){const o=r?this.get(r):this;return o&&o.errors?o.errors[i]:null}hasError(i,r){return!!this.getError(i,r)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(i)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?$d:this.errors?Sg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hd)?Hd:this._anyControlsHaveStatus(Sg)?Sg:jd}_anyControlsHaveStatus(i){return this._anyControls(r=>r.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i={}){this.pristine=!this._anyControlsDirty(),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}_updateTouched(i={}){this.touched=this._anyControlsTouched(),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}_isBoxedValue(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){aD(i)&&null!=i.updateOn&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){return!i&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class nc extends lD{constructor(i=null,r,o){super(H0(r),$0(o,r)),this._onChange=[],this._applyFormState(i),this._setUpdateStrategy(r),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(i,r={}){this.value=this._pendingValue=i,this._onChange.length&&!1!==r.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==r.emitViewToModelChange)),this.updateValueAndValidity(r)}patchValue(i,r={}){this.setValue(i,r)}reset(i=null,r={}){this._applyFormState(i),this.markAsPristine(r),this.markAsUntouched(r),this.setValue(this.value,r),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){Ag(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){Ag(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(i){this._isBoxedValue(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}}class x_ extends lD{constructor(i,r,o){super(H0(r),$0(o,r)),this.controls=i,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(i,r){return this.controls[i]?this.controls[i]:(this.controls[i]=r,r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange),r)}addControl(i,r,o={}){this.registerControl(i,r),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(i,r={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}setControl(i,r,o={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],r&&this.registerControl(i,r),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,r={}){this._checkAllValuesPresent(i),Object.keys(i).forEach(o=>{this._throwIfControlMissing(o),this.controls[o].setValue(i[o],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(i,r={}){null!=i&&(Object.keys(i).forEach(o=>{this.controls[o]&&this.controls[o].patchValue(i[o],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(i={},r={}){this._forEachChild((o,a)=>{o.reset(i[a],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this._reduceChildren({},(i,r,o)=>(i[o]=r instanceof nc?r.value:r.getRawValue(),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(r,o)=>!!o._syncPendingControls()||r);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_throwIfControlMissing(i){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[i])throw new Error(`Cannot find form control with name: ${i}.`)}_forEachChild(i){Object.keys(this.controls).forEach(r=>{const o=this.controls[r];o&&i(o,r)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(const r of Object.keys(this.controls)){const o=this.controls[r];if(this.contains(r)&&i(o))return!0}return!1}_reduceValue(){return this._reduceChildren({},(i,r,o)=>((r.enabled||this.disabled)&&(i[o]=r.value),i))}_reduceChildren(i,r){let o=i;return this._forEachChild((a,d)=>{o=r(o,a,d)}),o}_allControlsDisabled(){for(const i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(i){this._forEachChild((r,o)=>{if(void 0===i[o])throw new Error(`Must supply a value for form control with name: '${o}'.`)})}}class W0 extends lD{constructor(i,r,o){super(H0(r),$0(o,r)),this.controls=i,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(i){return this.controls[i]}push(i,r={}){this.controls.push(i),this._registerControl(i),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}insert(i,r,o={}){this.controls.splice(i,0,r),this._registerControl(r),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(i,r={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:r.emitEvent})}setControl(i,r,o={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),r&&(this.controls.splice(i,0,r),this._registerControl(r)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(i,r={}){this._checkAllValuesPresent(i),i.forEach((o,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(o,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(i,r={}){null!=i&&(i.forEach((o,a)=>{this.at(a)&&this.at(a).patchValue(o,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(i=[],r={}){this._forEachChild((o,a)=>{o.reset(i[a],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this.controls.map(i=>i instanceof nc?i.value:i.getRawValue())}clear(i={}){this.controls.length<1||(this._forEachChild(r=>r._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:i.emitEvent}))}_syncPendingControls(){let i=this.controls.reduce((r,o)=>!!o._syncPendingControls()||r,!1);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_throwIfControlMissing(i){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(i))throw new Error(`Cannot find form control at index ${i}`)}_forEachChild(i){this.controls.forEach((r,o)=>{i(r,o)})}_updateValue(){this.value=this.controls.filter(i=>i.enabled||this.disabled).map(i=>i.value)}_anyControls(i){return this.controls.some(r=>r.enabled&&i(r))}_setUpControls(){this._forEachChild(i=>this._registerControl(i))}_checkAllValuesPresent(i){this._forEachChild((r,o)=>{if(void 0===i[o])throw new Error(`Must supply a value for form control at index: ${o}.`)})}_allControlsDisabled(){for(const i of this.controls)if(i.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(i){i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)}}let cD=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275dir=h.lG2({type:s,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),s})(),mS=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({}),s})();const Mg=new h.OlP("NgModelWithFormControlWarning"),T_={provide:si,useExisting:(0,h.Gpc)(()=>Wd)};let Wd=(()=>{class s extends si{constructor(r,o){super(),this.validators=r,this.asyncValidators=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(r),this._setAsyncValidators(o)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ia(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){const o=this.form.get(r.path);return Dg(o,r),o.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),o}getControl(r){return this.form.get(r.path)}removeControl(r){xg(r.control||null,r,!1),Ag(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,o){this.form.get(r.path).setValue(o)}onSubmit(r){return this.submitted=!0,function(s,i){s._syncPendingControls(),i.forEach(r=>{const o=r.control;"submit"===o.updateOn&&o._pendingChange&&(r.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(r),!1}onReset(){this.resetForm()}resetForm(r){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{const o=r.control,a=this.form.get(r.path);o!==a&&(xg(o||null,r),a instanceof nc&&(Dg(a,r),r.control=a))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){const o=this.form.get(r.path);(function(s,i){tc(s,i)})(o,r),o.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){const o=this.form.get(r.path);o&&function(s,i){return Ia(s,i)}(o,r)&&o.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){tc(this.form,this),this._oldForm&&Ia(this._oldForm,this)}_checkFormPresent(){}}return s.\u0275fac=function(r){return new(r||s)(h.Y36(ii,10),h.Y36(Ea,10))},s.\u0275dir=h.lG2({type:s,selectors:[["","formGroup",""]],hostBindings:function(r,o){1&r&&h.NdJ("submit",function(d){return o.onSubmit(d)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([T_]),h.qOj,h.TTD]}),s})();const bS={provide:Mo,useExisting:(0,h.Gpc)(()=>Og)};let Og=(()=>{class s extends Mo{constructor(r,o,a,d,g){super(),this._ngModelWarningConfig=g,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(o),this._setAsyncValidators(a),this.valueAccessor=function(s,i){if(!i)return null;let r,o,a;return Array.isArray(i),i.forEach(d=>{d.constructor===Ld?r=d:function(s){return Object.getPrototypeOf(s.constructor)===Ml}(d)?o=d:a=d}),a||o||r||null}(0,d)}set isDisabled(r){}ngOnChanges(r){this._added||this._setUpControl(),function(s,i){if(!s.hasOwnProperty("model"))return!1;const r=s.model;return!!r.isFirstChange()||!Object.is(i,r.currentValue)}(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return function(s,i){return[...i.path,s]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return s.\u0275fac=function(r){return new(r||s)(h.Y36(si,13),h.Y36(ii,10),h.Y36(Ea,10),h.Y36(ur,10),h.Y36(Mg,8))},s.\u0275dir=h.lG2({type:s,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([bS]),h.qOj,h.TTD]}),s._ngModelWarningSentOnce=!1,s})(),TD=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[mS]]}),s})(),AD=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[TD]}),s})(),SD=(()=>{class s{static withConfig(r){return{ngModule:s,providers:[{provide:Mg,useValue:r.warnOnNgModelWithFormControl}]}}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[TD]}),s})(),DS=(()=>{class s{group(r,o=null){const a=this._reduceControls(r);let y,d=null,g=null;return null!=o&&(function(s){return void 0!==s.asyncValidators||void 0!==s.validators||void 0!==s.updateOn}(o)?(d=null!=o.validators?o.validators:null,g=null!=o.asyncValidators?o.asyncValidators:null,y=null!=o.updateOn?o.updateOn:void 0):(d=null!=o.validator?o.validator:null,g=null!=o.asyncValidator?o.asyncValidator:null)),new x_(a,{asyncValidators:g,updateOn:y,validators:d})}control(r,o,a){return new nc(r,o,a)}array(r,o,a){const d=r.map(g=>this._createControl(g));return new W0(d,o,a)}_reduceControls(r){const o={};return Object.keys(r).forEach(a=>{o[a]=this._createControl(r[a])}),o}_createControl(r){return r instanceof nc||r instanceof x_||r instanceof W0?r:Array.isArray(r)?this.control(r[0],r.length>1?r[1]:null,r.length>2?r[2]:null):this.control(r)}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=(0,h.Yz7)({factory:function(){return new s},token:s,providedIn:SD}),s})();var tn=U(9105);function oi(s,i,r,o){return(0,tn.m)(r)&&(o=r,r=void 0),o?oi(s,i,r).pipe((0,et.U)(a=>(0,oa.k)(a)?o(...a):o(a))):new In.y(a=>{Oo(s,i,function(g){a.next(arguments.length>1?Array.prototype.slice.call(arguments):g)},a,r)})}function Oo(s,i,r,o,a){let d;if(function(s){return s&&"function"==typeof s.addEventListener&&"function"==typeof s.removeEventListener}(s)){const g=s;s.addEventListener(i,r,a),d=()=>g.removeEventListener(i,r,a)}else if(function(s){return s&&"function"==typeof s.on&&"function"==typeof s.off}(s)){const g=s;s.on(i,r),d=()=>g.off(i,r)}else if(function(s){return s&&"function"==typeof s.addListener&&"function"==typeof s.removeListener}(s)){const g=s;s.addListener(i,r),d=()=>g.removeListener(i,r)}else{if(!s||!s.length)throw new TypeError("Invalid event target");for(let g=0,y=s.length;g<y;g++)Oo(s[g],i,r,o,a)}o.add(d)}var M_=U(3637),MD=U(6561);function RD(s){const{index:i,period:r,subscriber:o}=s;if(o.next(i),!o.closed){if(-1===r)return o.complete();s.index=i+1,this.schedule(s,r)}}class OD{call(i,r){return r.subscribe(new IS(i))}}class IS extends aa{constructor(i){super(i),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(i){this.observables.push(i)}_complete(){const i=this.observables,r=i.length;if(0===r)this.destination.complete();else{for(let o=0;o<r&&!this.hasFirst;o++){const d=Su(this,i[o],void 0,o);this.subscriptions&&this.subscriptions.push(d),this.add(d)}this.observables=null}}notifyNext(i,r,o){if(!this.hasFirst){this.hasFirst=!0;for(let a=0;a<this.subscriptions.length;a++)if(a!==o){let d=this.subscriptions[a];d.unsubscribe(),this.remove(d)}this.subscriptions=null}this.destination.next(r)}}var TS=U(8640);new In.y(TS.Z);var Fg=U(377);function Lg(...s){const i=s[s.length-1];return"function"==typeof i&&s.pop(),(0,hd.n)(s,void 0).lift(new PD(i))}class PD{constructor(i){this.resultSelector=i}call(i,r){return r.subscribe(new FD(i,this.resultSelector))}}class FD extends Gr.L{constructor(i,r,o=Object.create(null)){super(i),this.resultSelector=r,this.iterators=[],this.active=0,this.resultSelector="function"==typeof r?r:void 0}_next(i){const r=this.iterators;(0,oa.k)(i)?r.push(new SS(i)):r.push("function"==typeof i[Fg.hZ]?new AS(i[Fg.hZ]()):new NS(this.destination,this,i))}_complete(){const i=this.iterators,r=i.length;if(this.unsubscribe(),0!==r){this.active=r;for(let o=0;o<r;o++){let a=i[o];a.stillUnsubscribed?this.destination.add(a.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const i=this.iterators,r=i.length,o=this.destination;for(let g=0;g<r;g++){let y=i[g];if("function"==typeof y.hasValue&&!y.hasValue())return}let a=!1;const d=[];for(let g=0;g<r;g++){let y=i[g],C=y.next();if(y.hasCompleted()&&(a=!0),C.done)return void o.complete();d.push(C.value)}this.resultSelector?this._tryresultSelector(d):o.next(d),a&&o.complete()}_tryresultSelector(i){let r;try{r=this.resultSelector.apply(this,i)}catch(o){return void this.destination.error(o)}this.destination.next(r)}}class AS{constructor(i){this.iterator=i,this.nextResult=i.next()}hasValue(){return!0}next(){const i=this.nextResult;return this.nextResult=this.iterator.next(),i}hasCompleted(){const i=this.nextResult;return Boolean(i&&i.done)}}class SS{constructor(i){this.array=i,this.index=0,this.length=0,this.length=i.length}[Fg.hZ](){return this}next(i){const r=this.index++;return r<this.length?{value:this.array[r],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class NS extends Li.Ds{constructor(i,r,o){super(i),this.parent=r,this.observable=o,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[Fg.hZ](){return this}next(){const i=this.buffer;return 0===i.length&&this.isComplete?{value:null,done:!0}:{value:i.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(i){this.buffer.push(i),this.parent.checkIterators()}subscribe(){return(0,Li.ft)(this.observable,new Li.IY(this))}}var sc=U(6682);function fn(s){return i=>i.lift(new VD(s))}class VD{constructor(i){this.notifier=i}call(i,r){const o=new MS(i),a=(0,Li.ft)(this.notifier,new Li.IY(o));return a&&!o.seenValue?(o.add(a),r.subscribe(o)):o}}class MS extends Li.Ds{constructor(i){super(i),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function Vg(s,i){return r=>r.lift(new $P(s,i))}class $P{constructor(i,r){this.compare=i,this.keySelector=r}call(i,r){return r.subscribe(new WP(i,this.compare,this.keySelector))}}class WP extends Gr.L{constructor(i,r,o){super(i),this.keySelector=o,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}compare(i,r){return i===r}_next(i){let r;try{const{keySelector:a}=this;r=a?a(i):i}catch(a){return this.destination.error(a)}let o=!1;if(this.hasKey)try{const{compare:a}=this;o=a(this.key,r)}catch(a){return this.destination.error(a)}else this.hasKey=!0;o||(this.key=r,this.destination.next(i))}}function zd(...s){return i=>{let r;return"function"==typeof s[s.length-1]&&(r=s.pop()),i.lift(new RS(s,r))}}class RS{constructor(i,r){this.observables=i,this.project=r}call(i,r){return r.subscribe(new BD(i,this.observables,this.project))}}class BD extends aa{constructor(i,r,o){super(i),this.observables=r,this.project=o,this.toRespond=[];const a=r.length;this.values=new Array(a);for(let d=0;d<a;d++)this.toRespond.push(d);for(let d=0;d<a;d++)this.add(Su(this,r[d],void 0,d))}notifyNext(i,r,o){this.values[o]=r;const a=this.toRespond;if(a.length>0){const d=a.indexOf(o);-1!==d&&a.splice(d,1)}}notifyComplete(){}_next(i){if(0===this.toRespond.length){const r=[i,...this.values];this.project?this._tryProject(r):this.destination.next(r)}}_tryProject(i){let r;try{r=this.project.apply(this,i)}catch(o){return void this.destination.error(o)}this.destination.next(r)}}U(1593);var WD=U(8819);const Zd=["*"],t1=["dialog"];function Po(s){return null!=s}function Rl(s){return(s||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(s){let i=this;if(!document.documentElement.contains(i))return null;do{if(i.matches(s))return i;i=i.parentElement||i.parentNode}while(null!==i&&1===i.nodeType);return null});const b1={animation:!0,transitionTimerDelayMs:5};let br=(()=>{class s{constructor(){this.animation=b1.animation}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=h.Yz7({factory:function(){return new s},token:s,providedIn:"root"}),s})();const C1=()=>{},{transitionTimerDelayMs:E1}=b1,lh=new Map,Jn=(s,i,r,o)=>{let a=o.context||{};const d=lh.get(i);if(d)switch(o.runningTransition){case"continue":return Xi.E;case"stop":s.run(()=>d.transition$.complete()),a=Object.assign(d.context,a),lh.delete(i)}const g=r(i,o.animation,a)||C1;if(!o.animation||"none"===window.getComputedStyle(i).transitionProperty)return s.run(()=>g()),(0,ze.of)(void 0).pipe(function(s){return i=>new In.y(r=>i.subscribe(g=>s.run(()=>r.next(g)),g=>s.run(()=>r.error(g)),()=>s.run(()=>r.complete())))}(s));const y=new Yt.xQ,C=new Yt.xQ,T=y.pipe(function(...s){return i=>vs(i,(0,ze.of)(...s))}(!0));lh.set(i,{transition$:y,complete:()=>{C.next(),C.complete()},context:a});const S=function(s){const{transitionDelay:i,transitionDuration:r}=window.getComputedStyle(s);return 1e3*(parseFloat(i)+parseFloat(r))}(i);return s.runOutsideAngular(()=>{const N=oi(i,"transitionend").pipe(fn(T),on(({target:V})=>V===i));(function(...s){if(1===s.length){if(!(0,oa.k)(s[0]))return s[0];s=s[0]}return(0,hd.n)(s,void 0).lift(new OD)})(function(s=0,i,r){let o=-1;return(0,MD.k)(i)?o=Number(i)<1?1:Number(i):(0,Au.K)(i)&&(r=i),(0,Au.K)(r)||(r=M_.P),new In.y(a=>{const d=(0,MD.k)(s)?s:+s-r.now();return r.schedule(RD,d,{index:0,period:o,subscriber:a})})}(S+E1).pipe(fn(T)),N,C).pipe(fn(T)).subscribe(()=>{lh.delete(i),s.run(()=>{g(),y.next(),y.complete()})})}),y.asObservable()};let I1=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[Br]]}),s})(),Ib=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[Br]]}),s})(),lc=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({}),s})(),Sb=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[Br]]}),s})(),O1=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({}),s})();var Ft=(()=>{return(s=Ft||(Ft={}))[s.Tab=9]="Tab",s[s.Enter=13]="Enter",s[s.Escape=27]="Escape",s[s.Space=32]="Space",s[s.PageUp=33]="PageUp",s[s.PageDown=34]="PageDown",s[s.End=35]="End",s[s.Home=36]="Home",s[s.ArrowLeft=37]="ArrowLeft",s[s.ArrowUp=38]="ArrowUp",s[s.ArrowRight=39]="ArrowRight",s[s.ArrowDown=40]="ArrowDown",Ft;var s})();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Pb=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Fb(s){const i=Array.from(s.querySelectorAll(Pb)).filter(r=>-1!==r.tabIndex);return[i[0],i[i.length-1]]}new class{getAllStyles(i){return window.getComputedStyle(i)}getStyle(i,r){return this.getAllStyles(i)[r]}isStaticPositioned(i){return"static"===(this.getStyle(i,"position")||"static")}offsetParent(i){let r=i.offsetParent||document.documentElement;for(;r&&r!==document.documentElement&&this.isStaticPositioned(r);)r=r.offsetParent;return r||document.documentElement}position(i,r=!0){let o,a={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(i,"position"))o=i.getBoundingClientRect(),o={top:o.top,bottom:o.bottom,left:o.left,right:o.right,height:o.height,width:o.width};else{const d=this.offsetParent(i);o=this.offset(i,!1),d!==document.documentElement&&(a=this.offset(d,!1)),a.top+=d.clientTop,a.left+=d.clientLeft}return o.top-=a.top,o.bottom-=a.top,o.left-=a.left,o.right-=a.left,r&&(o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}offset(i,r=!0){const o=i.getBoundingClientRect(),a_top=window.pageYOffset-document.documentElement.clientTop,a_left=window.pageXOffset-document.documentElement.clientLeft;let d={height:o.height||i.offsetHeight,width:o.width||i.offsetWidth,top:o.top+a_top,bottom:o.bottom+a_top,left:o.left+a_left,right:o.right+a_left};return r&&(d.height=Math.round(d.height),d.width=Math.round(d.width),d.top=Math.round(d.top),d.bottom=Math.round(d.bottom),d.left=Math.round(d.left),d.right=Math.round(d.right)),d}positionElements(i,r,o,a){const[d="top",g="center"]=o.split("-"),y=a?this.offset(i,!1):this.position(i,!1),C=this.getAllStyles(r),T=parseFloat(C.marginTop),S=parseFloat(C.marginBottom),N=parseFloat(C.marginLeft),O=parseFloat(C.marginRight);let V=0,Y=0;switch(d){case"top":V=y.top-(r.offsetHeight+T+S);break;case"bottom":V=y.top+y.height;break;case"left":Y=y.left-(r.offsetWidth+N+O);break;case"right":Y=y.left+y.width}switch(g){case"top":V=y.top;break;case"bottom":V=y.top+y.height-r.offsetHeight;break;case"left":Y=y.left;break;case"right":Y=y.left+y.width-r.offsetWidth;break;case"center":"top"===d||"bottom"===d?Y=y.left+y.width/2-r.offsetWidth/2:V=y.top+y.height/2-r.offsetHeight/2}r.style.transform=`translate(${Math.round(Y)}px, ${Math.round(V)}px)`;const le=r.getBoundingClientRect(),Te=document.documentElement,ke=window.innerHeight||Te.clientHeight,Ue=window.innerWidth||Te.clientWidth;return le.left>=0&&le.top>=0&&le.right<=Ue&&le.bottom<=ke}},new Date(1882,10,12),new Date(2174,10,25);let Q1=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[Br,AD]]}),s})(),ex=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({}),s})(),X_=(()=>{class s{constructor(r){this._ngbConfig=r,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(br))},s.\u0275prov=h.Yz7({factory:function(){return new s(h.LFG(br))},token:s,providedIn:"root"}),s})();class pc{constructor(i,r,o){this.nodes=i,this.viewRef=r,this.componentRef=o}}const tx=()=>{};let nx=(()=>{class s{constructor(r){this._document=r}compensate(){const r=this._getWidth();return this._isPresent(r)?this._adjustBody(r):tx}_adjustBody(r){const o=this._document.body,a=o.style.paddingRight,d=parseFloat(window.getComputedStyle(o)["padding-right"]);return o.style["padding-right"]=`${d+r}px`,()=>o.style["padding-right"]=a}_isPresent(r){const o=this._document.body.getBoundingClientRect();return window.innerWidth-(o.left+o.right)>=r-.1*r}_getWidth(){const r=this._document.createElement("div");r.className="modal-scrollbar-measure";const o=this._document.body;o.appendChild(r);const a=r.getBoundingClientRect().width-r.clientWidth;return o.removeChild(r),a}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(ie))},s.\u0275prov=h.Yz7({factory:function(){return new s(h.LFG(ie))},token:s,providedIn:"root"}),s})(),ZN=(()=>{class s{constructor(r,o){this._el=r,this._zone=o}ngOnInit(){this._zone.onStable.asObservable().pipe(ti(1)).subscribe(()=>{Jn(this._zone,this._el.nativeElement,(r,o)=>{o&&Rl(r),r.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Jn(this._zone,this._el.nativeElement,({classList:r})=>r.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return s.\u0275fac=function(r){return new(r||s)(h.Y36(h.SBq),h.Y36(h.R0b))},s.\u0275cmp=h.Xpm({type:s,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(r,o){2&r&&(h.Tol("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),h.ekj("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(r,o){},encapsulation:2}),s})();class ty{close(i){}dismiss(i){}}class KN{constructor(i,r,o,a){this._windowCmptRef=i,this._contentRef=r,this._backdropCmptRef=o,this._beforeDismiss=a,this._closed=new Yt.xQ,this._dismissed=new Yt.xQ,this._hidden=new Yt.xQ,i.instance.dismissEvent.subscribe(d=>{this.dismiss(d)}),this.result=new Promise((d,g)=>{this._resolve=d,this._reject=g}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(fn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(fn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(i){this._windowCmptRef&&(this._closed.next(i),this._resolve(i),this._removeModalElements())}_dismiss(i){this._dismissed.next(i),this._reject(i),this._removeModalElements()}dismiss(i){if(this._windowCmptRef)if(this._beforeDismiss){const r=this._beforeDismiss();r&&r.then?r.then(o=>{!1!==o&&this._dismiss(i)},()=>{}):!1!==r&&this._dismiss(i)}else this._dismiss(i)}_removeModalElements(){const i=this._windowCmptRef.instance.hide(),r=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,ze.of)(void 0);i.subscribe(()=>{const{nativeElement:o}=this._windowCmptRef.location;o.parentNode.removeChild(o),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),r.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:o}=this._backdropCmptRef.location;o.parentNode.removeChild(o),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Lg(i,r).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var mh=(()=>{return(s=mh||(mh={}))[s.BACKDROP_CLICK=0]="BACKDROP_CLICK",s[s.ESC=1]="ESC",mh;var s})();let QN=(()=>{class s{constructor(r,o,a){this._document=r,this._elRef=o,this._zone=a,this._closed$=new Yt.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new h.vpe,this.shown=new Yt.xQ,this.hidden=new Yt.xQ}dismiss(r){this.dismissEvent.emit(r)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ti(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:r}=this._elRef,o={animation:this.animation,runningTransition:"stop"},g=Lg(Jn(this._zone,r,()=>r.classList.remove("show"),o),Jn(this._zone,this._dialogEl.nativeElement,()=>{},o));return g.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),g}_show(){const r={animation:this.animation,runningTransition:"continue"};Lg(Jn(this._zone,this._elRef.nativeElement,(d,g)=>{g&&Rl(d),d.classList.add("show")},r),Jn(this._zone,this._dialogEl.nativeElement,()=>{},r)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:r}=this._elRef;this._zone.runOutsideAngular(()=>{oi(r,"keydown").pipe(fn(this._closed$),on(a=>a.which===Ft.Escape)).subscribe(a=>{this.keyboard?requestAnimationFrame(()=>{a.defaultPrevented||this._zone.run(()=>this.dismiss(mh.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let o=!1;oi(this._dialogEl.nativeElement,"mousedown").pipe(fn(this._closed$),(0,$n.b)(()=>o=!1),Hn(()=>oi(r,"mouseup").pipe(fn(this._closed$),ti(1))),on(({target:a})=>r===a)).subscribe(()=>{o=!0}),oi(r,"click").pipe(fn(this._closed$)).subscribe(({target:a})=>{r===a&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!o&&this._zone.run(()=>this.dismiss(mh.BACKDROP_CLICK))),o=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:r}=this._elRef;if(!r.contains(document.activeElement)){const o=r.querySelector("[ngbAutofocus]"),a=Fb(r)[0];(o||a||r).focus()}}_restoreFocus(){const r=this._document.body,o=this._elWithFocus;let a;a=o&&o.focus&&r.contains(o)?o:r,this._zone.runOutsideAngular(()=>{setTimeout(()=>a.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Jn(this._zone,this._elRef.nativeElement,({classList:r})=>(r.add("modal-static"),()=>r.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return s.\u0275fac=function(r){return new(r||s)(h.Y36(ie),h.Y36(h.SBq),h.Y36(h.R0b))},s.\u0275cmp=h.Xpm({type:s,selectors:[["ngb-modal-window"]],viewQuery:function(r,o){if(1&r&&h.Gf(t1,7),2&r){let a;h.iGM(a=h.CRH())&&(o._dialogEl=a.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,o){2&r&&(h.uIk("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy),h.Tol("modal d-block"+(o.windowClass?" "+o.windowClass:"")),h.ekj("fade",o.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Zd,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(r,o){1&r&&(h.F$t(),h.TgZ(0,"div",0,1),h.TgZ(2,"div",2),h.Hsn(3),h.qZA(),h.qZA()),2&r&&h.Tol("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),s})(),rx=(()=>{class s{constructor(r,o,a,d,g,y){this._applicationRef=r,this._injector=o,this._document=a,this._scrollBar=d,this._rendererFactory=g,this._ngZone=y,this._activeWindowCmptHasChanged=new Yt.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new h.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const C=this._windowCmpts[this._windowCmpts.length-1];((s,i,r,o=!1)=>{s.runOutsideAngular(()=>{const a=oi(i,"focusin").pipe(fn(r),(0,et.U)(d=>d.target));oi(i,"keydown").pipe(fn(r),on(d=>d.which===Ft.Tab),zd(a)).subscribe(([d,g])=>{const[y,C]=Fb(i);(g===y||g===i)&&d.shiftKey&&(C.focus(),d.preventDefault()),g===C&&!d.shiftKey&&(y.focus(),d.preventDefault())}),o&&oi(i,"click").pipe(fn(r),zd(a),(0,et.U)(d=>d[1])).subscribe(d=>d.focus())})})(this._ngZone,C.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(C.location.nativeElement)}})}open(r,o,a,d){const g=d.container instanceof HTMLElement?d.container:Po(d.container)?this._document.querySelector(d.container):this._document.body,y=this._rendererFactory.createRenderer(null,null),C=this._scrollBar.compensate(),T=()=>{this._modalRefs.length||(y.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!g)throw new Error(`The specified modal container "${d.container||"body"}" was not found in the DOM.`);const S=new ty,N=this._getContentRef(r,d.injector||o,a,S,d);let O=!1!==d.backdrop?this._attachBackdrop(r,g):void 0,V=this._attachWindowComponent(r,g,N),Y=new KN(V,N,O,d.beforeDismiss);return this._registerModalRef(Y),this._registerWindowCmpt(V),Y.result.then(C,C),Y.result.then(T,T),S.close=le=>{Y.close(le)},S.dismiss=le=>{Y.dismiss(le)},this._applyWindowOptions(V.instance,d),1===this._modalRefs.length&&y.addClass(this._document.body,"modal-open"),O&&O.instance&&(this._applyBackdropOptions(O.instance,d),O.changeDetectorRef.detectChanges()),V.changeDetectorRef.detectChanges(),Y}get activeInstances(){return this._activeInstances}dismissAll(r){this._modalRefs.forEach(o=>o.dismiss(r))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(r,o){let d=r.resolveComponentFactory(ZN).create(this._injector);return this._applicationRef.attachView(d.hostView),o.appendChild(d.location.nativeElement),d}_attachWindowComponent(r,o,a){let g=r.resolveComponentFactory(QN).create(this._injector,a.nodes);return this._applicationRef.attachView(g.hostView),o.appendChild(g.location.nativeElement),g}_applyWindowOptions(r,o){this._windowAttributes.forEach(a=>{Po(o[a])&&(r[a]=o[a])})}_applyBackdropOptions(r,o){this._backdropAttributes.forEach(a=>{Po(o[a])&&(r[a]=o[a])})}_getContentRef(r,o,a,d,g){return a?a instanceof h.Rgc?this._createFromTemplateRef(a,d):function(s){return"string"==typeof s}(a)?this._createFromString(a):this._createFromComponent(r,o,a,d,g):new pc([])}_createFromTemplateRef(r,o){const d=r.createEmbeddedView({$implicit:o,close(g){o.close(g)},dismiss(g){o.dismiss(g)}});return this._applicationRef.attachView(d),new pc([d.rootNodes],d)}_createFromString(r){const o=this._document.createTextNode(`${r}`);return new pc([[o]])}_createFromComponent(r,o,a,d,g){const y=r.resolveComponentFactory(a),C=h.zs3.create({providers:[{provide:ty,useValue:d}],parent:o}),T=y.create(C),S=T.location.nativeElement;return g.scrollable&&S.classList.add("component-host-scrollable"),this._applicationRef.attachView(T.hostView),new pc([[S]],T.hostView,T)}_setAriaHidden(r){const o=r.parentElement;o&&r!==this._document.body&&(Array.from(o.children).forEach(a=>{a!==r&&"SCRIPT"!==a.nodeName&&(this._ariaHiddenValues.set(a,a.getAttribute("aria-hidden")),a.setAttribute("aria-hidden","true"))}),this._setAriaHidden(o))}_revertAriaHidden(){this._ariaHiddenValues.forEach((r,o)=>{r?o.setAttribute("aria-hidden",r):o.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(r){const o=()=>{const a=this._modalRefs.indexOf(r);a>-1&&(this._modalRefs.splice(a,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(r),this._activeInstances.emit(this._modalRefs),r.result.then(o,o)}_registerWindowCmpt(r){this._windowCmpts.push(r),this._activeWindowCmptHasChanged.next(),r.onDestroy(()=>{const o=this._windowCmpts.indexOf(r);o>-1&&(this._windowCmpts.splice(o,1),this._activeWindowCmptHasChanged.next())})}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(h.z2F),h.LFG(h.zs3),h.LFG(ie),h.LFG(nx),h.LFG(h.FYo),h.LFG(h.R0b))},s.\u0275prov=h.Yz7({factory:function(){return new s(h.LFG(h.z2F),h.LFG(h.gxx),h.LFG(ie),h.LFG(nx),h.LFG(h.FYo),h.LFG(h.R0b))},token:s,providedIn:"root"}),s})(),ix=(()=>{class s{constructor(r,o,a,d){this._moduleCFR=r,this._injector=o,this._modalStack=a,this._config=d}open(r,o={}){const a=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),o);return this._modalStack.open(this._moduleCFR,this._injector,r,a)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(r){this._modalStack.dismissAll(r)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(h._Vd),h.LFG(h.zs3),h.LFG(rx),h.LFG(X_))},s.\u0275prov=h.Yz7({factory:function(){return new s(h.LFG(h._Vd),h.LFG(h.gxx),h.LFG(rx),h.LFG(X_))},token:s,providedIn:"root"}),s})(),sx=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({providers:[ix]}),s})(),iy=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[Br]]}),s})(),Jb=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[Br]]}),s})(),ew=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[Br]]}),s})(),mx=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[Br]]}),s})(),_x=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[Br]]}),s})(),wx=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[Br]]}),s})(),sw=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[Br]]}),s})(),Yg=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({}),s})();new h.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});let Ax=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[Br]]}),s})();const pM=[I1,Ib,lc,Sb,O1,Q1,ex,sx,iy,Jb,ew,mx,_x,wx,sw,Yg,Ax];let mM=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[pM,I1,Ib,lc,Sb,O1,Q1,ex,sx,iy,Jb,ew,mx,_x,wx,sw,Yg,Ax]}),s})();var _n=U(9126);function Sx(){return s=>s.lift(new _M)}class _M{call(i,r){return r.subscribe(new Zg(i))}}class Zg extends Gr.L{constructor(i){super(i),this.hasPrev=!1}_next(i){let r;this.hasPrev?r=[this.prev,i]:this.hasPrev=!0,this.prev=i,r&&this.destination.next(r)}}var _h=U(9746),Ts=U(9958),Kg=(U(6300),U(4486)),Ee=U(8239),yc=U(5452),vc=U(6034),Sa=U(300),L=U(4685),yh=function(s,i){return(yh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(r[a]=o[a])})(s,i)};function Nx(s){var i="function"==typeof Symbol&&Symbol.iterator,r=i&&s[i],o=0;if(r)return r.call(s);if(s&&"number"==typeof s.length)return{next:function(){return s&&o>=s.length&&(s=void 0),{value:s&&s[o++],done:!s}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}var $e,Mx="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Qg=Qg||{},yt=Mx||self;function Jg(){}function aw(s){var i=typeof s;return"array"==(i="object"!=i?i:s?Array.isArray(s)?"array":i:"null")||"object"==i&&"number"==typeof s.length}function Xg(s){var i=typeof s;return"object"==i&&null!=s||"function"==i}var lw="closure_uid_"+(1e9*Math.random()>>>0),Ox=0;function uy(s,i,r){return s.call.apply(s.bind,arguments)}function cy(s,i,r){if(!s)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,o),s.apply(i,a)}}return function(){return s.apply(i,arguments)}}function li(s,i,r){return(li=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?uy:cy).apply(null,arguments)}function Vl(s,i){var r=Array.prototype.slice.call(arguments,1);return function(){var o=r.slice();return o.push.apply(o,arguments),s.apply(this,o)}}function vt(s,i){function r(){}r.prototype=i.prototype,s.Z=i.prototype,s.prototype=new r,s.prototype.constructor=s,s.Vb=function(o,a,d){for(var g=Array(arguments.length-2),y=2;y<arguments.length;y++)g[y-2]=arguments[y];return i.prototype[a].apply(o,g)}}function Di(){this.s=this.s,this.o=this.o}var ep={};Di.prototype.s=!1,Di.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var s=function(s){return Object.prototype.hasOwnProperty.call(s,lw)&&s[lw]||(s[lw]=++Ox)}(this);delete ep[s]}},Di.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vM=Array.prototype.indexOf?function(s,i){return Array.prototype.indexOf.call(s,i,void 0)}:function(s,i){if("string"==typeof s)return"string"!=typeof i||1!=i.length?-1:s.indexOf(i,0);for(var r=0;r<s.length;r++)if(r in s&&s[r]===i)return r;return-1},bt=Array.prototype.forEach?function(s,i,r){Array.prototype.forEach.call(s,i,r)}:function(s,i,r){for(var o=s.length,a="string"==typeof s?s.split(""):s,d=0;d<o;d++)d in a&&i.call(r,a[d],d,s)};function dy(s){return Array.prototype.concat.apply([],arguments)}function Na(s){var i=s.length;if(0<i){for(var r=Array(i),o=0;o<i;o++)r[o]=s[o];return r}return[]}function uw(s){return/^[\s\xa0]*$/.test(s)}var xi,cw=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function ui(s,i){return-1!=s.indexOf(i)}function kx(s,i){return s<i?-1:s>i?1:0}e:{var Px=yt.navigator;if(Px){var is=Px.userAgent;if(is){xi=is;break e}}xi=""}function yn(s,i,r){for(var o in s)i.call(r,s[o],o,s)}function Ss(s){var i={};for(var r in s)i[r]=s[r];return i}var dw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fx(s,i){for(var r,o,a=1;a<arguments.length;a++){for(r in o=arguments[a])s[r]=o[r];for(var d=0;d<dw.length;d++)r=dw[d],Object.prototype.hasOwnProperty.call(o,r)&&(s[r]=o[r])}}function hy(s){return hy[" "](s),s}hy[" "]=Jg;var Bl,s,bh=ui(xi,"Opera"),Lo=ui(xi,"Trident")||ui(xi,"MSIE"),Lx=ui(xi,"Edge"),Ma=Lx||Lo,Vx=ui(xi,"Gecko")&&!(ui(xi.toLowerCase(),"webkit")&&!ui(xi,"Edge"))&&!(ui(xi,"Trident")||ui(xi,"MSIE"))&&!ui(xi,"Edge"),Bx=ui(xi.toLowerCase(),"webkit")&&!ui(xi,"Edge");function fy(){var s=yt.document;return s?s.documentMode:void 0}e:{var tp="",gy=(s=xi,Vx?/rv:([^\);]+)(\)|;)/.exec(s):Lx?/Edge\/([\d\.]+)/.exec(s):Lo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Bx?/WebKit\/(\S+)/.exec(s):bh?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(gy&&(tp=gy?gy[1]:""),Lo){var Ul=fy();if(null!=Ul&&Ul>parseFloat(tp)){Bl=String(Ul);break e}}Bl=tp}var bM={};function py(){return i=bM,Object.prototype.hasOwnProperty.call(i,9)?i[9]:i[9]=function(){for(var s=0,i=cw(String(Bl)).split("."),r=cw("9").split("."),o=Math.max(i.length,r.length),a=0;0==s&&a<o;a++){var d=i[a]||"",g=r[a]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==d[0].length&&0==g[0].length)break;s=kx(0==d[1].length?0:parseInt(d[1],10),0==g[1].length?0:parseInt(g[1],10))||kx(0==d[2].length,0==g[2].length)||kx(d[2],g[2]),d=d[3],g=g[3]}while(0==s)}return 0<=s}();var i}var Ux=yt.document&&Lo&&(fy()||parseInt(Bl,10))||void 0,_y=function(){if(!yt.addEventListener||!Object.defineProperty)return!1;var s=!1,i=Object.defineProperty({},"passive",{get:function(){s=!0}});try{yt.addEventListener("test",Jg,i),yt.removeEventListener("test",Jg,i)}catch(r){}return s}();function ci(s,i){this.type=s,this.g=this.target=i,this.defaultPrevented=!1}function bc(s,i){if(ci.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var r=this.type=s.type,o=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=i,i=s.relatedTarget){if(Vx){e:{try{hy(i.nodeName);var a=!0;break e}catch(d){}a=!1}a||(i=null)}}else"mouseover"==r?i=s.fromElement:"mouseout"==r&&(i=s.toElement);this.relatedTarget=i,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:gw[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&bc.Z.h.call(this)}}ci.prototype.h=function(){this.defaultPrevented=!0},vt(bc,ci);var gw={2:"touch",3:"pen",4:"mouse"};bc.prototype.h=function(){bc.Z.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var yy="closure_listenable_"+(1e6*Math.random()|0),UF=0;function wt(s,i,r,o,a){this.listener=s,this.proxy=null,this.src=i,this.type=r,this.capture=!!o,this.ia=a,this.key=++UF,this.ca=this.fa=!1}function pw(s){s.ca=!0,s.listener=null,s.proxy=null,s.src=null,s.ia=null}function Gl(s){this.src=s,this.g={},this.h=0}function mw(s,i){var r=i.type;if(r in s.g){var d,o=s.g[r],a=vM(o,i);(d=0<=a)&&Array.prototype.splice.call(o,a,1),d&&(pw(i),0==s.g[r].length&&(delete s.g[r],s.h--))}}function _w(s,i,r,o){for(var a=0;a<s.length;++a){var d=s[a];if(!d.ca&&d.listener==i&&d.capture==!!r&&d.ia==o)return a}return-1}Gl.prototype.add=function(s,i,r,o,a){var d=s.toString();(s=this.g[d])||(s=this.g[d]=[],this.h++);var g=_w(s,i,o,a);return-1<g?(i=s[g],r||(i.fa=!1)):((i=new wt(i,this.src,d,!!o,a)).fa=r,s.push(i)),i};var yw="closure_lm_"+(1e6*Math.random()|0),Gx={};function wM(s,i,r,o,a){if(o&&o.once)return Hx(s,i,r,o,a);if(Array.isArray(i)){for(var d=0;d<i.length;d++)wM(s,i[d],r,o,a);return null}return r=ww(r),s&&s[yy]?s.N(i,r,Xg(o)?!!o.capture:!!o,a):jx(s,i,r,!1,o,a)}function jx(s,i,r,o,a,d){if(!i)throw Error("Invalid event type");var g=Xg(a)?!!a.capture:!!a,y=vw(s);if(y||(s[yw]=y=new Gl(s)),(r=y.add(i,r,o,g,d)).proxy)return r;if(o=function(){var i=CM;return function s(r){return i.call(s.src,s.listener,r)}}(),r.proxy=o,o.src=s,o.listener=r,s.addEventListener)_y||(a=g),void 0===a&&(a=!1),s.addEventListener(i.toString(),o,a);else if(s.attachEvent)s.attachEvent(Wx(i.toString()),o);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(o)}return r}function Hx(s,i,r,o,a){if(Array.isArray(i)){for(var d=0;d<i.length;d++)Hx(s,i[d],r,o,a);return null}return r=ww(r),s&&s[yy]?s.O(i,r,Xg(o)?!!o.capture:!!o,a):jx(s,i,r,!0,o,a)}function $x(s,i,r,o,a){if(Array.isArray(i))for(var d=0;d<i.length;d++)$x(s,i[d],r,o,a);else o=Xg(o)?!!o.capture:!!o,r=ww(r),s&&s[yy]?(s=s.i,(i=String(i).toString())in s.g&&-1<(r=_w(d=s.g[i],r,o,a))&&(pw(d[r]),Array.prototype.splice.call(d,r,1),0==d.length&&(delete s.g[i],s.h--))):s&&(s=vw(s))&&(i=s.g[i.toString()],s=-1,i&&(s=_w(i,r,o,a)),(r=-1<s?i[s]:null)&&np(r))}function np(s){if("number"!=typeof s&&s&&!s.ca){var i=s.src;if(i&&i[yy])mw(i.i,s);else{var r=s.type,o=s.proxy;i.removeEventListener?i.removeEventListener(r,o,s.capture):i.detachEvent?i.detachEvent(Wx(r),o):i.addListener&&i.removeListener&&i.removeListener(o),(r=vw(i))?(mw(r,s),0==r.h&&(r.src=null,i[yw]=null)):pw(s)}}}function Wx(s){return s in Gx?Gx[s]:Gx[s]="on"+s}function CM(s,i){if(s.ca)s=!0;else{i=new bc(i,this);var r=s.listener,o=s.ia||s.src;s.fa&&np(s),s=r.call(o,i)}return s}function vw(s){return(s=s[yw])instanceof Gl?s:null}var bw="__closure_events_fn_"+(1e9*Math.random()>>>0);function ww(s){return"function"==typeof s?s:(s[bw]||(s[bw]=function(i){return s.handleEvent(i)}),s[bw])}function Mr(){Di.call(this),this.i=new Gl(this),this.P=this,this.I=null}function Cr(s,i){var r,o=s.I;if(o)for(r=[];o;o=o.I)r.push(o);if(s=s.P,o=i.type||i,"string"==typeof i)i=new ci(i,s);else if(i instanceof ci)i.target=i.target||s;else{var a=i;Fx(i=new ci(o,s),a)}if(a=!0,r)for(var d=r.length-1;0<=d;d--){var g=i.g=r[d];a=vy(g,o,!0,i)&&a}if(a=vy(g=i.g=s,o,!0,i)&&a,a=vy(g,o,!1,i)&&a,r)for(d=0;d<r.length;d++)a=vy(g=i.g=r[d],o,!1,i)&&a}function vy(s,i,r,o){if(!(i=s.i.g[String(i)]))return!0;i=i.concat();for(var a=!0,d=0;d<i.length;++d){var g=i[d];if(g&&!g.ca&&g.capture==r){var y=g.listener,C=g.ia||g.src;g.fa&&mw(s.i,g),a=!1!==y.call(C,o)&&a}}return a&&!o.defaultPrevented}vt(Mr,Di),Mr.prototype[yy]=!0,Mr.prototype.removeEventListener=function(s,i,r,o){$x(this,s,i,r,o)},Mr.prototype.M=function(){if(Mr.Z.M.call(this),this.i){var i,s=this.i;for(i in s.g){for(var r=s.g[i],o=0;o<r.length;o++)pw(r[o]);delete s.g[i],s.h--}}this.I=null},Mr.prototype.N=function(s,i,r,o){return this.i.add(String(s),i,!1,r,o)},Mr.prototype.O=function(s,i,r,o){return this.i.add(String(s),i,!0,r,o)};var Cw=yt.JSON.stringify;function qx(){var s=zx,i=null;return s.g&&(i=s.g,s.g=s.g.next,s.g||(s.h=null),i.next=null),i}var xw,Ew=function(){function s(){this.h=this.g=null}return s.prototype.add=function(i,r){var o=Yx.get();o.set(i,r),this.h?this.h.next=o:this.g=o,this.h=o},s}(),Yx=new(function(){function s(i,r){this.i=i,this.j=r,this.h=0,this.g=null}return s.prototype.get=function(){var i;return 0<this.h?(this.h--,this.g=(i=this.g).next,i.next=null):i=this.i(),i},s}())(function(){return new GF},function(s){return s.reset()}),GF=function(){function s(){this.next=this.g=this.h=null}return s.prototype.set=function(i,r){this.h=i,this.g=r,this.next=null},s.prototype.reset=function(){this.next=this.g=this.h=null},s}();function EM(s){yt.setTimeout(function(){throw s},0)}function Dw(s,i){xw||function(){var s=yt.Promise.resolve(void 0);xw=function(){s.then(rp)}}(),Iw||(xw(),Iw=!0),zx.add(s,i)}var Iw=!1,zx=new Ew;function rp(){for(var s;s=qx();){try{s.h.call(s.g)}catch(r){EM(r)}var i=Yx;i.j(s),100>i.h&&(i.h++,s.next=i.g,i.g=s)}Iw=!1}function by(s,i){Mr.call(this),this.h=s||1,this.g=i||yt,this.j=li(this.kb,this),this.l=Date.now()}function Tw(s){s.da=!1,s.S&&(s.g.clearTimeout(s.S),s.S=null)}function wy(s,i,r){if("function"==typeof s)r&&(s=li(s,r));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=li(s.handleEvent,s)}return 2147483647<Number(i)?-1:yt.setTimeout(s,i||0)}function wh(s){s.g=wy(function(){s.g=null,s.i&&(s.i=!1,wh(s))},s.j);var i=s.h;s.h=null,s.m.apply(null,i)}vt(by,Mr),($e=by.prototype).da=!1,$e.S=null,$e.kb=function(){if(this.da){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-s):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Cr(this,"tick"),this.da&&(Tw(this),this.start()))}},$e.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$e.M=function(){by.Z.M.call(this),Tw(this),delete this.g};var jF=function(s){function i(r,o){var a=s.call(this)||this;return a.m=r,a.j=o,a.h=null,a.i=!1,a.g=null,a}return function(s,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=s}yh(s,i),s.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}(i,s),i.prototype.l=function(r){this.h=arguments,this.g?this.i=!0:wh(this)},i.prototype.M=function(){s.prototype.M.call(this),this.g&&(yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},i}(Di);function Ch(s){Di.call(this),this.h=s,this.g={}}vt(Ch,Di);var Zx=[];function Kx(s,i,r,o){Array.isArray(r)||(r&&(Zx[0]=r.toString()),r=Zx);for(var a=0;a<r.length;a++){var d=wM(i,r[a],o||s.handleEvent,!1,s.h||s);if(!d)break;s.g[d.key]=d}}function Qx(s){yn(s.g,function(i,r){this.g.hasOwnProperty(r)&&np(i)},s),s.g={}}function Cy(){this.g=!0}function Eh(s,i,r,o){s.info(function(){return"XMLHTTP TEXT ("+i+"): "+function(s,i){if(!s.g)return i;if(!i)return null;try{var r=JSON.parse(i);if(r)for(s=0;s<r.length;s++)if(Array.isArray(r[s])){var o=r[s];if(!(2>o.length)){var a=o[1];if(Array.isArray(a)&&!(1>a.length)){var d=a[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var g=1;g<a.length;g++)a[g]=""}}}return Cw(r)}catch(y){return i}}(s,r)+(o?" "+o:"")})}Ch.prototype.M=function(){Ch.Z.M.call(this),Qx(this)},Ch.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cy.prototype.Aa=function(){this.g=!1},Cy.prototype.info=function(){};var Dh={},TM=null;function xh(){return TM=TM||new Mr}function Xx(s){ci.call(this,Dh.Ma,s)}function ip(s){var i=xh();Cr(i,new Xx(i,s))}function eI(s,i){ci.call(this,Dh.STAT_EVENT,s),this.stat=i}function Ii(s){var i=xh();Cr(i,new eI(i,s))}function tI(s,i){ci.call(this,Dh.Na,s),this.size=i}function sp(s,i){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return yt.setTimeout(function(){s()},i)}Dh.Ma="serverreachability",vt(Xx,ci),Dh.STAT_EVENT="statevent",vt(eI,ci),Dh.Na="timingevent",vt(tI,ci);var op={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ey={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Aw(){}function qr(){}Aw.prototype.h=null;var Sw,Ih={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ss(){ci.call(this,"d")}function ap(){ci.call(this,"c")}function lp(){}function Th(s,i,r,o){this.l=s,this.j=i,this.m=r,this.X=o||1,this.V=new Ch(this),this.P=AM,this.W=new by(s=Ma?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Nw}function Nw(){this.i=null,this.g="",this.h=!1}vt(ss,ci),vt(ap,ci),vt(lp,Aw),lp.prototype.g=function(){return new XMLHttpRequest},lp.prototype.i=function(){return{}},Sw=new lp;var AM=45e3,Mw={},Dy={};function xy(s,i,r){s.K=1,s.v=hp(Ra(i)),s.s=r,s.U=!0,nI(s,null)}function nI(s,i){s.F=Date.now(),Vo(s),s.A=Ra(s.v);var r=s.A,o=s.X;Array.isArray(o)||(o=[String(o)]),so(r.h,"t",o),s.C=0,r=s.l.H,s.h=new Nw,s.g=Hw(s.l,r?i:null,!s.s),0<s.O&&(s.L=new jF(li(s.Ia,s,s.g),s.O)),Kx(s.V,s.g,"readystatechange",s.gb),i=s.H?Ss(s.H):{},s.s?(s.u||(s.u="POST"),i["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.s,i)):(s.u="GET",s.g.ea(s.A,s.u,null,i)),ip(1),function(s,i,r,o,a,d){s.info(function(){if(s.g)if(d)for(var g="",y=d.split("&"),C=0;C<y.length;C++){var T=y[C].split("=");if(1<T.length){var S=T[0];T=T[1];var N=S.split("_");g=2<=N.length&&"type"==N[1]?g+(S+"=")+T+"&":g+(S+"=redacted&")}}else g=null;else g=d;return"XMLHTTP REQ ("+o+") [attempt "+a+"]: "+i+"\n"+r+"\n"+g})}(s.j,s.u,s.A,s.m,s.X,s.s)}function SM(s){return!!s.g&&"GET"==s.u&&2!=s.K&&s.l.Ba}function rI(s,i,r){for(var a,o=!0;!s.I&&s.C<r.length;){if((a=NM(s,r))==Dy){4==i&&(s.o=4,Ii(14),o=!1),Eh(s.j,s.m,null,"[Incomplete Response]");break}if(a==Mw){s.o=4,Ii(15),Eh(s.j,s.m,r,"[Invalid Chunk]"),o=!1;break}Eh(s.j,s.m,a,null),Iy(s,a)}SM(s)&&a!=Dy&&a!=Mw&&(s.h.g="",s.C=0),4!=i||0!=r.length||s.h.h||(s.o=1,Ii(16),o=!1),s.i=s.i&&o,o?0<r.length&&!s.aa&&(s.aa=!0,(i=s.l).g==s&&i.$&&!i.L&&(i.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),wp(i),i.L=!0,Ii(11))):(Eh(s.j,s.m,r,"[Invalid Chunked Response]"),Ah(s),cp(s))}function NM(s,i){var r=s.C,o=i.indexOf("\n",r);return-1==o?Dy:(r=Number(i.substring(r,o)),isNaN(r)?Mw:(o+=1)+r>i.length?Dy:(i=i.substr(o,r),s.C=o+r,i))}function Vo(s){s.Y=Date.now()+s.P,MM(s,s.P)}function MM(s,i){if(null!=s.B)throw Error("WatchDog timer not null");s.B=sp(li(s.eb,s),i)}function up(s){s.B&&(yt.clearTimeout(s.B),s.B=null)}function cp(s){0==s.l.G||s.I||vI(s.l,s)}function Ah(s){up(s);var i=s.L;i&&"function"==typeof i.na&&i.na(),s.L=null,Tw(s.W),Qx(s.V),s.g&&(i=s.g,s.g=null,i.abort(),i.na())}function Iy(s,i){try{var r=s.l;if(0!=r.G&&(r.g==s||Py(r.i,s)))if(r.I=s.N,!s.J&&Py(r.i,s)&&3==r.G){try{var o=r.Ca.g.parse(i)}catch(Te){o=null}if(Array.isArray(o)&&3==o.length){var a=o;if(0==a[0])e:if(r.u)r.ta=a[1],0<r.ta-r.U&&37500>a[2]&&r.N&&0==r.A&&!r.v&&(r.v=sp(li(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<s.F))break e;Gy(r),_p(r)}Uw(r),Ii(18)}if(1>=ky(r.i)&&r.ka){try{r.ka()}catch(Te){}r.ka=void 0}}else $l(r,11)}else if((s.J||r.g==s)&&Gy(r),!uw(i))for(a=r.Ca.g.parse(i),i=0;i<a.length;i++){var d=a[i];if(r.U=d[0],d=d[1],2==r.G)if("c"==d[0]){r.J=d[1],r.la=d[2];var g=d[3];null!=g&&(r.ma=g,r.h.info("VER="+r.ma));var y=d[4];null!=y&&(r.za=y,r.h.info("SVER="+r.za));var C=d[5];null!=C&&"number"==typeof C&&0<C&&(r.K=o=1.5*C,r.h.info("backChannelRequestTimeoutMs_="+o)),o=r;var T=s.g;if(T){var S=T.g?T.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(S){var N=o.i;!N.g&&(ui(S,"spdy")||ui(S,"quic")||ui(S,"h2"))&&(N.j=N.l,N.g=new Set,N.h&&(fp(N,N.h),N.h=null))}if(o.D){var O=T.g?T.g.getResponseHeader("X-HTTP-Session-Id"):null;O&&(o.sa=O,vn(o.F,o.D,O))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-s.F,r.h.info("Handshake RTT: "+r.O+"ms"));var V=s;if((o=r).oa=bI(o,o.H?o.la:null,o.W),V.J){Fy(o.i,V);var Y=V,le=o.K;le&&Y.setTimeout(le),Y.B&&(up(Y),Vo(Y)),o.g=V}else Bw(o);0<r.l.length&&Vw(r)}else"stop"!=d[0]&&"close"!=d[0]||$l(r,7);else 3==r.G&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?$l(r,7):By(r):"noop"!=d[0]&&r.j&&r.j.wa(d),r.A=0)}ip(4)}catch(Te){}}function dp(s,i){if(s.forEach&&"function"==typeof s.forEach)s.forEach(i,void 0);else if(aw(s)||"string"==typeof s)bt(s,i,void 0);else{if(s.T&&"function"==typeof s.T)var r=s.T();else if(s.R&&"function"==typeof s.R)r=void 0;else if(aw(s)||"string"==typeof s){r=[];for(var o=s.length,a=0;a<o;a++)r.push(a)}else for(a in r=[],o=0,s)r[o++]=a;a=(o=function(s){if(s.R&&"function"==typeof s.R)return s.R();if("string"==typeof s)return s.split("");if(aw(s)){for(var i=[],r=s.length,o=0;o<r;o++)i.push(s[o]);return i}for(o in i=[],r=0,s)i[r++]=s[o];return i}(s)).length;for(var d=0;d<a;d++)i.call(void 0,o[d],r&&r[d],s)}}function Sh(s,i){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var o=0;o<r;o+=2)this.set(arguments[o],arguments[o+1])}else if(s)if(s instanceof Sh)for(r=s.T(),o=0;o<r.length;o++)this.set(r[o],s.get(r[o]));else for(o in s)this.set(o,s[o])}function Ty(s){if(s.i!=s.g.length){for(var i=0,r=0;i<s.g.length;){var o=s.g[i];jl(s.h,o)&&(s.g[r++]=o),i++}s.g.length=r}if(s.i!=s.g.length){var a={};for(r=i=0;i<s.g.length;)jl(a,o=s.g[i])||(s.g[r++]=o,a[o]=1),i++;s.g.length=r}}function jl(s,i){return Object.prototype.hasOwnProperty.call(s,i)}($e=Th.prototype).setTimeout=function(s){this.P=s},$e.gb=function(s){s=s.target;var i=this.L;i&&3==oo(s)?i.l():this.Ia(s)},$e.Ia=function(s){try{if(s==this.g)e:{var i=oo(this.g),r=this.g.Da(),o=this.g.ba();if(!(3>i)&&(3!=i||Ma||this.g&&(this.h.h||this.g.ga()||pI(this.g)))){this.I||4!=i||7==r||ip(8==r||0>=o?3:2),up(this);var a=this.g.ba();this.N=a;t:if(SM(this)){var d=pI(this.g);s="";var g=d.length,y=4==oo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ah(this),cp(this);var C="";break t}this.h.i=new yt.TextDecoder}for(r=0;r<g;r++)this.h.h=!0,s+=this.h.i.decode(d[r],{stream:y&&r==g-1});d.splice(0,g),this.h.g+=s,this.C=0,C=this.h.g}else C=this.g.ga();if(this.i=200==a,function(s,i,r,o,a,d,g){s.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+a+"]: "+i+"\n"+r+"\n"+d+" "+g})}(this.j,this.u,this.A,this.m,this.X,i,a),this.i){if(this.$&&!this.J){t:{if(this.g){var T,S=this.g;if((T=S.g?S.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!uw(T)){var N=T;break t}}N=null}if(!(a=N)){this.i=!1,this.o=3,Ii(12),Ah(this),cp(this);break e}Eh(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Iy(this,a)}this.U?(rI(this,i,C),Ma&&this.i&&3==i&&(Kx(this.V,this.W,"tick",this.fb),this.W.start())):(Eh(this.j,this.m,C,null),Iy(this,C)),4==i&&Ah(this),this.i&&!this.I&&(4==i?vI(this.l,this):(this.i=!1,Vo(this)))}else 400==a&&0<C.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),Ah(this),cp(this)}}}catch(O){}},$e.fb=function(){if(this.g){var s=oo(this.g),i=this.g.ga();this.C<i.length&&(up(this),rI(this,s,i),this.i&&4!=s&&Vo(this))}},$e.cancel=function(){this.I=!0,Ah(this)},$e.eb=function(){this.B=null;var s=Date.now();0<=s-this.Y?(function(s,i){s.info(function(){return"TIMEOUT: "+i})}(this.j,this.A),2!=this.K&&(ip(3),Ii(17)),Ah(this),this.o=2,cp(this)):MM(this,this.Y-s)},($e=Sh.prototype).R=function(){Ty(this);for(var s=[],i=0;i<this.g.length;i++)s.push(this.h[this.g[i]]);return s},$e.T=function(){return Ty(this),this.g.concat()},$e.get=function(s,i){return jl(this.h,s)?this.h[s]:i},$e.set=function(s,i){jl(this.h,s)||(this.i++,this.g.push(s)),this.h[s]=i},$e.forEach=function(s,i){for(var r=this.T(),o=0;o<r.length;o++){var a=r[o],d=this.get(a);s.call(i,d,a,this)}};var Rw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Cc(s,i){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,s instanceof Cc){this.g=void 0!==i?i:s.g,Ay(this,s.j),this.s=s.s,Sy(this,s.i),Ny(this,s.m),this.l=s.l,i=s.h;var r=new Oa;r.i=i.i,i.g&&(r.g=new Sh(i.g),r.h=i.h),Nh(this,r),this.o=s.o}else s&&(r=String(s).match(Rw))?(this.g=!!i,Ay(this,r[1]||"",!0),this.s=Mh(r[2]||""),Sy(this,r[3]||"",!0),Ny(this,r[4]),this.l=Mh(r[5]||"",!0),Nh(this,r[6]||"",!0),this.o=Mh(r[7]||"")):(this.g=!!i,this.h=new Oa(null,this.g))}function Ra(s){return new Cc(s)}function Ay(s,i,r){s.j=r?Mh(i,!0):i,s.j&&(s.j=s.j.replace(/:$/,""))}function Sy(s,i,r){s.i=r?Mh(i,!0):i}function Ny(s,i){if(i){if(i=Number(i),isNaN(i)||0>i)throw Error("Bad port number "+i);s.m=i}else s.m=null}function Nh(s,i,r){i instanceof Oa?(s.h=i,function(s,i){i&&!s.j&&(Ns(s),s.i=null,s.g.forEach(function(r,o){var a=o.toLowerCase();o!=a&&(oI(this,o),so(this,a,r))},s)),s.j=i}(s.h,s.g)):(r||(i=Rh(i,LM)),s.h=new Oa(i,s.g))}function vn(s,i,r){s.h.set(i,r)}function hp(s){return vn(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Mh(s,i){return s?i?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Rh(s,i,r){return"string"==typeof s?(s=encodeURI(s).replace(i,kM),r&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function kM(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}Cc.prototype.toString=function(){var s=[],i=this.j;i&&s.push(Rh(i,Ow,!0),":");var r=this.i;return(r||"file"==i)&&(s.push("//"),(i=this.s)&&s.push(Rh(i,Ow,!0),"@"),s.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&s.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&s.push("/"),s.push(Rh(r,"/"==r.charAt(0)?FM:PM,!0))),(r=this.h.toString())&&s.push("?",r),(r=this.o)&&s.push("#",Rh(r,VM)),s.join("")};var Ow=/[#\/\?@]/g,PM=/[#\?:]/g,FM=/[#\?]/g,LM=/[#\?@]/g,VM=/#/g;function Oa(s,i){this.h=this.g=null,this.i=s||null,this.j=!!i}function Ns(s){s.g||(s.g=new Sh,s.h=0,s.i&&function(s,i){if(s){s=s.split("&");for(var r=0;r<s.length;r++){var o=s[r].indexOf("="),a=null;if(0<=o){var d=s[r].substring(0,o);a=s[r].substring(o+1)}else d=s[r];i(d,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(s.i,function(i,r){s.add(decodeURIComponent(i.replace(/\+/g," ")),r)}))}function oI(s,i){Ns(s),i=Oh(s,i),jl(s.g.h,i)&&(s.i=null,s.h-=s.g.get(i).length,jl((s=s.g).h,i)&&(delete s.h[i],s.i--,s.g.length>2*s.i&&Ty(s)))}function My(s,i){return Ns(s),i=Oh(s,i),jl(s.g.h,i)}function so(s,i,r){oI(s,i),0<r.length&&(s.i=null,s.g.set(Oh(s,i),Na(r)),s.h+=r.length)}function Oh(s,i){return i=String(i),s.j&&(i=i.toLowerCase()),i}($e=Oa.prototype).add=function(s,i){Ns(this),this.i=null,s=Oh(this,s);var r=this.g.get(s);return r||this.g.set(s,r=[]),r.push(i),this.h+=1,this},$e.forEach=function(s,i){Ns(this),this.g.forEach(function(r,o){bt(r,function(a){s.call(i,a,o,this)},this)},this)},$e.T=function(){Ns(this);for(var s=this.g.R(),i=this.g.T(),r=[],o=0;o<i.length;o++)for(var a=s[o],d=0;d<a.length;d++)r.push(i[o]);return r},$e.R=function(s){Ns(this);var i=[];if("string"==typeof s)My(this,s)&&(i=dy(i,this.g.get(Oh(this,s))));else{s=this.g.R();for(var r=0;r<s.length;r++)i=dy(i,s[r])}return i},$e.set=function(s,i){return Ns(this),this.i=null,My(this,s=Oh(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[i]),this.h+=1,this},$e.get=function(s,i){return s&&0<(s=this.R(s)).length?String(s[0]):i},$e.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var s=[],i=this.g.T(),r=0;r<i.length;r++){var o=i[r],a=encodeURIComponent(String(o));o=this.R(o);for(var d=0;d<o.length;d++){var g=a;""!==o[d]&&(g+="="+encodeURIComponent(String(o[d]))),s.push(g)}}return this.i=s.join("&")};var BM=function(i,r){this.h=i,this.g=r};function aI(s){this.l=s||$F,s=yt.PerformanceNavigationTiming?0<(s=yt.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(yt.g&&yt.g.Ea&&yt.g.Ea()&&yt.g.Ea().Zb),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $F=10;function Oy(s){return!!s.h||!!s.g&&s.g.size>=s.j}function ky(s){return s.h?1:s.g?s.g.size:0}function Py(s,i){return s.h?s.h==i:!!s.g&&s.g.has(i)}function fp(s,i){s.g?s.g.add(i):s.h=i}function Fy(s,i){s.h&&s.h==i?s.h=null:s.g&&s.g.has(i)&&s.g.delete(i)}function lI(s){var i,r;if(null!=s.h)return s.i.concat(s.h.D);if(null!=s.g&&0!==s.g.size){var o=s.i;try{for(var a=Nx(s.g.values()),d=a.next();!d.done;d=a.next())o=o.concat(d.value.D)}catch(y){i={error:y}}finally{try{d&&!d.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}return Na(s.i)}function kw(){}function UM(){this.g=new kw}function GM(s,i,r){var o=r||"";try{dp(s,function(a,d){var g=a;Xg(a)&&(g=Cw(a)),i.push(o+d+"="+encodeURIComponent(g))})}catch(a){throw i.push(o+"type="+encodeURIComponent("_badmap")),a}}function kh(s,i,r,o,a){try{i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null,a(o)}catch(d){}}function Ph(s){this.l=s.$b||null,this.j=s.ib||!1}function gp(s,i){Mr.call(this),this.D=s,this.u=i,this.m=void 0,this.readyState=Ly,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}aI.prototype.cancel=function(){var s,i;if(this.i=lI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var r=Nx(this.g.values()),o=r.next();!o.done;o=r.next())o.value.cancel()}catch(d){s={error:d}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(s)throw s.error}}this.g.clear()}},kw.prototype.stringify=function(s){return yt.JSON.stringify(s,void 0)},kw.prototype.parse=function(s){return yt.JSON.parse(s,void 0)},vt(Ph,Aw),Ph.prototype.g=function(){return new gp(this.l,this.j)},Ph.prototype.i=function(s){return function(){return s}}({}),vt(gp,Mr);var Ly=0;function Pw(s){s.j.read().then(s.Sa.bind(s)).catch(s.ha.bind(s))}function pp(s){s.readyState=4,s.l=null,s.j=null,s.A=null,Fh(s)}function Fh(s){s.onreadystatechange&&s.onreadystatechange.call(s)}($e=gp.prototype).open=function(s,i){if(this.readyState!=Ly)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=i,this.readyState=1,Fh(this)},$e.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var i={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(i.body=s),(this.D||yt).fetch(new Request(this.B,i)).then(this.Va.bind(this),this.ha.bind(this))},$e.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pp(this)),this.readyState=Ly},$e.Va=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,Fh(this)),this.g&&(this.readyState=3,Fh(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==yt.ReadableStream&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pw(this)}else s.text().then(this.Ua.bind(this),this.ha.bind(this))},$e.Sa=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var i=s.value?s.value:new Uint8Array(0);(i=this.A.decode(i,{stream:!s.done}))&&(this.response=this.responseText+=i)}s.done?pp(this):Fh(this),3==this.readyState&&Pw(this)}},$e.Ua=function(s){this.g&&(this.response=this.responseText=s,pp(this))},$e.Ta=function(s){this.g&&(this.response=s,pp(this))},$e.ha=function(){this.g&&pp(this)},$e.setRequestHeader=function(s,i){this.v.append(s,i)},$e.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},$e.getAllResponseHeaders=function(){if(!this.h)return"";for(var s=[],i=this.h.entries(),r=i.next();!r.done;)s.push((r=r.value)[0]+": "+r[1]),r=i.next();return s.join("\r\n")},Object.defineProperty(gp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var cI=yt.JSON.parse;function cr(s){Mr.call(this),this.headers=new Sh,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Fw,this.K=this.L=!1}vt(cr,Mr);var Fw="",dI=/^https?$/i,WF=["POST","PUT"];function Lh(s){return"content-type"==s.toLowerCase()}function hI(s,i){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=i,s.m=5,fI(s),Hl(s)}function fI(s){s.D||(s.D=!0,Cr(s,"complete"),Cr(s,"error"))}function jM(s){if(s.h&&void 0!==Qg&&(!s.C[1]||4!=oo(s)||2!=s.ba()))if(s.v&&4==oo(s))wy(s.Fa,0,s);else if(Cr(s,"readystatechange"),4==oo(s)){s.h=!1;try{var o,i=s.ba();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(o=r)){var a;if(a=0===i){var d=String(s.H).match(Rw)[1]||null;if(!d&&yt.self&&yt.self.location){var g=yt.self.location.protocol;d=g.substr(0,g.length-1)}a=!dI.test(d?d.toLowerCase():"")}o=a}if(o)Cr(s,"complete"),Cr(s,"success");else{s.m=6;try{var y=2<oo(s)?s.g.statusText:""}catch(C){y=""}s.j=y+" ["+s.ba()+"]",fI(s)}}finally{Hl(s)}}}function Hl(s,i){if(s.g){gI(s);var r=s.g,o=s.C[0]?Jg:null;s.g=null,s.C=null,i||Cr(s,"ready");try{r.onreadystatechange=o}catch(a){}}}function gI(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(yt.clearTimeout(s.A),s.A=null)}function oo(s){return s.g?s.g.readyState:0}function pI(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case Fw:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch(i){return null}}function Lw(s,i,r){e:{for(o in r){var o=!1;break e}o=!0}o||(r=function(s){var i="";return yn(s,function(r,o){i+=o,i+=":",i+=r,i+="\r\n"}),i}(r),"string"==typeof s?null!=r&&encodeURIComponent(String(r)):vn(s,i,r))}function mp(s,i,r){return r&&r.internalChannelParams&&r.internalChannelParams[s]||i}function Vy(s){this.za=0,this.l=[],this.h=new Cy,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=mp("failFast",!1,s),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=mp("baseRetryDelayMs",5e3,s),this.$a=mp("retryDelaySeedMs",1e4,s),this.Ya=mp("forwardChannelMaxRetries",2,s),this.ra=mp("forwardChannelRequestTimeoutMs",2e4,s),this.qa=s&&s.xmlHttpFactory||void 0,this.Ba=s&&s.Yb||!1,this.K=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.J="",this.i=new aI(s&&s.concurrentRequestLimit),this.Ca=new UM,this.ja=s&&s.fastHandshake||!1,this.Ra=s&&s.Wb||!1,s&&s.Aa&&this.h.Aa(),s&&s.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&s&&s.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!s||!1!==s.Xb}function By(s){if(yp(s),3==s.G){var i=s.V++,r=Ra(s.F);vn(r,"SID",s.J),vn(r,"RID",i),vn(r,"TYPE","terminate"),Vh(s,r),(i=new Th(s,s.h,i,void 0)).K=2,i.v=hp(Ra(r)),r=!1,yt.navigator&&yt.navigator.sendBeacon&&(r=yt.navigator.sendBeacon(i.v.toString(),"")),!r&&yt.Image&&((new Image).src=i.v,r=!0),r||(i.g=Hw(i.l,null),i.g.ea(i.v)),i.F=Date.now(),Vo(i)}jw(s)}function _p(s){s.g&&(wp(s),s.g.cancel(),s.g=null)}function yp(s){_p(s),s.u&&(yt.clearTimeout(s.u),s.u=null),Gy(s),s.i.cancel(),s.m&&("number"==typeof s.m&&yt.clearTimeout(s.m),s.m=null)}function vp(s,i){s.l.push(new BM(s.Za++,i)),3==s.G&&Vw(s)}function Vw(s){Oy(s.i)||s.m||(s.m=!0,Dw(s.Ha,s),s.C=0)}function yI(s,i){var r;r=i?i.m:s.V++;var o=Ra(s.F);vn(o,"SID",s.J),vn(o,"RID",r),vn(o,"AID",s.U),Vh(s,o),s.o&&s.s&&Lw(o,s.o,s.s),r=new Th(s,s.h,r,s.C+1),null===s.o&&(r.H=s.s),i&&(s.l=i.D.concat(s.l)),i=bp(s,r,1e3),r.setTimeout(Math.round(.5*s.ra)+Math.round(.5*s.ra*Math.random())),fp(s.i,r),xy(r,o,i)}function Vh(s,i){s.j&&dp({},function(r,o){vn(i,o,r)})}function bp(s,i,r){r=Math.min(s.l.length,r);var o=s.j?li(s.j.Oa,s.j,s):null;e:for(var a=s.l,d=-1;;){var g=["count="+r];-1==d?0<r?g.push("ofs="+(d=a[0].h)):d=0:g.push("ofs="+d);for(var y=!0,C=0;C<r;C++){var T=a[C].h,S=a[C].g;if(0>(T-=d))d=Math.max(0,a[C].h-100),y=!1;else try{GM(S,g,"req"+T+"_")}catch(N){o&&o(S)}}if(y){o=g.join("&");break e}}return s=s.l.splice(0,r),i.D=s,o}function Bw(s){s.g||s.u||(s.Y=1,Dw(s.Ga,s),s.A=0)}function Uw(s){return!(s.g||s.u||3<=s.A||(s.Y++,s.u=sp(li(s.Ga,s),Gw(s,s.A)),s.A++,0))}function wp(s){null!=s.B&&(yt.clearTimeout(s.B),s.B=null)}function Uy(s){s.g=new Th(s,s.h,"rpc",s.Y),null===s.o&&(s.g.H=s.s),s.g.O=0;var i=Ra(s.oa);vn(i,"RID","rpc"),vn(i,"SID",s.J),vn(i,"CI",s.N?"0":"1"),vn(i,"AID",s.U),Vh(s,i),vn(i,"TYPE","xmlhttp"),s.o&&s.s&&Lw(i,s.o,s.s),s.K&&s.g.setTimeout(s.K);var r=s.g;s=s.la,r.K=1,r.v=hp(Ra(i)),r.s=null,r.U=!0,nI(r,s)}function Gy(s){null!=s.v&&(yt.clearTimeout(s.v),s.v=null)}function vI(s,i){var r=null;if(s.g==i){Gy(s),wp(s),s.g=null;var o=2}else{if(!Py(s.i,i))return;r=i.D,Fy(s.i,i),o=1}if(s.I=i.N,0!=s.G)if(i.i)if(1==o){r=i.s?i.s.length:0,i=Date.now()-i.F;var a=s.C;Cr(o=xh(),new tI(o,r,i,a)),Vw(s)}else Bw(s);else if(3==(a=i.o)||0==a&&0<s.I||!(1==o&&function(s,i){return!(ky(s.i)>=s.i.j-(s.m?1:0)||(s.m?(s.l=i.D.concat(s.l),0):1==s.G||2==s.G||s.C>=(s.Xa?0:s.Ya)||(s.m=sp(li(s.Ha,s,i),Gw(s,s.C)),s.C++,0)))}(s,i)||2==o&&Uw(s)))switch(r&&0<r.length&&(i=s.i,i.i=i.i.concat(r)),a){case 1:$l(s,5);break;case 4:$l(s,10);break;case 3:$l(s,6);break;default:$l(s,2)}}function Gw(s,i){var r=s.Pa+Math.floor(Math.random()*s.$a);return s.j||(r*=2),r*i}function $l(s,i){if(s.h.info("Error code "+i),2==i){var r=null;s.j&&(r=null);var o=li(s.jb,s);r||(r=new Cc("//www.google.com/images/cleardot.gif"),yt.location&&"http"==yt.location.protocol||Ay(r,"https"),hp(r)),function(s,i){var r=new Cy;if(yt.Image){var o=new Image;o.onload=Vl(kh,r,o,"TestLoadImage: loaded",!0,i),o.onerror=Vl(kh,r,o,"TestLoadImage: error",!1,i),o.onabort=Vl(kh,r,o,"TestLoadImage: abort",!1,i),o.ontimeout=Vl(kh,r,o,"TestLoadImage: timeout",!1,i),yt.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=s}else i(!1)}(r.toString(),o)}else Ii(2);s.G=0,s.j&&s.j.va(i),jw(s),yp(s)}function jw(s){s.G=0,s.I=-1,s.j&&((0!=lI(s.i).length||0!=s.l.length)&&(s.i.i.length=0,Na(s.l),s.l.length=0),s.j.ua())}function bI(s,i,r){var o=function(s){return s instanceof Cc?Ra(s):new Cc(s,void 0)}(r);if(""!=o.i)i&&Sy(o,i+"."+o.i),Ny(o,o.m);else{var a=yt.location;o=function(s,i,r,o){var a=new Cc(null,void 0);return s&&Ay(a,s),i&&Sy(a,i),r&&Ny(a,r),o&&(a.l=o),a}(a.protocol,i?i+"."+a.hostname:a.hostname,+a.port,r)}return s.aa&&yn(s.aa,function(d,g){vn(o,g,d)}),r=s.sa,(i=s.D)&&r&&vn(o,i,r),vn(o,"VER",s.ma),Vh(s,o),o}function Hw(s,i,r){if(i&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return(i=new cr(r&&s.Ba&&!s.qa?new Ph({ib:!0}):s.qa)).L=s.H,i}function $w(){}function jy(){if(Lo&&!(10<=Number(Ux)))throw Error("Environmental error: no available transport.")}function os(s,i){Mr.call(this),this.g=new Vy(i),this.l=s,this.h=i&&i.messageUrlParams||null,s=i&&i.messageHeaders||null,i&&i.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=i&&i.initMessageHeaders||null,i&&i.messageContentType&&(s?s["X-WebChannel-Content-Type"]=i.messageContentType:s={"X-WebChannel-Content-Type":i.messageContentType}),i&&i.ya&&(s?s["X-WebChannel-Client-Profile"]=i.ya:s={"X-WebChannel-Client-Profile":i.ya}),this.g.P=s,(s=i&&i.httpHeadersOverwriteParam)&&!uw(s)&&(this.g.o=s),this.A=i&&i.supportsCrossDomainXhr||!1,this.v=i&&i.sendRawJson||!1,(i=i&&i.httpSessionIdParam)&&!uw(i)&&(this.g.D=i,null!==(s=this.h)&&i in s&&i in(s=this.h)&&delete s[i]),this.j=new Ec(this)}function Ww(s){ss.call(this);var i=s.__sm__;if(i){e:{for(var r in i){s=r;break e}s=void 0}(this.i=s)&&(s=this.i,i=null!==i&&s in i?i[s]:void 0),this.data=i}else this.data=s}function wI(){ap.call(this),this.status=1}function Ec(s){this.g=s}($e=cr.prototype).ea=function(s,i,r,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);i=i?i.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Sw.g(),this.C=function(s){return s.h||(s.h=s.i())}(this.u?this.u:Sw),this.g.onreadystatechange=li(this.Fa,this);try{this.F=!0,this.g.open(i,String(s),!0),this.F=!1}catch(d){return void hI(this,d)}s=r||"";var a=new Sh(this.headers);o&&dp(o,function(d,g){a.set(g,d)}),o=function(s){e:{for(var i=Lh,r=s.length,o="string"==typeof s?s.split(""):s,a=0;a<r;a++)if(a in o&&i.call(void 0,o[a],a,s)){i=a;break e}i=-1}return 0>i?null:"string"==typeof s?s.charAt(i):s[i]}(a.T()),r=yt.FormData&&s instanceof yt.FormData,!(0<=vM(WF,i))||o||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(d,g){this.g.setRequestHeader(g,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{gI(this),0<this.B&&((this.K=function(s){return Lo&&py()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=li(this.pa,this)):this.A=wy(this.pa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(d){hI(this,d)}},$e.pa=function(){void 0!==Qg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Cr(this,"timeout"),this.abort(8))},$e.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,Cr(this,"complete"),Cr(this,"abort"),Hl(this))},$e.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hl(this,!0)),cr.Z.M.call(this)},$e.Fa=function(){this.s||(this.F||this.v||this.l?jM(this):this.cb())},$e.cb=function(){jM(this)},$e.ba=function(){try{return 2<oo(this)?this.g.status:-1}catch(s){return-1}},$e.ga=function(){try{return this.g?this.g.responseText:""}catch(s){return""}},$e.Qa=function(s){if(this.g){var i=this.g.responseText;return s&&0==i.indexOf(s)&&(i=i.substring(s.length)),cI(i)}},$e.Da=function(){return this.m},$e.La=function(){return"string"==typeof this.j?this.j:String(this.j)},($e=Vy.prototype).ma=8,$e.G=1,$e.hb=function(s){try{this.h.info("Origin Trials invoked: "+s)}catch(i){}},$e.Ha=function(s){if(this.m)if(this.m=null,1==this.G){if(!s){this.V=Math.floor(1e5*Math.random()),s=this.V++;var i=new Th(this,this.h,s,void 0),r=this.s;if(this.P&&(r?Fx(r=Ss(r),this.P):r=this.P),null===this.o&&(i.H=r),this.ja)e:{for(var o=0,a=0;a<this.l.length;a++){var d=this.l[a];if(void 0===(d="__data__"in d.g&&"string"==typeof(d=d.g.__data__)?d.length:void 0))break;if(4096<(o+=d)){o=a;break e}if(4096===o||a===this.l.length-1){o=a+1;break e}}o=1e3}else o=1e3;o=bp(this,i,o),vn(a=Ra(this.F),"RID",s),vn(a,"CVER",22),this.D&&vn(a,"X-HTTP-Session-Id",this.D),Vh(this,a),this.o&&r&&Lw(a,this.o,r),fp(this.i,i),this.Ra&&vn(a,"TYPE","init"),this.ja?(vn(a,"$req",o),vn(a,"SID","null"),i.$=!0,xy(i,a,null)):xy(i,a,o),this.G=2}}else 3==this.G&&(s?yI(this,s):0==this.l.length||Oy(this.i)||yI(this))},$e.Ga=function(){if(this.u=null,Uy(this),this.$&&!(this.L||null==this.g||0>=this.O)){var s=2*this.O;this.h.info("BP detection timer enabled: "+s),this.B=sp(li(this.bb,this),s)}},$e.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ii(10),_p(this),Uy(this))},$e.ab=function(){null!=this.v&&(this.v=null,_p(this),Uw(this),Ii(19))},$e.jb=function(s){s?(this.h.info("Successfully pinged google.com"),Ii(2)):(this.h.info("Failed to ping google.com"),Ii(1))},($e=$w.prototype).xa=function(){},$e.wa=function(){},$e.va=function(){},$e.ua=function(){},$e.Oa=function(){},jy.prototype.g=function(s,i){return new os(s,i)},vt(os,Mr),os.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var s=this.g,i=this.l,r=this.h||void 0;s.Wa&&(s.h.info("Origin Trials enabled."),Dw(li(s.hb,s,i))),Ii(0),s.W=i,s.aa=r||{},s.N=s.X,s.F=bI(s,null,s.W),Vw(s)},os.prototype.close=function(){By(this.g)},os.prototype.u=function(s){if("string"==typeof s){var i={};i.__data__=s,vp(this.g,i)}else this.v?((i={}).__data__=Cw(s),vp(this.g,i)):vp(this.g,s)},os.prototype.M=function(){this.g.j=null,delete this.j,By(this.g),delete this.g,os.Z.M.call(this)},vt(Ww,ss),vt(wI,ap),vt(Ec,$w),Ec.prototype.xa=function(){Cr(this.g,"a")},Ec.prototype.wa=function(s){Cr(this.g,new Ww(s))},Ec.prototype.va=function(s){Cr(this.g,new wI(s))},Ec.prototype.ua=function(){Cr(this.g,"b")},jy.prototype.createWebChannel=jy.prototype.g,os.prototype.send=os.prototype.u,os.prototype.open=os.prototype.m,os.prototype.close=os.prototype.close,op.NO_ERROR=0,op.TIMEOUT=8,op.HTTP_ERROR=6,Ey.COMPLETE="complete",qr.EventType=Ih,Ih.OPEN="a",Ih.CLOSE="b",Ih.ERROR="c",Ih.MESSAGE="d",Mr.prototype.listen=Mr.prototype.N,cr.prototype.listenOnce=cr.prototype.O,cr.prototype.getLastError=cr.prototype.La,cr.prototype.getLastErrorCode=cr.prototype.Da,cr.prototype.getStatus=cr.prototype.ba,cr.prototype.getResponseJson=cr.prototype.Qa,cr.prototype.getResponseText=cr.prototype.ga,cr.prototype.send=cr.prototype.ea;var Cp=op,CI=Ey,EI=Dh,zw_PROXY=10,zw_NOPROXY=11,Zw=Ph,Hy=qr,HM=cr;class hi{constructor(i){this.uid=i}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(i){return i.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");let Ep="9.0.0";const Dc=new Sa.Yd("@firebase/firestore");function DI(){return Dc.logLevel}function Fe(s,...i){if(Dc.logLevel<=Sa.in.DEBUG){const r=i.map(xI);Dc.debug(`Firestore (${Ep}): ${s}`,...r)}}function Er(s,...i){if(Dc.logLevel<=Sa.in.ERROR){const r=i.map(xI);Dc.error(`Firestore (${Ep}): ${s}`,...r)}}function $y(s,...i){if(Dc.logLevel<=Sa.in.WARN){const r=i.map(xI);Dc.warn(`Firestore (${Ep}): ${s}`,...r)}}function xI(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch(r){return s}}function tt(s="Unexpected state"){const i=`FIRESTORE (${Ep}) INTERNAL ASSERTION FAILED: `+s;throw Er(i),new Error(i)}function pt(s,i){s||tt()}function He(s,i){return s}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Error{constructor(i,r){super(r),this.code=i,this.message=r,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rr{constructor(){this.promise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}}class $M{constructor(i,r){this.user=r,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${i}`}}class zF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(i,r){i.enqueueRetryable(()=>r(hi.UNAUTHENTICATED))}shutdown(){}}class ZF{constructor(i){this.token=i,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(i,r){this.changeListener=r,i.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class WM{constructor(i){this.t=i,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(i,r){var o=this;let a=this.i;const d=C=>this.i!==a?(a=this.i,r(C)):Promise.resolve();let g=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Rr,i.enqueueRetryable(()=>d(this.currentUser))};const y=C=>{i.enqueueRetryable((0,Ee.Z)(function*(){Fe("FirebaseCredentialsProvider","Auth detected"),o.auth=C,o.auth.addAuthTokenListener(o.o),yield g.promise,yield d(o.currentUser)}))};this.t.onInit(C=>y(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?y(C):(Fe("FirebaseCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Rr)}},0),i.enqueueRetryable((0,Ee.Z)(function*(){0===o.i&&(yield g.promise,yield d(o.currentUser))}))}getToken(){const i=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(o=>this.i!==i?(Fe("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(pt("string"==typeof o.accessToken),new $M(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const i=this.auth&&this.auth.getUid();return pt(null===i||"string"==typeof i),new hi(i)}}class qM{constructor(i,r,o){this.h=i,this.l=r,this.m=o,this.type="FirstParty",this.user=hi.FIRST_PARTY}get authHeaders(){const i={"X-Goog-AuthUser":this.l},r=this.h.auth.getAuthHeaderValueForFirstParty([]);return r&&(i.Authorization=r),this.m&&(i["X-Goog-Iam-Authorization-Token"]=this.m),i}}class YM{constructor(i,r,o){this.h=i,this.l=r,this.m=o}getToken(){return Promise.resolve(new qM(this.h,this.l,this.m))}start(i,r){i.enqueueRetryable(()=>r(hi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ms{constructor(i,r){this.previousValue=i,r&&(r.sequenceNumberHandler=o=>this.g(o),this.p=o=>r.writeSequenceNumber(o))}g(i){return this.previousValue=Math.max(i,this.previousValue),this.previousValue}next(){const i=++this.previousValue;return this.p&&this.p(i),i}}function KF(s){const i="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(i&&"function"==typeof i.getRandomValues)i.getRandomValues(r);else for(let o=0;o<s;o++)r[o]=Math.floor(256*Math.random());return r}Ms.T=-1;class zM{static I(){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/i.length)*i.length;let o="";for(;o.length<20;){const a=KF(40);for(let d=0;d<a.length;++d)o.length<20&&a[d]<r&&(o+=i.charAt(a[d]%i.length))}return o}}function Wt(s,i){return s<i?-1:s>i?1:0}function Bh(s,i,r){return s.length===i.length&&s.every((o,a)=>r(o,i[a]))}function ZM(s){return s+"\0"}class Or{constructor(i,r){if(this.seconds=i,this.nanoseconds=r,r<0)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(i<-62135596800)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i);if(i>=253402300800)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i)}static now(){return Or.fromMillis(Date.now())}static fromDate(i){return Or.fromMillis(i.getTime())}static fromMillis(i){const r=Math.floor(i/1e3),o=Math.floor(1e6*(i-1e3*r));return new Or(r,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(i){return this.seconds===i.seconds?Wt(this.nanoseconds,i.nanoseconds):Wt(this.seconds,i.seconds)}isEqual(i){return i.seconds===this.seconds&&i.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xt{constructor(i){this.timestamp=i}static fromTimestamp(i){return new xt(i)}static min(){return new xt(new Or(0,0))}compareTo(i){return this.timestamp._compareTo(i.timestamp)}isEqual(i){return this.timestamp.isEqual(i.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function xc(s){let i=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&i++;return i}function Wl(s,i){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&i(r,s[r])}function II(s){for(const i in s)if(Object.prototype.hasOwnProperty.call(s,i))return!1;return!0}class Dp{constructor(i,r,o){void 0===r?r=0:r>i.length&&tt(),void 0===o?o=i.length-r:o>i.length-r&&tt(),this.segments=i,this.offset=r,this.len=o}get length(){return this.len}isEqual(i){return 0===Dp.comparator(this,i)}child(i){const r=this.segments.slice(this.offset,this.limit());return i instanceof Dp?i.forEach(o=>{r.push(o)}):r.push(i),this.construct(r)}limit(){return this.offset+this.length}popFirst(i){return this.construct(this.segments,this.offset+(i=void 0===i?1:i),this.length-i)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(i){return this.segments[this.offset+i]}isEmpty(){return 0===this.length}isPrefixOf(i){if(i.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==i.get(r))return!1;return!0}isImmediateParentOf(i){if(this.length+1!==i.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==i.get(r))return!1;return!0}forEach(i){for(let r=this.offset,o=this.limit();r<o;r++)i(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(i,r){const o=Math.min(i.length,r.length);for(let a=0;a<o;a++){const d=i.get(a),g=r.get(a);if(d<g)return-1;if(d>g)return 1}return i.length<r.length?-1:i.length>r.length?1:0}}class qt extends Dp{construct(i,r,o){return new qt(i,r,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...i){const r=[];for(const o of i){if(o.indexOf("//")>=0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);r.push(...o.split("/").filter(a=>a.length>0))}return new qt(r)}static emptyPath(){return new qt([])}}const TI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kr extends Dp{construct(i,r,o){return new kr(i,r,o)}static isValidIdentifier(i){return TI.test(i)}canonicalString(){return this.toArray().map(i=>(i=i.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kr.isValidIdentifier(i)||(i="`"+i+"`"),i)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new kr(["__name__"])}static fromServerFormat(i){const r=[];let o="",a=0;const d=()=>{if(0===o.length)throw new Ne(_e.INVALID_ARGUMENT,`Invalid field path (${i}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(o),o=""};let g=!1;for(;a<i.length;){const y=i[a];if("\\"===y){if(a+1===i.length)throw new Ne(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+i);const C=i[a+1];if("\\"!==C&&"."!==C&&"`"!==C)throw new Ne(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+i);o+=C,a+=2}else"`"===y?(g=!g,a++):"."!==y||g?(o+=y,a++):(d(),a++)}if(d(),g)throw new Ne(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+i);return new kr(r)}static emptyPath(){return new kr([])}}class Ic{constructor(i){this.fields=i,i.sort(kr.comparator)}covers(i){for(const r of this.fields)if(r.isPrefixOf(i))return!0;return!1}isEqual(i){return Bh(this.fields,i.fields,(r,o)=>r.isEqual(o))}}class Dr{constructor(i){this.binaryString=i}static fromBase64String(i){const r=atob(i);return new Dr(r)}static fromUint8Array(i){const r=function(o){let a="";for(let d=0;d<o.length;++d)a+=String.fromCharCode(o[d]);return a}(i);return new Dr(r)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(i){const r=new Uint8Array(i.length);for(let o=0;o<i.length;o++)r[o]=i.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(i){return Wt(this.binaryString,i.binaryString)}isEqual(i){return this.binaryString===i.binaryString}}Dr.EMPTY_BYTE_STRING=new Dr("");const Wy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ka(s){if(pt(!!s),"string"==typeof s){let i=0;const r=Wy.exec(s);if(pt(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),i=Number(a)}const o=new Date(s);return{seconds:Math.floor(o.getTime()/1e3),nanos:i}}return{seconds:xr(s.seconds),nanos:xr(s.nanos)}}function xr(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function xp(s){return"string"==typeof s?Dr.fromBase64String(s):Dr.fromUint8Array(s)}function AI(s){var i,r;return"server_timestamp"===(null===(r=((null===(i=null==s?void 0:s.mapValue)||void 0===i?void 0:i.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function SI(s){const i=s.mapValue.fields.__previous_value__;return AI(i)?SI(i):i}function qy(s){const i=ka(s.mapValue.fields.__local_write_time__.timestampValue);return new Or(i.seconds,i.nanos)}function Bo(s){return null==s}function Yy(s){return 0===s&&1/s==-1/0}function KM(s){return"number"==typeof s&&Number.isInteger(s)&&!Yy(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}class Xe{constructor(i){this.path=i}static fromPath(i){return new Xe(qt.fromString(i))}static fromName(i){return new Xe(qt.fromString(i).popFirst(5))}hasCollectionId(i){return this.path.length>=2&&this.path.get(this.path.length-2)===i}isEqual(i){return null!==i&&0===qt.comparator(this.path,i.path)}toString(){return this.path.toString()}static comparator(i,r){return qt.comparator(i.path,r.path)}static isDocumentKey(i){return i.length%2==0}static fromSegments(i){return new Xe(new qt(i.slice()))}}function Pa(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?AI(s)?4:10:tt()}function Uo(s,i){const r=Pa(s);if(r!==Pa(i))return!1;switch(r){case 0:return!0;case 1:return s.booleanValue===i.booleanValue;case 4:return qy(s).isEqual(qy(i));case 3:return function(o,a){if("string"==typeof o.timestampValue&&"string"==typeof a.timestampValue&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const d=ka(o.timestampValue),g=ka(a.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(s,i);case 5:return s.stringValue===i.stringValue;case 6:return a=i,xp(s.bytesValue).isEqual(xp(a.bytesValue));case 7:return s.referenceValue===i.referenceValue;case 8:return function(o,a){return xr(o.geoPointValue.latitude)===xr(a.geoPointValue.latitude)&&xr(o.geoPointValue.longitude)===xr(a.geoPointValue.longitude)}(s,i);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return xr(o.integerValue)===xr(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const d=xr(o.doubleValue),g=xr(a.doubleValue);return d===g?Yy(d)===Yy(g):isNaN(d)&&isNaN(g)}return!1}(s,i);case 9:return Bh(s.arrayValue.values||[],i.arrayValue.values||[],Uo);case 10:return function(o,a){const d=o.mapValue.fields||{},g=a.mapValue.fields||{};if(xc(d)!==xc(g))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(void 0===g[y]||!Uo(d[y],g[y])))return!1;return!0}(s,i);default:return tt()}var a}function zy(s,i){return void 0!==(s.values||[]).find(r=>Uo(r,i))}function Ip(s,i){const r=Pa(s),o=Pa(i);if(r!==o)return Wt(r,o);switch(r){case 0:return 0;case 1:return Wt(s.booleanValue,i.booleanValue);case 2:return function(a,d){const g=xr(a.integerValue||a.doubleValue),y=xr(d.integerValue||d.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1}(s,i);case 3:return NI(s.timestampValue,i.timestampValue);case 4:return NI(qy(s),qy(i));case 5:return Wt(s.stringValue,i.stringValue);case 6:return function(a,d){const g=xp(a),y=xp(d);return g.compareTo(y)}(s.bytesValue,i.bytesValue);case 7:return function(a,d){const g=a.split("/"),y=d.split("/");for(let C=0;C<g.length&&C<y.length;C++){const T=Wt(g[C],y[C]);if(0!==T)return T}return Wt(g.length,y.length)}(s.referenceValue,i.referenceValue);case 8:return function(a,d){const g=Wt(xr(a.latitude),xr(d.latitude));return 0!==g?g:Wt(xr(a.longitude),xr(d.longitude))}(s.geoPointValue,i.geoPointValue);case 9:return function(a,d){const g=a.values||[],y=d.values||[];for(let C=0;C<g.length&&C<y.length;++C){const T=Ip(g[C],y[C]);if(T)return T}return Wt(g.length,y.length)}(s.arrayValue,i.arrayValue);case 10:return function(a,d){const g=a.fields||{},y=Object.keys(g),C=d.fields||{},T=Object.keys(C);y.sort(),T.sort();for(let S=0;S<y.length&&S<T.length;++S){const N=Wt(y[S],T[S]);if(0!==N)return N;const O=Ip(g[y[S]],C[T[S]]);if(0!==O)return O}return Wt(y.length,T.length)}(s.mapValue,i.mapValue);default:throw tt()}}function NI(s,i){if("string"==typeof s&&"string"==typeof i&&s.length===i.length)return Wt(s,i);const r=ka(s),o=ka(i),a=Wt(r.seconds,o.seconds);return 0!==a?a:Wt(r.nanos,o.nanos)}function MI(s){return Zy(s)}function Zy(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(o){const a=ka(o);return`time(${a.seconds},${a.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?xp(s.bytesValue).toBase64():"referenceValue"in s?Xe.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(i=s.geoPointValue).latitude},${i.longitude})`:"arrayValue"in s?function(o){let a="[",d=!0;for(const g of o.values||[])d?d=!1:a+=",",a+=Zy(g);return a+"]"}(s.arrayValue):"mapValue"in s?function(o){const a=Object.keys(o.fields||{}).sort();let d="{",g=!0;for(const y of a)g?g=!1:d+=",",d+=`${y}:${Zy(o.fields[y])}`;return d+"}"}(s.mapValue):tt();var i}function Ky(s,i){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${i.path.canonicalString()}`}}function RI(s){return!!s&&"integerValue"in s}function OI(s){return!!s&&"arrayValue"in s}function kI(s){return!!s&&"nullValue"in s}function Uh(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Qy(s){return!!s&&"mapValue"in s}function Tp(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const i={mapValue:{fields:{}}};return Wl(s.mapValue.fields,(r,o)=>i.mapValue.fields[r]=Tp(o)),i}if(s.arrayValue){const i={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)i.arrayValue.values[r]=Tp(s.arrayValue.values[r]);return i}return Object.assign({},s)}class fi{constructor(i){this.value=i}static empty(){return new fi({mapValue:{}})}field(i){if(i.isEmpty())return this.value;{let r=this.value;for(let o=0;o<i.length-1;++o)if(r=(r.mapValue.fields||{})[i.get(o)],!Qy(r))return null;return r=(r.mapValue.fields||{})[i.lastSegment()],r||null}}set(i,r){this.getFieldsMap(i.popLast())[i.lastSegment()]=Tp(r)}setAll(i){let r=kr.emptyPath(),o={},a=[];i.forEach((g,y)=>{if(!r.isImmediateParentOf(y)){const C=this.getFieldsMap(r);this.applyChanges(C,o,a),o={},a=[],r=y.popLast()}g?o[y.lastSegment()]=Tp(g):a.push(y.lastSegment())});const d=this.getFieldsMap(r);this.applyChanges(d,o,a)}delete(i){const r=this.field(i.popLast());Qy(r)&&r.mapValue.fields&&delete r.mapValue.fields[i.lastSegment()]}isEqual(i){return Uo(this.value,i.value)}getFieldsMap(i){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let o=0;o<i.length;++o){let a=r.mapValue.fields[i.get(o)];Qy(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[i.get(o)]=a),r=a}return r.mapValue.fields}applyChanges(i,r,o){Wl(r,(a,d)=>i[a]=d);for(const a of o)delete i[a]}clone(){return new fi(Tp(this.value))}}function Jy(s){const i=[];return Wl(s.fields,(r,o)=>{const a=new kr([r]);if(Qy(o)){const d=Jy(o.mapValue).fields;if(0===d.length)i.push(a);else for(const g of d)i.push(a.child(g))}else i.push(a)}),new Ic(i)}class Nn{constructor(i,r,o,a,d){this.key=i,this.documentType=r,this.version=o,this.data=a,this.documentState=d}static newInvalidDocument(i){return new Nn(i,0,xt.min(),fi.empty(),0)}static newFoundDocument(i,r,o){return new Nn(i,1,r,o,0)}static newNoDocument(i,r){return new Nn(i,2,r,fi.empty(),0)}static newUnknownDocument(i,r){return new Nn(i,3,r,fi.empty(),2)}convertToFoundDocument(i,r){return this.version=i,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(i){return this.version=i,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(i){return this.version=i,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(i){return i instanceof Nn&&this.key.isEqual(i.key)&&this.version.isEqual(i.version)&&this.documentType===i.documentType&&this.documentState===i.documentState&&this.data.isEqual(i.data)}clone(){return new Nn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class as{constructor(i,r=null,o=[],a=[],d=null,g=null,y=null){this.path=i,this.collectionGroup=r,this.orderBy=o,this.filters=a,this.limit=d,this.startAt=g,this.endAt=y,this.A=null}}function PI(s,i=null,r=[],o=[],a=null,d=null,g=null){return new as(s,i,r,o,a,d,g)}function Tc(s){const i=He(s);if(null===i.A){let r=i.path.canonicalString();null!==i.collectionGroup&&(r+="|cg:"+i.collectionGroup),r+="|f:",r+=i.filters.map(o=>function(s){return s.field.canonicalString()+s.op.toString()+MI(s.value)}(o)).join(","),r+="|ob:",r+=i.orderBy.map(o=>{return(a=o).field.canonicalString()+a.dir;var a}).join(","),Bo(i.limit)||(r+="|l:",r+=i.limit),i.startAt&&(r+="|lb:",r+=ev(i.startAt)),i.endAt&&(r+="|ub:",r+=ev(i.endAt)),i.A=r}return i.A}function Xy(s,i){if(s.limit!==i.limit||s.orderBy.length!==i.orderBy.length)return!1;for(let a=0;a<s.orderBy.length;a++)if(!eR(s.orderBy[a],i.orderBy[a]))return!1;if(s.filters.length!==i.filters.length)return!1;for(let a=0;a<s.filters.length;a++)if((r=s.filters[a]).op!==(o=i.filters[a]).op||!r.field.isEqual(o.field)||!Uo(r.value,o.value))return!1;var r,o;return s.collectionGroup===i.collectionGroup&&!!s.path.isEqual(i.path)&&!!jI(s.startAt,i.startAt)&&jI(s.endAt,i.endAt)}function Gh(s){return Xe.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}class gi extends class{}{constructor(i,r,o){super(),this.field=i,this.op=r,this.value=o}static create(i,r,o){return i.isKeyField()?"in"===r||"not-in"===r?this.R(i,r,o):new JM(i,r,o):"array-contains"===r?new XM(i,o):"in"===r?new Kw(i,o):"not-in"===r?new UI(i,o):"array-contains-any"===r?new GI(i,o):new gi(i,r,o)}static R(i,r,o){return"in"===r?new LI(i,o):new VI(i,o)}matches(i){const r=i.data.field(this.field);return"!="===this.op?null!==r&&this.P(Ip(r,this.value)):null!==r&&Pa(this.value)===Pa(r)&&this.P(Ip(r,this.value))}P(i){switch(this.op){case"<":return i<0;case"<=":return i<=0;case"==":return 0===i;case"!=":return 0!==i;case">":return i>0;case">=":return i>=0;default:return tt()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class JM extends gi{constructor(i,r,o){super(i,r,o),this.key=Xe.fromName(o.referenceValue)}matches(i){const r=Xe.comparator(i.key,this.key);return this.P(r)}}class LI extends gi{constructor(i,r){super(i,"in",r),this.keys=BI(0,r)}matches(i){return this.keys.some(r=>r.isEqual(i.key))}}class VI extends gi{constructor(i,r){super(i,"not-in",r),this.keys=BI(0,r)}matches(i){return!this.keys.some(r=>r.isEqual(i.key))}}function BI(s,i){var r;return((null===(r=i.arrayValue)||void 0===r?void 0:r.values)||[]).map(o=>Xe.fromName(o.referenceValue))}class XM extends gi{constructor(i,r){super(i,"array-contains",r)}matches(i){const r=i.data.field(this.field);return OI(r)&&zy(r.arrayValue,this.value)}}class Kw extends gi{constructor(i,r){super(i,"in",r)}matches(i){const r=i.data.field(this.field);return null!==r&&zy(this.value.arrayValue,r)}}class UI extends gi{constructor(i,r){super(i,"not-in",r)}matches(i){if(zy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=i.data.field(this.field);return null!==r&&!zy(this.value.arrayValue,r)}}class GI extends gi{constructor(i,r){super(i,"array-contains-any",r)}matches(i){const r=i.data.field(this.field);return!(!OI(r)||!r.arrayValue.values)&&r.arrayValue.values.some(o=>zy(this.value.arrayValue,o))}}class Ac{constructor(i,r){this.position=i,this.before=r}}function ev(s){return`${s.before?"b":"a"}:${s.position.map(i=>MI(i)).join(",")}`}class pi{constructor(i,r="asc"){this.field=i,this.dir=r}}function eR(s,i){return s.dir===i.dir&&s.field.isEqual(i.field)}function tR(s,i,r){let o=0;for(let a=0;a<s.position.length;a++){const d=i[a],g=s.position[a];if(o=d.field.isKeyField()?Xe.comparator(Xe.fromName(g.referenceValue),r.key):Ip(g,r.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return s.before?o<=0:o<0}function jI(s,i){if(null===s)return null===i;if(null===i||s.before!==i.before||s.position.length!==i.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!Uo(s.position[r],i.position[r]))return!1;return!0}class ql{constructor(i,r=null,o=[],a=[],d=null,g="F",y=null,C=null){this.path=i,this.collectionGroup=r,this.explicitOrderBy=o,this.filters=a,this.limit=d,this.limitType=g,this.startAt=y,this.endAt=C,this.V=null,this.S=null}}function HI(s,i,r,o,a,d,g,y){return new ql(s,i,r,o,a,d,g,y)}function jh(s){return new ql(s)}function tv(s){return!Bo(s.limit)&&"F"===s.limitType}function Qw(s){return!Bo(s.limit)&&"L"===s.limitType}function Jw(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function nv(s){for(const i of s.filters)if(i.v())return i.field;return null}function Xw(s){return null!==s.collectionGroup}function Hh(s){const i=He(s);if(null===i.V){i.V=[];const r=nv(i),o=Jw(i);if(null!==r&&null===o)r.isKeyField()||i.V.push(new pi(r)),i.V.push(new pi(kr.keyField(),"asc"));else{let a=!1;for(const d of i.explicitOrderBy)i.V.push(d),d.field.isKeyField()&&(a=!0);if(!a){const d=i.explicitOrderBy.length>0?i.explicitOrderBy[i.explicitOrderBy.length-1].dir:"asc";i.V.push(new pi(kr.keyField(),d))}}}return i.V}function ls(s){const i=He(s);if(!i.S)if("F"===i.limitType)i.S=PI(i.path,i.collectionGroup,Hh(i),i.filters,i.limit,i.startAt,i.endAt);else{const r=[];for(const d of Hh(i))r.push(new pi(d.field,"desc"===d.dir?"asc":"desc"));const o=i.endAt?new Ac(i.endAt.position,!i.endAt.before):null,a=i.startAt?new Ac(i.startAt.position,!i.startAt.before):null;i.S=PI(i.path,i.collectionGroup,r,i.filters,i.limit,o,a)}return i.S}function $I(s,i,r){return new ql(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),i,r,s.startAt,s.endAt)}function rv(s,i){return Xy(ls(s),ls(i))&&s.limitType===i.limitType}function eC(s){return`${Tc(ls(s))}|lt:${s.limitType}`}function iv(s){return`Query(target=${function(s){let i=s.path.canonicalString();return null!==s.collectionGroup&&(i+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(i+=`, filters: [${s.filters.map(r=>{return`${(o=r).field.canonicalString()} ${o.op} ${MI(o.value)}`;var o}).join(", ")}]`),Bo(s.limit)||(i+=", limit: "+s.limit),s.orderBy.length>0&&(i+=`, orderBy: [${s.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),s.startAt&&(i+=", startAt: "+ev(s.startAt)),s.endAt&&(i+=", endAt: "+ev(s.endAt)),`Target(${i})`}(ls(s))}; limitType=${s.limitType})`}function Ap(s,i){return i.isFoundDocument()&&function(r,o){const a=o.key.path;return null!==r.collectionGroup?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Xe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(s,i)&&function(r,o){for(const a of r.explicitOrderBy)if(!a.field.isKeyField()&&null===o.data.field(a.field))return!1;return!0}(s,i)&&function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0}(s,i)&&(o=i,!((r=s).startAt&&!tR(r.startAt,Hh(r),o)||r.endAt&&tR(r.endAt,Hh(r),o)));var r,o}function WI(s){return(i,r)=>{let o=!1;for(const a of Hh(s)){const d=qI(a,i,r);if(0!==d)return d;o=o||a.field.isKeyField()}return 0}}function qI(s,i,r){const o=s.field.isKeyField()?Xe.comparator(i.key,r.key):function(a,d,g){const y=d.data.field(a),C=g.data.field(a);return null!==y&&null!==C?Ip(y,C):tt()}(s.field,i,r);switch(s.dir){case"asc":return o;case"desc":return-1*o;default:return tt()}}function $h(s,i){if(s.D){if(isNaN(i))return{doubleValue:"NaN"};if(i===1/0)return{doubleValue:"Infinity"};if(i===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yy(i)?"-0":i}}function sv(s){return{integerValue:""+s}}function tC(s,i){return KM(i)?sv(i):$h(s,i)}class ov{constructor(){this._=void 0}}function nR(s,i,r){return s instanceof Sp?function(o,a){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&(d.fields.__previous_value__=a),{mapValue:d}}(r,i):s instanceof Yl?nC(s,i):s instanceof Sc?YI(s,i):function(o,a){const d=rR(o,a),g=zI(d)+zI(o.C);return RI(d)&&RI(o.C)?sv(g):$h(o.N,g)}(s,i)}function JF(s,i,r){return s instanceof Yl?nC(s,i):s instanceof Sc?YI(s,i):r}function rR(s,i){return s instanceof Wh?RI(r=i)||(o=r)&&"doubleValue"in o?i:{integerValue:0}:null;var o,r}class Sp extends ov{}class Yl extends ov{constructor(i){super(),this.elements=i}}function nC(s,i){const r=rC(i);for(const o of s.elements)r.some(a=>Uo(a,o))||r.push(o);return{arrayValue:{values:r}}}class Sc extends ov{constructor(i){super(),this.elements=i}}function YI(s,i){let r=rC(i);for(const o of s.elements)r=r.filter(a=>!Uo(a,o));return{arrayValue:{values:r}}}class Wh extends ov{constructor(i,r){super(),this.N=i,this.C=r}}function zI(s){return xr(s.integerValue||s.doubleValue)}function rC(s){return OI(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class av{constructor(i,r){this.field=i,this.transform=r}}class iR{constructor(i,r){this.version=i,this.transformResults=r}}class qn{constructor(i,r){this.updateTime=i,this.exists=r}static none(){return new qn}static exists(i){return new qn(void 0,i)}static updateTime(i){return new qn(i)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(i){return this.exists===i.exists&&(this.updateTime?!!i.updateTime&&this.updateTime.isEqual(i.updateTime):!i.updateTime)}}function er(s,i){return void 0!==s.updateTime?i.isFoundDocument()&&i.version.isEqual(s.updateTime):void 0===s.exists||s.exists===i.isFoundDocument()}class iC{}function ZI(s,i,r){s instanceof Mp?function(o,a,d){const g=o.value.clone(),y=sC(o.fieldTransforms,a,d.transformResults);g.setAll(y),a.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(s,i,r):s instanceof Fa?function(o,a,d){if(!er(o.precondition,a))return void a.convertToUnknownDocument(d.version);const g=sC(o.fieldTransforms,a,d.transformResults),y=a.data;y.setAll(zl(o)),y.setAll(g),a.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(s,i,r):i.convertToNoDocument(r.version).setHasCommittedMutations()}function lv(s,i,r){var a;s instanceof Mp?function(o,a,d){if(!er(o.precondition,a))return;const g=o.value.clone(),y=uv(o.fieldTransforms,d,a);g.setAll(y),a.convertToFoundDocument(KI(a),g).setHasLocalMutations()}(s,i,r):s instanceof Fa?function(o,a,d){if(!er(o.precondition,a))return;const g=uv(o.fieldTransforms,d,a),y=a.data;y.setAll(zl(o)),y.setAll(g),a.convertToFoundDocument(KI(a),y).setHasLocalMutations()}(s,i,r):er(s.precondition,a=i)&&a.convertToNoDocument(xt.min())}function sR(s,i){let r=null;for(const o of s.fieldTransforms){const a=i.data.field(o.field),d=rR(o.transform,a||null);null!=d&&(null==r&&(r=fi.empty()),r.set(o.field,d))}return r||null}function Np(s,i){return s.type===i.type&&!!s.key.isEqual(i.key)&&!!s.precondition.isEqual(i.precondition)&&(o=i.fieldTransforms,!!(void 0===(r=s.fieldTransforms)&&void 0===o||r&&o&&Bh(r,o,(a,d)=>function(s,i){return s.field.isEqual(i.field)&&(o=i.transform,(r=s.transform)instanceof Yl&&o instanceof Yl||r instanceof Sc&&o instanceof Sc?Bh(r.elements,o.elements,Uo):r instanceof Wh&&o instanceof Wh?Uo(r.C,o.C):r instanceof Sp&&o instanceof Sp);var r,o}(a,d))))&&(0===s.type?s.value.isEqual(i.value):1!==s.type||s.data.isEqual(i.data)&&s.fieldMask.isEqual(i.fieldMask));var r,o}function KI(s){return s.isFoundDocument()?s.version:xt.min()}class Mp extends iC{constructor(i,r,o,a=[]){super(),this.key=i,this.value=r,this.precondition=o,this.fieldTransforms=a,this.type=0}}class Fa extends iC{constructor(i,r,o,a,d=[]){super(),this.key=i,this.data=r,this.fieldMask=o,this.precondition=a,this.fieldTransforms=d,this.type=1}}function zl(s){const i=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const o=s.data.field(r);i.set(r,o)}}),i}function sC(s,i,r){const o=new Map;pt(s.length===r.length);for(let a=0;a<r.length;a++){const d=s[a],g=d.transform,y=i.data.field(d.field);o.set(d.field,JF(g,y,r[a]))}return o}function uv(s,i,r){const o=new Map;for(const a of s){const d=a.transform,g=r.data.field(a.field);o.set(a.field,nR(d,g,i))}return o}class Nc extends iC{constructor(i,r){super(),this.key=i,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class oC extends iC{constructor(i,r){super(),this.key=i,this.precondition=r,this.type=3,this.fieldTransforms=[]}}class cv{constructor(i){this.count=i}}var dr,jt;function aC(s){switch(s){case _e.OK:return tt();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return tt()}}function Ir(s){if(void 0===s)return Er("GRPC error has no .code"),_e.UNKNOWN;switch(s){case dr.OK:return _e.OK;case dr.CANCELLED:return _e.CANCELLED;case dr.UNKNOWN:return _e.UNKNOWN;case dr.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case dr.INTERNAL:return _e.INTERNAL;case dr.UNAVAILABLE:return _e.UNAVAILABLE;case dr.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case dr.NOT_FOUND:return _e.NOT_FOUND;case dr.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case dr.ABORTED:return _e.ABORTED;case dr.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case dr.DATA_LOSS:return _e.DATA_LOSS;default:return tt()}}(jt=dr||(dr={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";class Pr{constructor(i,r){this.comparator=i,this.root=r||Yr.EMPTY}insert(i,r){return new Pr(this.comparator,this.root.insert(i,r,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(i){return new Pr(this.comparator,this.root.remove(i,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(i){let r=this.root;for(;!r.isEmpty();){const o=this.comparator(i,r.key);if(0===o)return r.value;o<0?r=r.left:o>0&&(r=r.right)}return null}indexOf(i){let r=0,o=this.root;for(;!o.isEmpty();){const a=this.comparator(i,o.key);if(0===a)return r+o.left.size;a<0?o=o.left:(r+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(i){return this.root.inorderTraversal(i)}forEach(i){this.inorderTraversal((r,o)=>(i(r,o),!1))}toString(){const i=[];return this.inorderTraversal((r,o)=>(i.push(`${r}:${o}`),!1)),`{${i.join(", ")}}`}reverseTraversal(i){return this.root.reverseTraversal(i)}getIterator(){return new dv(this.root,null,this.comparator,!1)}getIteratorFrom(i){return new dv(this.root,i,this.comparator,!1)}getReverseIterator(){return new dv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(i){return new dv(this.root,i,this.comparator,!0)}}class dv{constructor(i,r,o,a){this.isReverse=a,this.nodeStack=[];let d=1;for(;!i.isEmpty();)if(d=r?o(i.key,r):1,a&&(d*=-1),d<0)i=this.isReverse?i.left:i.right;else{if(0===d){this.nodeStack.push(i);break}this.nodeStack.push(i),i=this.isReverse?i.right:i.left}}getNext(){let i=this.nodeStack.pop();const r={key:i.key,value:i.value};if(this.isReverse)for(i=i.left;!i.isEmpty();)this.nodeStack.push(i),i=i.right;else for(i=i.right;!i.isEmpty();)this.nodeStack.push(i),i=i.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const i=this.nodeStack[this.nodeStack.length-1];return{key:i.key,value:i.value}}}class Yr{constructor(i,r,o,a,d){this.key=i,this.value=r,this.color=null!=o?o:Yr.RED,this.left=null!=a?a:Yr.EMPTY,this.right=null!=d?d:Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(i,r,o,a,d){return new Yr(null!=i?i:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=a?a:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(i){return this.left.inorderTraversal(i)||i(this.key,this.value)||this.right.inorderTraversal(i)}reverseTraversal(i){return this.right.reverseTraversal(i)||i(this.key,this.value)||this.left.reverseTraversal(i)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(i,r,o){let a=this;const d=o(i,a.key);return a=d<0?a.copy(null,null,null,a.left.insert(i,r,o),null):0===d?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(i,r,o)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let i=this;return i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.removeMin(),null),i.fixUp()}remove(i,r){let o,a=this;if(r(i,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(i,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===r(i,a.key)){if(a.right.isEmpty())return Yr.EMPTY;o=a.right.min(),a=a.copy(o.key,o.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(i,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let i=this;return i.right.isRed()&&!i.left.isRed()&&(i=i.rotateLeft()),i.left.isRed()&&i.left.left.isRed()&&(i=i.rotateRight()),i.left.isRed()&&i.right.isRed()&&(i=i.colorFlip()),i}moveRedLeft(){let i=this.colorFlip();return i.right.left.isRed()&&(i=i.copy(null,null,null,null,i.right.rotateRight()),i=i.rotateLeft(),i=i.colorFlip()),i}moveRedRight(){let i=this.colorFlip();return i.left.left.isRed()&&(i=i.rotateRight(),i=i.colorFlip()),i}rotateLeft(){const i=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,i,null)}rotateRight(){const i=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,i)}colorFlip(){const i=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,i,r)}checkMaxDepth(){const i=this.check();return Math.pow(2,i)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const i=this.left.check();if(i!==this.right.check())throw tt();return i+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1,Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(s,i,r,o,a){return this}insert(s,i,r){return new Yr(s,i)}remove(s,i){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tr{constructor(i){this.comparator=i,this.data=new Pr(this.comparator)}has(i){return null!==this.data.get(i)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(i){return this.data.indexOf(i)}forEach(i){this.data.inorderTraversal((r,o)=>(i(r),!1))}forEachInRange(i,r){const o=this.data.getIteratorFrom(i[0]);for(;o.hasNext();){const a=o.getNext();if(this.comparator(a.key,i[1])>=0)return;r(a.key)}}forEachWhile(i,r){let o;for(o=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();o.hasNext();)if(!i(o.getNext().key))return}firstAfterOrEqual(i){const r=this.data.getIteratorFrom(i);return r.hasNext()?r.getNext().key:null}getIterator(){return new Rp(this.data.getIterator())}getIteratorFrom(i){return new Rp(this.data.getIteratorFrom(i))}add(i){return this.copy(this.data.remove(i).insert(i,!0))}delete(i){return this.has(i)?this.copy(this.data.remove(i)):this}isEmpty(){return this.data.isEmpty()}unionWith(i){let r=this;return r.size<i.size&&(r=i,i=this),i.forEach(o=>{r=r.add(o)}),r}isEqual(i){if(!(i instanceof tr)||this.size!==i.size)return!1;const r=this.data.getIterator(),o=i.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,d=o.getNext().key;if(0!==this.comparator(a,d))return!1}return!0}toArray(){const i=[];return this.forEach(r=>{i.push(r)}),i}toString(){const i=[];return this.forEach(r=>i.push(r)),"SortedSet("+i.toString()+")"}copy(i){const r=new tr(this.comparator);return r.data=i,r}}class Rp{constructor(i){this.iter=i}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const oR=new Pr(Xe.comparator);function ao(){return oR}const eL=new Pr(Xe.comparator);function QI(){return eL}const aR=new Pr(Xe.comparator);function JI(){return aR}const lR=new tr(Xe.comparator);function nn(...s){let i=lR;for(const r of s)i=i.add(r);return i}const uR=new tr(Wt);function lC(){return uR}class Op{constructor(i,r,o,a,d){this.snapshotVersion=i,this.targetChanges=r,this.targetMismatches=o,this.documentUpdates=a,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(i,r){const o=new Map;return o.set(i,kp.createSynthesizedTargetChangeForCurrentChange(i,r)),new Op(xt.min(),o,lC(),ao(),nn())}}class kp{constructor(i,r,o,a,d){this.resumeToken=i,this.current=r,this.addedDocuments=o,this.modifiedDocuments=a,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(i,r){return new kp(Dr.EMPTY_BYTE_STRING,r,nn(),nn(),nn())}}class hv{constructor(i,r,o,a){this.k=i,this.removedTargetIds=r,this.key=o,this.$=a}}class cR{constructor(i,r){this.targetId=i,this.O=r}}class dR{constructor(i,r,o=Dr.EMPTY_BYTE_STRING,a=null){this.state=i,this.targetIds=r,this.resumeToken=o,this.cause=a}}class XI{constructor(){this.F=0,this.M=tT(),this.L=Dr.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(i){i.approximateByteSize()>0&&(this.U=!0,this.L=i)}W(){let i=nn(),r=nn(),o=nn();return this.M.forEach((a,d)=>{switch(d){case 0:i=i.add(a);break;case 2:r=r.add(a);break;case 1:o=o.add(a);break;default:tt()}}),new kp(this.L,this.B,i,r,o)}G(){this.U=!1,this.M=tT()}H(i,r){this.U=!0,this.M=this.M.insert(i,r)}J(i){this.U=!0,this.M=this.M.remove(i)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class hR{constructor(i){this.tt=i,this.et=new Map,this.nt=ao(),this.st=eT(),this.it=new tr(Wt)}rt(i){for(const r of i.k)i.$&&i.$.isFoundDocument()?this.ot(r,i.$):this.at(r,i.key,i.$);for(const r of i.removedTargetIds)this.at(r,i.key,i.$)}ct(i){this.forEachTarget(i,r=>{const o=this.ut(r);switch(i.state){case 0:this.ht(r)&&o.j(i.resumeToken);break;case 1:o.X(),o.q||o.G(),o.j(i.resumeToken);break;case 2:o.X(),o.q||this.removeTarget(r);break;case 3:this.ht(r)&&(o.Z(),o.j(i.resumeToken));break;case 4:this.ht(r)&&(this.lt(r),o.j(i.resumeToken));break;default:tt()}})}forEachTarget(i,r){i.targetIds.length>0?i.targetIds.forEach(r):this.et.forEach((o,a)=>{this.ht(a)&&r(a)})}ft(i){const r=i.targetId,o=i.O.count,a=this.dt(r);if(a){const d=a.target;if(Gh(d))if(0===o){const g=new Xe(d.path);this.at(r,g,Nn.newNoDocument(g,xt.min()))}else pt(1===o);else this.wt(r)!==o&&(this.lt(r),this.it=this.it.add(r))}}_t(i){const r=new Map;this.et.forEach((d,g)=>{const y=this.dt(g);if(y){if(d.current&&Gh(y.target)){const C=new Xe(y.target.path);null!==this.nt.get(C)||this.gt(g,C)||this.at(g,C,Nn.newNoDocument(C,i))}d.K&&(r.set(g,d.W()),d.G())}});let o=nn();this.st.forEach((d,g)=>{let y=!0;g.forEachWhile(C=>{const T=this.dt(C);return!T||2===T.purpose||(y=!1,!1)}),y&&(o=o.add(d))});const a=new Op(i,r,this.it,this.nt,o);return this.nt=ao(),this.st=eT(),this.it=new tr(Wt),a}ot(i,r){if(!this.ht(i))return;const o=this.gt(i,r.key)?2:0;this.ut(i).H(r.key,o),this.nt=this.nt.insert(r.key,r),this.st=this.st.insert(r.key,this.yt(r.key).add(i))}at(i,r,o){if(!this.ht(i))return;const a=this.ut(i);this.gt(i,r)?a.H(r,1):a.J(r),this.st=this.st.insert(r,this.yt(r).delete(i)),o&&(this.nt=this.nt.insert(r,o))}removeTarget(i){this.et.delete(i)}wt(i){const r=this.ut(i).W();return this.tt.getRemoteKeysForTarget(i).size+r.addedDocuments.size-r.removedDocuments.size}Y(i){this.ut(i).Y()}ut(i){let r=this.et.get(i);return r||(r=new XI,this.et.set(i,r)),r}yt(i){let r=this.st.get(i);return r||(r=new tr(Wt),this.st=this.st.insert(i,r)),r}ht(i){const r=null!==this.dt(i);return r||Fe("WatchChangeAggregator","Detected inactive target",i),r}dt(i){const r=this.et.get(i);return r&&r.q?null:this.tt.Et(i)}lt(i){this.et.set(i,new XI),this.tt.getRemoteKeysForTarget(i).forEach(r=>{this.at(i,r,null)})}gt(i,r){return this.tt.getRemoteKeysForTarget(i).has(r)}}function eT(){return new Pr(Xe.comparator)}function tT(){return new Pr(Xe.comparator)}const fR={asc:"ASCENDING",desc:"DESCENDING"},lo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class gR{constructor(i,r){this.databaseId=i,this.D=r}}function Pp(s,i){return s.D?`${new Date(1e3*i.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+i.nanoseconds).slice(-9)}Z`:{seconds:""+i.seconds,nanos:i.nanoseconds}}function nT(s,i){return s.D?i.toBase64():i.toUint8Array()}function pR(s,i){return Pp(s,i.toTimestamp())}function zr(s){return pt(!!s),xt.fromTimestamp(function(i){const r=ka(i);return new Or(r.seconds,r.nanos)}(s))}function uC(s,i){return(r=s,new qt(["projects",r.projectId,"databases",r.database])).child("documents").child(i).canonicalString();var r}function rT(s){const i=qt.fromString(s);return pt(Vp(i)),i}function Fp(s,i){return uC(s.databaseId,i.path)}function ji(s,i){const r=rT(i);if(r.get(1)!==s.databaseId.projectId)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new Xe(_R(r))}function fv(s,i){return uC(s.databaseId,i)}function mR(s){const i=rT(s);return 4===i.length?qt.emptyPath():_R(i)}function Lp(s){return new qt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function _R(s){return pt(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function yR(s,i,r){return{name:Fp(s,i),fields:r.value.mapValue.fields}}function vR(s,i,r){const o=ji(s,i.name),a=zr(i.updateTime),d=new fi({mapValue:{fields:i.fields}}),g=Nn.newFoundDocument(o,a,d);return r&&g.setHasCommittedMutations(),r?g.setHasCommittedMutations():g}function gv(s,i){let r;if(i instanceof Mp)r={update:yR(s,i.key,i.value)};else if(i instanceof Nc)r={delete:Fp(s,i.key)};else if(i instanceof Fa)r={update:yR(s,i.key,i.data),updateMask:pv(i.fieldMask)};else{if(!(i instanceof oC))return tt();r={verify:Fp(s,i.key)}}return i.fieldTransforms.length>0&&(r.updateTransforms=i.fieldTransforms.map(o=>function(a,d){const g=d.transform;if(g instanceof Sp)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Yl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Sc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Wh)return{fieldPath:d.field.canonicalString(),increment:g.C};throw tt()}(0,o))),i.precondition.isNone||(r.currentDocument=void 0!==(a=i.precondition).updateTime?{updateTime:pR(s,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:tt()),r;var a}function iT(s,i){const r=i.currentDocument?void 0!==(a=i.currentDocument).updateTime?qn.updateTime(zr(a.updateTime)):void 0!==a.exists?qn.exists(a.exists):qn.none():qn.none(),o=i.updateTransforms?i.updateTransforms.map(a=>function(d,g){let y=null;"setToServerValue"in g?(pt("REQUEST_TIME"===g.setToServerValue),y=new Sp):"appendMissingElements"in g?y=new Yl(g.appendMissingElements.values||[]):"removeAllFromArray"in g?y=new Sc(g.removeAllFromArray.values||[]):"increment"in g?y=new Wh(d,g.increment):tt();const C=kr.fromServerFormat(g.fieldPath);return new av(C,y)}(s,a)):[];var a;if(i.update){const a=ji(s,i.update.name),d=new fi({mapValue:{fields:i.update.fields}});if(i.updateMask){const g=new Ic((i.updateMask.fieldPaths||[]).map(T=>kr.fromServerFormat(T)));return new Fa(a,d,g,r,o)}return new Mp(a,d,r,o)}if(i.delete){const a=ji(s,i.delete);return new Nc(a,r)}if(i.verify){const a=ji(s,i.verify);return new oC(a,r)}return tt()}function sT(s,i){return{documents:[fv(s,i.path)]}}function oT(s,i){const r={structuredQuery:{}},o=i.path;null!==i.collectionGroup?(r.parent=fv(s,o),r.structuredQuery.from=[{collectionId:i.collectionGroup,allDescendants:!0}]):(r.parent=fv(s,o.popLast()),r.structuredQuery.from=[{collectionId:o.lastSegment()}]);const a=function(y){if(0===y.length)return;const C=y.map(T=>function(S){if("=="===S.op){if(Uh(S.value))return{unaryFilter:{field:Mc(S.field),op:"IS_NAN"}};if(kI(S.value))return{unaryFilter:{field:Mc(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(Uh(S.value))return{unaryFilter:{field:Mc(S.field),op:"IS_NOT_NAN"}};if(kI(S.value))return{unaryFilter:{field:Mc(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mc(S.field),op:cT(S.op),value:S.value}}}(T));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(i.filters);a&&(r.structuredQuery.where=a);const d=function(y){if(0!==y.length)return y.map(C=>{return{field:Mc((T=C).field),direction:uT(T.dir)};var T})}(i.orderBy);d&&(r.structuredQuery.orderBy=d);const g=(C=i.limit,s.D||Bo(C)?C:{value:C});var C;return null!==g&&(r.structuredQuery.limit=g),i.startAt&&(r.structuredQuery.startAt=dC(i.startAt)),i.endAt&&(r.structuredQuery.endAt=dC(i.endAt)),r}function aT(s){let i=mR(s.parent);const r=s.structuredQuery,o=r.from?r.from.length:0;let a=null;if(o>0){pt(1===o);const S=r.from[0];S.allDescendants?a=S.collectionId:i=i.child(S.collectionId)}let d=[];r.where&&(d=wR(r.where));let g=[];r.orderBy&&(g=r.orderBy.map(S=>{return new pi(Zl((N=S).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let y=null;r.limit&&(y=function(S){let N;return N="object"==typeof S?S.value:S,Bo(N)?null:N}(r.limit));let C=null;r.startAt&&(C=lT(r.startAt));let T=null;return r.endAt&&(T=lT(r.endAt)),HI(i,a,g,d,y,"F",C,T)}function wR(s){return s?void 0!==s.unaryFilter?[fC(s)]:void 0!==s.fieldFilter?[hC(s)]:void 0!==s.compositeFilter?s.compositeFilter.filters.map(i=>wR(i)).reduce((i,r)=>i.concat(r)):tt():[]}function dC(s){return{before:s.before,values:s.position}}function lT(s){return new Ac(s.values||[],!!s.before)}function uT(s){return fR[s]}function cT(s){return lo[s]}function Mc(s){return{fieldPath:s.canonicalString()}}function Zl(s){return kr.fromServerFormat(s.fieldPath)}function hC(s){return gi.create(Zl(s.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return tt()}}(s.fieldFilter.op),s.fieldFilter.value)}function fC(s){switch(s.unaryFilter.op){case"IS_NAN":const i=Zl(s.unaryFilter.field);return gi.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Zl(s.unaryFilter.field);return gi.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Zl(s.unaryFilter.field);return gi.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Zl(s.unaryFilter.field);return gi.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return tt()}}function pv(s){const i=[];return s.fields.forEach(r=>i.push(r.canonicalString())),{fieldPaths:i}}function Vp(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}function Rs(s){let i="";for(let r=0;r<s.length;r++)i.length>0&&(i=hT(i)),i=dT(s.get(r),i);return hT(i)}function dT(s,i){let r=i;const o=s.length;for(let a=0;a<o;a++){const d=s.charAt(a);switch(d){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=d}}return r}function hT(s){return s+"\x01\x01"}function La(s){const i=s.length;if(pt(i>=2),2===i)return pt("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),qt.emptyPath();const r=i-2,o=[];let a="";for(let d=0;d<i;){const g=s.indexOf("\x01",d);switch((g<0||g>r)&&tt(),s.charAt(g+1)){case"\x01":const y=s.substring(d,g);let C;0===a.length?C=y:(a+=y,C=a,a=""),o.push(C);break;case"\x10":a+=s.substring(d,g),a+="\0";break;case"\x11":a+=s.substring(d,g+1);break;default:tt()}d=g+2}return new qt(o)}class fT{constructor(i,r){this.seconds=i,this.nanoseconds=r}}class us{constructor(i,r,o){this.ownerId=i,this.allowTabSynchronization=r,this.leaseTimestampMs=o}}us.store="owner",us.key="owner";class Kl{constructor(i,r,o){this.userId=i,this.lastAcknowledgedBatchId=r,this.lastStreamToken=o}}Kl.store="mutationQueues",Kl.keyPath="userId";class bn{constructor(i,r,o,a,d){this.userId=i,this.batchId=r,this.localWriteTimeMs=o,this.baseMutations=a,this.mutations=d}}bn.store="mutations",bn.keyPath="batchId",bn.userMutationsIndex="userMutationsIndex",bn.userMutationsKeyPath=["userId","batchId"];class Fr{constructor(){}static prefixForUser(i){return[i]}static prefixForPath(i,r){return[i,Rs(r)]}static key(i,r,o){return[i,Rs(r),o]}}Fr.store="documentMutations",Fr.PLACEHOLDER=new Fr;class CR{constructor(i,r){this.path=i,this.readTime=r}}class Ai{constructor(i,r){this.path=i,this.version=r}}class pn{constructor(i,r,o,a,d,g){this.unknownDocument=i,this.noDocument=r,this.document=o,this.hasCommittedMutations=a,this.readTime=d,this.parentPath=g}}pn.store="remoteDocuments",pn.readTimeIndex="readTimeIndex",pn.readTimeIndexPath="readTime",pn.collectionReadTimeIndex="collectionReadTimeIndex",pn.collectionReadTimeIndexPath=["parentPath","readTime"];class cs{constructor(i){this.byteSize=i}}cs.store="remoteDocumentGlobal",cs.key="remoteDocumentGlobalKey";class Si{constructor(i,r,o,a,d,g,y){this.targetId=i,this.canonicalId=r,this.readTime=o,this.resumeToken=a,this.lastListenSequenceNumber=d,this.lastLimboFreeSnapshotVersion=g,this.query=y}}Si.store="targets",Si.keyPath="targetId",Si.queryTargetsIndexName="queryTargetsIndex",Si.queryTargetsKeyPath=["canonicalId","targetId"];class hr{constructor(i,r,o){this.targetId=i,this.path=r,this.sequenceNumber=o}}hr.store="targetDocuments",hr.keyPath=["targetId","path"],hr.documentTargetsIndex="documentTargetsIndex",hr.documentTargetsKeyPath=["path","targetId"];class Ni{constructor(i,r,o,a){this.highestTargetId=i,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=o,this.targetCount=a}}Ni.key="targetGlobalKey",Ni.store="targetGlobal";class Ql{constructor(i,r){this.collectionId=i,this.parent=r}}Ql.store="collectionParents",Ql.keyPath=["collectionId","parent"];class Os{constructor(i,r,o,a){this.clientId=i,this.updateTimeMs=r,this.networkEnabled=o,this.inForeground=a}}Os.store="clientMetadata",Os.keyPath="clientId";class qh{constructor(i,r,o){this.bundleId=i,this.createTime=r,this.version=o}}qh.store="bundles",qh.keyPath="bundleId";class Yh{constructor(i,r,o){this.name=i,this.readTime=r,this.bundledQuery=o}}Yh.store="namedQueries",Yh.keyPath="name";const ER=[Kl.store,bn.store,Fr.store,pn.store,Si.store,us.store,Ni.store,hr.store,Os.store,cs.store,Ql.store,qh.store,Yh.store],gT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(i){this.onCommittedListeners.push(i)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(i=>i())}}class Se{constructor(i){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,i(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(i){return this.next(void 0,i)}next(i,r){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(i,this.result):new Se((o,a)=>{this.nextCallback=d=>{this.wrapSuccess(i,d).next(o,a)},this.catchCallback=d=>{this.wrapFailure(r,d).next(o,a)}})}toPromise(){return new Promise((i,r)=>{this.next(i,r)})}wrapUserFunction(i){try{const r=i();return r instanceof Se?r:Se.resolve(r)}catch(r){return Se.reject(r)}}wrapSuccess(i,r){return i?this.wrapUserFunction(()=>i(r)):Se.resolve(r)}wrapFailure(i,r){return i?this.wrapUserFunction(()=>i(r)):Se.reject(r)}static resolve(i){return new Se((r,o)=>{r(i)})}static reject(i){return new Se((r,o)=>{o(i)})}static waitFor(i){return new Se((r,o)=>{let a=0,d=0,g=!1;i.forEach(y=>{++a,y.next(()=>{++d,g&&d===a&&r()},C=>o(C))}),g=!0,d===a&&r()})}static or(i){let r=Se.resolve(!1);for(const o of i)r=r.next(a=>a?Se.resolve(a):o());return r}static forEach(i,r){const o=[];return i.forEach((a,d)=>{o.push(r.call(this,a,d))}),this.waitFor(o)}}class mv{constructor(i,r){this.action=i,this.transaction=r,this.aborted=!1,this.Tt=new Rr,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{r.error?this.Tt.reject(new Va(i,r.error)):this.Tt.resolve()},this.transaction.onerror=o=>{const a=Bp(o.target.error);this.Tt.reject(new Va(i,a))}}static open(i,r,o,a){try{return new mv(r,i.transaction(a,o))}catch(d){throw new Va(r,d)}}get It(){return this.Tt.promise}abort(i){i&&this.Tt.reject(i),this.aborted||(Fe("SimpleDb","Aborting transaction:",i?i.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(i){const r=this.transaction.objectStore(i);return new DR(r)}}class co{constructor(i,r,o){this.name=i,this.version=r,this.At=o,12.2===co.Rt((0,L.z$)())&&Er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(i){return Fe("SimpleDb","Removing database:",i),Rc(window.indexedDB.deleteDatabase(i)).toPromise()}static Pt(){if("undefined"==typeof indexedDB)return!1;if(co.bt())return!0;const i=(0,L.z$)(),r=co.Rt(i),o=0<r&&r<10,a=co.vt(i),d=0<a&&a<4.5;return!(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0||i.indexOf("Edge/")>0||o||d)}static bt(){var i;return"undefined"!=typeof process&&"YES"===(null===(i=process.env)||void 0===i?void 0:i.Vt)}static St(i,r){return i.store(r)}static Rt(i){const r=i.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static vt(i){const r=i.match(/Android ([\d.]+)/i),o=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Dt(i){var r=this;return(0,Ee.Z)(function*(){return r.db||(Fe("SimpleDb","Opening database:",r.name),r.db=yield new Promise((o,a)=>{const d=indexedDB.open(r.name,r.version);d.onsuccess=g=>{o(g.target.result)},d.onblocked=()=>{a(new Va(i,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const y=g.target.error;a("VersionError"===y.name?new Ne(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Va(i,y))},d.onupgradeneeded=g=>{Fe("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',g.oldVersion),r.At.Ct(g.target.result,d.transaction,g.oldVersion,r.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.Nt&&(r.db.onversionchange=o=>r.Nt(o)),r.db})()}xt(i){this.Nt=i,this.db&&(this.db.onversionchange=r=>i(r))}runTransaction(i,r,o,a){var d=this;return(0,Ee.Z)(function*(){const g="readonly"===r;let y=0;for(;;){++y;try{d.db=yield d.Dt(i);const C=mv.open(d.db,i,g?"readonly":"readwrite",o),T=a(C).catch(S=>(C.abort(S),Se.reject(S))).toPromise();return T.catch(()=>{}),yield C.It,T}catch(C){const T="FirebaseError"!==C.name&&y<3;if(Fe("SimpleDb","Transaction failed with error:",C.message,"Retrying:",T),d.close(),!T)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Jl{constructor(i){this.kt=i,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(i){this.kt=i}done(){this.$t=!0}Mt(i){this.Ot=i}delete(){return Rc(this.kt.delete())}}class Va extends Ne{constructor(i,r){super(_e.UNAVAILABLE,`IndexedDB transaction '${i}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Ba(s){return"IndexedDbTransactionError"===s.name}class DR{constructor(i){this.store=i}put(i,r){let o;return void 0!==r?(Fe("SimpleDb","PUT",this.store.name,i,r),o=this.store.put(r,i)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",i),o=this.store.put(i)),Rc(o)}add(i){return Fe("SimpleDb","ADD",this.store.name,i,i),Rc(this.store.add(i))}get(i){return Rc(this.store.get(i)).next(r=>(void 0===r&&(r=null),Fe("SimpleDb","GET",this.store.name,i,r),r))}delete(i){return Fe("SimpleDb","DELETE",this.store.name,i),Rc(this.store.delete(i))}count(){return Fe("SimpleDb","COUNT",this.store.name),Rc(this.store.count())}Lt(i,r){const o=this.cursor(this.options(i,r)),a=[];return this.Bt(o,(d,g)=>{a.push(g)}).next(()=>a)}Ut(i,r){Fe("SimpleDb","DELETE ALL",this.store.name);const o=this.options(i,r);o.qt=!1;const a=this.cursor(o);return this.Bt(a,(d,g,y)=>y.delete())}Kt(i,r){let o;r?o=i:(o={},r=i);const a=this.cursor(o);return this.Bt(a,r)}jt(i){const r=this.cursor({});return new Se((o,a)=>{r.onerror=d=>{const g=Bp(d.target.error);a(g)},r.onsuccess=d=>{const g=d.target.result;g?i(g.primaryKey,g.value).next(y=>{y?g.continue():o()}):o()}})}Bt(i,r){const o=[];return new Se((a,d)=>{i.onerror=g=>{d(g.target.error)},i.onsuccess=g=>{const y=g.target.result;if(!y)return void a();const C=new Jl(y),T=r(y.primaryKey,y.value,C);if(T instanceof Se){const S=T.catch(N=>(C.done(),Se.reject(N)));o.push(S)}C.isDone?a():null===C.Ft?y.continue():y.continue(C.Ft)}}).next(()=>Se.waitFor(o))}options(i,r){let o;return void 0!==i&&("string"==typeof i?o=i:r=i),{index:o,range:r}}cursor(i){let r="next";if(i.reverse&&(r="prev"),i.index){const o=this.store.index(i.index);return i.qt?o.openKeyCursor(i.range,r):o.openCursor(i.range,r)}return this.store.openCursor(i.range,r)}}function Rc(s){return new Se((i,r)=>{s.onsuccess=o=>{i(o.target.result)},s.onerror=o=>{const a=Bp(o.target.error);r(a)}})}let pT=!1;function Bp(s){const i=co.Rt((0,L.z$)());if(i>=12.2&&i<13){const r="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(r)>=0){const o=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pT||(pT=!0,setTimeout(()=>{throw o},0)),o}}return s}class mT extends gC{constructor(i,r){super(),this.Qt=i,this.currentSequenceNumber=r}}function Mi(s,i){const r=He(s);return co.St(r.Qt,i)}class _v{constructor(i,r,o,a){this.batchId=i,this.localWriteTime=r,this.baseMutations=o,this.mutations=a}applyToRemoteDocument(i,r){const o=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const d=this.mutations[a];d.key.isEqual(i.key)&&ZI(d,i,o[a])}}applyToLocalView(i){for(const r of this.baseMutations)r.key.isEqual(i.key)&&lv(r,i,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(i.key)&&lv(r,i,this.localWriteTime)}applyToLocalDocumentSet(i){this.mutations.forEach(r=>{const o=i.get(r.key),a=o;this.applyToLocalView(a),o.isValidDocument()||a.convertToNoDocument(xt.min())})}keys(){return this.mutations.reduce((i,r)=>i.add(r.key),nn())}isEqual(i){return this.batchId===i.batchId&&Bh(this.mutations,i.mutations,(r,o)=>Np(r,o))&&Bh(this.baseMutations,i.baseMutations,(r,o)=>Np(r,o))}}class pC{constructor(i,r,o,a){this.batch=i,this.commitVersion=r,this.mutationResults=o,this.docVersions=a}static from(i,r,o){pt(i.mutations.length===o.length);let a=JI();const d=i.mutations;for(let g=0;g<d.length;g++)a=a.insert(d[g].key,o[g].version);return new pC(i,r,o,a)}}class Xl{constructor(i,r,o,a,d=xt.min(),g=xt.min(),y=Dr.EMPTY_BYTE_STRING){this.target=i,this.targetId=r,this.purpose=o,this.sequenceNumber=a,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=y}withSequenceNumber(i){return new Xl(this.target,this.targetId,this.purpose,i,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(i,r){return new Xl(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,i)}withLastLimboFreeSnapshotVersion(i){return new Xl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,i,this.resumeToken)}}class _T{constructor(i){this.Wt=i}}function ho(s,i){if(i.document)return vR(s.Wt,i.document,!!i.hasCommittedMutations);if(i.noDocument){const r=Xe.fromSegments(i.noDocument.path),o=Zh(i.noDocument.readTime),a=Nn.newNoDocument(r,o);return i.hasCommittedMutations?a.setHasCommittedMutations():a}if(i.unknownDocument){const r=Xe.fromSegments(i.unknownDocument.path),o=Zh(i.unknownDocument.version);return Nn.newUnknownDocument(r,o)}return tt()}function zh(s,i,r){const o=eu(r),a=i.key.path.popLast().toArray();if(i.isFoundDocument()){const d={name:Fp(y=s.Wt,(C=i).key),fields:C.data.value.mapValue.fields,updateTime:Pp(y,C.version.toTimestamp())};return new pn(null,null,d,i.hasCommittedMutations,o,a)}var y,C;if(i.isNoDocument()){const d=i.key.path.toArray(),g=fo(i.version),y=i.hasCommittedMutations;return new pn(null,new CR(d,g),null,y,o,a)}if(i.isUnknownDocument()){const d=i.key.path.toArray(),g=fo(i.version);return new pn(new Ai(d,g),null,null,!0,o,a)}return tt()}function eu(s){const i=s.toTimestamp();return[i.seconds,i.nanoseconds]}function Up(s){const i=new Or(s[0],s[1]);return xt.fromTimestamp(i)}function fo(s){const i=s.toTimestamp();return new fT(i.seconds,i.nanoseconds)}function Zh(s){const i=new Or(s.seconds,s.nanoseconds);return xt.fromTimestamp(i)}function Kh(s,i){const r=(i.baseMutations||[]).map(d=>iT(s.Wt,d));for(let d=0;d<i.mutations.length-1;++d){const g=i.mutations[d];d+1<i.mutations.length&&void 0!==i.mutations[d+1].transform&&(g.updateTransforms=i.mutations[d+1].transform.fieldTransforms,i.mutations.splice(d+1,1),++d)}const o=i.mutations.map(d=>iT(s.Wt,d)),a=Or.fromMillis(i.localWriteTimeMs);return new _v(i.batchId,a,r,o)}function Gp(s){const i=Zh(s.readTime),r=void 0!==s.lastLimboFreeSnapshotVersion?Zh(s.lastLimboFreeSnapshotVersion):xt.min();let o;var a;return void 0!==s.query.documents?(pt(1===(a=s.query).documents.length),o=ls(jh(mR(a.documents[0])))):o=ls(aT(s.query)),new Xl(o,s.targetId,0,s.lastListenSequenceNumber,i,r,Dr.fromBase64String(s.resumeToken))}function mC(s,i){const r=fo(i.snapshotVersion),o=fo(i.lastLimboFreeSnapshotVersion);let a;a=Gh(i.target)?sT(s.Wt,i.target):oT(s.Wt,i.target);const d=i.resumeToken.toBase64();return new Si(i.targetId,Tc(i.target),r,d,i.sequenceNumber,o,a)}function yv(s){const i=aT({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?$I(i,i.limit,"L"):i}class yT{getBundleMetadata(i,r){return _C(i).get(r).next(o=>{if(o)return{id:(a=o).bundleId,createTime:Zh(a.createTime),version:a.version};var a})}saveBundleMetadata(i,r){return _C(i).put({bundleId:(o=r).id,createTime:fo(zr(o.createTime)),version:o.version});var o}getNamedQuery(i,r){return vv(i).get(r).next(o=>{if(o)return{name:(a=o).name,query:yv(a.bundledQuery),readTime:Zh(a.readTime)};var a})}saveNamedQuery(i,r){return vv(i).put({name:(o=r).name,readTime:fo(zr(o.readTime)),bundledQuery:o.bundledQuery});var o}}function _C(s){return Mi(s,qh.store)}function vv(s){return Mi(s,Yh.store)}class xR{constructor(){this.Gt=new yC}addToCollectionParentIndex(i,r){return this.Gt.add(r),Se.resolve()}getCollectionParents(i,r){return Se.resolve(this.Gt.getEntries(r))}}class yC{constructor(){this.index={}}add(i){const r=i.lastSegment(),o=i.popLast(),a=this.index[r]||new tr(qt.comparator),d=!a.has(o);return this.index[r]=a.add(o),d}has(i){const r=i.lastSegment(),o=i.popLast(),a=this.index[r];return a&&a.has(o)}getEntries(i){return(this.index[i]||new tr(qt.comparator)).toArray()}}class vT{constructor(){this.zt=new yC}addToCollectionParentIndex(i,r){if(!this.zt.has(r)){const o=r.lastSegment(),a=r.popLast();i.addOnCommittedListener(()=>{this.zt.add(r)});const d={collectionId:o,parent:Rs(a)};return tu(i).put(d)}return Se.resolve()}getCollectionParents(i,r){const o=[],a=IDBKeyRange.bound([r,""],[ZM(r),""],!1,!0);return tu(i).Lt(a).next(d=>{for(const g of d){if(g.collectionId!==r)break;o.push(La(g.parent))}return o})}}function tu(s){return Mi(s,Ql.store)}const bv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hi{constructor(i,r,o){this.cacheSizeCollectionThreshold=i,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=o}static withCacheSize(i){return new Hi(i,Hi.DEFAULT_COLLECTION_PERCENTILE,Hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function bT(s,i,r){const o=s.store(bn.store),a=s.store(Fr.store),d=[],g=IDBKeyRange.only(r.batchId);let y=0;const C=o.Kt({range:g},(S,N,O)=>(y++,O.delete()));d.push(C.next(()=>{pt(1===y)}));const T=[];for(const S of r.mutations){const N=Fr.key(i,S.key.path,r.batchId);d.push(a.delete(N)),T.push(S.key)}return Se.waitFor(d).next(()=>T)}function vC(s){if(!s)return 0;let i;if(s.document)i=s.document;else if(s.unknownDocument)i=s.unknownDocument;else{if(!s.noDocument)throw tt();i=s.noDocument}return JSON.stringify(i).length}Hi.DEFAULT_COLLECTION_PERCENTILE=10,Hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hi.DEFAULT=new Hi(41943040,Hi.DEFAULT_COLLECTION_PERCENTILE,Hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hi.DISABLED=new Hi(-1,0,0);class wT{constructor(i,r,o,a){this.userId=i,this.N=r,this.Ht=o,this.referenceDelegate=a,this.Jt={}}static Yt(i,r,o,a){pt(""!==i.uid);const d=i.isAuthenticated()?i.uid:"";return new wT(d,r,o,a)}checkEmpty(i){let r=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Oc(i).Kt({index:bn.userMutationsIndex,range:o},(a,d,g)=>{r=!1,g.done()}).next(()=>r)}addMutationBatch(i,r,o,a){const d=Qh(i),g=Oc(i);return g.add({}).next(y=>{pt("number"==typeof y);const C=new _v(y,r,o,a),T=function(O,V,Y){const le=Y.baseMutations.map(ke=>gv(O.Wt,ke)),Te=Y.mutations.map(ke=>gv(O.Wt,ke));return new bn(V,Y.batchId,Y.localWriteTime.toMillis(),le,Te)}(this.N,this.userId,C),S=[];let N=new tr((O,V)=>Wt(O.canonicalString(),V.canonicalString()));for(const O of a){const V=Fr.key(this.userId,O.key.path,y);N=N.add(O.key.path.popLast()),S.push(g.put(T)),S.push(d.put(V,Fr.PLACEHOLDER))}return N.forEach(O=>{S.push(this.Ht.addToCollectionParentIndex(i,O))}),i.addOnCommittedListener(()=>{this.Jt[y]=C.keys()}),Se.waitFor(S).next(()=>C)})}lookupMutationBatch(i,r){return Oc(i).get(r).next(o=>o?(pt(o.userId===this.userId),Kh(this.N,o)):null)}Xt(i,r){return this.Jt[r]?Se.resolve(this.Jt[r]):this.lookupMutationBatch(i,r).next(o=>{if(o){const a=o.keys();return this.Jt[r]=a,a}return null})}getNextMutationBatchAfterBatchId(i,r){const o=r+1,a=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return Oc(i).Kt({index:bn.userMutationsIndex,range:a},(g,y,C)=>{y.userId===this.userId&&(pt(y.batchId>=o),d=Kh(this.N,y)),C.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(i){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Oc(i).Kt({index:bn.userMutationsIndex,range:r,reverse:!0},(a,d,g)=>{o=d.batchId,g.done()}).next(()=>o)}getAllMutationBatches(i){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Oc(i).Lt(bn.userMutationsIndex,r).next(o=>o.map(a=>Kh(this.N,a)))}getAllMutationBatchesAffectingDocumentKey(i,r){const o=Fr.prefixForPath(this.userId,r.path),a=IDBKeyRange.lowerBound(o),d=[];return Qh(i).Kt({range:a},(g,y,C)=>{const[T,S,N]=g,O=La(S);if(T===this.userId&&r.path.isEqual(O))return Oc(i).get(N).next(V=>{if(!V)throw tt();pt(V.userId===this.userId),d.push(Kh(this.N,V))});C.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(i,r){let o=new tr(Wt);const a=[];return r.forEach(d=>{const g=Fr.prefixForPath(this.userId,d.path),y=IDBKeyRange.lowerBound(g),C=Qh(i).Kt({range:y},(T,S,N)=>{const[O,V,Y]=T,le=La(V);O===this.userId&&d.path.isEqual(le)?o=o.add(Y):N.done()});a.push(C)}),Se.waitFor(a).next(()=>this.Zt(i,o))}getAllMutationBatchesAffectingQuery(i,r){const o=r.path,a=o.length+1,d=Fr.prefixForPath(this.userId,o),g=IDBKeyRange.lowerBound(d);let y=new tr(Wt);return Qh(i).Kt({range:g},(C,T,S)=>{const[N,O,V]=C,Y=La(O);N===this.userId&&o.isPrefixOf(Y)?Y.length===a&&(y=y.add(V)):S.done()}).next(()=>this.Zt(i,y))}Zt(i,r){const o=[],a=[];return r.forEach(d=>{a.push(Oc(i).get(d).next(g=>{if(null===g)throw tt();pt(g.userId===this.userId),o.push(Kh(this.N,g))}))}),Se.waitFor(a).next(()=>o)}removeMutationBatch(i,r){return bT(i.Qt,this.userId,r).next(o=>(i.addOnCommittedListener(()=>{this.te(r.batchId)}),Se.forEach(o,a=>this.referenceDelegate.markPotentiallyOrphaned(i,a))))}te(i){delete this.Jt[i]}performConsistencyCheck(i){return this.checkEmpty(i).next(r=>{if(!r)return Se.resolve();const o=IDBKeyRange.lowerBound(Fr.prefixForUser(this.userId)),a=[];return Qh(i).Kt({range:o},(d,g,y)=>{if(d[0]===this.userId){const C=La(d[1]);a.push(C)}else y.done()}).next(()=>{pt(0===a.length)})})}containsKey(i,r){return IR(i,this.userId,r)}ee(i){return CT(i).get(this.userId).next(r=>r||new Kl(this.userId,-1,""))}}function IR(s,i,r){const o=Fr.prefixForPath(i,r.path),a=o[1],d=IDBKeyRange.lowerBound(o);let g=!1;return Qh(s).Kt({range:d,qt:!0},(y,C,T)=>{const[S,N,O]=y;S===i&&N===a&&(g=!0),T.done()}).next(()=>g)}function Oc(s){return Mi(s,bn.store)}function Qh(s){return Mi(s,Fr.store)}function CT(s){return Mi(s,Kl.store)}class Jh{constructor(i){this.ne=i}next(){return this.ne+=2,this.ne}static se(){return new Jh(0)}static ie(){return new Jh(-1)}}class nL{constructor(i,r){this.referenceDelegate=i,this.N=r}allocateTargetId(i){return this.re(i).next(r=>{const o=new Jh(r.highestTargetId);return r.highestTargetId=o.next(),this.oe(i,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(i){return this.re(i).next(r=>xt.fromTimestamp(new Or(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(i){return this.re(i).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(i,r,o){return this.re(i).next(a=>(a.highestListenSequenceNumber=r,o&&(a.lastRemoteSnapshotVersion=o.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.oe(i,a)))}addTargetData(i,r){return this.ae(i,r).next(()=>this.re(i).next(o=>(o.targetCount+=1,this.ce(r,o),this.oe(i,o))))}updateTargetData(i,r){return this.ae(i,r)}removeTargetData(i,r){return this.removeMatchingKeysForTargetId(i,r.targetId).next(()=>jp(i).delete(r.targetId)).next(()=>this.re(i)).next(o=>(pt(o.targetCount>0),o.targetCount-=1,this.oe(i,o)))}removeTargets(i,r,o){let a=0;const d=[];return jp(i).Kt((g,y)=>{const C=Gp(y);C.sequenceNumber<=r&&null===o.get(C.targetId)&&(a++,d.push(this.removeTargetData(i,C)))}).next(()=>Se.waitFor(d)).next(()=>a)}forEachTarget(i,r){return jp(i).Kt((o,a)=>{const d=Gp(a);r(d)})}re(i){return TR(i).get(Ni.key).next(r=>(pt(null!==r),r))}oe(i,r){return TR(i).put(Ni.key,r)}ae(i,r){return jp(i).put(mC(this.N,r))}ce(i,r){let o=!1;return i.targetId>r.highestTargetId&&(r.highestTargetId=i.targetId,o=!0),i.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=i.sequenceNumber,o=!0),o}getTargetCount(i){return this.re(i).next(r=>r.targetCount)}getTargetData(i,r){const o=Tc(r),a=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return jp(i).Kt({range:a,index:Si.queryTargetsIndexName},(g,y,C)=>{const T=Gp(y);Xy(r,T.target)&&(d=T,C.done())}).next(()=>d)}addMatchingKeys(i,r,o){const a=[],d=nu(i);return r.forEach(g=>{const y=Rs(g.path);a.push(d.put(new hr(o,y))),a.push(this.referenceDelegate.addReference(i,o,g))}),Se.waitFor(a)}removeMatchingKeys(i,r,o){const a=nu(i);return Se.forEach(r,d=>{const g=Rs(d.path);return Se.waitFor([a.delete([o,g]),this.referenceDelegate.removeReference(i,o,d)])})}removeMatchingKeysForTargetId(i,r){const o=nu(i),a=IDBKeyRange.bound([r],[r+1],!1,!0);return o.delete(a)}getMatchingKeysForTargetId(i,r){const o=IDBKeyRange.bound([r],[r+1],!1,!0),a=nu(i);let d=nn();return a.Kt({range:o,qt:!0},(g,y,C)=>{const T=La(g[1]),S=new Xe(T);d=d.add(S)}).next(()=>d)}containsKey(i,r){const o=Rs(r.path),a=IDBKeyRange.bound([o],[ZM(o)],!1,!0);let d=0;return nu(i).Kt({index:hr.documentTargetsIndex,qt:!0,range:a},([g,y],C,T)=>{0!==g&&(d++,T.done())}).next(()=>d>0)}Et(i,r){return jp(i).get(r).next(o=>o?Gp(o):null)}}function jp(s){return Mi(s,Si.store)}function TR(s){return Mi(s,Ni.store)}function nu(s){return Mi(s,hr.store)}function Xh(s){return ET.apply(this,arguments)}function ET(){return(ET=(0,Ee.Z)(function*(s){if(s.code!==_e.FAILED_PRECONDITION||s.message!==gT)throw s;Fe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function AR([s,i],[r,o]){const a=Wt(s,r);return 0===a?Wt(i,o):a}class rL{constructor(i){this.ue=i,this.buffer=new tr(AR),this.he=0}le(){return++this.he}fe(i){const r=[i,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(r);else{const o=this.buffer.last();AR(r,o)<0&&(this.buffer=this.buffer.delete(o).add(r))}}get maxValue(){return this.buffer.last()[0]}}class l{constructor(i,r){this.garbageCollector=i,this.asyncQueue=r,this.de=!1,this.we=null}start(i){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(i)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(i){var r=this;const o=this.de?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,Ee.Z)(function*(){r.we=null,r.de=!0;try{yield i.collectGarbage(r.garbageCollector)}catch(a){Ba(a)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield Xh(a)}yield r._e(i)}))}}class u{constructor(i,r){this.me=i,this.params=r}calculateTargetCount(i,r){return this.me.ge(i).next(o=>Math.floor(r/100*o))}nthSequenceNumber(i,r){if(0===r)return Se.resolve(Ms.T);const o=new rL(r);return this.me.forEachTarget(i,a=>o.fe(a.sequenceNumber)).next(()=>this.me.ye(i,a=>o.fe(a))).next(()=>o.maxValue)}removeTargets(i,r,o){return this.me.removeTargets(i,r,o)}removeOrphanedDocuments(i,r){return this.me.removeOrphanedDocuments(i,r)}collect(i,r){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(bv)):this.getCacheSize(i).next(o=>o<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bv):this.pe(i,r))}getCacheSize(i){return this.me.getCacheSize(i)}pe(i,r){let o,a,d,g,y,C,T;const S=Date.now();return this.calculateTargetCount(i,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),a=this.params.maximumSequenceNumbersToCollect):a=N,g=Date.now(),this.nthSequenceNumber(i,a))).next(N=>(o=N,y=Date.now(),this.removeTargets(i,o,r))).next(N=>(d=N,C=Date.now(),this.removeOrphanedDocuments(i,o))).next(N=>(T=Date.now(),DI()<=Sa.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-S}ms\n\tDetermined least recently used ${a} in `+(y-g)+`ms\n\tRemoved ${d} targets in `+(C-y)+`ms\n\tRemoved ${N} documents in `+(T-C)+`ms\nTotal Duration: ${T-S}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:d,documentsRemoved:N})))}}class c{constructor(i,r){this.db=i,this.garbageCollector=new u(this,r)}ge(i){const r=this.Ee(i);return this.db.getTargetCache().getTargetCount(i).next(o=>r.next(a=>o+a))}Ee(i){let r=0;return this.ye(i,o=>{r++}).next(()=>r)}forEachTarget(i,r){return this.db.getTargetCache().forEachTarget(i,r)}ye(i,r){return this.Te(i,(o,a)=>r(a))}addReference(i,r,o){return f(i,o)}removeReference(i,r,o){return f(i,o)}removeTargets(i,r,o){return this.db.getTargetCache().removeTargets(i,r,o)}markPotentiallyOrphaned(i,r){return f(i,r)}Ie(i,r){return function(o,a){let d=!1;return CT(o).jt(g=>IR(o,g,a).next(y=>(y&&(d=!0),Se.resolve(!y)))).next(()=>d)}(i,r)}removeOrphanedDocuments(i,r){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let d=0;return this.Te(i,(g,y)=>{if(y<=r){const C=this.Ie(i,g).next(T=>{if(!T)return d++,o.getEntry(i,g).next(()=>(o.removeEntry(g),nu(i).delete([0,Rs(g.path)])))});a.push(C)}}).next(()=>Se.waitFor(a)).next(()=>o.apply(i)).next(()=>d)}removeTarget(i,r){const o=r.withSequenceNumber(i.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(i,o)}updateLimboDocument(i,r){return f(i,r)}Te(i,r){const o=nu(i);let a,d=Ms.T;return o.Kt({index:hr.documentTargetsIndex},([g,y],{path:C,sequenceNumber:T})=>{0===g?(d!==Ms.T&&r(new Xe(La(a)),d),d=T,a=C):d=Ms.T}).next(()=>{d!==Ms.T&&r(new Xe(La(a)),d)})}getCacheSize(i){return this.db.getRemoteDocumentCache().getSize(i)}}function f(s,i){return nu(s).put((o=s.currentSequenceNumber,new hr(0,Rs(i.path),o)));var o}class m{constructor(i,r){this.mapKeyFn=i,this.equalsFn=r,this.inner={}}get(i){const r=this.mapKeyFn(i),o=this.inner[r];if(void 0!==o)for(const[a,d]of o)if(this.equalsFn(a,i))return d}has(i){return void 0!==this.get(i)}set(i,r){const o=this.mapKeyFn(i),a=this.inner[o];if(void 0!==a){for(let d=0;d<a.length;d++)if(this.equalsFn(a[d][0],i))return void(a[d]=[i,r]);a.push([i,r])}else this.inner[o]=[[i,r]]}delete(i){const r=this.mapKeyFn(i),o=this.inner[r];if(void 0===o)return!1;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],i))return 1===o.length?delete this.inner[r]:o.splice(a,1),!0;return!1}forEach(i){Wl(this.inner,(r,o)=>{for(const[a,d]of o)i(a,d)})}isEmpty(){return II(this.inner)}}class _{constructor(){this.changes=new m(i=>i.toString(),(i,r)=>i.isEqual(r)),this.changesApplied=!1}getReadTime(i){const r=this.changes.get(i);return r?r.readTime:xt.min()}addEntry(i,r){this.assertNotApplied(),this.changes.set(i.key,{document:i,readTime:r})}removeEntry(i,r=null){this.assertNotApplied(),this.changes.set(i,{document:Nn.newInvalidDocument(i),readTime:r})}getEntry(i,r){this.assertNotApplied();const o=this.changes.get(r);return void 0!==o?Se.resolve(o.document):this.getFromCache(i,r)}getEntries(i,r){return this.getAllFromCache(i,r)}apply(i){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(i)}assertNotApplied(){}}class b{constructor(i,r){this.N=i,this.Ht=r}addEntry(i,r,o){return A(i).put(M(r),o)}removeEntry(i,r){const o=A(i),a=M(r);return o.delete(a)}updateMetadata(i,r){return this.getMetadata(i).next(o=>(o.byteSize+=r,this.Ae(i,o)))}getEntry(i,r){return A(i).get(M(r)).next(o=>this.Re(r,o))}Pe(i,r){return A(i).get(M(r)).next(o=>({document:this.Re(r,o),size:vC(o)}))}getEntries(i,r){let o=ao();return this.be(i,r,(a,d)=>{const g=this.Re(a,d);o=o.insert(a,g)}).next(()=>o)}ve(i,r){let o=ao(),a=new Pr(Xe.comparator);return this.be(i,r,(d,g)=>{const y=this.Re(d,g);o=o.insert(d,y),a=a.insert(d,vC(g))}).next(()=>({documents:o,Ve:a}))}be(i,r,o){if(r.isEmpty())return Se.resolve();const a=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),d=r.getIterator();let g=d.getNext();return A(i).Kt({range:a},(y,C,T)=>{const S=Xe.fromSegments(y);for(;g&&Xe.comparator(g,S)<0;)o(g,null),g=d.getNext();g&&g.isEqual(S)&&(o(g,C),g=d.hasNext()?d.getNext():null),g?T.Mt(g.path.toArray()):T.done()}).next(()=>{for(;g;)o(g,null),g=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(i,r,o){let a=ao();const d=r.path.length+1,g={};if(o.isEqual(xt.min())){const y=r.path.toArray();g.range=IDBKeyRange.lowerBound(y)}else{const y=r.path.toArray(),C=eu(o);g.range=IDBKeyRange.lowerBound([y,C],!0),g.index=pn.collectionReadTimeIndex}return A(i).Kt(g,(y,C,T)=>{if(y.length!==d)return;const S=ho(this.N,C);r.path.isPrefixOf(S.key.path)?Ap(r,S)&&(a=a.insert(S.key,S)):T.done()}).next(()=>a)}newChangeBuffer(i){return new E(this,!!i&&i.trackRemovals)}getSize(i){return this.getMetadata(i).next(r=>r.byteSize)}getMetadata(i){return I(i).get(cs.key).next(r=>(pt(!!r),r))}Ae(i,r){return I(i).put(cs.key,r)}Re(i,r){if(r){const o=ho(this.N,r);if(!o.isNoDocument()||!o.version.isEqual(xt.min()))return o}return Nn.newInvalidDocument(i)}}class E extends _{constructor(i,r){super(),this.Se=i,this.trackRemovals=r,this.De=new m(o=>o.toString(),(o,a)=>o.isEqual(a))}applyChanges(i){const r=[];let o=0,a=new tr((d,g)=>Wt(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const y=this.De.get(d);if(g.document.isValidDocument()){const C=zh(this.Se.N,g.document,this.getReadTime(d));a=a.add(d.path.popLast()),o+=vC(C)-y,r.push(this.Se.addEntry(i,d,C))}else if(o-=y,this.trackRemovals){const C=zh(this.Se.N,Nn.newNoDocument(d,xt.min()),this.getReadTime(d));r.push(this.Se.addEntry(i,d,C))}else r.push(this.Se.removeEntry(i,d))}),a.forEach(d=>{r.push(this.Se.Ht.addToCollectionParentIndex(i,d))}),r.push(this.Se.updateMetadata(i,o)),Se.waitFor(r)}getFromCache(i,r){return this.Se.Pe(i,r).next(o=>(this.De.set(r,o.size),o.document))}getAllFromCache(i,r){return this.Se.ve(i,r).next(({documents:o,Ve:a})=>(a.forEach((d,g)=>{this.De.set(d,g)}),o))}}function I(s){return Mi(s,cs.store)}function A(s){return Mi(s,pn.store)}function M(s){return s.path.toArray()}class k{constructor(i){this.N=i}Ct(i,r,o,a){pt(o<a&&o>=0&&a<=11);const d=new mv("createOrUpgrade",r);var y;o<1&&a>=1&&(i.createObjectStore(us.store),(y=i).createObjectStore(Kl.store,{keyPath:Kl.keyPath}),y.createObjectStore(bn.store,{keyPath:bn.keyPath,autoIncrement:!0}).createIndex(bn.userMutationsIndex,bn.userMutationsKeyPath,{unique:!0}),y.createObjectStore(Fr.store),F(i),function(y){y.createObjectStore(pn.store)}(i));let g=Se.resolve();return o<3&&a>=3&&(0!==o&&(function(y){y.deleteObjectStore(hr.store),y.deleteObjectStore(Si.store),y.deleteObjectStore(Ni.store)}(i),F(i)),g=g.next(()=>function(y){const C=y.store(Ni.store),T=new Ni(0,0,xt.min().toTimestamp(),0);return C.put(Ni.key,T)}(d))),o<4&&a>=4&&(0!==o&&(g=g.next(()=>function(y,C){return C.store(bn.store).Lt().next(T=>{y.deleteObjectStore(bn.store),y.createObjectStore(bn.store,{keyPath:bn.keyPath,autoIncrement:!0}).createIndex(bn.userMutationsIndex,bn.userMutationsKeyPath,{unique:!0});const S=C.store(bn.store),N=T.map(O=>S.put(O));return Se.waitFor(N)})}(i,d))),g=g.next(()=>{!function(y){y.createObjectStore(Os.store,{keyPath:Os.keyPath})}(i)})),o<5&&a>=5&&(g=g.next(()=>this.Ce(d))),o<6&&a>=6&&(g=g.next(()=>(function(y){y.createObjectStore(cs.store)}(i),this.Ne(d)))),o<7&&a>=7&&(g=g.next(()=>this.xe(d))),o<8&&a>=8&&(g=g.next(()=>this.ke(i,d))),o<9&&a>=9&&(g=g.next(()=>{(function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")})(i),function(y){const C=y.objectStore(pn.store);C.createIndex(pn.readTimeIndex,pn.readTimeIndexPath,{unique:!1}),C.createIndex(pn.collectionReadTimeIndex,pn.collectionReadTimeIndexPath,{unique:!1})}(r)})),o<10&&a>=10&&(g=g.next(()=>this.$e(d))),o<11&&a>=11&&(g=g.next(()=>{(function(y){y.createObjectStore(qh.store,{keyPath:qh.keyPath})})(i),function(y){y.createObjectStore(Yh.store,{keyPath:Yh.keyPath})}(i)})),g}Ne(i){let r=0;return i.store(pn.store).Kt((o,a)=>{r+=vC(a)}).next(()=>{const o=new cs(r);return i.store(cs.store).put(cs.key,o)})}Ce(i){const r=i.store(Kl.store),o=i.store(bn.store);return r.Lt().next(a=>Se.forEach(a,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.Lt(bn.userMutationsIndex,g).next(y=>Se.forEach(y,C=>{pt(C.userId===d.userId);const T=Kh(this.N,C);return bT(i,d.userId,T).next(()=>{})}))}))}xe(i){const r=i.store(hr.store),o=i.store(pn.store);return i.store(Ni.store).get(Ni.key).next(a=>{const d=[];return o.Kt((g,y)=>{const C=new qt(g),T=[0,Rs(C)];d.push(r.get(T).next(S=>S?Se.resolve():r.put(new hr(0,Rs(C),a.highestListenSequenceNumber))))}).next(()=>Se.waitFor(d))})}ke(i,r){i.createObjectStore(Ql.store,{keyPath:Ql.keyPath});const o=r.store(Ql.store),a=new yC,d=g=>{if(a.add(g)){const y=g.lastSegment(),C=g.popLast();return o.put({collectionId:y,parent:Rs(C)})}};return r.store(pn.store).Kt({qt:!0},(g,y)=>{const C=new qt(g);return d(C.popLast())}).next(()=>r.store(Fr.store).Kt({qt:!0},([g,y,C],T)=>{const S=La(y);return d(S.popLast())}))}$e(i){const r=i.store(Si.store);return r.Kt((o,a)=>{const d=Gp(a),g=mC(this.N,d);return r.put(g)})}}function F(s){s.createObjectStore(hr.store,{keyPath:hr.keyPath}).createIndex(hr.documentTargetsIndex,hr.documentTargetsKeyPath,{unique:!0}),s.createObjectStore(Si.store,{keyPath:Si.keyPath}).createIndex(Si.queryTargetsIndexName,Si.queryTargetsKeyPath,{unique:!0}),s.createObjectStore(Ni.store)}const j="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Z{constructor(i,r,o,a,d,g,y,C,T,S){if(this.allowTabSynchronization=i,this.persistenceKey=r,this.clientId=o,this.Oe=d,this.window=g,this.document=y,this.Fe=T,this.Me=S,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=N=>Promise.resolve(),!Z.Pt())throw new Ne(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new c(this,a),this.We=r+"main",this.N=new _T(C),this.Ge=new co(this.We,11,new k(this.N)),this.ze=new nL(this.referenceDelegate,this.N),this.Ht=new vT,this.He=new b(this.N,this.Ht),this.Je=new yT,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===S&&Er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(_e.FAILED_PRECONDITION,j);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",i=>this.ze.getHighestSequenceNumber(i))}).then(i=>{this.Le=new Ms(i,this.Fe)}).then(()=>{this.Be=!0}).catch(i=>(this.Ge&&this.Ge.close(),Promise.reject(i)))}nn(i){var r=this;return this.Qe=function(){var o=(0,Ee.Z)(function*(a){if(r.started)return i(a)});return function(a){return o.apply(this,arguments)}}(),i(this.isPrimary)}setDatabaseDeletedListener(i){this.Ge.xt(function(){var r=(0,Ee.Z)(function*(o){null===o.newVersion&&(yield i())});return function(o){return r.apply(this,arguments)}}())}setNetworkEnabled(i){var r=this;this.networkEnabled!==i&&(this.networkEnabled=i,this.Oe.enqueueAndForget((0,Ee.Z)(function*(){r.started&&(yield r.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",i=>ee(i).put(new Os(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(i).next(r=>{r||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(i)).next(r=>this.isPrimary&&!r?this.on(i).next(()=>!1):!!r&&this.an(i).next(()=>!0))).catch(i=>{if(Ba(i))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",i),this.isPrimary;if(!this.allowTabSynchronization)throw i;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",i),!1}).then(i=>{this.isPrimary!==i&&this.Oe.enqueueRetryable(()=>this.Qe(i)),this.isPrimary=i})}sn(i){return de(i).get(us.key).next(r=>Se.resolve(this.cn(r)))}un(i){return ee(i).delete(this.clientId)}hn(){var i=this;return(0,Ee.Z)(function*(){if(i.isPrimary&&!i.ln(i.je,18e5)){i.je=Date.now();const r=yield i.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const a=Mi(o,Os.store);return a.Lt().next(d=>{const g=i.fn(d,18e5),y=d.filter(C=>-1===g.indexOf(C));return Se.forEach(y,C=>a.delete(C.clientId)).next(()=>y)})}).catch(()=>[]);if(i.Ye)for(const o of r)i.Ye.removeItem(i.dn(o.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(i){return!!i&&i.ownerId===this.clientId}rn(i){return this.Me?Se.resolve(!0):de(i).get(us.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)){if(this.cn(r)&&this.networkEnabled)return!0;if(!this.cn(r)){if(!r.allowTabSynchronization)throw new Ne(_e.FAILED_PRECONDITION,j);return!1}}return!(!this.networkEnabled||!this.inForeground)||ee(i).Lt().next(o=>void 0===this.fn(o,5e3).find(a=>{if(this.clientId!==a.clientId){const g=!this.inForeground&&a.inForeground,y=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||g&&y)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&Fe("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var i=this;return(0,Ee.Z)(function*(){i.Be=!1,i._n(),i.Ke&&(i.Ke.cancel(),i.Ke=null),i.mn(),i.gn(),yield i.Ge.runTransaction("shutdown","readwrite",[us.store,Os.store],r=>{const o=new mT(r,Ms.T);return i.on(o).next(()=>i.un(o))}),i.Ge.close(),i.yn()})()}fn(i,r){return i.filter(o=>this.ln(o.updateTimeMs,r)&&!this.wn(o.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",i=>ee(i).Lt().next(r=>this.fn(r,18e5).map(o=>o.clientId)))}get started(){return this.Be}getMutationQueue(i){return wT.Yt(i,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(i,r,o){let d;return Fe("IndexedDbPersistence","Starting transaction:",i),this.Ge.runTransaction(i,"readonly"===r?"readonly":"readwrite",ER,g=>(d=new mT(g,this.Le?this.Le.next():Ms.T),"readwrite-primary"===r?this.sn(d).next(y=>!!y||this.rn(d)).next(y=>{if(!y)throw Er(`Failed to obtain primary lease for action '${i}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Ne(_e.FAILED_PRECONDITION,gT);return o(d)}).next(y=>this.an(d).next(()=>y)):this.En(d).next(()=>o(d)))).then(g=>(d.raiseOnCommittedEvent(),g))}En(i){return de(i).get(us.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)&&!this.cn(r)&&!(this.Me||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Ne(_e.FAILED_PRECONDITION,j)})}an(i){const r=new us(this.clientId,this.allowTabSynchronization,Date.now());return de(i).put(us.key,r)}static Pt(){return co.Pt()}on(i){const r=de(i);return r.get(us.key).next(o=>this.cn(o)?(Fe("IndexedDbPersistence","Releasing primary lease."),r.delete(us.key)):Se.resolve())}ln(i,r){const o=Date.now();return!(i<o-r||i>o&&(Er(`Detected an update time that is in the future: ${i} > ${o}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var i;"function"==typeof(null===(i=this.window)||void 0===i?void 0:i.addEventListener)&&(this.Ue=()=>{this._n(),(0,L.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(i){var r;try{const o=null!==(null===(r=this.Ye)||void 0===r?void 0:r.getItem(this.dn(i)));return Fe("IndexedDbPersistence",`Client '${i}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Er("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(i){Er("Failed to set zombie client id.",i)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(i){}}dn(i){return`firestore_zombie_${this.persistenceKey}_${i}`}}function de(s){return Mi(s,us.store)}function ee(s){return Mi(s,Os.store)}function Re(s,i){let r=s.projectId;return s.isDefaultDatabase||(r+="."+s.database),"firestore/"+i+"/"+r+"/"}class De{constructor(i,r){this.progress=i,this.Tn=r}}class Je{constructor(i,r,o){this.He=i,this.In=r,this.Ht=o}An(i,r){return this.In.getAllMutationBatchesAffectingDocumentKey(i,r).next(o=>this.Rn(i,r,o))}Rn(i,r,o){return this.He.getEntry(i,r).next(a=>{for(const d of o)d.applyToLocalView(a);return a})}Pn(i,r){i.forEach((o,a)=>{for(const d of r)d.applyToLocalView(a)})}bn(i,r){return this.He.getEntries(i,r).next(o=>this.vn(i,o).next(()=>o))}vn(i,r){return this.In.getAllMutationBatchesAffectingDocumentKeys(i,r).next(o=>this.Pn(r,o))}getDocumentsMatchingQuery(i,r,o){return Xe.isDocumentKey((a=r).path)&&null===a.collectionGroup&&0===a.filters.length?this.Vn(i,r.path):Xw(r)?this.Sn(i,r,o):this.Dn(i,r,o);var a}Vn(i,r){return this.An(i,new Xe(r)).next(o=>{let a=QI();return o.isFoundDocument()&&(a=a.insert(o.key,o)),a})}Sn(i,r,o){const a=r.collectionGroup;let d=QI();return this.Ht.getCollectionParents(i,a).next(g=>Se.forEach(g,y=>{const C=(T=r,S=y.child(a),new ql(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt));var T,S;return this.Dn(i,C,o).next(T=>{T.forEach((S,N)=>{d=d.insert(S,N)})})}).next(()=>d))}Dn(i,r,o){let a,d;return this.He.getDocumentsMatchingQuery(i,r,o).next(g=>(a=g,this.In.getAllMutationBatchesAffectingQuery(i,r))).next(g=>(d=g,this.Cn(i,d,a).next(y=>{a=y;for(const C of d)for(const T of C.mutations){const S=T.key;let N=a.get(S);null==N&&(N=Nn.newInvalidDocument(S),a=a.insert(S,N)),lv(T,N,C.localWriteTime),N.isFoundDocument()||(a=a.remove(S))}}))).next(()=>(a.forEach((g,y)=>{Ap(r,y)||(a=a.remove(g))}),a))}Cn(i,r,o){let a=nn();for(const g of r)for(const y of g.mutations)y instanceof Fa&&null===o.get(y.key)&&(a=a.add(y.key));let d=o;return this.He.getEntries(i,a).next(g=>(g.forEach((y,C)=>{C.isFoundDocument()&&(d=d.insert(y,C))}),d))}}class dt{constructor(i,r,o,a){this.targetId=i,this.fromCache=r,this.Nn=o,this.xn=a}static kn(i,r){let o=nn(),a=nn();for(const d of r.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:a=a.add(d.doc.key)}return new dt(i,r.fromCache,o,a)}}class Lt{$n(i){this.On=i}getDocumentsMatchingQuery(i,r,o,a){return 0===(d=r).filters.length&&null===d.limit&&null==d.startAt&&null==d.endAt&&(0===d.explicitOrderBy.length||1===d.explicitOrderBy.length&&d.explicitOrderBy[0].field.isKeyField())||o.isEqual(xt.min())?this.Fn(i,r):this.On.bn(i,a).next(d=>{const g=this.Mn(r,d);return(tv(r)||Qw(r))&&this.Ln(r.limitType,g,a,o)?this.Fn(i,r):(DI()<=Sa.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),iv(r)),this.On.getDocumentsMatchingQuery(i,r,o).next(y=>(g.forEach(C=>{y=y.insert(C.key,C)}),y)))});var d}Mn(i,r){let o=new tr(WI(i));return r.forEach((a,d)=>{Ap(i,d)&&(o=o.add(d))}),o}Ln(i,r,o,a){if(o.size!==r.size)return!0;const d="F"===i?r.last():r.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(a)>0)}Fn(i,r){return DI()<=Sa.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",iv(r)),this.On.getDocumentsMatchingQuery(i,r,xt.min())}}class Tr{constructor(i,r,o,a){this.persistence=i,this.Bn=r,this.N=a,this.Un=new Pr(Wt),this.qn=new m(d=>Tc(d),Xy),this.Kn=xt.min(),this.In=i.getMutationQueue(o),this.jn=i.getRemoteDocumentCache(),this.ze=i.getTargetCache(),this.Qn=new Je(this.jn,this.In,this.persistence.getIndexManager()),this.Je=i.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(i){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>i.collect(r,this.Un))}}function ds(s,i,r,o){return new Tr(s,i,r,o)}function ef(s,i){return ru.apply(this,arguments)}function ru(){return(ru=(0,Ee.Z)(function*(s,i){const r=He(s);let o=r.In,a=r.Qn;const d=yield r.persistence.runTransaction("Handle user change","readonly",g=>{let y;return r.In.getAllMutationBatches(g).next(C=>(y=C,o=r.persistence.getMutationQueue(i),a=new Je(r.jn,o,r.persistence.getIndexManager()),o.getAllMutationBatches(g))).next(C=>{const T=[],S=[];let N=nn();for(const O of y){T.push(O.batchId);for(const V of O.mutations)N=N.add(V.key)}for(const O of C){S.push(O.batchId);for(const V of O.mutations)N=N.add(V.key)}return a.bn(g,N).next(O=>({Wn:O,removedBatchIds:T,addedBatchIds:S}))})});return r.In=o,r.Qn=a,r.Bn.$n(r.Qn),d})).apply(this,arguments)}function tf(s,i){const r=He(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const a=i.batch.keys(),d=r.jn.newChangeBuffer({trackRemovals:!0});return function(g,y,C,T){const S=C.batch,N=S.keys();let O=Se.resolve();return N.forEach(V=>{O=O.next(()=>T.getEntry(y,V)).next(Y=>{const le=C.docVersions.get(V);pt(null!==le),Y.version.compareTo(le)<0&&(S.applyToRemoteDocument(Y,C),Y.isValidDocument()&&T.addEntry(Y,C.commitVersion))})}),O.next(()=>g.In.removeMutationBatch(y,S))}(r,o,i,d).next(()=>d.apply(o)).next(()=>r.In.performConsistencyCheck(o)).next(()=>r.Qn.bn(o,a))})}function kc(s){const i=He(s);return i.persistence.runTransaction("Get last remote snapshot version","readonly",r=>i.ze.getLastRemoteSnapshotVersion(r))}function bC(s,i){const r=He(s),o=i.snapshotVersion;let a=r.Un;return r.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=r.jn.newChangeBuffer({trackRemovals:!0});a=r.Un;const y=[];i.targetChanges.forEach((T,S)=>{const N=a.get(S);if(!N)return;y.push(r.ze.removeMatchingKeys(d,T.removedDocuments,S).next(()=>r.ze.addMatchingKeys(d,T.addedDocuments,S)));const O=T.resumeToken;if(O.approximateByteSize()>0){const V=N.withResumeToken(O,o).withSequenceNumber(d.currentSequenceNumber);a=a.insert(S,V),Y=N,Te=T,pt((le=V).resumeToken.approximateByteSize()>0),(0===Y.resumeToken.approximateByteSize()||le.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=3e8||Te.addedDocuments.size+Te.modifiedDocuments.size+Te.removedDocuments.size>0)&&y.push(r.ze.updateTargetData(d,V))}var Y,le,Te});let C=ao();if(i.documentUpdates.forEach((T,S)=>{i.resolvedLimboDocuments.has(T)&&y.push(r.persistence.referenceDelegate.updateLimboDocument(d,T))}),y.push(wv(d,g,i.documentUpdates,o,void 0).next(T=>{C=T})),!o.isEqual(xt.min())){const T=r.ze.getLastRemoteSnapshotVersion(d).next(S=>r.ze.setTargetsMetadata(d,d.currentSequenceNumber,o));y.push(T)}return Se.waitFor(y).next(()=>g.apply(d)).next(()=>r.Qn.vn(d,C)).next(()=>C)}).then(d=>(r.Un=a,d))}function wv(s,i,r,o,a){let d=nn();return r.forEach(g=>d=d.add(g)),i.getEntries(s,d).next(g=>{let y=ao();return r.forEach((C,T)=>{const S=g.get(C),N=(null==a?void 0:a.get(C))||o;T.isNoDocument()&&T.version.isEqual(xt.min())?(i.removeEntry(C,N),y=y.insert(C,T)):!S.isValidDocument()||T.version.compareTo(S.version)>0||0===T.version.compareTo(S.version)&&S.hasPendingWrites?(i.addEntry(T,N),y=y.insert(C,T)):Fe("LocalStore","Ignoring outdated watch update for ",C,". Current version:",S.version," Watch version:",T.version)}),y})}function wC(s,i){const r=He(s);return r.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===i&&(i=-1),r.In.getNextMutationBatchAfterBatchId(o,i)))}function iu(s,i){const r=He(s);return r.persistence.runTransaction("Allocate target","readwrite",o=>{let a;return r.ze.getTargetData(o,i).next(d=>d?(a=d,Se.resolve(a)):r.ze.allocateTargetId(o).next(g=>(a=new Xl(i,g,0,o.currentSequenceNumber),r.ze.addTargetData(o,a).next(()=>a))))}).then(o=>{const a=r.Un.get(o.targetId);return(null===a||o.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Un=r.Un.insert(o.targetId,o),r.qn.set(i,o.targetId)),o})}function su(s,i,r){return SR.apply(this,arguments)}function SR(){return(SR=(0,Ee.Z)(function*(s,i,r){const o=He(s),a=o.Un.get(i),d=r?"readwrite":"readwrite-primary";try{r||(yield o.persistence.runTransaction("Release target",d,g=>o.persistence.referenceDelegate.removeTarget(g,a)))}catch(g){if(!Ba(g))throw g;Fe("LocalStore",`Failed to update sequence numbers for target ${i}: ${g}`)}o.Un=o.Un.remove(i),o.qn.delete(a.target)})).apply(this,arguments)}function DT(s,i,r){const o=He(s);let a=xt.min(),d=nn();return o.persistence.runTransaction("Execute query","readonly",g=>function(y,C,T){const S=He(y),N=S.qn.get(T);return void 0!==N?Se.resolve(S.Un.get(N)):S.ze.getTargetData(C,T)}(o,g,ls(i)).next(y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,o.ze.getMatchingKeysForTargetId(g,y.targetId).next(C=>{d=C})}).next(()=>o.Bn.getDocumentsMatchingQuery(g,i,r?a:xt.min(),r?d:nn())).next(y=>({documents:y,Gn:d})))}function iL(s,i){const r=He(s),o=He(r.ze),a=r.Un.get(i);return a?Promise.resolve(a.target):r.persistence.runTransaction("Get target data","readonly",d=>o.Et(d,i).next(g=>g?g.target:null))}function sL(s){const i=He(s);return i.persistence.runTransaction("Get new document changes","readonly",r=>function(o,a,d){const g=He(o);let y=ao(),C=eu(d);const T=A(a),S=IDBKeyRange.lowerBound(C,!0);return T.Kt({index:pn.readTimeIndex,range:S},(N,O)=>{const V=ho(g.N,O);y=y.insert(V.key,V),C=O.readTime}).next(()=>({Tn:y,readTime:Up(C)}))}(i.jn,r,i.Kn)).then(({Tn:r,readTime:o})=>(i.Kn=o,r))}function NR(){return(NR=(0,Ee.Z)(function*(s){const i=He(s);return i.persistence.runTransaction("Synchronize last document change read time","readonly",r=>function(o){const a=A(o);let d=xt.min();return a.Kt({index:pn.readTimeIndex,reverse:!0},(g,y,C)=>{y.readTime&&(d=Up(y.readTime)),C.done()}).next(()=>d)}(r)).then(r=>{i.Kn=r})})).apply(this,arguments)}function MR(){return(MR=(0,Ee.Z)(function*(s,i,r,o){const a=He(s);let d=nn(),g=ao(),y=JI();for(const S of r){const N=i.zn(S.metadata.name);S.document&&(d=d.add(N)),g=g.insert(N,i.Hn(S)),y=y.insert(N,i.Jn(S.metadata.readTime))}const C=a.jn.newChangeBuffer({trackRemovals:!0}),T=yield iu(a,(S=o,ls(jh(qt.fromString(`__bundle__/docs/${S}`)))));var S;return a.persistence.runTransaction("Apply bundle documents","readwrite",S=>wv(S,C,g,xt.min(),y).next(N=>(C.apply(S),N)).next(N=>a.ze.removeMatchingKeysForTargetId(S,T.targetId).next(()=>a.ze.addMatchingKeys(S,d,T.targetId)).next(()=>a.Qn.vn(S,N)).next(()=>N)))})).apply(this,arguments)}function WU(s,i){return RR.apply(this,arguments)}function RR(){return(RR=(0,Ee.Z)(function*(s,i,r=nn()){const o=yield iu(s,ls(yv(i.bundledQuery))),a=He(s);return a.persistence.runTransaction("Save named query","readwrite",d=>{const g=zr(i.readTime);if(o.snapshotVersion.compareTo(g)>=0)return a.Je.saveNamedQuery(d,i);const y=o.withResumeToken(Dr.EMPTY_BYTE_STRING,g);return a.Un=a.Un.insert(y.targetId,y),a.ze.updateTargetData(d,y).next(()=>a.ze.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>a.ze.addMatchingKeys(d,r,o.targetId)).next(()=>a.Je.saveNamedQuery(d,i))})})).apply(this,arguments)}class qU{constructor(i){this.N=i,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(i,r){return Se.resolve(this.Yn.get(r))}saveBundleMetadata(i,r){var o;return this.Yn.set(r.id,{id:(o=r).id,version:o.version,createTime:zr(o.createTime)}),Se.resolve()}getNamedQuery(i,r){return Se.resolve(this.Xn.get(r))}saveNamedQuery(i,r){return this.Xn.set(r.name,{name:(o=r).name,query:yv(o.bundledQuery),readTime:zr(o.readTime)}),Se.resolve();var o}}class OR{constructor(){this.Zn=new tr(mi.ts),this.es=new tr(mi.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(i,r){const o=new mi(i,r);this.Zn=this.Zn.add(o),this.es=this.es.add(o)}ss(i,r){i.forEach(o=>this.addReference(o,r))}removeReference(i,r){this.rs(new mi(i,r))}os(i,r){i.forEach(o=>this.removeReference(o,r))}cs(i){const r=new Xe(new qt([])),o=new mi(r,i),a=new mi(r,i+1),d=[];return this.es.forEachInRange([o,a],g=>{this.rs(g),d.push(g.key)}),d}us(){this.Zn.forEach(i=>this.rs(i))}rs(i){this.Zn=this.Zn.delete(i),this.es=this.es.delete(i)}hs(i){const r=new Xe(new qt([])),o=new mi(r,i),a=new mi(r,i+1);let d=nn();return this.es.forEachInRange([o,a],g=>{d=d.add(g.key)}),d}containsKey(i){const r=new mi(i,0),o=this.Zn.firstAfterOrEqual(r);return null!==o&&i.isEqual(o.key)}}class mi{constructor(i,r){this.key=i,this.ls=r}static ts(i,r){return Xe.comparator(i.key,r.key)||Wt(i.ls,r.ls)}static ns(i,r){return Wt(i.ls,r.ls)||Xe.comparator(i.key,r.key)}}class YU{constructor(i,r){this.Ht=i,this.referenceDelegate=r,this.In=[],this.fs=1,this.ds=new tr(mi.ts)}checkEmpty(i){return Se.resolve(0===this.In.length)}addMutationBatch(i,r,o,a){const d=this.fs;this.fs++;const g=new _v(d,r,o,a);this.In.push(g);for(const y of a)this.ds=this.ds.add(new mi(y.key,d)),this.Ht.addToCollectionParentIndex(i,y.key.path.popLast());return Se.resolve(g)}lookupMutationBatch(i,r){return Se.resolve(this.ws(r))}getNextMutationBatchAfterBatchId(i,r){const a=this._s(r+1),d=a<0?0:a;return Se.resolve(this.In.length>d?this.In[d]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(i){return Se.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(i,r){const o=new mi(r,0),a=new mi(r,Number.POSITIVE_INFINITY),d=[];return this.ds.forEachInRange([o,a],g=>{const y=this.ws(g.ls);d.push(y)}),Se.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(i,r){let o=new tr(Wt);return r.forEach(a=>{const d=new mi(a,0),g=new mi(a,Number.POSITIVE_INFINITY);this.ds.forEachInRange([d,g],y=>{o=o.add(y.ls)})}),Se.resolve(this.gs(o))}getAllMutationBatchesAffectingQuery(i,r){const o=r.path,a=o.length+1;let d=o;Xe.isDocumentKey(d)||(d=d.child(""));const g=new mi(new Xe(d),0);let y=new tr(Wt);return this.ds.forEachWhile(C=>{const T=C.key.path;return!!o.isPrefixOf(T)&&(T.length===a&&(y=y.add(C.ls)),!0)},g),Se.resolve(this.gs(y))}gs(i){const r=[];return i.forEach(o=>{const a=this.ws(o);null!==a&&r.push(a)}),r}removeMutationBatch(i,r){pt(0===this.ys(r.batchId,"removed")),this.In.shift();let o=this.ds;return Se.forEach(r.mutations,a=>{const d=new mi(a.key,r.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(i,a.key)}).next(()=>{this.ds=o})}te(i){}containsKey(i,r){const o=new mi(r,0),a=this.ds.firstAfterOrEqual(o);return Se.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(i){return Se.resolve()}ys(i,r){return this._s(i)}_s(i){return 0===this.In.length?0:i-this.In[0].batchId}ws(i){const r=this._s(i);return r<0||r>=this.In.length?null:this.In[r]}}class zU{constructor(i,r){this.Ht=i,this.ps=r,this.docs=new Pr(Xe.comparator),this.size=0}addEntry(i,r,o){const a=r.key,d=this.docs.get(a),g=d?d.size:0,y=this.ps(r);return this.docs=this.docs.insert(a,{document:r.clone(),size:y,readTime:o}),this.size+=y-g,this.Ht.addToCollectionParentIndex(i,a.path.popLast())}removeEntry(i){const r=this.docs.get(i);r&&(this.docs=this.docs.remove(i),this.size-=r.size)}getEntry(i,r){const o=this.docs.get(r);return Se.resolve(o?o.document.clone():Nn.newInvalidDocument(r))}getEntries(i,r){let o=ao();return r.forEach(a=>{const d=this.docs.get(a);o=o.insert(a,d?d.document.clone():Nn.newInvalidDocument(a))}),Se.resolve(o)}getDocumentsMatchingQuery(i,r,o){let a=ao();const d=new Xe(r.path.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:y,value:{document:C,readTime:T}}=g.getNext();if(!r.path.isPrefixOf(y.path))break;T.compareTo(o)<=0||Ap(r,C)&&(a=a.insert(C.key,C.clone()))}return Se.resolve(a)}Es(i,r){return Se.forEach(this.docs,o=>r(o))}newChangeBuffer(i){return new ZU(this)}getSize(i){return Se.resolve(this.size)}}class ZU extends _{constructor(i){super(),this.Se=i}applyChanges(i){const r=[];return this.changes.forEach((o,a)=>{a.document.isValidDocument()?r.push(this.Se.addEntry(i,a.document,this.getReadTime(o))):this.Se.removeEntry(o)}),Se.waitFor(r)}getFromCache(i,r){return this.Se.getEntry(i,r)}getAllFromCache(i,r){return this.Se.getEntries(i,r)}}class KU{constructor(i){this.persistence=i,this.Ts=new m(r=>Tc(r),Xy),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.Is=0,this.As=new OR,this.targetCount=0,this.Rs=Jh.se()}forEachTarget(i,r){return this.Ts.forEach((o,a)=>r(a)),Se.resolve()}getLastRemoteSnapshotVersion(i){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(i){return Se.resolve(this.Is)}allocateTargetId(i){return this.highestTargetId=this.Rs.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(i,r,o){return o&&(this.lastRemoteSnapshotVersion=o),r>this.Is&&(this.Is=r),Se.resolve()}ae(i){this.Ts.set(i.target,i);const r=i.targetId;r>this.highestTargetId&&(this.Rs=new Jh(r),this.highestTargetId=r),i.sequenceNumber>this.Is&&(this.Is=i.sequenceNumber)}addTargetData(i,r){return this.ae(r),this.targetCount+=1,Se.resolve()}updateTargetData(i,r){return this.ae(r),Se.resolve()}removeTargetData(i,r){return this.Ts.delete(r.target),this.As.cs(r.targetId),this.targetCount-=1,Se.resolve()}removeTargets(i,r,o){let a=0;const d=[];return this.Ts.forEach((g,y)=>{y.sequenceNumber<=r&&null===o.get(y.targetId)&&(this.Ts.delete(g),d.push(this.removeMatchingKeysForTargetId(i,y.targetId)),a++)}),Se.waitFor(d).next(()=>a)}getTargetCount(i){return Se.resolve(this.targetCount)}getTargetData(i,r){const o=this.Ts.get(r)||null;return Se.resolve(o)}addMatchingKeys(i,r,o){return this.As.ss(r,o),Se.resolve()}removeMatchingKeys(i,r,o){this.As.os(r,o);const a=this.persistence.referenceDelegate,d=[];return a&&r.forEach(g=>{d.push(a.markPotentiallyOrphaned(i,g))}),Se.waitFor(d)}removeMatchingKeysForTargetId(i,r){return this.As.cs(r),Se.resolve()}getMatchingKeysForTargetId(i,r){const o=this.As.hs(r);return Se.resolve(o)}containsKey(i,r){return Se.resolve(this.As.containsKey(r))}}class QU{constructor(i,r){this.Ps={},this.Le=new Ms(0),this.Be=!1,this.Be=!0,this.referenceDelegate=i(this),this.ze=new KU(this),this.Ht=new xR,this.He=new zU(this.Ht,o=>this.referenceDelegate.bs(o)),this.N=new _T(r),this.Je=new qU(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(i){let r=this.Ps[i.toKey()];return r||(r=new YU(this.Ht,this.referenceDelegate),this.Ps[i.toKey()]=r),r}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(i,r,o){Fe("MemoryPersistence","Starting transaction:",i);const a=new JU(this.Le.next());return this.referenceDelegate.vs(),o(a).next(d=>this.referenceDelegate.Vs(a).next(()=>d)).toPromise().then(d=>(a.raiseOnCommittedEvent(),d))}Ss(i,r){return Se.or(Object.values(this.Ps).map(o=>()=>o.containsKey(i,r)))}}class JU extends gC{constructor(i){super(),this.currentSequenceNumber=i}}class kR{constructor(i){this.persistence=i,this.Ds=new OR,this.Cs=null}static Ns(i){return new kR(i)}get xs(){if(this.Cs)return this.Cs;throw tt()}addReference(i,r,o){return this.Ds.addReference(o,r),this.xs.delete(o.toString()),Se.resolve()}removeReference(i,r,o){return this.Ds.removeReference(o,r),this.xs.add(o.toString()),Se.resolve()}markPotentiallyOrphaned(i,r){return this.xs.add(r.toString()),Se.resolve()}removeTarget(i,r){this.Ds.cs(r.targetId).forEach(a=>this.xs.add(a.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(i,r.targetId).next(a=>{a.forEach(d=>this.xs.add(d.toString()))}).next(()=>o.removeTargetData(i,r))}vs(){this.Cs=new Set}Vs(i){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.xs,o=>{const a=Xe.fromPath(o);return this.ks(i,a).next(d=>{d||r.removeEntry(a)})}).next(()=>(this.Cs=null,r.apply(i)))}updateLimboDocument(i,r){return this.ks(i,r).next(o=>{o?this.xs.delete(r.toString()):this.xs.add(r.toString())})}bs(i){return 0}ks(i,r){return Se.or([()=>Se.resolve(this.Ds.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(i,r),()=>this.persistence.Ss(i,r)])}}function oL(s,i){return`firestore_clients_${s}_${i}`}function aL(s,i,r){let o=`firestore_mutations_${s}_${r}`;return i.isAuthenticated()&&(o+=`_${i.uid}`),o}function PR(s,i){return`firestore_targets_${s}_${i}`}class xT{constructor(i,r,o,a){this.user=i,this.batchId=r,this.state=o,this.error=a}static $s(i,r,o){const a=JSON.parse(o);let d,g="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return g&&a.error&&(g="string"==typeof a.error.message&&"string"==typeof a.error.code,g&&(d=new Ne(a.error.code,a.error.message))),g?new xT(i,r,a.state,d):(Er("SharedClientState",`Failed to parse mutation state for ID '${r}': ${o}`),null)}Os(){const i={state:this.state,updateTimeMs:Date.now()};return this.error&&(i.error={code:this.error.code,message:this.error.message}),JSON.stringify(i)}}class CC{constructor(i,r,o){this.targetId=i,this.state=r,this.error=o}static $s(i,r){const o=JSON.parse(r);let a,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(a=new Ne(o.error.code,o.error.message))),d?new CC(i,o.state,a):(Er("SharedClientState",`Failed to parse target state for ID '${i}': ${r}`),null)}Os(){const i={state:this.state,updateTimeMs:Date.now()};return this.error&&(i.error={code:this.error.code,message:this.error.message}),JSON.stringify(i)}}class IT{constructor(i,r){this.clientId=i,this.activeTargetIds=r}static $s(i,r){const o=JSON.parse(r);let a="object"==typeof o&&o.activeTargetIds instanceof Array,d=lC();for(let g=0;a&&g<o.activeTargetIds.length;++g)a=KM(o.activeTargetIds[g]),d=d.add(o.activeTargetIds[g]);return a?new IT(i,d):(Er("SharedClientState",`Failed to parse client data for instance '${i}': ${r}`),null)}}class FR{constructor(i,r){this.clientId=i,this.onlineState=r}static $s(i){const r=JSON.parse(i);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new FR(r.clientId,r.onlineState):(Er("SharedClientState",`Failed to parse online state: ${i}`),null)}}class LR{constructor(){this.activeTargetIds=lC()}Fs(i){this.activeTargetIds=this.activeTargetIds.add(i)}Ms(i){this.activeTargetIds=this.activeTargetIds.delete(i)}Os(){const i={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(i)}}class VR{constructor(i,r,o,a,d){this.window=i,this.Oe=r,this.persistenceKey=o,this.Ls=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Pr(Wt),this.started=!1,this.Ks=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.js=oL(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new LR),this.Ws=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(y){return`firestore_bundle_loaded_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static Pt(i){return!(!i||!i.localStorage)}start(){var i=this;return(0,Ee.Z)(function*(){const r=yield i.syncEngine.pn();for(const a of r){if(a===i.Ls)continue;const d=i.getItem(oL(i.persistenceKey,a));if(d){const g=IT.$s(a,d);g&&(i.qs=i.qs.insert(g.clientId,g))}}i.Ys();const o=i.storage.getItem(i.Hs);if(o){const a=i.Xs(o);a&&i.Zs(a)}for(const a of i.Ks)i.Us(a);i.Ks=[],i.window.addEventListener("pagehide",()=>i.shutdown()),i.started=!0})()}writeSequenceNumber(i){this.setItem(this.Qs,JSON.stringify(i))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(i){let r=!1;return this.qs.forEach((o,a)=>{a.activeTargetIds.has(i)&&(r=!0)}),r}addPendingMutation(i){this.ei(i,"pending")}updateMutationState(i,r,o){this.ei(i,r,o),this.ni(i)}addLocalQueryTarget(i){let r="not-current";if(this.isActiveQueryTarget(i)){const o=this.storage.getItem(PR(this.persistenceKey,i));if(o){const a=CC.$s(i,o);a&&(r=a.state)}}return this.si.Fs(i),this.Ys(),r}removeLocalQueryTarget(i){this.si.Ms(i),this.Ys()}isLocalQueryTarget(i){return this.si.activeTargetIds.has(i)}clearQueryState(i){this.removeItem(PR(this.persistenceKey,i))}updateQueryState(i,r,o){this.ii(i,r,o)}handleUserChange(i,r,o){r.forEach(a=>{this.ni(a)}),this.currentUser=i,o.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(i){this.ri(i)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(i){const r=this.storage.getItem(i);return Fe("SharedClientState","READ",i,r),r}setItem(i,r){Fe("SharedClientState","SET",i,r),this.storage.setItem(i,r)}removeItem(i){Fe("SharedClientState","REMOVE",i),this.storage.removeItem(i)}Us(i){var r=this;const o=i;if(o.storageArea===this.storage){if(Fe("SharedClientState","EVENT",o.key,o.newValue),o.key===this.js)return void Er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Ee.Z)(function*(){if(r.started){if(null!==o.key)if(r.Ws.test(o.key)){if(null==o.newValue){const a=r.ai(o.key);return r.ci(a,null)}{const a=r.ui(o.key,o.newValue);if(a)return r.ci(a.clientId,a)}}else if(r.Gs.test(o.key)){if(null!==o.newValue){const a=r.hi(o.key,o.newValue);if(a)return r.li(a)}}else if(r.zs.test(o.key)){if(null!==o.newValue){const a=r.fi(o.key,o.newValue);if(a)return r.di(a)}}else if(o.key===r.Hs){if(null!==o.newValue){const a=r.Xs(o.newValue);if(a)return r.Zs(a)}}else if(o.key===r.Qs){const a=function(d){let g=Ms.T;if(null!=d)try{const y=JSON.parse(d);pt("number"==typeof y),g=y}catch(y){Er("SharedClientState","Failed to read sequence number from WebStorage",y)}return g}(o.newValue);a!==Ms.T&&r.sequenceNumberHandler(a)}else if(o.key===r.Js)return r.syncEngine.wi()}else r.Ks.push(o)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(i,r,o){const a=new xT(this.currentUser,i,r,o),d=aL(this.persistenceKey,this.currentUser,i);this.setItem(d,a.Os())}ni(i){const r=aL(this.persistenceKey,this.currentUser,i);this.removeItem(r)}ri(i){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:i}))}ii(i,r,o){const a=PR(this.persistenceKey,i),d=new CC(i,r,o);this.setItem(a,d.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(i){const r=this.Ws.exec(i);return r?r[1]:null}ui(i,r){const o=this.ai(i);return IT.$s(o,r)}hi(i,r){const o=this.Gs.exec(i),a=Number(o[1]);return xT.$s(new hi(void 0!==o[2]?o[2]:null),a,r)}fi(i,r){const o=this.zs.exec(i),a=Number(o[1]);return CC.$s(a,r)}Xs(i){return FR.$s(i)}li(i){var r=this;return(0,Ee.Z)(function*(){if(i.user.uid===r.currentUser.uid)return r.syncEngine._i(i.batchId,i.state,i.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${i.user.uid}`)})()}di(i){return this.syncEngine.mi(i.targetId,i.state,i.error)}ci(i,r){const o=r?this.qs.insert(i,r):this.qs.remove(i),a=this.ti(this.qs),d=this.ti(o),g=[],y=[];return d.forEach(C=>{a.has(C)||g.push(C)}),a.forEach(C=>{d.has(C)||y.push(C)}),this.syncEngine.gi(g,y).then(()=>{this.qs=o})}Zs(i){this.qs.get(i.clientId)&&this.onlineStateHandler(i.onlineState)}ti(i){let r=lC();return i.forEach((o,a)=>{r=r.unionWith(a.activeTargetIds)}),r}}class lL{constructor(){this.yi=new LR,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(i){}updateMutationState(i,r,o){}addLocalQueryTarget(i){return this.yi.Fs(i),this.pi[i]||"not-current"}updateQueryState(i,r,o){this.pi[i]=r}removeLocalQueryTarget(i){this.yi.Ms(i)}isLocalQueryTarget(i){return this.yi.activeTargetIds.has(i)}clearQueryState(i){delete this.pi[i]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(i){return this.yi.activeTargetIds.has(i)}start(){return this.yi=new LR,Promise.resolve()}handleUserChange(i,r,o){}setOnlineState(i){}shutdown(){}writeSequenceNumber(i){}notifyBundleLoaded(){}}class XU{Ei(i){}shutdown(){}}class uL{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.Pi=[],this.bi()}Ei(i){this.Pi.push(i)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}bi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const i of this.Pi)i(0)}Ri(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const i of this.Pi)i(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const eG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class tG{constructor(i){this.vi=i.vi,this.Vi=i.Vi}Si(i){this.Di=i}Ci(i){this.Ni=i}onMessage(i){this.xi=i}close(){this.Vi()}send(i){this.vi(i)}ki(){this.Di()}$i(i){this.Ni(i)}Oi(i){this.xi(i)}}class nG extends class{constructor(i){this.databaseInfo=i,this.databaseId=i.databaseId,this.Fi=(i.ssl?"https":"http")+"://"+i.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(i,r,o,a){const d=this.Bi(i,r);Fe("RestConnection","Sending: ",d,o);const g={};return this.Ui(g,a),this.qi(i,d,g,o).then(y=>(Fe("RestConnection","Received: ",y),y),y=>{throw $y("RestConnection",`${i} failed with error: `,y,"url: ",d,"request:",o),y})}Ki(i,r,o,a){return this.Li(i,r,o,a)}Ui(i,r){if(i["X-Goog-Api-Client"]="gl-js/ fire/"+Ep,i["Content-Type"]="text/plain",this.databaseInfo.appId&&(i["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(const o in r.authHeaders)r.authHeaders.hasOwnProperty(o)&&(i[o]=r.authHeaders[o])}Bi(i,r){return`${this.Fi}/v1/${r}:${eG[i]}`}}{constructor(i){super(i),this.forceLongPolling=i.forceLongPolling,this.autoDetectLongPolling=i.autoDetectLongPolling,this.useFetchStreams=i.useFetchStreams}qi(i,r,o,a){return new Promise((d,g)=>{const y=new HM;y.listenOnce(CI.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Cp.NO_ERROR:const T=y.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(T)),d(T);break;case Cp.TIMEOUT:Fe("Connection",'RPC "'+i+'" timed out'),g(new Ne(_e.DEADLINE_EXCEEDED,"Request time out"));break;case Cp.HTTP_ERROR:const S=y.getStatus();if(Fe("Connection",'RPC "'+i+'" failed with status:',S,"response text:",y.getResponseText()),S>0){const N=y.getResponseJson().error;if(N&&N.status&&N.message){const O=function(V){const Y=V.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(Y)>=0?Y:_e.UNKNOWN}(N.status);g(new Ne(O,N.message))}else g(new Ne(_e.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Ne(_e.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Fe("Connection",'RPC "'+i+'" completed.')}});const C=JSON.stringify(a);y.send(r,"POST",C,o,15)})}ji(i,r){const o=[this.Fi,"/","google.firestore.v1.Firestore","/",i,"/channel"],a=new jy,d=xh(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new Zw({})),this.Ui(g.initMessageHeaders,r),(0,L.uI)()||(0,L.b$)()||(0,L.d)()||(0,L.w1)()||(0,L.Mn)()||(0,L.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const y=o.join("");Fe("Connection","Creating WebChannel: "+y,g);const C=a.createWebChannel(y,g);let T=!1,S=!1;const N=new tG({vi:V=>{S?Fe("Connection","Not sending because WebChannel is closed:",V):(T||(Fe("Connection","Opening WebChannel transport."),C.open(),T=!0),Fe("Connection","WebChannel sending:",V),C.send(V))},Vi:()=>C.close()}),O=(V,Y,le)=>{V.listen(Y,Te=>{try{le(Te)}catch(ke){setTimeout(()=>{throw ke},0)}})};return O(C,Hy.EventType.OPEN,()=>{S||Fe("Connection","WebChannel transport opened.")}),O(C,Hy.EventType.CLOSE,()=>{S||(S=!0,Fe("Connection","WebChannel transport closed"),N.$i())}),O(C,Hy.EventType.ERROR,V=>{S||(S=!0,$y("Connection","WebChannel transport errored:",V),N.$i(new Ne(_e.UNAVAILABLE,"The operation could not be completed")))}),O(C,Hy.EventType.MESSAGE,V=>{var Y;if(!S){const le=V.data[0];pt(!!le);const Te=le,ke=Te.error||(null===(Y=Te[0])||void 0===Y?void 0:Y.error);if(ke){Fe("Connection","WebChannel received error:",ke);const Ue=ke.status;let nt=function(rn){const Gc=dr[rn];if(void 0!==Gc)return Ir(Gc)}(Ue),Ot=ke.message;void 0===nt&&(nt=_e.INTERNAL,Ot="Unknown error status: "+Ue+" with message "+ke.message),S=!0,N.$i(new Ne(nt,Ot)),C.close()}else Fe("Connection","WebChannel received:",le),N.Oi(le)}}),O(d,EI.STAT_EVENT,V=>{V.stat===zw_PROXY?Fe("Connection","Detected buffering proxy"):V.stat===zw_NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.ki()},0),N}}function cL(){return"undefined"!=typeof window?window:null}function TT(){return"undefined"!=typeof document?document:null}function EC(s){return new gR(s,!0)}class BR{constructor(i,r,o=1e3,a=1.5,d=6e4){this.Oe=i,this.timerId=r,this.Qi=o,this.Wi=a,this.Gi=d,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(i){this.cancel();const r=Math.floor(this.zi+this.Zi()),o=Math.max(0,Date.now()-this.Ji),a=Math.max(0,r-o);a>0&&Fe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.zi} ms, delay with jitter: ${r} ms, last attempt: ${o} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,a,()=>(this.Ji=Date.now(),i())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class dL{constructor(i,r,o,a,d,g){this.Oe=i,this.er=o,this.nr=a,this.credentialsProvider=d,this.listener=g,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new BR(i,r)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var i=this;return(0,Ee.Z)(function*(){i.ar()&&(yield i.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(i){this._r(),this.stream.send(i)}dr(){var i=this;return(0,Ee.Z)(function*(){if(i.cr())return i.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(i,r){var o=this;return(0,Ee.Z)(function*(){o._r(),o.rr.cancel(),o.sr++,3!==i?o.rr.reset():r&&r.code===_e.RESOURCE_EXHAUSTED?(Er(r.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),o.rr.Yi()):r&&r.code===_e.UNAUTHENTICATED&&o.credentialsProvider.invalidateToken(),null!==o.stream&&(o.mr(),o.stream.close(),o.stream=null),o.state=i,yield o.listener.Ci(r)})()}mr(){}auth(){this.state=1;const i=this.gr(this.sr),r=this.sr;this.credentialsProvider.getToken().then(o=>{this.sr===r&&this.yr(o)},o=>{i(()=>{const a=new Ne(_e.UNKNOWN,"Fetching auth token failed: "+o.message);return this.pr(a)})})}yr(i){const r=this.gr(this.sr);this.stream=this.Er(i),this.stream.Si(()=>{r(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(o=>{r(()=>this.pr(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}ur(){var i=this;this.state=4,this.rr.Xi((0,Ee.Z)(function*(){i.state=0,i.start()}))}pr(i){return Fe("PersistentStream",`close with error: ${i}`),this.stream=null,this.close(3,i)}gr(i){return r=>{this.Oe.enqueueAndForget(()=>this.sr===i?r():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rG extends dL{constructor(i,r,o,a,d){super(i,"listen_stream_connection_backoff","listen_stream_idle",r,o,d),this.N=a}Er(i){return this.nr.ji("Listen",i)}onMessage(i){this.rr.reset();const r=function(s,i){let r;if("targetChange"in i){const o="NO_CHANGE"===(C=i.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===C?1:"REMOVE"===C?2:"CURRENT"===C?3:"RESET"===C?4:tt(),a=i.targetChange.targetIds||[],d=function(C,T){return C.D?(pt(void 0===T||"string"==typeof T),Dr.fromBase64String(T||"")):(pt(void 0===T||T instanceof Uint8Array),Dr.fromUint8Array(T||new Uint8Array))}(s,i.targetChange.resumeToken),g=i.targetChange.cause,y=g&&function(C){const T=void 0===C.code?_e.UNKNOWN:Ir(C.code);return new Ne(T,C.message||"")}(g);r=new dR(o,a,d,y||null)}else if("documentChange"in i){const o=i.documentChange,a=ji(s,o.document.name),d=zr(o.document.updateTime),g=new fi({mapValue:{fields:o.document.fields}}),y=Nn.newFoundDocument(a,d,g);r=new hv(o.targetIds||[],o.removedTargetIds||[],y.key,y)}else if("documentDelete"in i){const o=i.documentDelete,a=ji(s,o.document),d=o.readTime?zr(o.readTime):xt.min(),g=Nn.newNoDocument(a,d);r=new hv([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in i){const o=i.documentRemove,a=ji(s,o.document);r=new hv([],o.removedTargetIds||[],a,null)}else{if(!("filter"in i))return tt();{const o=i.filter,d=new cv(o.count||0);r=new cR(o.targetId,d)}}var C;return r}(this.N,i),o=function(a){if(!("targetChange"in a))return xt.min();const d=a.targetChange;return d.targetIds&&d.targetIds.length?xt.min():d.readTime?zr(d.readTime):xt.min()}(i);return this.listener.Tr(r,o)}Ir(i){const r={};r.database=Lp(this.N),r.addTarget=function(a,d){let g;const y=d.target;return g=Gh(y)?{documents:sT(a,y)}:{query:oT(a,y)},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?g.resumeToken=nT(a,d.resumeToken):d.snapshotVersion.compareTo(xt.min())>0&&(g.readTime=Pp(a,d.snapshotVersion.toTimestamp())),g}(this.N,i);const o=function(s,i){const r=function(o,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,i.purpose);return null==r?null:{"goog-listen-tags":r}}(0,i);o&&(r.labels=o),this.wr(r)}Ar(i){const r={};r.database=Lp(this.N),r.removeTarget=i,this.wr(r)}}class iG extends dL{constructor(i,r,o,a,d){super(i,"write_stream_connection_backoff","write_stream_idle",r,o,d),this.N=a,this.Rr=!1}get Pr(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.br([])}Er(i){return this.nr.ji("Write",i)}onMessage(i){if(pt(!!i.streamToken),this.lastStreamToken=i.streamToken,this.Rr){this.rr.reset();const r=function(s,i){return s&&s.length>0?(pt(void 0!==i),s.map(r=>function(o,a){let d=zr(o.updateTime?o.updateTime:a);return d.isEqual(xt.min())&&(d=zr(a)),new iR(d,o.transformResults||[])}(r,i))):[]}(i.writeResults,i.commitTime),o=zr(i.commitTime);return this.listener.vr(o,r)}return pt(!i.writeResults||0===i.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const i={};i.database=Lp(this.N),this.wr(i)}br(i){const r={streamToken:this.lastStreamToken,writes:i.map(o=>gv(this.N,o))};this.wr(r)}}class sG extends class{}{constructor(i,r,o){super(),this.credentials=i,this.nr=r,this.N=o,this.Dr=!1}Cr(){if(this.Dr)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Li(i,r,o){return this.Cr(),this.credentials.getToken().then(a=>this.nr.Li(i,r,o,a)).catch(a=>{throw"FirebaseError"===a.name?(a.code===_e.UNAUTHENTICATED&&this.credentials.invalidateToken(),a):new Ne(_e.UNKNOWN,a.toString())})}Ki(i,r,o){return this.Cr(),this.credentials.getToken().then(a=>this.nr.Ki(i,r,o,a)).catch(a=>{throw"FirebaseError"===a.name?(a.code===_e.UNAUTHENTICATED&&this.credentials.invalidateToken(),a):new Ne(_e.UNKNOWN,a.toString())})}terminate(){this.Dr=!0}}class oG{constructor(i,r){this.asyncQueue=i,this.onlineStateHandler=r,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(i){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${i.toString()}`),this.Fr("Offline")))}set(i){this.Br(),this.Nr=0,"Online"===i&&(this.$r=!1),this.Fr(i)}Fr(i){i!==this.state&&(this.state=i,this.onlineStateHandler(i))}Mr(i){const r=`Could not reach Cloud Firestore backend. ${i}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(Er(r),this.$r=!1):Fe("OnlineStateTracker",r)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class aG{constructor(i,r,o,a,d){var g=this;this.localStore=i,this.datastore=r,this.asyncQueue=o,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=d,this.Qr.Ei(y=>{o.enqueueAndForget((0,Ee.Z)(function*(){var C;nf(g)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(C=(0,Ee.Z)(function*(T){const S=He(T);S.Kr.add(4),yield Cv(S),S.Wr.set("Unknown"),S.Kr.delete(4),yield DC(S)}),function(T){return C.apply(this,arguments)})(g))}))}),this.Wr=new oG(o,a)}}function DC(s){return UR.apply(this,arguments)}function UR(){return(UR=(0,Ee.Z)(function*(s){if(nf(s))for(const i of s.jr)yield i(!0)})).apply(this,arguments)}function Cv(s){return GR.apply(this,arguments)}function GR(){return(GR=(0,Ee.Z)(function*(s){for(const i of s.jr)yield i(!1)})).apply(this,arguments)}function AT(s,i){const r=He(s);r.qr.has(i.targetId)||(r.qr.set(i.targetId,i),$R(r)?HR(r):Dv(r).cr()&&jR(r,i))}function xC(s,i){const r=He(s),o=Dv(r);r.qr.delete(i),o.cr()&&hL(r,i),0===r.qr.size&&(o.cr()?o.lr():nf(r)&&r.Wr.set("Unknown"))}function jR(s,i){s.Gr.Y(i.targetId),Dv(s).Ir(i)}function hL(s,i){s.Gr.Y(i),Dv(s).Ar(i)}function HR(s){s.Gr=new hR({getRemoteKeysForTarget:i=>s.remoteSyncer.getRemoteKeysForTarget(i),Et:i=>s.qr.get(i)||null}),Dv(s).start(),s.Wr.Or()}function $R(s){return nf(s)&&!Dv(s).ar()&&s.qr.size>0}function nf(s){return 0===He(s).Kr.size}function fL(s){s.Gr=void 0}function lG(s){return WR.apply(this,arguments)}function WR(){return(WR=(0,Ee.Z)(function*(s){s.qr.forEach((i,r)=>{jR(s,i)})})).apply(this,arguments)}function uG(s,i){return qR.apply(this,arguments)}function qR(){return(qR=(0,Ee.Z)(function*(s,i){fL(s),$R(s)?(s.Wr.Lr(i),HR(s)):s.Wr.set("Unknown")})).apply(this,arguments)}function cG(s,i,r){return YR.apply(this,arguments)}function YR(){return(YR=(0,Ee.Z)(function*(s,i,r){if(s.Wr.set("Online"),i instanceof dR&&2===i.state&&i.cause)try{yield(o=(0,Ee.Z)(function*(a,d){const g=d.cause;for(const y of d.targetIds)a.qr.has(y)&&(yield a.remoteSyncer.rejectListen(y,g),a.qr.delete(y),a.Gr.removeTarget(y))}),function(a,d){return o.apply(this,arguments)})(s,i)}catch(o){Fe("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),o),yield ST(s,o)}else if(i instanceof hv?s.Gr.rt(i):i instanceof cR?s.Gr.ft(i):s.Gr.ct(i),!r.isEqual(xt.min()))try{const o=yield kc(s.localStore);r.compareTo(o)>=0&&(yield function(a,d){const g=a.Gr._t(d);return g.targetChanges.forEach((y,C)=>{if(y.resumeToken.approximateByteSize()>0){const T=a.qr.get(C);T&&a.qr.set(C,T.withResumeToken(y.resumeToken,d))}}),g.targetMismatches.forEach(y=>{const C=a.qr.get(y);if(!C)return;a.qr.set(y,C.withResumeToken(Dr.EMPTY_BYTE_STRING,C.snapshotVersion)),hL(a,y);const T=new Xl(C.target,y,1,C.sequenceNumber);jR(a,T)}),a.remoteSyncer.applyRemoteEvent(g)}(s,r))}catch(o){Fe("RemoteStore","Failed to raise snapshot:",o),yield ST(s,o)}var o})).apply(this,arguments)}function ST(s,i,r){return zR.apply(this,arguments)}function zR(){return(zR=(0,Ee.Z)(function*(s,i,r){if(!Ba(i))throw i;s.Kr.add(1),yield Cv(s),s.Wr.set("Offline"),r||(r=()=>kc(s.localStore)),s.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield r(),s.Kr.delete(1),yield DC(s)}))})).apply(this,arguments)}function gL(s,i){return i().catch(r=>ST(s,r,i))}function Ev(s){return ZR.apply(this,arguments)}function ZR(){return(ZR=(0,Ee.Z)(function*(s){const i=He(s),r=rf(i);let o=i.Ur.length>0?i.Ur[i.Ur.length-1].batchId:-1;for(;dG(i);)try{const a=yield wC(i.localStore,o);if(null===a){0===i.Ur.length&&r.lr();break}o=a.batchId,hG(i,a)}catch(a){yield ST(i,a)}pL(i)&&mL(i)})).apply(this,arguments)}function dG(s){return nf(s)&&s.Ur.length<10}function hG(s,i){s.Ur.push(i);const r=rf(s);r.cr()&&r.Pr&&r.br(i.mutations)}function pL(s){return nf(s)&&!rf(s).ar()&&s.Ur.length>0}function mL(s){rf(s).start()}function fG(s){return KR.apply(this,arguments)}function KR(){return(KR=(0,Ee.Z)(function*(s){rf(s).Sr()})).apply(this,arguments)}function gG(s){return QR.apply(this,arguments)}function QR(){return(QR=(0,Ee.Z)(function*(s){const i=rf(s);for(const r of s.Ur)i.br(r.mutations)})).apply(this,arguments)}function pG(s,i,r){return JR.apply(this,arguments)}function JR(){return(JR=(0,Ee.Z)(function*(s,i,r){const o=s.Ur.shift(),a=pC.from(o,i,r);yield gL(s,()=>s.remoteSyncer.applySuccessfulWrite(a)),yield Ev(s)})).apply(this,arguments)}function mG(s,i){return XR.apply(this,arguments)}function XR(){return(XR=(0,Ee.Z)(function*(s,i){var r;i&&rf(s).Pr&&(yield(r=(0,Ee.Z)(function*(o,a){if(aC(d=a.code)&&d!==_e.ABORTED){const g=o.Ur.shift();rf(o).hr(),yield gL(o,()=>o.remoteSyncer.rejectFailedWrite(g.batchId,a)),yield Ev(o)}var d}),function(o,a){return r.apply(this,arguments)})(s,i)),pL(s)&&mL(s)})).apply(this,arguments)}function eO(s,i){return tO.apply(this,arguments)}function tO(){return(tO=(0,Ee.Z)(function*(s,i){const r=He(s);i?(r.Kr.delete(2),yield DC(r)):i||(r.Kr.add(2),yield Cv(r),r.Wr.set("Unknown"))})).apply(this,arguments)}function Dv(s){return s.zr||(s.zr=function(i,r,o){const a=He(i);return a.Cr(),new rG(r,a.nr,a.credentials,a.N,o)}(s.datastore,s.asyncQueue,{Si:lG.bind(null,s),Ci:uG.bind(null,s),Tr:cG.bind(null,s)}),s.jr.push(function(){var i=(0,Ee.Z)(function*(r){r?(s.zr.hr(),$R(s)?HR(s):s.Wr.set("Unknown")):(yield s.zr.stop(),fL(s))});return function(r){return i.apply(this,arguments)}}())),s.zr}function rf(s){return s.Hr||(s.Hr=function(i,r,o){const a=He(i);return a.Cr(),new iG(r,a.nr,a.credentials,a.N,o)}(s.datastore,s.asyncQueue,{Si:fG.bind(null,s),Ci:mG.bind(null,s),Vr:gG.bind(null,s),vr:pG.bind(null,s)}),s.jr.push(function(){var i=(0,Ee.Z)(function*(r){r?(s.Hr.hr(),yield Ev(s)):(yield s.Hr.stop(),s.Ur.length>0&&(Fe("RemoteStore",`Stopping write stream with ${s.Ur.length} pending writes`),s.Ur=[]))});return function(r){return i.apply(this,arguments)}}())),s.Hr}class nO{constructor(i,r,o,a,d){this.asyncQueue=i,this.timerId=r,this.targetTimeMs=o,this.op=a,this.removalCallback=d,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(i,r,o,a,d){const g=Date.now()+o,y=new nO(i,r,g,a,d);return y.start(o),y}start(i){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),i)}skipDelay(){return this.handleDelayElapsed()}cancel(i){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(_e.CANCELLED,"Operation cancelled"+(i?": "+i:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(i=>this.deferred.resolve(i))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xv(s,i){if(Er("AsyncQueue",`${i}: ${s}`),Ba(s))return new Ne(_e.UNAVAILABLE,`${i}: ${s}`);throw s}class Iv{constructor(i){this.comparator=i?(r,o)=>i(r,o)||Xe.comparator(r.key,o.key):(r,o)=>Xe.comparator(r.key,o.key),this.keyedMap=QI(),this.sortedSet=new Pr(this.comparator)}static emptySet(i){return new Iv(i.comparator)}has(i){return null!=this.keyedMap.get(i)}get(i){return this.keyedMap.get(i)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(i){const r=this.keyedMap.get(i);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(i){this.sortedSet.inorderTraversal((r,o)=>(i(r),!1))}add(i){const r=this.delete(i.key);return r.copy(r.keyedMap.insert(i.key,i),r.sortedSet.insert(i,null))}delete(i){const r=this.get(i);return r?this.copy(this.keyedMap.remove(i),this.sortedSet.remove(r)):this}isEqual(i){if(!(i instanceof Iv)||this.size!==i.size)return!1;const r=this.sortedSet.getIterator(),o=i.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,d=o.getNext().key;if(!a.isEqual(d))return!1}return!0}toString(){const i=[];return this.forEach(r=>{i.push(r.toString())}),0===i.length?"DocumentSet ()":"DocumentSet (\n  "+i.join("  \n")+"\n)"}copy(i,r){const o=new Iv;return o.comparator=this.comparator,o.keyedMap=i,o.sortedSet=r,o}}class _L{constructor(){this.Jr=new Pr(Xe.comparator)}track(i){const r=i.doc.key,o=this.Jr.get(r);o?0!==i.type&&3===o.type?this.Jr=this.Jr.insert(r,i):3===i.type&&1!==o.type?this.Jr=this.Jr.insert(r,{type:o.type,doc:i.doc}):2===i.type&&2===o.type?this.Jr=this.Jr.insert(r,{type:2,doc:i.doc}):2===i.type&&0===o.type?this.Jr=this.Jr.insert(r,{type:0,doc:i.doc}):1===i.type&&0===o.type?this.Jr=this.Jr.remove(r):1===i.type&&2===o.type?this.Jr=this.Jr.insert(r,{type:1,doc:o.doc}):0===i.type&&1===o.type?this.Jr=this.Jr.insert(r,{type:2,doc:i.doc}):tt():this.Jr=this.Jr.insert(r,i)}Yr(){const i=[];return this.Jr.inorderTraversal((r,o)=>{i.push(o)}),i}}class Tv{constructor(i,r,o,a,d,g,y,C){this.query=i,this.docs=r,this.oldDocs=o,this.docChanges=a,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=y,this.excludesMetadataChanges=C}static fromInitialDocuments(i,r,o,a){const d=[];return r.forEach(g=>{d.push({type:0,doc:g})}),new Tv(i,r,Iv.emptySet(r),d,o,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(i){if(!(this.fromCache===i.fromCache&&this.syncStateChanged===i.syncStateChanged&&this.mutatedKeys.isEqual(i.mutatedKeys)&&rv(this.query,i.query)&&this.docs.isEqual(i.docs)&&this.oldDocs.isEqual(i.oldDocs)))return!1;const r=this.docChanges,o=i.docChanges;if(r.length!==o.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==o[a].type||!r[a].doc.isEqual(o[a].doc))return!1;return!0}}class _G{constructor(){this.Xr=void 0,this.listeners=[]}}class yG{constructor(){this.queries=new m(i=>eC(i),rv),this.onlineState="Unknown",this.Zr=new Set}}function rO(s,i){return iO.apply(this,arguments)}function iO(){return(iO=(0,Ee.Z)(function*(s,i){const r=He(s),o=i.query;let a=!1,d=r.queries.get(o);if(d||(a=!0,d=new _G),a)try{d.Xr=yield r.onListen(o)}catch(g){const y=xv(g,`Initialization of query '${iv(i.query)}' failed`);return void i.onError(y)}r.queries.set(o,d),d.listeners.push(i),i.eo(r.onlineState),d.Xr&&i.no(d.Xr)&&aO(r)})).apply(this,arguments)}function sO(s,i){return oO.apply(this,arguments)}function oO(){return(oO=(0,Ee.Z)(function*(s,i){const r=He(s),o=i.query;let a=!1;const d=r.queries.get(o);if(d){const g=d.listeners.indexOf(i);g>=0&&(d.listeners.splice(g,1),a=0===d.listeners.length)}if(a)return r.queries.delete(o),r.onUnlisten(o)})).apply(this,arguments)}function vG(s,i){const r=He(s);let o=!1;for(const a of i){const g=r.queries.get(a.query);if(g){for(const y of g.listeners)y.no(a)&&(o=!0);g.Xr=a}}o&&aO(r)}function bG(s,i,r){const o=He(s),a=o.queries.get(i);if(a)for(const d of a.listeners)d.onError(r);o.queries.delete(i)}function aO(s){s.Zr.forEach(i=>{i.next()})}class lO{constructor(i,r,o){this.query=i,this.so=r,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=o||{}}no(i){if(!this.options.includeMetadataChanges){const o=[];for(const a of i.docChanges)3!==a.type&&o.push(a);i=new Tv(i.query,i.docs,i.oldDocs,o,i.mutatedKeys,i.fromCache,i.syncStateChanged,!0)}let r=!1;return this.io?this.oo(i)&&(this.so.next(i),r=!0):this.ao(i,this.onlineState)&&(this.co(i),r=!0),this.ro=i,r}onError(i){this.so.error(i)}eo(i){this.onlineState=i;let r=!1;return this.ro&&!this.io&&this.ao(this.ro,i)&&(this.co(this.ro),r=!0),r}ao(i,r){return!i.fromCache||!(this.options.uo&&"Offline"!==r||i.docs.isEmpty()&&"Offline"!==r)}oo(i){return i.docChanges.length>0||!!(i.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==i.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(i){i=Tv.fromInitialDocuments(i.query,i.docs,i.mutatedKeys,i.fromCache),this.io=!0,this.so.next(i)}}class wG{constructor(i,r){this.payload=i,this.byteLength=r}ho(){return"metadata"in this.payload}}class yL{constructor(i){this.N=i}zn(i){return ji(this.N,i)}Hn(i){return i.metadata.exists?vR(this.N,i.document,!1):Nn.newNoDocument(this.zn(i.metadata.name),this.Jn(i.metadata.readTime))}Jn(i){return zr(i)}}class CG{constructor(i,r,o){this.lo=i,this.localStore=r,this.N=o,this.queries=[],this.documents=[],this.progress=vL(i)}fo(i){this.progress.bytesLoaded+=i.byteLength;let r=this.progress.documentsLoaded;return i.payload.namedQuery?this.queries.push(i.payload.namedQuery):i.payload.documentMetadata?(this.documents.push({metadata:i.payload.documentMetadata}),i.payload.documentMetadata.exists||++r):i.payload.document&&(this.documents[this.documents.length-1].document=i.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}wo(i){const r=new Map,o=new yL(this.N);for(const a of i)if(a.metadata.queries){const d=o.zn(a.metadata.name);for(const g of a.metadata.queries){const y=(r.get(g)||nn()).add(d);r.set(g,y)}}return r}complete(){var i=this;return(0,Ee.Z)(function*(){const r=yield function(s,i,r,o){return MR.apply(this,arguments)}(i.localStore,new yL(i.N),i.documents,i.lo.id),o=i.wo(i.documents);for(const a of i.queries)yield WU(i.localStore,a,o.get(a.name));return i.progress.taskState="Success",new De(Object.assign({},i.progress),r)})()}}function vL(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class bL{constructor(i){this.key=i}}class wL{constructor(i){this.key=i}}class CL{constructor(i,r){this.query=i,this._o=r,this.mo=null,this.current=!1,this.yo=nn(),this.mutatedKeys=nn(),this.po=WI(i),this.Eo=new Iv(this.po)}get To(){return this._o}Io(i,r){const o=r?r.Ao:new _L,a=r?r.Eo:this.Eo;let d=r?r.mutatedKeys:this.mutatedKeys,g=a,y=!1;const C=tv(this.query)&&a.size===this.query.limit?a.last():null,T=Qw(this.query)&&a.size===this.query.limit?a.first():null;if(i.inorderTraversal((S,N)=>{const O=a.get(S),V=Ap(this.query,N)?N:null,Y=!!O&&this.mutatedKeys.has(O.key),le=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Te=!1;O&&V?O.data.isEqual(V.data)?Y!==le&&(o.track({type:3,doc:V}),Te=!0):this.Ro(O,V)||(o.track({type:2,doc:V}),Te=!0,(C&&this.po(V,C)>0||T&&this.po(V,T)<0)&&(y=!0)):!O&&V?(o.track({type:0,doc:V}),Te=!0):O&&!V&&(o.track({type:1,doc:O}),Te=!0,(C||T)&&(y=!0)),Te&&(V?(g=g.add(V),d=le?d.add(S):d.delete(S)):(g=g.delete(S),d=d.delete(S)))}),tv(this.query)||Qw(this.query))for(;g.size>this.query.limit;){const S=tv(this.query)?g.last():g.first();g=g.delete(S.key),d=d.delete(S.key),o.track({type:1,doc:S})}return{Eo:g,Ao:o,Ln:y,mutatedKeys:d}}Ro(i,r){return i.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(i,r,o){const a=this.Eo;this.Eo=i.Eo,this.mutatedKeys=i.mutatedKeys;const d=i.Ao.Yr();d.sort((T,S)=>function(N,O){const V=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return V(N)-V(O)}(T.type,S.type)||this.po(T.doc,S.doc)),this.Po(o);const g=r?this.bo():[],y=0===this.yo.size&&this.current?1:0,C=y!==this.mo;return this.mo=y,0!==d.length||C?{snapshot:new Tv(this.query,i.Eo,a,d,i.mutatedKeys,0===y,C,!1),vo:g}:{vo:g}}eo(i){return this.current&&"Offline"===i?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new _L,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(i){return!this._o.has(i)&&!!this.Eo.has(i)&&!this.Eo.get(i).hasLocalMutations}Po(i){i&&(i.addedDocuments.forEach(r=>this._o=this._o.add(r)),i.modifiedDocuments.forEach(r=>{}),i.removedDocuments.forEach(r=>this._o=this._o.delete(r)),this.current=i.current)}bo(){if(!this.current)return[];const i=this.yo;this.yo=nn(),this.Eo.forEach(o=>{this.Vo(o.key)&&(this.yo=this.yo.add(o.key))});const r=[];return i.forEach(o=>{this.yo.has(o)||r.push(new wL(o))}),this.yo.forEach(o=>{i.has(o)||r.push(new bL(o))}),r}So(i){this._o=i.Gn,this.yo=nn();const r=this.Io(i.documents);return this.applyChanges(r,!0)}Do(){return Tv.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class EG{constructor(i,r,o){this.query=i,this.targetId=r,this.view=o}}class DG{constructor(i){this.key=i,this.Co=!1}}class xG{constructor(i,r,o,a,d,g){this.localStore=i,this.remoteStore=r,this.eventManager=o,this.sharedClientState=a,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.No={},this.xo=new m(y=>eC(y),rv),this.ko=new Map,this.$o=new Set,this.Oo=new Pr(Xe.comparator),this.Fo=new Map,this.Mo=new OR,this.Lo={},this.Bo=new Map,this.Uo=Jh.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function IG(s,i){return uO.apply(this,arguments)}function uO(){return(uO=(0,Ee.Z)(function*(s,i){const r=RO(s);let o,a;const d=r.xo.get(i);if(d)o=d.targetId,r.sharedClientState.addLocalQueryTarget(o),a=d.view.Do();else{const g=yield iu(r.localStore,ls(i)),y=r.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,a=yield cO(r,i,o,"current"===y),r.isPrimaryClient&&AT(r.remoteStore,g)}return a})).apply(this,arguments)}function cO(s,i,r,o){return dO.apply(this,arguments)}function dO(){return(dO=(0,Ee.Z)(function*(s,i,r,o){s.Ko=(S,N,O)=>{return(V=(0,Ee.Z)(function*(Y,le,Te,ke){let Ue=le.view.Io(Te);Ue.Ln&&(Ue=yield DT(Y.localStore,le.query,!1).then(({documents:rn})=>le.view.Io(rn,Ue)));const nt=ke&&ke.targetChanges.get(le.targetId),Ot=le.view.applyChanges(Ue,Y.isPrimaryClient,nt);return wO(Y,le.targetId,Ot.vo),Ot.snapshot}),function(Y,le,Te,ke){return V.apply(this,arguments)})(s,S,N,O);var V};const a=yield DT(s.localStore,i,!0),d=new CL(i,a.Gn),g=d.Io(a.documents),y=kp.createSynthesizedTargetChangeForCurrentChange(r,o&&"Offline"!==s.onlineState),C=d.applyChanges(g,s.isPrimaryClient,y);wO(s,r,C.vo);const T=new EG(i,r,d);return s.xo.set(i,T),s.ko.has(r)?s.ko.get(r).push(i):s.ko.set(r,[i]),C.snapshot})).apply(this,arguments)}function TG(s,i){return hO.apply(this,arguments)}function hO(){return(hO=(0,Ee.Z)(function*(s,i){const r=He(s),o=r.xo.get(i),a=r.ko.get(o.targetId);if(a.length>1)return r.ko.set(o.targetId,a.filter(d=>!rv(d,i))),void r.xo.delete(i);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||(yield su(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),xC(r.remoteStore,o.targetId),Av(r,o.targetId)}).catch(Xh))):(Av(r,o.targetId),yield su(r.localStore,o.targetId,!0))})).apply(this,arguments)}function fO(){return(fO=(0,Ee.Z)(function*(s,i,r){const o=OO(s);try{const a=yield function(d,g){const y=He(d),C=Or.now(),T=g.reduce((N,O)=>N.add(O.key),nn());let S;return y.persistence.runTransaction("Locally write mutations","readwrite",N=>y.Qn.bn(N,T).next(O=>{S=O;const V=[];for(const Y of g){const le=sR(Y,S.get(Y.key));null!=le&&V.push(new Fa(Y.key,le,Jy(le.value.mapValue),qn.exists(!0)))}return y.In.addMutationBatch(N,C,V,g)})).then(N=>(N.applyToLocalDocumentSet(S),{batchId:N.batchId,changes:S}))}(o.localStore,i);o.sharedClientState.addPendingMutation(a.batchId),function(d,g,y){let C=d.Lo[d.currentUser.toKey()];C||(C=new Pr(Wt)),C=C.insert(g,y),d.Lo[d.currentUser.toKey()]=C}(o,a.batchId,r),yield Pc(o,a.changes),yield Ev(o.remoteStore)}catch(a){const d=xv(a,"Failed to persist write");r.reject(d)}})).apply(this,arguments)}function EL(s,i){return gO.apply(this,arguments)}function gO(){return(gO=(0,Ee.Z)(function*(s,i){const r=He(s);try{const o=yield bC(r.localStore,i);i.targetChanges.forEach((a,d)=>{const g=r.Fo.get(d);g&&(pt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?g.Co=!0:a.modifiedDocuments.size>0?pt(g.Co):a.removedDocuments.size>0&&(pt(g.Co),g.Co=!1))}),yield Pc(r,o,i)}catch(o){yield Xh(o)}})).apply(this,arguments)}function DL(s,i,r){const o=He(s);if(o.isPrimaryClient&&0===r||!o.isPrimaryClient&&1===r){const a=[];o.xo.forEach((d,g)=>{const y=g.view.eo(i);y.snapshot&&a.push(y.snapshot)}),function(d,g){const y=He(d);y.onlineState=g;let C=!1;y.queries.forEach((T,S)=>{for(const N of S.listeners)N.eo(g)&&(C=!0)}),C&&aO(y)}(o.eventManager,i),a.length&&o.No.Tr(a),o.onlineState=i,o.isPrimaryClient&&o.sharedClientState.setOnlineState(i)}}function SG(s,i,r){return pO.apply(this,arguments)}function pO(){return(pO=(0,Ee.Z)(function*(s,i,r){const o=He(s);o.sharedClientState.updateQueryState(i,"rejected",r);const a=o.Fo.get(i),d=a&&a.key;if(d){let g=new Pr(Xe.comparator);g=g.insert(d,Nn.newNoDocument(d,xt.min()));const y=nn().add(d),C=new Op(xt.min(),new Map,new tr(Wt),g,y);yield EL(o,C),o.Oo=o.Oo.remove(d),o.Fo.delete(i),CO(o)}else yield su(o.localStore,i,!1).then(()=>Av(o,i,r)).catch(Xh)})).apply(this,arguments)}function NG(s,i){return mO.apply(this,arguments)}function mO(){return(mO=(0,Ee.Z)(function*(s,i){const r=He(s),o=i.batch.batchId;try{const a=yield tf(r.localStore,i);bO(r,o,null),vO(r,o),r.sharedClientState.updateMutationState(o,"acknowledged"),yield Pc(r,a)}catch(a){yield Xh(a)}})).apply(this,arguments)}function MG(s,i,r){return _O.apply(this,arguments)}function _O(){return(_O=(0,Ee.Z)(function*(s,i,r){const o=He(s);try{const a=yield function(d,g){const y=He(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",C=>{let T;return y.In.lookupMutationBatch(C,g).next(S=>(pt(null!==S),T=S.keys(),y.In.removeMutationBatch(C,S))).next(()=>y.In.performConsistencyCheck(C)).next(()=>y.Qn.bn(C,T))})}(o.localStore,i);bO(o,i,r),vO(o,i),o.sharedClientState.updateMutationState(i,"rejected",r),yield Pc(o,a)}catch(a){yield Xh(a)}})).apply(this,arguments)}function yO(){return(yO=(0,Ee.Z)(function*(s,i){const r=He(s);nf(r.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const g=He(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>g.In.getHighestUnacknowledgedBatchId(y))}(r.localStore);if(-1===o)return void i.resolve();const a=r.Bo.get(o)||[];a.push(i),r.Bo.set(o,a)}catch(o){const a=xv(o,"Initialization of waitForPendingWrites() operation failed");i.reject(a)}})).apply(this,arguments)}function vO(s,i){(s.Bo.get(i)||[]).forEach(r=>{r.resolve()}),s.Bo.delete(i)}function bO(s,i,r){const o=He(s);let a=o.Lo[o.currentUser.toKey()];if(a){const d=a.get(i);d&&(r?d.reject(r):d.resolve(),a=a.remove(i)),o.Lo[o.currentUser.toKey()]=a}}function Av(s,i,r=null){s.sharedClientState.removeLocalQueryTarget(i);for(const o of s.ko.get(i))s.xo.delete(o),r&&s.No.jo(o,r);s.ko.delete(i),s.isPrimaryClient&&s.Mo.cs(i).forEach(o=>{s.Mo.containsKey(o)||xL(s,o)})}function xL(s,i){s.$o.delete(i.path.canonicalString());const r=s.Oo.get(i);null!==r&&(xC(s.remoteStore,r),s.Oo=s.Oo.remove(i),s.Fo.delete(r),CO(s))}function wO(s,i,r){for(const o of r)o instanceof bL?(s.Mo.addReference(o.key,i),OG(s,o)):o instanceof wL?(Fe("SyncEngine","Document no longer in limbo: "+o.key),s.Mo.removeReference(o.key,i),s.Mo.containsKey(o.key)||xL(s,o.key)):tt()}function OG(s,i){const r=i.key,o=r.path.canonicalString();s.Oo.get(r)||s.$o.has(o)||(Fe("SyncEngine","New document in limbo: "+r),s.$o.add(o),CO(s))}function CO(s){for(;s.$o.size>0&&s.Oo.size<s.maxConcurrentLimboResolutions;){const i=s.$o.values().next().value;s.$o.delete(i);const r=new Xe(qt.fromString(i)),o=s.Uo.next();s.Fo.set(o,new DG(r)),s.Oo=s.Oo.insert(r,o),AT(s.remoteStore,new Xl(ls(jh(r.path)),o,2,Ms.T))}}function Pc(s,i,r){return EO.apply(this,arguments)}function EO(){return(EO=(0,Ee.Z)(function*(s,i,r){const o=He(s),a=[],d=[],g=[];var y;o.xo.isEmpty()||(o.xo.forEach((y,C)=>{g.push(o.Ko(C,i,r).then(T=>{if(T){o.isPrimaryClient&&o.sharedClientState.updateQueryState(C.targetId,T.fromCache?"not-current":"current"),a.push(T);const S=dt.kn(C.targetId,T);d.push(S)}}))}),yield Promise.all(g),o.No.Tr(a),yield(y=(0,Ee.Z)(function*(C,T){const S=He(C);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>Se.forEach(T,O=>Se.forEach(O.Nn,V=>S.persistence.referenceDelegate.addReference(N,O.targetId,V)).next(()=>Se.forEach(O.xn,V=>S.persistence.referenceDelegate.removeReference(N,O.targetId,V)))))}catch(N){if(!Ba(N))throw N;Fe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of T){const O=N.targetId;if(!N.fromCache){const V=S.Un.get(O),le=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);S.Un=S.Un.insert(O,le)}}}),function(C,T){return y.apply(this,arguments)})(o.localStore,d))})).apply(this,arguments)}function kG(s,i){return DO.apply(this,arguments)}function DO(){return(DO=(0,Ee.Z)(function*(s,i){const r=He(s);if(!r.currentUser.isEqual(i)){Fe("SyncEngine","User change. New user:",i.toKey());const o=yield ef(r.localStore,i);r.currentUser=i,(a=r).Bo.forEach(g=>{g.forEach(y=>{y.reject(new Ne(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Bo.clear(),r.sharedClientState.handleUserChange(i,o.removedBatchIds,o.addedBatchIds),yield Pc(r,o.Wn)}var a})).apply(this,arguments)}function PG(s,i){const r=He(s),o=r.Fo.get(i);if(o&&o.Co)return nn().add(o.key);{let a=nn();const d=r.ko.get(i);if(!d)return a;for(const g of d){const y=r.xo.get(g);a=a.unionWith(y.view.To)}return a}}function FG(s,i){return xO.apply(this,arguments)}function xO(){return(xO=(0,Ee.Z)(function*(s,i){const r=He(s),o=yield DT(r.localStore,i.query,!0),a=i.view.So(o);return r.isPrimaryClient&&wO(r,i.targetId,a.vo),a})).apply(this,arguments)}function LG(s){return IO.apply(this,arguments)}function IO(){return(IO=(0,Ee.Z)(function*(s){const i=He(s);return sL(i.localStore).then(r=>Pc(i,r))})).apply(this,arguments)}function VG(s,i,r,o){return TO.apply(this,arguments)}function TO(){return(TO=(0,Ee.Z)(function*(s,i,r,o){const a=He(s),d=yield function(g,y){const C=He(g),T=He(C.In);return C.persistence.runTransaction("Lookup mutation documents","readonly",S=>T.Xt(S,y).next(N=>N?C.Qn.bn(S,N):Se.resolve(null)))}(a.localStore,i);var y;null!==d?("pending"===r?yield Ev(a.remoteStore):"acknowledged"===r||"rejected"===r?(bO(a,i,o||null),vO(a,i),y=i,He(He(a.localStore).In).te(y)):tt(),yield Pc(a,d)):Fe("SyncEngine","Cannot apply mutation batch with id: "+i)})).apply(this,arguments)}function AO(){return(AO=(0,Ee.Z)(function*(s,i){const r=He(s);if(RO(r),OO(r),!0===i&&!0!==r.qo){const o=r.sharedClientState.getAllActiveQueryTargets(),a=yield IL(r,o.toArray());r.qo=!0,yield eO(r.remoteStore,!0);for(const d of a)AT(r.remoteStore,d)}else if(!1===i&&!1!==r.qo){const o=[];let a=Promise.resolve();r.ko.forEach((d,g)=>{r.sharedClientState.isLocalQueryTarget(g)?o.push(g):a=a.then(()=>(Av(r,g),su(r.localStore,g,!0))),xC(r.remoteStore,g)}),yield a,yield IL(r,o),function(d){const g=He(d);g.Fo.forEach((y,C)=>{xC(g.remoteStore,C)}),g.Mo.us(),g.Fo=new Map,g.Oo=new Pr(Xe.comparator)}(r),r.qo=!1,yield eO(r.remoteStore,!1)}})).apply(this,arguments)}function IL(s,i,r){return SO.apply(this,arguments)}function SO(){return(SO=(0,Ee.Z)(function*(s,i,r){const o=He(s),a=[],d=[];for(const g of i){let y;const C=o.ko.get(g);if(C&&0!==C.length){y=yield iu(o.localStore,ls(C[0]));for(const T of C){const S=o.xo.get(T),N=yield FG(o,S);N.snapshot&&d.push(N.snapshot)}}else{const T=yield iL(o.localStore,g);y=yield iu(o.localStore,T),yield cO(o,TL(T),g,!1)}a.push(y)}return o.No.Tr(d),a})).apply(this,arguments)}function TL(s){return HI(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function UG(s){const i=He(s);return He(He(i.localStore).persistence).pn()}function GG(s,i,r,o){return NO.apply(this,arguments)}function NO(){return(NO=(0,Ee.Z)(function*(s,i,r,o){const a=He(s);if(a.qo)Fe("SyncEngine","Ignoring unexpected query state notification.");else if(a.ko.has(i))switch(r){case"current":case"not-current":{const d=yield sL(a.localStore),g=Op.createSynthesizedRemoteEventForCurrentChange(i,"current"===r);yield Pc(a,d,g);break}case"rejected":yield su(a.localStore,i,!0),Av(a,i,o);break;default:tt()}})).apply(this,arguments)}function jG(s,i,r){return MO.apply(this,arguments)}function MO(){return(MO=(0,Ee.Z)(function*(s,i,r){const o=RO(s);if(o.qo){for(const a of i){if(o.ko.has(a)){Fe("SyncEngine","Adding an already active target "+a);continue}const d=yield iL(o.localStore,a),g=yield iu(o.localStore,d);yield cO(o,TL(d),g.targetId,!1),AT(o.remoteStore,g)}for(const a of r)o.ko.has(a)&&(yield su(o.localStore,a,!1).then(()=>{xC(o.remoteStore,a),Av(o,a)}).catch(Xh))}})).apply(this,arguments)}function RO(s){const i=He(s);return i.remoteStore.remoteSyncer.applyRemoteEvent=EL.bind(null,i),i.remoteStore.remoteSyncer.getRemoteKeysForTarget=PG.bind(null,i),i.remoteStore.remoteSyncer.rejectListen=SG.bind(null,i),i.No.Tr=vG.bind(null,i.eventManager),i.No.jo=bG.bind(null,i.eventManager),i}function OO(s){const i=He(s);return i.remoteStore.remoteSyncer.applySuccessfulWrite=NG.bind(null,i),i.remoteStore.remoteSyncer.rejectFailedWrite=MG.bind(null,i),i}class AL{constructor(){this.synchronizeTabs=!1}initialize(i){var r=this;return(0,Ee.Z)(function*(){r.N=EC(i.databaseInfo.databaseId),r.sharedClientState=r.Wo(i),r.persistence=r.Go(i),yield r.persistence.start(),r.gcScheduler=r.zo(i),r.localStore=r.Ho(i)})()}zo(i){return null}Ho(i){return ds(this.persistence,new Lt,i.initialUser,this.N)}Go(i){return new QU(kR.Ns,this.N)}Wo(i){return new lL}terminate(){var i=this;return(0,Ee.Z)(function*(){i.gcScheduler&&i.gcScheduler.stop(),yield i.sharedClientState.shutdown(),yield i.persistence.shutdown()})()}}class SL extends AL{constructor(i,r,o){super(),this.Jo=i,this.cacheSizeBytes=r,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(i){var r=()=>super.initialize,o=this;return(0,Ee.Z)(function*(){yield r().call(o,i),yield function(s){return NR.apply(this,arguments)}(o.localStore),yield o.Jo.initialize(o,i),yield OO(o.Jo.syncEngine),yield Ev(o.Jo.remoteStore),yield o.persistence.nn(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}Ho(i){return ds(this.persistence,new Lt,i.initialUser,this.N)}zo(i){return new l(this.persistence.referenceDelegate.garbageCollector,i.asyncQueue)}Go(i){const r=Re(i.databaseInfo.databaseId,i.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Hi.withCacheSize(this.cacheSizeBytes):Hi.DEFAULT;return new Z(this.synchronizeTabs,r,i.clientId,o,i.asyncQueue,cL(),TT(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(i){return new lL}}class $G extends SL{constructor(i,r){super(i,r,!1),this.Jo=i,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(i){var r=()=>super.initialize,o=this;return(0,Ee.Z)(function*(){yield r().call(o,i);const a=o.Jo.syncEngine;o.sharedClientState instanceof VR&&(o.sharedClientState.syncEngine={_i:VG.bind(null,a),mi:GG.bind(null,a),gi:jG.bind(null,a),pn:UG.bind(null,a),wi:LG.bind(null,a)},yield o.sharedClientState.start()),yield o.persistence.nn(function(){var d=(0,Ee.Z)(function*(g){yield function(s,i){return AO.apply(this,arguments)}(o.Jo.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):g||o.gcScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}Wo(i){const r=cL();if(!VR.Pt(r))throw new Ne(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Re(i.databaseInfo.databaseId,i.databaseInfo.persistenceKey);return new VR(r,i.asyncQueue,o,i.clientId,i.initialUser)}}class kO{initialize(i,r){var o=this;return(0,Ee.Z)(function*(){o.localStore||(o.localStore=i.localStore,o.sharedClientState=i.sharedClientState,o.datastore=o.createDatastore(r),o.remoteStore=o.createRemoteStore(r),o.eventManager=o.createEventManager(r),o.syncEngine=o.createSyncEngine(r,!i.synchronizeTabs),o.sharedClientState.onlineStateHandler=a=>DL(o.syncEngine,a,1),o.remoteStore.remoteSyncer.handleCredentialChange=kG.bind(null,o.syncEngine),yield eO(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(i){return new yG}createDatastore(i){const r=EC(i.databaseInfo.databaseId),o=new nG(i.databaseInfo);return new sG(i.credentials,o,r)}createRemoteStore(i){return r=this.localStore,o=this.datastore,a=i.asyncQueue,d=y=>DL(this.syncEngine,y,0),g=uL.Pt()?new uL:new XU,new aG(r,o,a,d,g);var r,o,a,d,g}createSyncEngine(i,r){return function(o,a,d,g,y,C,T){const S=new xG(o,a,d,g,y,C);return T&&(S.qo=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,i.initialUser,i.maxConcurrentLimboResolutions,r)}terminate(){return(i=(0,Ee.Z)(function*(r){const o=He(r);Fe("RemoteStore","RemoteStore shutting down."),o.Kr.add(5),yield Cv(o),o.Qr.shutdown(),o.Wr.set("Unknown")}),function(r){return i.apply(this,arguments)})(this.remoteStore);var i}}function NL(s,i=10240){let r=0;return{read:()=>(0,Ee.Z)(function*(){if(r<s.byteLength){const o={value:s.slice(r,r+i),done:!1};return r+=i,o}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class NT{constructor(i){this.observer=i,this.muted=!1}next(i){this.observer.next&&this.Yo(this.observer.next,i)}error(i){this.observer.error?this.Yo(this.observer.error,i):console.error("Uncaught Error in snapshot listener:",i)}Xo(){this.muted=!0}Yo(i,r){this.muted||setTimeout(()=>{this.muted||i(r)},0)}}class WG{constructor(i,r){this.Zo=i,this.N=r,this.metadata=new Rr,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(o=>{o&&o.ho()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Zo.cancel()}getMetadata(){var i=this;return(0,Ee.Z)(function*(){return i.metadata.promise})()}Qo(){var i=this;return(0,Ee.Z)(function*(){return yield i.getMetadata(),i.ea()})()}ea(){var i=this;return(0,Ee.Z)(function*(){const r=yield i.na();if(null===r)return null;const o=i.ta.decode(r),a=Number(o);isNaN(a)&&i.sa(`length string (${o}) is not valid number`);const d=yield i.ia(a);return new wG(JSON.parse(d),r.length+a)})()}ra(){return this.buffer.findIndex(i=>i==="{".charCodeAt(0))}na(){var i=this;return(0,Ee.Z)(function*(){for(;i.ra()<0&&!(yield i.oa()););if(0===i.buffer.length)return null;const r=i.ra();r<0&&i.sa("Reached the end of bundle when a length string is expected.");const o=i.buffer.slice(0,r);return i.buffer=i.buffer.slice(r),o})()}ia(i){var r=this;return(0,Ee.Z)(function*(){for(;r.buffer.length<i;)(yield r.oa())&&r.sa("Reached the end of bundle when more is expected.");const o=r.ta.decode(r.buffer.slice(0,i));return r.buffer=r.buffer.slice(i),o})()}sa(i){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${i}`)}oa(){var i=this;return(0,Ee.Z)(function*(){const r=yield i.Zo.read();if(!r.done){const o=new Uint8Array(i.buffer.length+r.value.length);o.set(i.buffer),o.set(r.value,i.buffer.length),i.buffer=o}return r.done})()}}class qG{constructor(i){this.datastore=i,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(i){var r=this;return(0,Ee.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new Ne(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(a=(0,Ee.Z)(function*(d,g){const y=He(d),C=Lp(y.N)+"/documents",T={documents:g.map(V=>Fp(y.N,V))},S=yield y.Ki("BatchGetDocuments",C,T),N=new Map;S.forEach(V=>{const Y=function(s,i){return"found"in i?function(r,o){pt(!!o.found);const a=ji(r,o.found.name),d=zr(o.found.updateTime),g=new fi({mapValue:{fields:o.found.fields}});return Nn.newFoundDocument(a,d,g)}(s,i):"missing"in i?function(r,o){pt(!!o.missing),pt(!!o.readTime);const a=ji(r,o.missing),d=zr(o.readTime);return Nn.newNoDocument(a,d)}(s,i):tt()}(y.N,V);N.set(Y.key.toString(),Y)});const O=[];return g.forEach(V=>{const Y=N.get(V.toString());pt(!!Y),O.push(Y)}),O}),function(d,g){return a.apply(this,arguments)})(r.datastore,i);var a;return o.forEach(a=>r.recordVersion(a)),o})()}set(i,r){this.write(r.toMutation(i,this.precondition(i))),this.writtenDocs.add(i.toString())}update(i,r){try{this.write(r.toMutation(i,this.preconditionForUpdate(i)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(i.toString())}delete(i){this.write(new Nc(i,this.precondition(i))),this.writtenDocs.add(i.toString())}commit(){var i=this;return(0,Ee.Z)(function*(){if(i.ensureCommitNotCalled(),i.lastWriteError)throw i.lastWriteError;const r=i.readVersions;var o;i.mutations.forEach(o=>{r.delete(o.key.toString())}),r.forEach((o,a)=>{const d=Xe.fromPath(a);i.mutations.push(new oC(d,i.precondition(d)))}),yield(o=(0,Ee.Z)(function*(a,d){const g=He(a),y=Lp(g.N)+"/documents",C={writes:d.map(T=>gv(g.N,T))};yield g.Li("Commit",y,C)}),function(a,d){return o.apply(this,arguments)})(i.datastore,i.mutations),i.committed=!0})()}recordVersion(i){let r;if(i.isFoundDocument())r=i.version;else{if(!i.isNoDocument())throw tt();r=xt.min()}const o=this.readVersions.get(i.key.toString());if(o){if(!r.isEqual(o))throw new Ne(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(i.key.toString(),r)}precondition(i){const r=this.readVersions.get(i.toString());return!this.writtenDocs.has(i.toString())&&r?qn.updateTime(r):qn.none()}preconditionForUpdate(i){const r=this.readVersions.get(i.toString());if(!this.writtenDocs.has(i.toString())&&r){if(r.isEqual(xt.min()))throw new Ne(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qn.updateTime(r)}return qn.exists(!0)}write(i){this.ensureCommitNotCalled(),this.mutations.push(i)}ensureCommitNotCalled(){}}class YG{constructor(i,r,o,a){this.asyncQueue=i,this.datastore=r,this.updateFunction=o,this.deferred=a,this.aa=5,this.rr=new BR(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var i=this;this.rr.Xi((0,Ee.Z)(function*(){const r=new qG(i.datastore),o=i.ua(r);o&&o.then(a=>{i.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{i.deferred.resolve(a)}).catch(d=>{i.ha(d)}))}).catch(a=>{i.ha(a)})}))}ua(i){try{const r=this.updateFunction(i);return!Bo(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ha(i){this.aa>0&&this.la(i)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(i)}la(i){if("FirebaseError"===i.name){const r=i.code;return"aborted"===r||"failed-precondition"===r||!aC(r)}return!1}}class zG{constructor(i,r,o){var a=this;this.credentials=i,this.asyncQueue=r,this.databaseInfo=o,this.user=hi.UNAUTHENTICATED,this.clientId=zM.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(r,function(){var d=(0,Ee.Z)(function*(g){Fe("FirestoreClient","Received user=",g.uid),yield a.credentialListener(g),a.user=g});return function(g){return d.apply(this,arguments)}}())}getConfiguration(){var i=this;return(0,Ee.Z)(function*(){return{asyncQueue:i.asyncQueue,databaseInfo:i.databaseInfo,clientId:i.clientId,credentials:i.credentials,initialUser:i.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(i){this.credentialListener=i}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var i=this;this.asyncQueue.enterRestrictedMode();const r=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{i.onlineComponents&&(yield i.onlineComponents.terminate()),i.offlineComponents&&(yield i.offlineComponents.terminate()),i.credentials.shutdown(),r.resolve()}catch(o){const a=xv(o,"Failed to shutdown persistence");r.reject(a)}})),r.promise}}function ML(s,i){return PO.apply(this,arguments)}function PO(){return(PO=(0,Ee.Z)(function*(s,i){s.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const r=yield s.getConfiguration();yield i.initialize(r);let o=r.initialUser;s.setCredentialChangeListener(function(){var a=(0,Ee.Z)(function*(d){o.isEqual(d)||(yield ef(i.localStore,d),o=d)});return function(d){return a.apply(this,arguments)}}()),i.persistence.setDatabaseDeletedListener(()=>s.terminate()),s.offlineComponents=i})).apply(this,arguments)}function RL(s,i){return FO.apply(this,arguments)}function FO(){return(FO=(0,Ee.Z)(function*(s,i){s.asyncQueue.verifyOperationInProgress();const r=yield LO(s);Fe("FirestoreClient","Initializing OnlineComponentProvider");const o=yield s.getConfiguration();yield i.initialize(r,o),s.setCredentialChangeListener(a=>{return(d=(0,Ee.Z)(function*(g,y){const C=He(g);C.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const T=nf(C);C.Kr.add(3),yield Cv(C),T&&C.Wr.set("Unknown"),yield C.remoteSyncer.handleCredentialChange(y),C.Kr.delete(3),yield DC(C)}),function(g,y){return d.apply(this,arguments)})(i.remoteStore,a);var d}),s.onlineComponents=i})).apply(this,arguments)}function LO(s){return VO.apply(this,arguments)}function VO(){return(VO=(0,Ee.Z)(function*(s){return s.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield ML(s,new AL)),s.offlineComponents})).apply(this,arguments)}function MT(s){return BO.apply(this,arguments)}function BO(){return(BO=(0,Ee.Z)(function*(s){return s.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield RL(s,new kO)),s.onlineComponents})).apply(this,arguments)}function OL(s){return LO(s).then(i=>i.persistence)}function UO(s){return LO(s).then(i=>i.localStore)}function kL(s){return MT(s).then(i=>i.remoteStore)}function GO(s){return MT(s).then(i=>i.syncEngine)}function Sv(s){return jO.apply(this,arguments)}function jO(){return(jO=(0,Ee.Z)(function*(s){const i=yield MT(s),r=i.eventManager;return r.onListen=IG.bind(null,i.syncEngine),r.onUnlisten=TG.bind(null,i.syncEngine),r})).apply(this,arguments)}function PL(s,i,r={}){const o=new Rr;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(a,d,g,y,C){const T=new NT({next:N=>{d.enqueueAndForget(()=>sO(a,S));const O=N.docs.has(g);!O&&N.fromCache?C.reject(new Ne(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&N.fromCache&&y&&"server"===y.source?C.reject(new Ne(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):C.resolve(N)},error:N=>C.reject(N)}),S=new lO(jh(g.path),T,{includeMetadataChanges:!0,uo:!0});return rO(a,S)}(yield Sv(s),s.asyncQueue,i,r,o)})),o.promise}function FL(s,i,r={}){const o=new Rr;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(a,d,g,y,C){const T=new NT({next:N=>{d.enqueueAndForget(()=>sO(a,S)),N.fromCache&&"server"===y.source?C.reject(new Ne(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):C.resolve(N)},error:N=>C.reject(N)}),S=new lO(g,T,{includeMetadataChanges:!0,uo:!0});return rO(a,S)}(yield Sv(s),s.asyncQueue,i,r,o)})),o.promise}class r3{constructor(i,r,o,a,d,g,y,C){this.databaseId=i,this.appId=r,this.persistenceKey=o,this.host=a,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=y,this.useFetchStreams=C}}class Nv{constructor(i,r){this.projectId=i,this.database=r||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(i){return i instanceof Nv&&i.projectId===this.projectId&&i.database===this.database}}const LL=new Map;function HO(s,i,r){if(!r)throw new Ne(_e.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${i}.`)}function VL(s,i,r,o){if(!0===i&&!0===o)throw new Ne(_e.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function BL(s){if(!Xe.isDocumentKey(s))throw new Ne(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function UL(s){if(Xe.isDocumentKey(s))throw new Ne(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function RT(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const i=function(r){if(r.constructor){const o=/function\s+([^\s(]+)\s*\(/.exec(r.constructor.toString());if(o&&o.length>1)return o[1]}return null}(s);return i?`a custom ${i} object`:"an object"}}return"function"==typeof s?"a function":tt()}function Qt(s,i){if("_delegate"in s&&(s=s._delegate),!(s instanceof i)){if(i.name===s.constructor.name)throw new Ne(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=RT(s);throw new Ne(_e.INVALID_ARGUMENT,`Expected type '${i.name}', but it was: ${r}`)}}return s}function GL(s,i){if(i<=0)throw new Ne(_e.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${i}.`)}class jL{constructor(i){var r;if(void 0===i.host){if(void 0!==i.ssl)throw new Ne(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=i.host,this.ssl=null===(r=i.ssl)||void 0===r||r;if(this.credentials=i.credentials,this.ignoreUndefinedProperties=!!i.ignoreUndefinedProperties,void 0===i.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==i.cacheSizeBytes&&i.cacheSizeBytes<1048576)throw new Ne(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=i.cacheSizeBytes}this.experimentalForceLongPolling=!!i.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!i.experimentalAutoDetectLongPolling,this.useFetchStreams=!!i.useFetchStreams,VL("experimentalForceLongPolling",i.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",i.experimentalAutoDetectLongPolling)}isEqual(i){return this.host===i.host&&this.ssl===i.ssl&&this.credentials===i.credentials&&this.cacheSizeBytes===i.cacheSizeBytes&&this.experimentalForceLongPolling===i.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===i.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===i.ignoreUndefinedProperties&&this.useFetchStreams===i.useFetchStreams}}class IC{constructor(i,r){this._credentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jL({}),this._settingsFrozen=!1,i instanceof Nv?this._databaseId=i:(this._app=i,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Ne(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nv(o.options.projectId)}(i))}get app(){if(!this._app)throw new Ne(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(i){if(this._settingsFrozen)throw new Ne(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jL(i),void 0!==i.credentials&&(this._credentials=function(r){if(!r)return new zF;switch(r.type){case"gapi":const o=r.client;return pt(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new YM(o,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new Ne(_e.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(i.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const r=LL.get(i);r&&(Fe("ComponentProvider","Removing Datastore"),LL.delete(i),r.terminate())}(this),Promise.resolve()}}class Vn{constructor(i,r,o){this.converter=r,this._key=o,this.type="document",this.firestore=i}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ou(this.firestore,this.converter,this._key.path.popLast())}withConverter(i){return new Vn(this.firestore,i,this._key)}}class $i{constructor(i,r,o){this.converter=r,this._query=o,this.type="query",this.firestore=i}withConverter(i){return new $i(this.firestore,i,this._query)}}class ou extends $i{constructor(i,r,o){super(i,r,jh(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const i=this._path.popLast();return i.isEmpty()?null:new Vn(this.firestore,null,new Xe(i))}withConverter(i){return new ou(this.firestore,i,this._path)}}function HL(s,i,...r){if(s=(0,L.m9)(s),HO("collection","path",i),s instanceof IC){const o=qt.fromString(i,...r);return UL(o),new ou(s,null,o)}{if(!(s instanceof Vn||s instanceof ou))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=qt.fromString(s.path,...r).child(qt.fromString(i));return UL(o),new ou(s.firestore,null,o)}}function OT(s,i,...r){if(s=(0,L.m9)(s),1===arguments.length&&(i=zM.I()),HO("doc","path",i),s instanceof IC){const o=qt.fromString(i,...r);return BL(o),new Vn(s,null,new Xe(o))}{if(!(s instanceof Vn||s instanceof ou))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=s._path.child(qt.fromString(i,...r));return BL(o),new Vn(s.firestore,s instanceof ou?s.converter:null,new Xe(o))}}function $L(s,i){return s=(0,L.m9)(s),i=(0,L.m9)(i),(s instanceof Vn||s instanceof ou)&&(i instanceof Vn||i instanceof ou)&&s.firestore===i.firestore&&s.path===i.path&&s.converter===i.converter}function WL(s,i){return s=(0,L.m9)(s),i=(0,L.m9)(i),s instanceof $i&&i instanceof $i&&s.firestore===i.firestore&&rv(s._query,i._query)&&s.converter===i.converter}class o3{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new BR(this,"async_queue_retry"),this.Ea=()=>{const r=TT();r&&Fe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.rr.tr()};const i=TT();i&&"function"==typeof i.addEventListener&&i.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(i){this.enqueue(i)}enqueueAndForgetEvenWhileRestricted(i){this.Ta(),this.Ia(i)}enterRestrictedMode(i){if(!this.wa){this.wa=!0,this.ya=i||!1;const r=TT();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ea)}}enqueue(i){if(this.Ta(),this.wa)return new Promise(()=>{});const r=new Rr;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(i().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(i){this.enqueueAndForget(()=>(this.da.push(i),this.Aa()))}Aa(){var i=this;return(0,Ee.Z)(function*(){if(0!==i.da.length){try{yield i.da[0](),i.da.shift(),i.rr.reset()}catch(r){if(!Ba(r))throw r;Fe("AsyncQueue","Operation failed with retryable error: "+r)}i.da.length>0&&i.rr.Xi(()=>i.Aa())}})()}Ia(i){const r=this.fa.then(()=>(this.ga=!0,i().catch(o=>{throw this.ma=o,this.ga=!1,Er("INTERNAL UNHANDLED ERROR: ",function(a){let d=a.message||"";return a.stack&&(d=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),d}(o)),o}).then(o=>(this.ga=!1,o))));return this.fa=r,r}enqueueAfterDelay(i,r,o){this.Ta(),this.pa.indexOf(i)>-1&&(r=0);const a=nO.createAndSchedule(this,i,r,o,d=>this.Ra(d));return this._a.push(a),a}Ta(){this.ma&&tt()}verifyOperationInProgress(){}Pa(){var i=this;return(0,Ee.Z)(function*(){let r;do{r=i.fa,yield r}while(r!==i.fa)})()}ba(i){for(const r of this._a)if(r.timerId===i)return!0;return!1}va(i){return this.Pa().then(()=>{this._a.sort((r,o)=>r.targetTimeMs-o.targetTimeMs);for(const r of this._a)if(r.skipDelay(),"all"!==i&&r.timerId===i)break;return this.Pa()})}Va(i){this.pa.push(i)}Ra(i){const r=this._a.indexOf(i);this._a.splice(r,1)}}function $O(s){return function(i,r){if("object"!=typeof i||null===i)return!1;const o=i;for(const a of["next","error","complete"])if(a in o&&"function"==typeof o[a])return!0;return!1}(s)}class a3{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(i,r,o){this._progressObserver={next:i,error:r,complete:o}}catch(i){return this._taskCompletionResolver.promise.catch(i)}then(i,r){return this._taskCompletionResolver.promise.then(i,r)}_completeWith(i){this._updateProgress(i),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(i)}_failWith(i){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(i),this._taskCompletionResolver.reject(i)}_updateProgress(i){this._lastProgress=i,this._progressObserver.next&&this._progressObserver.next(i)}}class fr extends IC{constructor(i,r){super(i,r),this.type="firestore",this._queue=new o3,this._persistenceKey="name"in i?i.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||qL(this),this._firestoreClient.terminate()}}function Zr(s){return s._firestoreClient||qL(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function qL(s){var i;const r=s._freezeSettings(),o=(d=(null===(i=s._app)||void 0===i?void 0:i.options.appId)||"",new r3(s._databaseId,d,s._persistenceKey,(y=r).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var d,y;s._firestoreClient=new zG(s._credentials,s._queue,o)}function YL(s,i,r){const o=new Rr;return s.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield ML(s,r),yield RL(s,i),o.resolve()}catch(a){if(!("FirebaseError"===(d=a).name?d.code===_e.FAILED_PRECONDITION||d.code===_e.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),o.reject(a)}var d})).then(()=>o.promise)}function zL(s){if(s._initialized||s._terminated)throw new Ne(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fc{constructor(...i){for(let r=0;r<i.length;++r)if(0===i[r].length)throw new Ne(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kr(i)}isEqual(i){return this._internalPath.isEqual(i._internalPath)}}class au{constructor(i){this._byteString=i}static fromBase64String(i){try{return new au(Dr.fromBase64String(i))}catch(r){throw new Ne(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(i){return new au(Dr.fromUint8Array(i))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(i){return this._byteString.isEqual(i._byteString)}}class Hp{constructor(i){this._methodName=i}}class kT{constructor(i,r){if(!isFinite(i)||i<-90||i>90)throw new Ne(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+i);if(!isFinite(r)||r<-180||r>180)throw new Ne(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=i,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(i){return this._lat===i._lat&&this._long===i._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(i){return Wt(this._lat,i._lat)||Wt(this._long,i._long)}}const _3=/^__.*__$/;class y3{constructor(i,r,o){this.data=i,this.fieldMask=r,this.fieldTransforms=o}toMutation(i,r){return null!==this.fieldMask?new Fa(i,this.data,this.fieldMask,r,this.fieldTransforms):new Mp(i,this.data,r,this.fieldTransforms)}}class ZL{constructor(i,r,o){this.data=i,this.fieldMask=r,this.fieldTransforms=o}toMutation(i,r){return new Fa(i,this.data,this.fieldMask,r,this.fieldTransforms)}}function KL(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class PT{constructor(i,r,o,a,d,g){this.settings=i,this.databaseId=r,this.N=o,this.ignoreUndefinedProperties=a,void 0===d&&this.Sa(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(i){return new PT(Object.assign(Object.assign({},this.settings),i),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(i){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(i),a=this.Ca({path:o,xa:!1});return a.ka(i),a}$a(i){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(i),a=this.Ca({path:o,xa:!1});return a.Sa(),a}Oa(i){return this.Ca({path:void 0,xa:!0})}Fa(i){return LT(i,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(i){return void 0!==this.fieldMask.find(r=>i.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>i.isPrefixOf(r.field))}Sa(){if(this.path)for(let i=0;i<this.path.length;i++)this.ka(this.path.get(i))}ka(i){if(0===i.length)throw this.Fa("Document fields must not be empty");if(KL(this.Da)&&_3.test(i))throw this.Fa('Document fields cannot begin and end with "__"')}}class v3{constructor(i,r,o){this.databaseId=i,this.ignoreUndefinedProperties=r,this.N=o||EC(i)}Ba(i,r,o,a=!1){return new PT({Da:i,methodName:r,La:o,path:kr.emptyPath(),xa:!1,Ma:a},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function $p(s){const i=s._freezeSettings(),r=EC(s._databaseId);return new v3(s._databaseId,!!i.ignoreUndefinedProperties,r)}function FT(s,i,r,o,a,d={}){const g=s.Ba(d.merge||d.mergeFields?2:0,i,r,a);zO("Data must be an object, but it was:",g,o);const y=XL(o,g);let C,T;if(d.merge)C=new Ic(g.fieldMask),T=g.fieldTransforms;else if(d.mergeFields){const S=[];for(const N of d.mergeFields){const O=ZO(i,N,r);if(!g.contains(O))throw new Ne(_e.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);tV(S,O)||S.push(O)}C=new Ic(S),T=g.fieldTransforms.filter(N=>C.covers(N.field))}else C=null,T=g.fieldTransforms;return new y3(new fi(y),C,T)}class TC extends Hp{_toFieldTransform(i){if(2!==i.Da)throw i.Fa(1===i.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return i.fieldMask.push(i.path),null}isEqual(i){return i instanceof TC}}function QL(s,i,r){return new PT({Da:3,La:i.settings.La,methodName:s._methodName,xa:r},i.databaseId,i.N,i.ignoreUndefinedProperties)}class WO extends Hp{_toFieldTransform(i){return new av(i.path,new Sp)}isEqual(i){return i instanceof WO}}class b3 extends Hp{constructor(i,r){super(i),this.Ua=r}_toFieldTransform(i){const r=QL(this,i,!0),o=this.Ua.map(d=>Wp(d,r)),a=new Yl(o);return new av(i.path,a)}isEqual(i){return this===i}}class w3 extends Hp{constructor(i,r){super(i),this.Ua=r}_toFieldTransform(i){const r=QL(this,i,!0),o=this.Ua.map(d=>Wp(d,r)),a=new Sc(o);return new av(i.path,a)}isEqual(i){return this===i}}class C3 extends Hp{constructor(i,r){super(i),this.qa=r}_toFieldTransform(i){const r=new Wh(i.N,tC(i.N,this.qa));return new av(i.path,r)}isEqual(i){return this===i}}function qO(s,i,r,o){const a=s.Ba(1,i,r);zO("Data must be an object, but it was:",a,o);const d=[],g=fi.empty();Wl(o,(C,T)=>{const S=KO(i,C,r);T=(0,L.m9)(T);const N=a.$a(S);if(T instanceof TC)d.push(S);else{const O=Wp(T,N);null!=O&&(d.push(S),g.set(S,O))}});const y=new Ic(d);return new ZL(g,y,a.fieldTransforms)}function YO(s,i,r,o,a,d){const g=s.Ba(1,i,r),y=[ZO(i,o,r)],C=[a];if(d.length%2!=0)throw new Ne(_e.INVALID_ARGUMENT,`Function ${i}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<d.length;O+=2)y.push(ZO(i,d[O])),C.push(d[O+1]);const T=[],S=fi.empty();for(let O=y.length-1;O>=0;--O)if(!tV(T,y[O])){const V=y[O];let Y=C[O];Y=(0,L.m9)(Y);const le=g.$a(V);if(Y instanceof TC)T.push(V);else{const Te=Wp(Y,le);null!=Te&&(T.push(V),S.set(V,Te))}}const N=new Ic(T);return new ZL(S,N,g.fieldTransforms)}function JL(s,i,r,o=!1){return Wp(r,s.Ba(o?4:3,i))}function Wp(s,i){if(eV(s=(0,L.m9)(s)))return zO("Unsupported field value:",i,s),XL(s,i);if(s instanceof Hp)return function(r,o){if(!KL(o.Da))throw o.Fa(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Fa(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(s,i),null;if(void 0===s&&i.ignoreUndefinedProperties)return null;if(i.path&&i.fieldMask.push(i.path),s instanceof Array){if(i.settings.xa&&4!==i.Da)throw i.Fa("Nested arrays are not supported");return function(r,o){const a=[];let d=0;for(const g of r){let y=Wp(g,o.Oa(d));null==y&&(y={nullValue:"NULL_VALUE"}),a.push(y),d++}return{arrayValue:{values:a}}}(s,i)}return function(r,o){if(null===(r=(0,L.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return tC(o.N,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const a=Or.fromDate(r);return{timestampValue:Pp(o.N,a)}}if(r instanceof Or){const a=new Or(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pp(o.N,a)}}if(r instanceof kT)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof au)return{bytesValue:nT(o.N,r._byteString)};if(r instanceof Vn){const a=o.databaseId,d=r.firestore._databaseId;if(!d.isEqual(a))throw o.Fa(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:uC(r.firestore._databaseId||o.databaseId,r._key.path)}}throw o.Fa(`Unsupported field value: ${RT(r)}`)}(s,i)}function XL(s,i){const r={};return II(s)?i.path&&i.path.length>0&&i.fieldMask.push(i.path):Wl(s,(o,a)=>{const d=Wp(a,i.Na(o));null!=d&&(r[o]=d)}),{mapValue:{fields:r}}}function eV(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof Or||s instanceof kT||s instanceof au||s instanceof Vn||s instanceof Hp)}function zO(s,i,r){if(!eV(r)||"object"!=typeof(o=r)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=RT(r);throw i.Fa("an object"===o?s+" a custom object":s+" "+o)}var o}function ZO(s,i,r){if((i=(0,L.m9)(i))instanceof Fc)return i._internalPath;if("string"==typeof i)return KO(s,i);throw LT("Field path arguments must be of type string or FieldPath.",s,!1,void 0,r)}const E3=new RegExp("[~\\*/\\[\\]]");function KO(s,i,r){if(i.search(E3)>=0)throw LT(`Invalid field path (${i}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new Fc(...i.split("."))._internalPath}catch(o){throw LT(`Invalid field path (${i}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function LT(s,i,r,o,a){const d=o&&!o.isEmpty(),g=void 0!==a;let y=`Function ${i}() called with invalid data`;r&&(y+=" (via `toFirestore()`)"),y+=". ";let C="";return(d||g)&&(C+=" (found",d&&(C+=` in field ${o}`),g&&(C+=` in document ${a}`),C+=")"),new Ne(_e.INVALID_ARGUMENT,y+s+C)}function tV(s,i){return s.some(r=>r.isEqual(i))}class AC{constructor(i,r,o,a,d){this._firestore=i,this._userDataWriter=r,this._key=o,this._document=a,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const i=new D3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(i)}return this._userDataWriter.convertValue(this._document.data.value)}}get(i){if(this._document){const r=this._document.data.field(VT("DocumentSnapshot.get",i));if(null!==r)return this._userDataWriter.convertValue(r)}}}class D3 extends AC{data(){return super.data()}}function VT(s,i){return"string"==typeof i?KO(s,i):i instanceof Fc?i._internalPath:i._delegate._internalPath}class qp{constructor(i,r){this.hasPendingWrites=i,this.fromCache=r}isEqual(i){return this.hasPendingWrites===i.hasPendingWrites&&this.fromCache===i.fromCache}}class Lc extends AC{constructor(i,r,o,a,d,g){super(i,r,o,a,g),this._firestore=i,this._firestoreImpl=i,this.metadata=d}exists(){return super.exists()}data(i={}){if(this._document){if(this._converter){const r=new SC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,i)}return this._userDataWriter.convertValue(this._document.data.value,i.serverTimestamps)}}get(i,r={}){if(this._document){const o=this._document.data.field(VT("DocumentSnapshot.get",i));if(null!==o)return this._userDataWriter.convertValue(o,r.serverTimestamps)}}}class SC extends Lc{data(i={}){return super.data(i)}}class sf{constructor(i,r,o,a){this._firestore=i,this._userDataWriter=r,this._snapshot=a,this.metadata=new qp(a.hasPendingWrites,a.fromCache),this.query=o}get docs(){const i=[];return this.forEach(r=>i.push(r)),i}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(i,r){this._snapshot.docs.forEach(o=>{i.call(r,new SC(this._firestore,this._userDataWriter,o.key,o,new qp(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(i={}){const r=!!i.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ne(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(g=>({type:"added",doc:new SC(o._firestore,o._userDataWriter,g.doc.key,g.doc,new qp(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>a||3!==g.type).map(g=>{const y=new SC(o._firestore,o._userDataWriter,g.doc.key,g.doc,new qp(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let C=-1,T=-1;return 0!==g.type&&(C=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),T=d.indexOf(g.doc.key)),{type:x3(g.type),doc:y,oldIndex:C,newIndex:T}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function x3(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function nV(s,i){return s instanceof Lc&&i instanceof Lc?s._firestore===i._firestore&&s._key.isEqual(i._key)&&(null===s._document?null===i._document:s._document.isEqual(i._document))&&s._converter===i._converter:s instanceof sf&&i instanceof sf&&s._firestore===i._firestore&&WL(s.query,i.query)&&s.metadata.isEqual(i.metadata)&&s._snapshot.isEqual(i._snapshot)}function rV(s){if(Qw(s)&&0===s.explicitOrderBy.length)throw new Ne(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class NC{}function af(s,...i){for(const r of i)s=r._apply(s);return s}class I3 extends NC{constructor(i,r,o){super(),this.Ka=i,this.ja=r,this.Qa=o,this.type="where"}_apply(i){const r=$p(i.firestore),o=function(a,d,g,y,C,T,S){let N;if(C.isKeyField()){if("array-contains"===T||"array-contains-any"===T)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on FieldPath.documentId().`);if("in"===T||"not-in"===T){uV(S,T);const V=[];for(const Y of S)V.push(lV(y,a,Y));N={arrayValue:{values:V}}}else N=lV(y,a,S)}else"in"!==T&&"not-in"!==T&&"array-contains-any"!==T||uV(S,T),N=JL(g,"where",S,"in"===T||"not-in"===T);const O=gi.create(C,T,N);return function(V,Y){if(Y.v()){const Te=nv(V);if(null!==Te&&!Te.isEqual(Y.field))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Te.toString()}' and '${Y.field.toString()}'`);const ke=Jw(V);null!==ke&&cV(0,Y.field,ke)}const le=function(Te,ke){for(const Ue of Te.filters)if(ke.indexOf(Ue.op)>=0)return Ue.op;return null}(V,function(Te){switch(Te){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==le)throw new Ne(_e.INVALID_ARGUMENT,le===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${le.toString()}' filters.`)}(a,O),O}(i._query,0,r,i.firestore._databaseId,this.Ka,this.ja,this.Qa);return new $i(i.firestore,i.converter,function(a,d){const g=a.filters.concat([d]);return new ql(a.path,a.collectionGroup,a.explicitOrderBy.slice(),g,a.limit,a.limitType,a.startAt,a.endAt)}(i._query,o))}}class A3 extends NC{constructor(i,r){super(),this.Ka=i,this.Wa=r,this.type="orderBy"}_apply(i){const r=function(o,a,d){if(null!==o.startAt)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new pi(a,d);return function(y,C){if(null===Jw(y)){const T=nv(y);null!==T&&cV(0,T,C.field)}}(o,g),g}(i._query,this.Ka,this.Wa);return new $i(i.firestore,i.converter,function(o,a){const d=o.explicitOrderBy.concat([a]);return new ql(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(i._query,r))}}class iV extends NC{constructor(i,r,o){super(),this.type=i,this.Ga=r,this.za=o}_apply(i){return new $i(i.firestore,i.converter,$I(i._query,this.Ga,this.za))}}class sV extends NC{constructor(i,r,o){super(),this.type=i,this.Ha=r,this.Ja=o}_apply(i){const r=aV(i,this.type,this.Ha,this.Ja);return new $i(i.firestore,i.converter,(a=r,new ql((o=i._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,a,o.endAt)));var o,a}}class oV extends NC{constructor(i,r,o){super(),this.type=i,this.Ha=r,this.Ja=o}_apply(i){const r=aV(i,this.type,this.Ha,this.Ja);return new $i(i.firestore,i.converter,(a=r,new ql((o=i._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,a)));var o,a}}function aV(s,i,r,o){if(r[0]=(0,L.m9)(r[0]),r[0]instanceof AC)return function(a,d,g,y,C){if(!y)throw new Ne(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const T=[];for(const S of Hh(a))if(S.field.isKeyField())T.push(Ky(d,y.key));else{const N=y.data.field(S.field);if(AI(N))throw new Ne(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const O=S.field.canonicalString();throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}T.push(N)}return new Ac(T,C)}(s._query,s.firestore._databaseId,i,r[0]._document,o);{const a=$p(s.firestore);return function(d,g,y,C,T,S){const N=d.explicitOrderBy;if(T.length>N.length)throw new Ne(_e.INVALID_ARGUMENT,`Too many arguments provided to ${C}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let V=0;V<T.length;V++){const Y=T[V];if(N[V].field.isKeyField()){if("string"!=typeof Y)throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${C}(), but got a ${typeof Y}`);if(!Xw(d)&&-1!==Y.indexOf("/"))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${C}() must be a plain document ID, but '${Y}' contains a slash.`);const le=d.path.child(qt.fromString(Y));if(!Xe.isDocumentKey(le))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${C}() must result in a valid document path, but '${le}' is not because it contains an odd number of segments.`);const Te=new Xe(le);O.push(Ky(g,Te))}else{const le=JL(y,C,Y);O.push(le)}}return new Ac(O,S)}(s._query,s.firestore._databaseId,a,i,r,o)}}function lV(s,i,r){if("string"==typeof(r=(0,L.m9)(r))){if(""===r)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xw(i)&&-1!==r.indexOf("/"))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const o=i.path.child(qt.fromString(r));if(!Xe.isDocumentKey(o))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ky(s,new Xe(o))}if(r instanceof Vn)return Ky(s,r._key);throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${RT(r)}.`)}function uV(s,i){if(!Array.isArray(s)||0===s.length)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${i.toString()}' filters.`);if(s.length>10)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. '${i.toString()}' filters support a maximum of 10 elements in the value array.`)}function cV(s,i,r){if(!r.isEqual(i))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${i.toString()}' and so you must also use '${i.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class QO{convertValue(i,r="none"){switch(Pa(i)){case 0:return null;case 1:return i.booleanValue;case 2:return xr(i.integerValue||i.doubleValue);case 3:return this.convertTimestamp(i.timestampValue);case 4:return this.convertServerTimestamp(i,r);case 5:return i.stringValue;case 6:return this.convertBytes(xp(i.bytesValue));case 7:return this.convertReference(i.referenceValue);case 8:return this.convertGeoPoint(i.geoPointValue);case 9:return this.convertArray(i.arrayValue,r);case 10:return this.convertObject(i.mapValue,r);default:throw tt()}}convertObject(i,r){const o={};return Wl(i.fields,(a,d)=>{o[a]=this.convertValue(d,r)}),o}convertGeoPoint(i){return new kT(xr(i.latitude),xr(i.longitude))}convertArray(i,r){return(i.values||[]).map(o=>this.convertValue(o,r))}convertServerTimestamp(i,r){switch(r){case"previous":const o=SI(i);return null==o?null:this.convertValue(o,r);case"estimate":return this.convertTimestamp(qy(i));default:return null}}convertTimestamp(i){const r=ka(i);return new Or(r.seconds,r.nanos)}convertDocumentKey(i,r){const o=qt.fromString(i);pt(Vp(o));const a=new Nv(o.get(1),o.get(3)),d=new Xe(o.popFirst(5));return a.isEqual(r)||Er(`Document ${d} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),d}}function BT(s,i,r){let o;return o=s?r&&(r.merge||r.mergeFields)?s.toFirestore(i,r):s.toFirestore(i):i,o}class F3 extends QO{constructor(i){super(),this.firestore=i}convertBytes(i){return new au(i)}convertReference(i){const r=this.convertDocumentKey(i,this.firestore._databaseId);return new Vn(this.firestore,null,r)}}class dV{constructor(i,r){this._firestore=i,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=$p(i)}set(i,r,o){this._verifyNotCommitted();const a=lf(i,this._firestore),d=BT(a.converter,r,o),g=FT(this._dataReader,"WriteBatch.set",a._key,d,null!==a.converter,o);return this._mutations.push(g.toMutation(a._key,qn.none())),this}update(i,r,o,...a){this._verifyNotCommitted();const d=lf(i,this._firestore);let g;return g="string"==typeof(r=(0,L.m9)(r))||r instanceof Fc?YO(this._dataReader,"WriteBatch.update",d._key,r,o,a):qO(this._dataReader,"WriteBatch.update",d._key,r),this._mutations.push(g.toMutation(d._key,qn.exists(!0))),this}delete(i){this._verifyNotCommitted();const r=lf(i,this._firestore);return this._mutations=this._mutations.concat(new Nc(r._key,qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lf(s,i){if((s=(0,L.m9)(s)).firestore!==i)throw new Ne(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class Yp extends QO{constructor(i){super(),this.firestore=i}convertBytes(i){return new au(i)}convertReference(i){const r=this.convertDocumentKey(i,this.firestore._databaseId);return new Vn(this.firestore,null,r)}}function hV(s,i,r){s=Qt(s,Vn);const o=Qt(s.firestore,fr),a=BT(s.converter,i,r);return Mv(o,[FT($p(o),"setDoc",s._key,a,null!==s.converter,r).toMutation(s._key,qn.none())])}function fV(s,i,r,...o){s=Qt(s,Vn);const a=Qt(s.firestore,fr),d=$p(a);let g;return g="string"==typeof(i=(0,L.m9)(i))||i instanceof Fc?YO(d,"updateDoc",s._key,i,r,o):qO(d,"updateDoc",s._key,i),Mv(a,[g.toMutation(s._key,qn.exists(!0))])}function gV(s,...i){var r,o,a;s=(0,L.m9)(s);let d={includeMetadataChanges:!1},g=0;"object"!=typeof i[g]||$O(i[g])||(d=i[g],g++);const y={includeMetadataChanges:d.includeMetadataChanges};if($O(i[g])){const N=i[g];i[g]=null===(r=N.next)||void 0===r?void 0:r.bind(N),i[g+1]=null===(o=N.error)||void 0===o?void 0:o.bind(N),i[g+2]=null===(a=N.complete)||void 0===a?void 0:a.bind(N)}let C,T,S;if(s instanceof Vn)T=Qt(s.firestore,fr),S=jh(s._key.path),C={next:N=>{i[g]&&i[g](JO(T,s,N))},error:i[g+1],complete:i[g+2]};else{const N=Qt(s,$i);T=Qt(N.firestore,fr),S=N._query;const O=new Yp(T);C={next:V=>{i[g]&&i[g](new sf(T,O,N,V))},error:i[g+1],complete:i[g+2]},rV(s._query)}return function(N,O,V,Y){const le=new NT(Y),Te=new lO(O,le,V);return N.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return rO(yield Sv(N),Te)})),()=>{le.Xo(),N.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return sO(yield Sv(N),Te)}))}}(Zr(T),S,y,C)}function Mv(s,i){return function(r,o){const a=new Rr;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(s,i,r){return fO.apply(this,arguments)}(yield GO(r),o,a)})),a.promise}(Zr(s),i)}function JO(s,i,r){const o=r.docs.get(i._key),a=new Yp(s);return new Lc(s,a,i._key,o,new qp(r.hasPendingWrites,r.fromCache),i.converter)}class q3 extends class{constructor(i,r){this._firestore=i,this._transaction=r,this._dataReader=$p(i)}get(i){const r=lf(i,this._firestore),o=new F3(this._firestore);return this._transaction.lookup([r._key]).then(a=>{if(!a||1!==a.length)return tt();const d=a[0];if(d.isFoundDocument())return new AC(this._firestore,o,d.key,d,r.converter);if(d.isNoDocument())return new AC(this._firestore,o,r._key,null,r.converter);throw tt()})}set(i,r,o){const a=lf(i,this._firestore),d=BT(a.converter,r,o),g=FT(this._dataReader,"Transaction.set",a._key,d,null!==a.converter,o);return this._transaction.set(a._key,g),this}update(i,r,o,...a){const d=lf(i,this._firestore);let g;return g="string"==typeof(r=(0,L.m9)(r))||r instanceof Fc?YO(this._dataReader,"Transaction.update",d._key,r,o,a):qO(this._dataReader,"Transaction.update",d._key,r),this._transaction.update(d._key,g),this}delete(i){const r=lf(i,this._firestore);return this._transaction.delete(r._key),this}}{constructor(i,r){super(i,r),this._firestore=i}get(i){const r=lf(i,this._firestore),o=new Yp(this._firestore);return super.get(i).then(a=>new Lc(this._firestore,o,r._key,a._document,new qp(!1,!1),r.converter))}}function XO(s,i){if(void 0===i)return{merge:!1};if(void 0!==i.mergeFields&&void 0!==i.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return i}function pV(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function mV(){if("undefined"==typeof atob)throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(s){Ep=s})(yc.SDK_VERSION),(0,yc._registerComponent)(new vc.wA("firestore",(s,{options:i})=>{const r=s.getProvider("app").getImmediate(),o=new fr(r,new WM(s.getProvider("auth-internal")));return i=Object.assign({useFetchStreams:!0},i),o._setSettings(i),o},"PUBLIC")),(0,yc.registerVersion)("@firebase/firestore","3.0.0",void 0);class MC{constructor(i){this._delegate=i}static fromBase64String(i){return mV(),new MC(au.fromBase64String(i))}static fromUint8Array(i){return pV(),new MC(au.fromUint8Array(i))}toBase64(){return mV(),this._delegate.toBase64()}toUint8Array(){return pV(),this._delegate.toUint8Array()}isEqual(i){return this._delegate.isEqual(i._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ek(s){return function(s,i){if("object"!=typeof s||null===s)return!1;const r=s;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(s)}class rj{enableIndexedDbPersistence(i,r){return function(s,i){zL(s=Qt(s,fr));const r=Zr(s),o=s._freezeSettings(),a=new kO;return YL(r,a,new SL(a,o.cacheSizeBytes,null==i?void 0:i.forceOwnership))}(i._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(i){return function(s){zL(s=Qt(s,fr));const i=Zr(s),r=s._freezeSettings(),o=new kO;return YL(i,o,new $G(o,r.cacheSizeBytes))}(i._delegate)}clearIndexedDbPersistence(i){return function(s){if(s._initialized&&!s._terminated)throw new Ne(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const i=new Rr;return s._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(r=(0,Ee.Z)(function*(o){if(!co.Pt())return Promise.resolve();const a=o+"main";yield co.delete(a)}),function(o){return r.apply(this,arguments)})(Re(s._databaseId,s._persistenceKey)),i.resolve()}catch(r){i.reject(r)}var r})),i.promise}(i._delegate)}}class _V{constructor(i,r,o){this._delegate=r,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},i instanceof Nv||(this._appCompat=i)}get _databaseId(){return this._delegate._databaseId}settings(i){const r=this._delegate._getSettings();!i.merge&&r.host!==i.host&&$y("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),i.merge&&delete(i=Object.assign(Object.assign({},r),i)).merge,this._delegate._setSettings(i)}useEmulator(i,r,o={}){!function(s,i,r,o={}){var a;const d=(s=Qt(s,IC))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==i&&$y("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},d),{host:`${i}:${r}`,ssl:!1})),o.mockUserToken){let g,y;if("string"==typeof o.mockUserToken)g=o.mockUserToken,y=hi.MOCK_USER;else{g=(0,L.Sg)(o.mockUserToken,null===(a=s._app)||void 0===a?void 0:a.options.projectId);const C=o.mockUserToken.sub||o.mockUserToken.user_id;if(!C)throw new Ne(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new hi(C)}s._credentials=new ZF(new $M(g,y))}}(this._delegate,i,r,o)}enableNetwork(){return function(s){return function(s){return s.asyncQueue.enqueue((0,Ee.Z)(function*(){const i=yield OL(s),r=yield kL(s);return i.setNetworkEnabled(!0),function(o){const a=He(o);return a.Kr.delete(0),DC(a)}(r)}))}(Zr(s=Qt(s,fr)))}(this._delegate)}disableNetwork(){return function(s){return function(s){return s.asyncQueue.enqueue((0,Ee.Z)(function*(){const i=yield OL(s),r=yield kL(s);return i.setNetworkEnabled(!1),(o=(0,Ee.Z)(function*(a){const d=He(a);d.Kr.add(0),yield Cv(d),d.Wr.set("Offline")}),function(a){return o.apply(this,arguments)})(r);var o}))}(Zr(s=Qt(s,fr)))}(this._delegate)}enablePersistence(i){let r=!1,o=!1;return i&&(r=!!i.synchronizeTabs,o=!!i.experimentalForceOwningTab,VL("synchronizeTabs",r,"experimentalForceOwningTab",o)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(s){return function(i){const r=new Rr;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(s,i){return yO.apply(this,arguments)}(yield GO(i),r)})),r.promise}(Zr(s=Qt(s,fr)))}(this._delegate)}onSnapshotsInSync(i){return function(s,i){return function(s,i){const r=new NT(i);return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return o=yield Sv(s),a=r,He(o).Zr.add(a),void a.next();var o,a})),()=>{r.Xo(),s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return o=yield Sv(s),a=r,void He(o).Zr.delete(a);var o,a}))}}(Zr(s=Qt(s,fr)),$O(i)?i:{next:i})}(this._delegate,i)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(i){try{return new Rv(this,HL(this._delegate,i))}catch(r){throw hs(r,"collection()","Firestore.collection()")}}doc(i){try{return new Go(this,OT(this._delegate,i))}catch(r){throw hs(r,"doc()","Firestore.doc()")}}collectionGroup(i){try{return new fs(this,function(s,i){if(s=Qt(s,IC),HO("collectionGroup","collection id",i),i.indexOf("/")>=0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid collection ID '${i}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $i(s,null,(r=i,new ql(qt.emptyPath(),r)));var r}(this._delegate,i))}catch(r){throw hs(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(i){return function(s,i){return function(s,i){const r=new Rr;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const o=yield(a=s,MT(a).then(d=>d.datastore));var a;new YG(s.asyncQueue,o,i,r).run()})),r.promise}(Zr(s),r=>i(new q3(s,r)))}(this._delegate,r=>i(new yV(this,r)))}batch(){return Zr(this._delegate),new vV(new dV(this._delegate,i=>Mv(this._delegate,i)))}loadBundle(i){return function(s,i){const r=Zr(s=Qt(s,fr)),o=new a3;return function(s,i,r,o){const a=function(d,g){let y;return y="string"==typeof d?(new TextEncoder).encode(d):d,C=function(C,T){if(C instanceof Uint8Array)return NL(C,T);if(C instanceof ArrayBuffer)return NL(new Uint8Array(C),T);if(C instanceof ReadableStream)return C.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new WG(C,g);var C}(r,EC(i));s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function(s,i,r){const o=He(s);var a;(a=(0,Ee.Z)(function*(d,g,y){try{const C=yield g.getMetadata();if(yield function(O,V){const Y=He(O),le=zr(V.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",Te=>Y.Je.getBundleMetadata(Te,V.id)).then(Te=>!!Te&&Te.createTime.compareTo(le)>=0)}(d.localStore,C))return yield g.close(),void y._completeWith((O=C,{taskState:"Success",documentsLoaded:O.totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}));y._updateProgress(vL(C));const T=new CG(C,d.localStore,g.N);let S=yield g.Qo();for(;S;){const O=yield T.fo(S);O&&y._updateProgress(O),S=yield g.Qo()}const N=yield T.complete();yield Pc(d,N.Tn,void 0),yield function(O,V){const Y=He(O);return Y.persistence.runTransaction("Save bundle","readwrite",le=>Y.Je.saveBundleMetadata(le,V))}(d.localStore,C),y._completeWith(N.progress)}catch(C){$y("SyncEngine",`Loading bundle failed with ${C}`),y._failWith(C)}var O}),function(d,g,y){return a.apply(this,arguments)})(o,i,r).then(()=>{o.sharedClientState.notifyBundleLoaded()})}(yield GO(s),a,o)}))}(r,s._databaseId,i,o),o}(this._delegate,i)}namedQuery(i){return function(s,i){return function(s,i){return s.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(r,o){const a=He(r);return a.persistence.runTransaction("Get named query","readonly",d=>a.Je.getNamedQuery(d,o))}(yield UO(s),i)}))}(Zr(s=Qt(s,fr)),i).then(r=>r?new $i(s,null,r.query):null)}(this._delegate,i).then(r=>r?new fs(this,r):null)}}class UT extends QO{constructor(i){super(),this.firestore=i}convertBytes(i){return new MC(new au(i))}convertReference(i){const r=this.convertDocumentKey(i,this.firestore._databaseId);return Go.forKey(r,this.firestore,null)}}class yV{constructor(i,r){this._firestore=i,this._delegate=r,this._userDataWriter=new UT(i)}get(i){const r=Zp(i);return this._delegate.get(r).then(o=>new RC(this._firestore,new Lc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,r.converter)))}set(i,r,o){const a=Zp(i);return o?(XO("Transaction.set",o),this._delegate.set(a,r,o)):this._delegate.set(a,r),this}update(i,r,o,...a){const d=Zp(i);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,o,...a),this}delete(i){const r=Zp(i);return this._delegate.delete(r),this}}class vV{constructor(i){this._delegate=i}set(i,r,o){const a=Zp(i);return o?(XO("WriteBatch.set",o),this._delegate.set(a,r,o)):this._delegate.set(a,r),this}update(i,r,o,...a){const d=Zp(i);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,o,...a),this}delete(i){const r=Zp(i);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class zp{constructor(i,r,o){this._firestore=i,this._userDataWriter=r,this._delegate=o}fromFirestore(i,r){const o=new SC(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,null);return this._delegate.fromFirestore(new OC(this._firestore,o),null!=r?r:{})}toFirestore(i,r){return r?this._delegate.toFirestore(i,r):this._delegate.toFirestore(i)}static getInstance(i,r){const o=zp.INSTANCES;let a=o.get(i);a||(a=new WeakMap,o.set(i,a));let d=a.get(r);return d||(d=new zp(i,new UT(i),r),a.set(r,d)),d}}zp.INSTANCES=new WeakMap;class Go{constructor(i,r){this.firestore=i,this._delegate=r,this._userDataWriter=new UT(i)}static forPath(i,r,o){if(i.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${i.canonicalString()} has ${i.length}`);return new Go(r,new Vn(r._delegate,o,new Xe(i)))}static forKey(i,r,o){return new Go(r,new Vn(r._delegate,o,i))}get id(){return this._delegate.id}get parent(){return new Rv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(i){try{return new Rv(this.firestore,HL(this._delegate,i))}catch(r){throw hs(r,"collection()","DocumentReference.collection()")}}isEqual(i){return(i=(0,L.m9)(i))instanceof Vn&&$L(this._delegate,i)}set(i,r){r=XO("DocumentReference.set",r);try{return r?hV(this._delegate,i,r):hV(this._delegate,i)}catch(o){throw hs(o,"setDoc()","DocumentReference.set()")}}update(i,r,...o){try{return 1===arguments.length?fV(this._delegate,i):fV(this._delegate,i,r,...o)}catch(a){throw hs(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(s){return Mv(Qt(s.firestore,fr),[new Nc(s._key,qn.none())])}(this._delegate)}onSnapshot(...i){const r=bV(i),o=wV(i,a=>new RC(this.firestore,new Lc(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return gV(this._delegate,r,o)}get(i){let r;return r="cache"===(null==i?void 0:i.source)?function(s){s=Qt(s,Vn);const i=Qt(s.firestore,fr),r=Zr(i),o=new Yp(i);return function(s,i){const r=new Rr;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(o=(0,Ee.Z)(function*(a,d,g){try{const y=yield function(C,T){const S=He(C);return S.persistence.runTransaction("read document","readonly",N=>S.Qn.An(N,T))}(a,d);y.isFoundDocument()?g.resolve(y):y.isNoDocument()?g.resolve(null):g.reject(new Ne(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const C=xv(y,`Failed to get document '${d} from cache`);g.reject(C)}}),function(a,d,g){return o.apply(this,arguments)})(yield UO(s),i,r);var o})),r.promise}(r,s._key).then(a=>new Lc(i,o,s._key,a,new qp(null!==a&&a.hasLocalMutations,!0),s.converter))}(this._delegate):"server"===(null==i?void 0:i.source)?function(s){s=Qt(s,Vn);const i=Qt(s.firestore,fr);return PL(Zr(i),s._key,{source:"server"}).then(r=>JO(i,s,r))}(this._delegate):function(s){s=Qt(s,Vn);const i=Qt(s.firestore,fr);return PL(Zr(i),s._key).then(r=>JO(i,s,r))}(this._delegate),r.then(o=>new RC(this.firestore,new Lc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(i){return new Go(this.firestore,this._delegate.withConverter(i?zp.getInstance(this.firestore,i):null))}}function hs(s,i,r){return s.message=s.message.replace(i,r),s}function bV(s){for(const i of s)if("object"==typeof i&&!ek(i))return i;return{}}function wV(s,i){var r,o;let a;return a=ek(s[0])?s[0]:ek(s[1])?s[1]:"function"==typeof s[0]?{next:s[0],error:s[1],complete:s[2]}:{next:s[1],error:s[2],complete:s[3]},{next:d=>{a.next&&a.next(i(d))},error:null===(r=a.error)||void 0===r?void 0:r.bind(a),complete:null===(o=a.complete)||void 0===o?void 0:o.bind(a)}}class RC{constructor(i,r){this._firestore=i,this._delegate=r}get ref(){return new Go(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(i){return this._delegate.data(i)}get(i,r){return this._delegate.get(i,r)}isEqual(i){return nV(this._delegate,i._delegate)}}class OC extends RC{data(i){const r=this._delegate.data(i);return function(s,i){s||tt()}(void 0!==r),r}}class fs{constructor(i,r){this.firestore=i,this._delegate=r,this._userDataWriter=new UT(i)}where(i,r,o){try{return new fs(this.firestore,af(this._delegate,function(s,i,r){const o=i,a=VT("where",s);return new I3(a,o,r)}(i,r,o)))}catch(a){throw hs(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(i,r){try{return new fs(this.firestore,af(this._delegate,function(s,i="asc"){const r=i,o=VT("orderBy",s);return new A3(o,r)}(i,r)))}catch(o){throw hs(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(i){try{return new fs(this.firestore,af(this._delegate,function(s){return GL("limit",s),new iV("limit",s,"F")}(i)))}catch(r){throw hs(r,"limit()","Query.limit()")}}limitToLast(i){try{return new fs(this.firestore,af(this._delegate,function(s){return GL("limitToLast",s),new iV("limitToLast",s,"L")}(i)))}catch(r){throw hs(r,"limitToLast()","Query.limitToLast()")}}startAt(...i){try{return new fs(this.firestore,af(this._delegate,function(...s){return new sV("startAt",s,!0)}(...i)))}catch(r){throw hs(r,"startAt()","Query.startAt()")}}startAfter(...i){try{return new fs(this.firestore,af(this._delegate,function(...s){return new sV("startAfter",s,!1)}(...i)))}catch(r){throw hs(r,"startAfter()","Query.startAfter()")}}endBefore(...i){try{return new fs(this.firestore,af(this._delegate,function(...s){return new oV("endBefore",s,!0)}(...i)))}catch(r){throw hs(r,"endBefore()","Query.endBefore()")}}endAt(...i){try{return new fs(this.firestore,af(this._delegate,function(...s){return new oV("endAt",s,!1)}(...i)))}catch(r){throw hs(r,"endAt()","Query.endAt()")}}isEqual(i){return WL(this._delegate,i._delegate)}get(i){let r;return r="cache"===(null==i?void 0:i.source)?function(s){s=Qt(s,$i);const i=Qt(s.firestore,fr),r=Zr(i),o=new Yp(i);return function(s,i){const r=new Rr;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(o=(0,Ee.Z)(function*(a,d,g){try{const y=yield DT(a,d,!0),C=new CL(d,y.Gn),T=C.Io(y.documents),S=C.applyChanges(T,!1);g.resolve(S.snapshot)}catch(y){const C=xv(y,`Failed to execute query '${d} against cache`);g.reject(C)}}),function(a,d,g){return o.apply(this,arguments)})(yield UO(s),i,r);var o})),r.promise}(r,s._query).then(a=>new sf(i,o,s,a))}(this._delegate):"server"===(null==i?void 0:i.source)?function(s){s=Qt(s,$i);const i=Qt(s.firestore,fr),r=Zr(i),o=new Yp(i);return FL(r,s._query,{source:"server"}).then(a=>new sf(i,o,s,a))}(this._delegate):function(s){s=Qt(s,$i);const i=Qt(s.firestore,fr),r=Zr(i),o=new Yp(i);return rV(s._query),FL(r,s._query).then(a=>new sf(i,o,s,a))}(this._delegate),r.then(o=>new tk(this.firestore,new sf(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...i){const r=bV(i),o=wV(i,a=>new tk(this.firestore,new sf(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return gV(this._delegate,r,o)}withConverter(i){return new fs(this.firestore,this._delegate.withConverter(i?zp.getInstance(this.firestore,i):null))}}class sj{constructor(i,r){this._firestore=i,this._delegate=r}get type(){return this._delegate.type}get doc(){return new OC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tk{constructor(i,r){this._firestore=i,this._delegate=r}get query(){return new fs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(i=>new OC(this._firestore,i))}docChanges(i){return this._delegate.docChanges(i).map(r=>new sj(this._firestore,r))}forEach(i,r){this._delegate.forEach(o=>{i.call(r,new OC(this._firestore,o))})}isEqual(i){return nV(this._delegate,i._delegate)}}class Rv extends fs{constructor(i,r){super(i,r),this.firestore=i,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const i=this._delegate.parent;return i?new Go(this.firestore,i):null}doc(i){try{return new Go(this.firestore,void 0===i?OT(this._delegate):OT(this._delegate,i))}catch(r){throw hs(r,"doc()","CollectionReference.doc()")}}add(i){return function(s,i){const r=Qt(s.firestore,fr),o=OT(s),a=BT(s.converter,i);return Mv(r,[FT($p(s.firestore),"addDoc",o._key,a,null!==s.converter,{}).toMutation(o._key,qn.exists(!1))]).then(()=>o)}(this._delegate,i).then(r=>new Go(this.firestore,r))}isEqual(i){return $L(this._delegate,i._delegate)}withConverter(i){return new Rv(this.firestore,this._delegate.withConverter(i?zp.getInstance(this.firestore,i):null))}}function Zp(s){return Qt(s,Vn)}class nk{constructor(...i){this._delegate=new Fc(...i)}static documentId(){return new nk(kr.keyField().canonicalString())}isEqual(i){return(i=(0,L.m9)(i))instanceof Fc&&this._delegate._internalPath.isEqual(i._internalPath)}}class Kp{constructor(i){this._delegate=i}static serverTimestamp(){const i=new WO("serverTimestamp");return i._methodName="FieldValue.serverTimestamp",new Kp(i)}static delete(){const i=new TC("deleteField");return i._methodName="FieldValue.delete",new Kp(i)}static arrayUnion(...i){const r=function(...s){return new b3("arrayUnion",s)}(...i);return r._methodName="FieldValue.arrayUnion",new Kp(r)}static arrayRemove(...i){const r=function(...s){return new w3("arrayRemove",s)}(...i);return r._methodName="FieldValue.arrayRemove",new Kp(r)}static increment(i){const r=function(s){return new C3("increment",s)}(i);return r._methodName="FieldValue.increment",new Kp(r)}isEqual(i){return this._delegate.isEqual(i._delegate)}}const oj={Firestore:_V,GeoPoint:kT,Timestamp:Or,Blob:MC,Transaction:yV,WriteBatch:vV,DocumentReference:Go,DocumentSnapshot:RC,Query:fs,QueryDocumentSnapshot:OC,QuerySnapshot:tk,CollectionReference:Rv,FieldPath:nk,FieldValue:Kp,setLogLevel:function(s){!function(s){Dc.setLogLevel(s)}(s)},CACHE_SIZE_UNLIMITED:-1};!function(s){(function(s,i){s.INTERNAL.registerComponent(new vc.wA("firestore-compat",r=>((i,r)=>new _V(i,r,new rj))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},oj)))})(s),s.registerVersion("@firebase/firestore-compat","0.1.0")}(Kg.Z);var uj=U(7771),cj=U(8858);class dj extends Yt.xQ{constructor(i=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o){super(),this.scheduler=o,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=i<1?1:i,this._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(i){if(!this.isStopped){const r=this._events;r.push(i),r.length>this._bufferSize&&r.shift()}super.next(i)}nextTimeWindow(i){this.isStopped||(this._events.push(new hj(this._getNow(),i)),this._trimBufferThenGetEvents()),super.next(i)}_subscribe(i){const r=this._infiniteTimeWindow,o=r?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,d=o.length;let g;if(this.closed)throw new cd.N;if(this.isStopped||this.hasError?g=Kf.w.EMPTY:(this.observers.push(i),g=new cj.W(this,i)),a&&i.add(i=new _h.ht(i,a)),r)for(let y=0;y<d&&!i.closed;y++)i.next(o[y]);else for(let y=0;y<d&&!i.closed;y++)i.next(o[y].value);return this.hasError?i.error(this.thrownError):this.isStopped&&i.complete(),g}_getNow(){return(this.scheduler||uj.c).now()}_trimBufferThenGetEvents(){const i=this._getNow(),r=this._bufferSize,o=this._windowTime,a=this._events,d=a.length;let g=0;for(;g<d&&!(i-a[g].time<o);)g++;return d>r&&(g=Math.max(g,d-r)),g>0&&a.splice(0,g),a}}class hj{constructor(i,r){this.time=i,this.value=r}}function CV(s,i,r){let o;return o=s&&"object"==typeof s?s:{bufferSize:s,windowTime:i,refCount:!1,scheduler:r},a=>a.lift(function({bufferSize:s=Number.POSITIVE_INFINITY,windowTime:i=Number.POSITIVE_INFINITY,refCount:r,scheduler:o}){let a,g,d=0,y=!1,C=!1;return function(S){let N;d++,!a||y?(y=!1,a=new dj(s,i,o),N=a.subscribe(this),g=S.subscribe({next(O){a.next(O)},error(O){y=!0,a.error(O)},complete(){C=!0,g=void 0,a.complete()}}),C&&(g=void 0)):N=a.subscribe(this),this.add(()=>{d--,N.unsubscribe(),N=void 0,g&&!C&&r&&0===d&&(g.unsubscribe(),g=void 0,a=void 0)})}}(o))}function EV(s,i){return i?Hn(()=>s,i):Hn(()=>s)}var rk=U(2639);const ik=new h.OlP("angularfire2.auth.use-emulator"),sk=new h.OlP("angularfire2.auth.settings"),ok=new h.OlP("angularfire2.auth.tenant-id"),ak=new h.OlP("angularfire2.auth.langugage-code"),lk=new h.OlP("angularfire2.auth.use-device-language"),uk=new h.OlP("angularfire.auth.persistence");let ck=(()=>{class s{constructor(r,o,a,d,g,y,C,T,S,N,O){const V=new Yt.xQ,Y=(0,ze.of)(void 0).pipe((0,_h.QV)(g.outsideAngular),Hn(()=>d.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,6300)))),(0,et.U)(()=>(0,Ts.on)(r,d,o)),(0,et.U)(le=>d.runOutsideAngular(()=>{const Te=y,ke=C;return(0,_n.cc)(`${le.name}.auth`,"AngularFireAuth",le.name,()=>{const Ue=d.runOutsideAngular(()=>le.auth());if(Te&&Ue.useEmulator(...Te),T&&(Ue.tenantId=T),Ue.languageCode=S,N&&Ue.useDeviceLanguage(),ke)for(const[nt,Ot]of Object.entries(ke))Ue.settings[nt]=Ot;return O&&Ue.setPersistence(O),Ue},[Te,T,S,N,ke,O])})),CV({bufferSize:1,refCount:!1}));if(Ws(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ze.of)(null);else{Y.pipe(Fn()).subscribe();const Te=Y.pipe(Hn(nt=>nt.getRedirectResult().then(Ot=>Ot,()=>null)),_n.iC,CV({bufferSize:1,refCount:!1})),ke=Y.pipe(Hn(nt=>new In.y(Ot=>({unsubscribe:d.runOutsideAngular(()=>nt.onAuthStateChanged(rn=>Ot.next(rn),rn=>Ot.error(rn),()=>Ot.complete()))})))),Ue=Y.pipe(Hn(nt=>new In.y(Ot=>({unsubscribe:d.runOutsideAngular(()=>nt.onIdTokenChanged(rn=>Ot.next(rn),rn=>Ot.error(rn),()=>Ot.complete()))}))));this.authState=Te.pipe(EV(ke),(0,rk.R)(g.outsideAngular),(0,_h.QV)(g.insideAngular)),this.user=Te.pipe(EV(Ue),(0,rk.R)(g.outsideAngular),(0,_h.QV)(g.insideAngular)),this.idToken=this.user.pipe(Hn(nt=>nt?(0,dn.D)(nt.getIdToken()):(0,ze.of)(null))),this.idTokenResult=this.user.pipe(Hn(nt=>nt?(0,dn.D)(nt.getIdTokenResult()):(0,ze.of)(null))),this.credential=(0,sc.T)(Te,V,this.authState.pipe(on(nt=>!nt))).pipe((0,et.U)(nt=>(null==nt?void 0:nt.user)?nt:null),(0,rk.R)(g.outsideAngular),(0,_h.QV)(g.insideAngular))}return(0,Ts.pX)(this,Y,d,{spy:{apply:(le,Te,ke)=>{(le.startsWith("signIn")||le.startsWith("createUser"))&&ke.then(Ue=>V.next(Ue))}}})}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(Ts.Dh),h.LFG(Ts.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(_n.HU),h.LFG(ik,8),h.LFG(sk,8),h.LFG(ok,8),h.LFG(ak,8),h.LFG(lk,8),h.LFG(uk,8))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})();function DV(s,i){return function(s,i=M_.z){return new In.y(r=>{let o;return null!=i?i.schedule(()=>{o=s.onSnapshot({includeMetadataChanges:!0},r)}):o=s.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=o&&o()}})}(s,i)}function dk(s,i){return DV(s,i).pipe((0,et.U)(r=>({payload:r,type:"query"})))}function GT(s,i){return dk(s,i).pipe(xo(void 0),Sx(),(0,et.U)(([r,o])=>{const a=o.payload.docChanges(),d=a.map(g=>({type:g.type,payload:g}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((g,y)=>{const C=a.find(S=>S.doc.ref.isEqual(g.ref)),T=null==r?void 0:r.payload.docs.find(S=>S.ref.isEqual(g.ref));C&&JSON.stringify(C.doc.metadata)===JSON.stringify(g.metadata)||!C&&T&&JSON.stringify(T.metadata)===JSON.stringify(g.metadata)||d.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:g}})}),d}))}function xV(s,i,r){return GT(s,r).pipe(ll((o,a)=>function(s,i,r){return i.forEach(o=>{r.indexOf(o.type)>-1&&(s=function(s,i){switch(i.type){case"added":if(!s[i.newIndex]||!s[i.newIndex].doc.ref.isEqual(i.doc.ref))return hk(s,i.newIndex,0,i);break;case"modified":if(null==s[i.oldIndex]||s[i.oldIndex].doc.ref.isEqual(i.doc.ref)){if(i.oldIndex!==i.newIndex){const r=s.slice();return r.splice(i.oldIndex,1),r.splice(i.newIndex,0,i),r}return hk(s,i.newIndex,1,i)}break;case"removed":if(s[i.oldIndex]&&s[i.oldIndex].doc.ref.isEqual(i.doc.ref))return hk(s,i.oldIndex,1)}return s}(s,o))}),s}(o,a.map(d=>d.payload),i),[]),Vg(),(0,et.U)(o=>o.map(a=>({type:a.type,payload:a}))))}function hk(s,i,r,...o){const a=s.slice();return a.splice(i,r,...o),a}function IV(s){return(!s||0===s.length)&&(s=["added","removed","modified"]),s}class TV{constructor(i,r,o){this.ref=i,this.query=r,this.afs=o}stateChanges(i){let r=GT(this.query,this.afs.schedulers.outsideAngular);return i&&i.length>0&&(r=r.pipe((0,et.U)(o=>o.filter(a=>i.indexOf(a.type)>-1)))),r.pipe(xo(void 0),Sx(),on(([o,a])=>a.length>0||!o),(0,et.U)(([o,a])=>a),_n.iC)}auditTrail(i){return this.stateChanges(i).pipe(ll((r,o)=>[...r,...o],[]))}snapshotChanges(i){const r=IV(i);return xV(this.query,r,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(i={}){return dk(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.U)(r=>r.payload.docs.map(o=>i.idField?Object.assign(Object.assign({},o.data()),{[i.idField]:o.id}):o.data())),_n.iC)}get(i){return(0,dn.D)(this.query.get(i)).pipe(_n.f6)}add(i){return this.ref.add(i)}doc(i){return new AV(this.ref.doc(i),this.afs)}}class AV{constructor(i,r){this.ref=i,this.afs=r}set(i,r){return this.ref.set(i,r)}update(i){return this.ref.update(i)}delete(){return this.ref.delete()}collection(i,r){const o=this.ref.collection(i),{ref:a,query:d}=MV(o,r);return new TV(a,d,this.afs)}snapshotChanges(){return function(s,i){return DV(s,i).pipe(xo(void 0),Sx(),(0,et.U)(([r,o])=>o.exists?(null==r?void 0:r.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(i={}){return this.snapshotChanges().pipe((0,et.U)(({payload:r})=>i.idField?Object.assign(Object.assign({},r.data()),{[i.idField]:r.id}):r.data()))}get(i){return(0,dn.D)(this.ref.get(i)).pipe((0,_h.QV)(this.afs.schedulers.insideAngular))}}class vj{constructor(i,r){this.query=i,this.afs=r}stateChanges(i){return i&&0!==i.length?GT(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.U)(r=>r.filter(o=>i.indexOf(o.type)>-1)),on(r=>r.length>0),_n.iC):GT(this.query,this.afs.schedulers.outsideAngular).pipe(_n.iC)}auditTrail(i){return this.stateChanges(i).pipe(ll((r,o)=>[...r,...o],[]))}snapshotChanges(i){const r=IV(i);return xV(this.query,r,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(i={}){return dk(this.query,this.afs.schedulers.outsideAngular).pipe((0,et.U)(o=>o.payload.docs.map(a=>i.idField?Object.assign({[i.idField]:a.id},a.data()):a.data())),_n.iC)}get(i){return(0,dn.D)(this.query.get(i)).pipe(_n.f6)}}const SV=new h.OlP("angularfire2.enableFirestorePersistence"),NV=new h.OlP("angularfire2.firestore.persistenceSettings"),bj=new h.OlP("angularfire2.firestore.settings"),wj=new h.OlP("angularfire2.firestore.use-emulator");function MV(s,i=(r=>r)){return{query:i(s),ref:s}}let RV=(()=>{class s{constructor(r,o,a,d,g,y,C,T,S,N,O,V,Y,le,Te,ke){this.schedulers=C;const Ue=(0,Ts.on)(r,y,o),nt=S;if(N){const Ot=V;(0,_n.cc)(`${Ue.name}.auth`,"AngularFireAuth",Ue.name,()=>{const rn=y.runOutsideAngular(()=>Ue.auth());if(O&&rn.useEmulator(...O),Y&&(rn.tenantId=Y),rn.languageCode=le,Te&&rn.useDeviceLanguage(),Ot)for(const[Gc,TA]of Object.entries(Ot))rn.settings[Gc]=TA;return ke&&rn.setPersistence(ke),rn},[O,Y,le,Te,Ot,ke])}[this.firestore,this.persistenceEnabled$]=(0,_n.cc)(`${Ue.name}.firestore`,"AngularFirestore",Ue.name,()=>{const Ot=y.runOutsideAngular(()=>Ue.firestore());if(d&&Ot.settings(d),nt&&Ot.useEmulator(...nt),a&&!Ws(g)){const rn=()=>{try{return(0,dn.D)(Ot.enablePersistence(T||void 0).then(()=>!0,()=>!1))}catch(Gc){return"undefined"!=typeof console&&console.warn(Gc),(0,ze.of)(!1)}};return[Ot,y.runOutsideAngular(rn)]}return[Ot,(0,ze.of)(!1)]},[d,nt,a])}collection(r,o){let a;a="string"==typeof r?this.firestore.collection(r):r;const{ref:d,query:g}=MV(a,o),y=this.schedulers.ngZone.run(()=>d);return new TV(y,g,this)}collectionGroup(r,o){const a=o||(g=>g),d=this.firestore.collectionGroup(r);return new vj(a(d),this)}doc(r){let o;o="string"==typeof r?this.firestore.doc(r):r;const a=this.schedulers.ngZone.run(()=>o);return new AV(a,this)}createId(){return this.firestore.collection("_").doc().id}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(Ts.Dh),h.LFG(Ts.xv,8),h.LFG(SV,8),h.LFG(bj,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(_n.HU),h.LFG(NV,8),h.LFG(wj,8),h.LFG(ck,8),h.LFG(ik,8),h.LFG(sk,8),h.LFG(ok,8),h.LFG(ak,8),h.LFG(lk,8),h.LFG(uk,8))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})(),Cj=(()=>{class s{static enablePersistence(r){return{ngModule:s,providers:[{provide:SV,useValue:!0},{provide:NV,useValue:r}]}}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({providers:[RV]}),s})(),Ej=(()=>{class s{constructor(r){this.firestore=r}getEmployee(){return this.firestore.collection("employee").snapshotChanges()}addEmployee(r){return this.firestore.collection("employee").add(r)}updateEmployee(r,o){return this.firestore.doc("employee/"+r).update(o)}deleteEmployee(r){return this.firestore.doc("employee/"+r).delete()}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(RV))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const xj={provide:h.tb,useFactory:function(s,i){return()=>{if(Zn(i)){const r=Array.from(s.querySelectorAll(`[class*=${OV}]`)),o=/\bflex-layout-.+?\b/g;r.forEach(a=>{a.classList.contains(`${OV}ssr`)&&a.parentNode?a.parentNode.removeChild(a):a.className.replace(o,"")})}}},deps:[ie,h.Lbi],multi:!0},OV="flex-layout-";let fk=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({providers:[xj]}),s})();class Qp{constructor(i=!1,r="all",o="",a="",d=0){this.matches=i,this.mediaQuery=r,this.mqAlias=o,this.suffix=a,this.priority=d,this.property=""}clone(){return new Qp(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let kV=(()=>{class s{constructor(){this.stylesheet=new Map}addStyleToElement(r,o,a){const d=this.stylesheet.get(r);d?d.set(o,a):this.stylesheet.set(r,new Map([[o,a]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(r,o){const a=this.stylesheet.get(r);let d="";if(a){const g=a.get(o);("number"==typeof g||"string"==typeof g)&&(d=g+"")}return d}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=(0,h.Yz7)({factory:function(){return new s},token:s,providedIn:"root"}),s})();const gk={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},Ua=new h.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>gk}),Jp=new h.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),pk=new h.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function PV(s,i){return s=s?s.clone():new Qp,i&&(s.mqAlias=i.alias,s.mediaQuery=i.mediaQuery,s.suffix=i.suffix,s.priority=i.priority),s}const mk="inline",FV=["row","column","row-reverse","column-reverse"];function Aj(s){if(s)switch(s.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":s="wrap-reverse";break;case"no":case"none":case"nowrap":s="nowrap";break;default:s="wrap"}return s}let nr=(()=>{class s{constructor(r,o,a,d){this.elementRef=r,this.styleBuilder=o,this.styler=a,this.marshal=d,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new Yt.xQ,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(r){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,r,this.marshal.activatedAlias)}ngOnChanges(r){Object.keys(r).forEach(o=>{if(-1!==this.inputs.indexOf(o)){const a=o.split(".").slice(1).join(".");this.setValue(r[o].currentValue,a)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(r=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),r)}addStyles(r,o){const a=this.styleBuilder,d=a.shouldCache;let g=this.styleCache.get(r);(!g||!d)&&(g=a.buildStyles(r,o),d&&this.styleCache.set(r,g)),this.mru=Object.assign({},g),this.applyStyleToElement(g),a.sideEffect(r,g,o)}clearStyles(){Object.keys(this.mru).forEach(r=>{this.mru[r]=""}),this.applyStyleToElement(this.mru),this.mru={}}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(r,o=!1){if(r){const[a,d]=this.styler.getFlowDirection(r);if(!d&&o){const g=function(s){let[i,r,o]=function(s){s=s?s.toLowerCase():"";let[i,r,o]=s.split(" ");return FV.find(a=>a===i)||(i=FV[0]),r===mk&&(r=o!==mk?o:"",o=mk),[i,Aj(r),!!o]}(s);return function(s,i=null,r=!1){return{display:r?"inline-flex":"flex","box-sizing":"border-box","flex-direction":s,"flex-wrap":i||null}}(i,r,o)}(a);this.styler.applyStyleToElements(g,[r])}return a.trim()}return"row"}hasWrap(r){return this.styler.hasWrap(r)}applyStyleToElement(r,o,a=this.nativeElement){this.styler.applyStyleToElement(a,r,o)}setValue(r,o){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,r,o)}updateWithValue(r){this.currentValue!==r&&(this.addStyles(r),this.currentValue=r)}}return s.\u0275fac=function(r){h.$Z()},s.\u0275dir=h.lG2({type:s,features:[h.TTD]}),s})();const Nj=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],LV="(orientation: portrait) and (max-width: 599.98px)",VV="(orientation: landscape) and (max-width: 959.98px)",BV="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",UV="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",GV="(orientation: portrait) and (min-width: 840px)",jV="(orientation: landscape) and (min-width: 1280px)",Vc={HANDSET:`${LV}, ${VV}`,TABLET:`${BV} , ${UV}`,WEB:`${GV}, ${jV} `,HANDSET_PORTRAIT:`${LV}`,TABLET_PORTRAIT:`${BV} `,WEB_PORTRAIT:`${GV}`,HANDSET_LANDSCAPE:`${VV}`,TABLET_LANDSCAPE:`${UV}`,WEB_LANDSCAPE:`${jV}`},Mj=[{alias:"handset",priority:2e3,mediaQuery:Vc.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Vc.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Vc.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Vc.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Vc.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Vc.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Vc.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Vc.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Vc.WEB_PORTRAIT,overlapping:!0}],Oj=/(\.|-|_)/g;function kj(s){let i=s.length>0?s.charAt(0):"",r=s.length>1?s.slice(1):"";return i.toUpperCase()+r}function Lj(s,i=[]){const r={};return s.forEach(o=>{r[o.alias]=o}),i.forEach(o=>{r[o.alias]?function(s,...i){if(null==s)throw TypeError("Cannot convert undefined or null to object");for(let r of i)if(null!=r)for(let o in r)r.hasOwnProperty(o)&&(s[o]=r[o])}(r[o.alias],o):r[o.alias]=o}),function(s){return s.forEach(i=>{i.suffix||(i.suffix=function(s){return s.replace(Oj,"|").split("|").map(kj).join("")}(i.alias),i.overlapping=!!i.overlapping)}),s}(Object.keys(r).map(o=>r[o]))}const HV=new h.OlP("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const s=(0,h.f3M)(pk),i=(0,h.f3M)(Ua),r=[].concat.apply([],(s||[]).map(a=>Array.isArray(a)?a:[a]));return Lj((i.disableDefaultBps?[]:Nj).concat(i.addOrientationBps?Mj:[]),r)}});function kC(s,i){return(i&&i.priority||0)-(s&&s.priority||0)}function Vj(s,i){return(s.priority||0)-(i.priority||0)}let PC=(()=>{class s{constructor(r){this.findByMap=new Map,this.items=[...r].sort(Vj)}findByAlias(r){return r?this.findWithPredicate(r,o=>o.alias==r):null}findByQuery(r){return this.findWithPredicate(r,o=>o.mediaQuery==r)}get overlappings(){return this.items.filter(r=>1==r.overlapping)}get aliases(){return this.items.map(r=>r.alias)}get suffixes(){return this.items.map(r=>r.suffix?r.suffix:"")}findWithPredicate(r,o){let a=this.findByMap.get(r);return a||(a=this.items.find(o)||null,this.findByMap.set(r,a)),a||null}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(HV))},s.\u0275prov=(0,h.Yz7)({factory:function(){return new s((0,h.LFG)(HV))},token:s,providedIn:"root"}),s})(),jT=(()=>{class s{constructor(r,o,a){this._zone=r,this._platformId=o,this._document=a,this.source=new xn(new Qp(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const r=[];return this.registry.forEach((o,a)=>{o.matches&&r.push(a)}),r}isActive(r){const o=this.registry.get(r);return o?o.matches:this.registerQuery(r).some(a=>a.matches)}observe(r,o=!1){if(r&&r.length){const a=this._observable$.pipe(on(g=>!o||r.indexOf(g.mediaQuery)>-1)),d=new In.y(g=>{const y=this.registerQuery(r);if(y.length){const C=y.pop();y.forEach(T=>{g.next(T)}),this.source.next(C)}g.complete()});return(0,sc.T)(d,a)}return this._observable$}registerQuery(r){const o=Array.isArray(r)?r:[r],a=[];return function(s,i){const r=s.filter(o=>!$V[o]);if(r.length>0){const o=r.join(", ");try{const a=i.createElement("style");a.setAttribute("type","text/css"),a.styleSheet||a.appendChild(i.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${o} {.fx-query-test{ }}\n`)),i.head.appendChild(a),r.forEach(d=>$V[d]=a)}catch(a){console.error(a)}}}(o,this._document),o.forEach(d=>{const g=C=>{this._zone.run(()=>this.source.next(new Qp(C.matches,d)))};let y=this.registry.get(d);y||(y=this.buildMQL(d),y.addListener(g),this.pendingRemoveListenerFns.push(()=>y.removeListener(g)),this.registry.set(d,y)),y.matches&&a.push(new Qp(!0,d))}),a}ngOnDestroy(){let r;for(;r=this.pendingRemoveListenerFns.pop();)r()}buildMQL(r){return function(s,i){return i&&window.matchMedia("all").addListener?window.matchMedia(s):{matches:"all"===s||""===s,media:s,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(r,Zn(this._platformId))}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(h.R0b),h.LFG(h.Lbi),h.LFG(ie))},s.\u0275prov=(0,h.Yz7)({factory:function(){return new s((0,h.LFG)(h.R0b),(0,h.LFG)(h.Lbi),(0,h.LFG)(ie))},token:s,providedIn:"root"}),s})();const $V={},Ov="print",Hj={alias:Ov,mediaQuery:Ov,priority:1e3};let WV=(()=>{class s{constructor(r,o,a){this.breakpoints=r,this.layoutConfig=o,this._document=a,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.isPrinting=!1,this.queue=new $j,this.deactivations=[]}withPrintQuery(r){return[...r,Ov]}isPrintEvent(r){return r.mediaQuery.startsWith(Ov)}get printAlias(){return this.layoutConfig.printWithBreakpoints||[]}get printBreakPoints(){return this.printAlias.map(r=>this.breakpoints.findByAlias(r)).filter(r=>null!==r)}getEventBreakpoints({mediaQuery:r}){const o=this.breakpoints.findByQuery(r);return(o?[...this.printBreakPoints,o]:this.printBreakPoints).sort(kC)}updateEvent(r){let o=this.breakpoints.findByQuery(r.mediaQuery);return this.isPrintEvent(r)&&(o=this.getEventBreakpoints(r)[0],r.mediaQuery=o?o.mediaQuery:""),PV(r,o)}registerBeforeAfterPrintHooks(r){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const o=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(r,this.getEventBreakpoints(new Qp(!0,Ov))),r.updateStyles())},a=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(r),r.updateStyles())};this._document.defaultView.addEventListener("beforeprint",o),this._document.defaultView.addEventListener("afterprint",a),this.beforePrintEventListeners.push(o),this.afterPrintEventListeners.push(a)}interceptEvents(r){return this.registerBeforeAfterPrintHooks(r),o=>{this.isPrintEvent(o)?o.matches&&!this.isPrinting?(this.startPrinting(r,this.getEventBreakpoints(o)),r.updateStyles()):!o.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(r),r.updateStyles()):this.collectActivations(o)}}blockPropagation(){return r=>!(this.isPrinting||this.isPrintEvent(r))}startPrinting(r,o){this.isPrinting=!0,r.activatedBreakpoints=this.queue.addPrintBreakpoints(o)}stopPrinting(r){r.activatedBreakpoints=this.deactivations,this.deactivations=[],this.queue.clear(),this.isPrinting=!1}collectActivations(r){if(!this.isPrinting||this.isPrintingBeforeAfterEvent)if(r.matches)this.isPrintingBeforeAfterEvent||(this.deactivations=[]);else{const o=this.breakpoints.findByQuery(r.mediaQuery);o&&(this.deactivations.push(o),this.deactivations.sort(kC))}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(r=>this._document.defaultView.removeEventListener("beforeprint",r)),this.afterPrintEventListeners.forEach(r=>this._document.defaultView.removeEventListener("afterprint",r)))}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(PC),h.LFG(Ua),h.LFG(ie))},s.\u0275prov=(0,h.Yz7)({factory:function(){return new s((0,h.LFG)(PC),(0,h.LFG)(Ua),(0,h.LFG)(ie))},token:s,providedIn:"root"}),s})();class $j{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(i){return i.push(Hj),i.sort(kC),i.forEach(r=>this.addBreakpoint(r)),this.printBreakpoints}addBreakpoint(i){i&&void 0===this.printBreakpoints.find(o=>o.mediaQuery===i.mediaQuery)&&(this.printBreakpoints=function(s){return!!s&&s.mediaQuery.startsWith(Ov)}(i)?[i,...this.printBreakpoints]:[...this.printBreakpoints,i])}clear(){this.printBreakpoints=[]}}function qV(s){for(let i in s){let r=s[i]||"";switch(i){case"display":s.display="flex"===r?["-webkit-flex","flex"]:"inline-flex"===r?["-webkit-inline-flex","inline-flex"]:r;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":s["-webkit-"+i]=r;break;case"flex-direction":r=r||"row",s["-webkit-flex-direction"]=r,s["flex-direction"]=r;break;case"order":s.order=s["-webkit-"+i]=isNaN(+r)?"0":r}}return s}let Bn=(()=>{class s{constructor(r,o,a,d){this._serverStylesheet=r,this._serverModuleLoaded=o,this._platformId=a,this.layoutConfig=d}applyStyleToElement(r,o,a=null){let d={};"string"==typeof o&&(d[o]=a,o=d),d=this.layoutConfig.disableVendorPrefixes?o:qV(o),this._applyMultiValueStyleToElement(d,r)}applyStyleToElements(r,o=[]){const a=this.layoutConfig.disableVendorPrefixes?r:qV(r);o.forEach(d=>{this._applyMultiValueStyleToElement(a,d)})}getFlowDirection(r){const o="flex-direction";let a=this.lookupStyle(r,o);return[a||"row",this.lookupInlineStyle(r,o)||Ws(this._platformId)&&this._serverModuleLoaded?a:""]}hasWrap(r){return"wrap"===this.lookupStyle(r,"flex-wrap")}lookupAttributeValue(r,o){return r.getAttribute(o)||""}lookupInlineStyle(r,o){return Zn(this._platformId)?r.style.getPropertyValue(o):this._getServerStyle(r,o)}lookupStyle(r,o,a=!1){let d="";return r&&((d=this.lookupInlineStyle(r,o))||(Zn(this._platformId)?a||(d=getComputedStyle(r).getPropertyValue(o)):this._serverModuleLoaded&&(d=this._serverStylesheet.getStyleForElement(r,o)))),d?d.trim():""}_applyMultiValueStyleToElement(r,o){Object.keys(r).sort().forEach(a=>{const d=r[a],g=Array.isArray(d)?d:[d];g.sort();for(let y of g)y=y?y+"":"",Zn(this._platformId)||!this._serverModuleLoaded?Zn(this._platformId)?o.style.setProperty(a,y):this._setServerStyle(o,a,y):this._serverStylesheet.addStyleToElement(o,a,y)})}_setServerStyle(r,o,a){o=o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const d=this._readStyleAttribute(r);d[o]=a||"",this._writeStyleAttribute(r,d)}_getServerStyle(r,o){return this._readStyleAttribute(r)[o]||""}_readStyleAttribute(r){const o={},a=r.getAttribute("style");if(a){const d=a.split(/;+/g);for(let g=0;g<d.length;g++){const y=d[g].trim();if(y.length>0){const C=y.indexOf(":");if(-1===C)throw new Error(`Invalid CSS style: ${y}`);o[y.substr(0,C).trim()]=y.substr(C+1).trim()}}}return o}_writeStyleAttribute(r,o){let a="";for(const d in o)o[d]&&(a+=d+":"+o[d]+";");r.setAttribute("style",a)}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(kV),h.LFG(Jp),h.LFG(h.Lbi),h.LFG(Ua))},s.\u0275prov=(0,h.Yz7)({factory:function(){return new s((0,h.LFG)(kV),(0,h.LFG)(Jp),(0,h.LFG)(h.Lbi),(0,h.LFG)(Ua))},token:s,providedIn:"root"}),s})(),rr=(()=>{class s{constructor(r,o,a){this.matchMedia=r,this.breakpoints=o,this.hook=a,this.activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new Yt.xQ,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?this.activatedBreakpoints[0].alias:""}onMediaChange(r){const o=this.findByQuery(r.mediaQuery);o&&((r=PV(r,o)).matches&&-1===this.activatedBreakpoints.indexOf(o)?(this.activatedBreakpoints.push(o),this.activatedBreakpoints.sort(kC),this.updateStyles()):!r.matches&&-1!==this.activatedBreakpoints.indexOf(o)&&(this.activatedBreakpoints.splice(this.activatedBreakpoints.indexOf(o),1),this.activatedBreakpoints.sort(kC),this.updateStyles()))}init(r,o,a,d,g=[]){ZV(this.updateMap,r,o,a),ZV(this.clearMap,r,o,d),this.buildElementKeyMap(r,o),this.watchExtraTriggers(r,o,g)}getValue(r,o,a){const d=this.elementMap.get(r);if(d){const g=void 0!==a?d.get(a):this.getActivatedValues(d,o);if(g)return g.get(o)}}hasValue(r,o){const a=this.elementMap.get(r);if(a){const d=this.getActivatedValues(a,o);if(d)return void 0!==d.get(o)||!1}return!1}setValue(r,o,a,d){let g=this.elementMap.get(r);if(g){const C=(g.get(d)||new Map).set(o,a);g.set(d,C),this.elementMap.set(r,g)}else g=(new Map).set(d,(new Map).set(o,a)),this.elementMap.set(r,g);const y=this.getValue(r,o);void 0!==y&&this.updateElement(r,o,y)}trackValue(r,o){return this.subject.asObservable().pipe(on(a=>a.element===r&&a.key===o))}updateStyles(){this.elementMap.forEach((r,o)=>{const a=new Set(this.elementKeyMap.get(o));let d=this.getActivatedValues(r);d&&d.forEach((g,y)=>{this.updateElement(o,y,g),a.delete(y)}),a.forEach(g=>{if(d=this.getActivatedValues(r,g),d){const y=d.get(g);this.updateElement(o,g,y)}else this.clearElement(o,g)})})}clearElement(r,o){const a=this.clearMap.get(r);if(a){const d=a.get(o);d&&(d(),this.subject.next({element:r,key:o,value:""}))}}updateElement(r,o,a){const d=this.updateMap.get(r);if(d){const g=d.get(o);g&&(g(a),this.subject.next({element:r,key:o,value:a}))}}releaseElement(r){const o=this.watcherMap.get(r);o&&(o.forEach(d=>d.unsubscribe()),this.watcherMap.delete(r));const a=this.elementMap.get(r);a&&(a.forEach((d,g)=>a.delete(g)),this.elementMap.delete(r))}triggerUpdate(r,o){const a=this.elementMap.get(r);if(a){const d=this.getActivatedValues(a,o);d&&(o?this.updateElement(r,o,d.get(o)):d.forEach((g,y)=>this.updateElement(r,y,g)))}}buildElementKeyMap(r,o){let a=this.elementKeyMap.get(r);a||(a=new Set,this.elementKeyMap.set(r,a)),a.add(o)}watchExtraTriggers(r,o,a){if(a&&a.length){let d=this.watcherMap.get(r);if(d||(d=new Map,this.watcherMap.set(r,d)),!d.get(o)){const y=(0,sc.T)(...a).subscribe(()=>{const C=this.getValue(r,o);this.updateElement(r,o,C)});d.set(o,y)}}}findByQuery(r){return this.breakpoints.findByQuery(r)}getActivatedValues(r,o){for(let d=0;d<this.activatedBreakpoints.length;d++){const y=r.get(this.activatedBreakpoints[d].alias);if(y&&(void 0===o||y.has(o)&&null!=y.get(o)))return y}const a=r.get("");return void 0===o||a&&a.has(o)?a:void 0}observeActivations(){const o=this.breakpoints.items.map(a=>a.mediaQuery);this.matchMedia.observe(this.hook.withPrintQuery(o)).pipe((0,$n.b)(this.hook.interceptEvents(this)),on(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(jT),h.LFG(PC),h.LFG(WV))},s.\u0275prov=(0,h.Yz7)({factory:function(){return new s((0,h.LFG)(jT),(0,h.LFG)(PC),(0,h.LFG)(WV))},token:s,providedIn:"root"}),s})();function ZV(s,i,r,o){if(void 0!==o){let a=s.get(i);a||(a=new Map,s.set(i,a)),a.set(r,o)}}let Jj=(()=>{class s extends nr{constructor(r,o,a,d,g,y,C){super(r,null,o,a),this.ngClassInstance=C,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new yo(d,g,r,y)),this.init(),this.setValue("","")}set klass(r){this.ngClassInstance.klass=r,this.setValue(r,"")}updateWithValue(r){this.ngClassInstance.ngClass=r,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return s.\u0275fac=function(r){return new(r||s)(h.Y36(h.SBq),h.Y36(Bn),h.Y36(rr),h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.Qsj),h.Y36(yo,10))},s.\u0275dir=h.lG2({type:s,inputs:{klass:["class","klass"]},features:[h.qOj]}),s})();const Xj=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let KV=(()=>{class s extends Jj{constructor(){super(...arguments),this.inputs=Xj}}return s.\u0275fac=function(){let i;return function(o){return(i||(i=h.n5z(s)))(o||s)}}(),s.\u0275dir=h.lG2({type:s,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[h.qOj]}),s})(),n2=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[fk]]}),s})();function cH(s,i){if(1&s){const r=h.EpF();h.TgZ(0,"div",8),h.TgZ(1,"div",9),h.TgZ(2,"div",10),h._uU(3),h.qZA(),h.TgZ(4,"div",11),h._uU(5),h.qZA(),h.TgZ(6,"div",1),h.TgZ(7,"button",2),h.NdJ("click",function(){const d=h.CHM(r).$implicit,g=h.oxw(2),y=h.MAs(7);return g.openModal(y,d.id)}),h._UZ(8,"i",3),h._uU(9," Update "),h.qZA(),h.TgZ(10,"button",2),h.NdJ("click",function(){const d=h.CHM(r).$implicit;return h.oxw(2).deleteEmployee(d.id)}),h._UZ(11,"i",3),h._uU(12," Delete "),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&s){const r=i.$implicit;h.xp6(3),h.Oqu(r.name),h.xp6(2),h.Oqu(r.email)}}function dH(s,i){if(1&s&&(h.TgZ(0,"div",6),h.YNc(1,cH,13,2,"div",7),h.qZA()),2&s){const r=h.oxw();h.xp6(1),h.Q6J("ngForOf",r.employeeList)}}const r2=function(s){return{"error-border":s}};function hH(s,i){if(1&s){const r=h.EpF();h.TgZ(0,"div",12),h._uU(1),h.qZA(),h.TgZ(2,"div",13),h.TgZ(3,"form",14),h.TgZ(4,"div",15),h.TgZ(5,"label",16),h._uU(6,"Name"),h.qZA(),h._UZ(7,"input",17),h.qZA(),h.TgZ(8,"div",15),h.TgZ(9,"label",18),h._uU(10,"Email"),h.qZA(),h._UZ(11,"input",19),h.qZA(),h.qZA(),h.TgZ(12,"div",20),h.TgZ(13,"button",21),h.NdJ("click",function(){const d=h.CHM(r).dismiss,g=h.oxw();return g.employeeDetails?g.updateEmployee(g.employeeDetails.id):g.addEmployee(),d()}),h._uU(14,"Save"),h.qZA(),h.TgZ(15,"button",22),h.NdJ("click",function(){return h.CHM(r).dismiss()}),h._uU(16,"Cancel"),h.qZA(),h.qZA(),h.qZA()}if(2&s){const r=h.oxw();h.xp6(1),h.hij(" ",r.employeeDetails?"Update":"Add"," employee "),h.xp6(2),h.Q6J("formGroup",r.form),h.xp6(4),h.Q6J("ngClass",h.VKq(5,r2,!r.form.get("name").valid&&r.form.get("name").dirty)),h.xp6(4),h.Q6J("ngClass",h.VKq(7,r2,!r.form.get("email").valid&&r.form.get("email").dirty)),h.xp6(2),h.Q6J("disabled",!r.form.valid)}}let fH=(()=>{class s{constructor(r,o,a){this.fb=r,this.modalservice=o,this.fireBaseService=a,this.employeeList=[],this.title="CRUD"}ngOnInit(){this.getEmployees()}getEmployees(){this.fireBaseService.getEmployee().subscribe(r=>{this.employeeList=r.map(o=>Object.assign(Object.assign({},o.payload.doc.data()),{id:o.payload.doc.id}))})}openModal(r,o){this.employeeDetails=this.employeeList.find(a=>a.id===o),this.formInit(this.employeeDetails),this.modalservice.open(r,{backdrop:"static",centered:!0})}formInit(r){this.form=this.fb.group({name:[r?r.name:"",Es.required],email:[r?r.email:"",Es.compose([Es.required,Es.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)])]})}addEmployee(){this.fireBaseService.addEmployee(this.form.value).then()}updateEmployee(r){this.fireBaseService.updateEmployee(r,this.form.value).then()}deleteEmployee(r){this.fireBaseService.deleteEmployee(r).then()}}return s.\u0275fac=function(r){return new(r||s)(h.Y36(DS),h.Y36(ix),h.Y36(Ej))},s.\u0275cmp=h.Xpm({type:s,selectors:[["app-root"]],decls:8,vars:1,consts:[[1,"container-fluid"],[1,"text-right","mb-4"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus"],["class","row",4,"ngIf"],["popup",""],[1,"row"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"col-md-3"],[1,"card"],[1,"heading"],[1,"sub-heading"],[1,"modal-header","text-primary"],[1,"modal-body"],[3,"formGroup"],[1,"form-group"],["for","name"],["id","name","type","text","formControlName","name",1,"form-control",3,"ngClass"],["for","email"],["id","email","type","text","formControlName","email",1,"form-control",3,"ngClass"],[1,"text-center"],[1,"btn","btn-primary","btn-sm","pl-4","pr-4","mr-2",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm","pl-4","pr-4","ml-2",3,"click"]],template:function(r,o){if(1&r){const a=h.EpF();h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"button",2),h.NdJ("click",function(){h.CHM(a);const g=h.MAs(7);return o.openModal(g,null)}),h._UZ(3,"i",3),h._uU(4," Add "),h.qZA(),h.qZA(),h.YNc(5,dH,2,1,"div",4),h.YNc(6,hH,17,9,"ng-template",null,5,h.W1O),h.qZA()}2&r&&(h.xp6(5),h.Q6J("ngIf",o.employeeList.length))},directives:[or,Tt,cD,B0,Wd,Ld,xa,Og,yo,KV],styles:[".container-fluid[_ngcontent-%COMP%]{padding:50px 100px}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:5px;padding:10px 20px}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:20px}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .sub-heading[_ngcontent-%COMP%]{font-size:15px}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:none}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{position:absolute;top:35%;right:5%;display:block}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:0 5px;cursor:pointer}input[_ngcontent-%COMP%]:focus{box-shadow:none!important}button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none!important}.error-border[_ngcontent-%COMP%]{border:1px solid #0cda05}"]}),s})(),pH=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({}),s})(),l2=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[fk,pH]]}),s})(),m2=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[fk]]}),s})(),H6=(()=>{class s{constructor(r,o){Ws(o)&&!r&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(r,o=[]){return{ngModule:s,providers:r.serverLoaded?[{provide:Ua,useValue:Object.assign(Object.assign({},gk),r)},{provide:pk,useValue:o,multi:!0},{provide:Jp,useValue:!0}]:[{provide:Ua,useValue:Object.assign(Object.assign({},gk),r)},{provide:pk,useValue:o,multi:!0}]}}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(Jp),h.LFG(h.Lbi))},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[l2,n2,m2],l2,n2,m2]}),s})();class W6{constructor(i){this.predicate=i}call(i,r){return r.subscribe(new q6(i,this.predicate))}}class q6 extends Gr.L{constructor(i,r){super(i),this.predicate=r,this.skipping=!0,this.index=0}_next(i){const r=this.destination;this.skipping&&this.tryCallPredicate(i),this.skipping||r.next(i)}tryCallPredicate(i){try{const r=this.predicate(i,this.index++);this.skipping=Boolean(r)}catch(r){this.destination.error(r)}}}let bk="";function _2(s){bk=s}class Z6{constructor(i){this.domStorage_=i,this.prefix_="firebase:"}set(i,r){null==r?this.domStorage_.removeItem(this.prefixedName_(i)):this.domStorage_.setItem(this.prefixedName_(i),(0,L.Pz)(r))}get(i){const r=this.domStorage_.getItem(this.prefixedName_(i));return null==r?null:(0,L.cI)(r)}remove(i){this.domStorage_.removeItem(this.prefixedName_(i))}prefixedName_(i){return this.prefix_+i}toString(){return this.domStorage_.toString()}}class K6{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(i,r){null==r?delete this.cache_[i]:this.cache_[i]=r}get(i){return(0,L.r3)(this.cache_,i)?this.cache_[i]:null}remove(i){delete this.cache_[i]}}const y2=function(s){try{if("undefined"!=typeof window&&void 0!==window[s]){const i=window[s];return i.setItem("firebase:sentinel","cache"),i.removeItem("firebase:sentinel"),new Z6(i)}}catch(i){}return new K6},Xp=y2("localStorage"),wk=y2("sessionStorage"),kv=new Sa.Yd("@firebase/database"),v2=function(){let s=1;return function(){return s++}}(),b2=function(s){const i=(0,L.dS)(s),r=new L.gQ;r.update(i);const o=r.digest();return L.US.encodeByteArray(o)},LC=function(...s){let i="";for(let r=0;r<s.length;r++){const o=s[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?i+=LC.apply(null,o):i+="object"==typeof o?(0,L.Pz)(o):o,i+=" "}return i};let em=null,w2=!0;const C2=function(s,i){(0,L.hu)(!i||!0===s||!1===s,"Can't turn on custom loggers persistently."),!0===s?(kv.logLevel=Sa.in.VERBOSE,em=kv.log.bind(kv),i&&wk.set("logging_enabled",!0)):"function"==typeof s?em=s:(em=null,wk.remove("logging_enabled"))},_i=function(...s){if(!0===w2&&(w2=!1,null===em&&!0===wk.get("logging_enabled")&&C2(!0)),em){const i=LC.apply(null,s);em(i)}},VC=function(s){return function(...i){_i(s,...i)}},Ck=function(...s){const i="FIREBASE INTERNAL ERROR: "+LC(...s);kv.error(i)},lu=function(...s){const i=`FIREBASE FATAL ERROR: ${LC(...s)}`;throw kv.error(i),new Error(i)},gs=function(...s){const i="FIREBASE WARNING: "+LC(...s);kv.warn(i)},WT=function(s){return"number"==typeof s&&(s!=s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},Bc="[MIN_NAME]",uu="[MAX_NAME]",tm=function(s,i){if(s===i)return 0;if(s===Bc||i===uu)return-1;if(i===Bc||s===uu)return 1;{const r=qT(s),o=qT(i);return null!==r?null!==o?r-o==0?s.length-i.length:r-o:-1:null!==o?1:s<i?-1:1}},X6=function(s,i){return s===i?0:s<i?-1:1},BC=function(s,i){if(i&&s in i)return i[s];throw new Error("Missing required key ("+s+") in object: "+(0,L.Pz)(i))},Ek=function(s){if("object"!=typeof s||null===s)return(0,L.Pz)(s);const i=[];for(const o in s)i.push(o);i.sort();let r="{";for(let o=0;o<i.length;o++)0!==o&&(r+=","),r+=(0,L.Pz)(i[o]),r+=":",r+=Ek(s[i[o]]);return r+="}",r},E2=function(s,i){const r=s.length;if(r<=i)return[s];const o=[];for(let a=0;a<r;a+=i)o.push(s.substring(a,a+i>r?r:a+i));return o};function yi(s,i){for(const r in s)s.hasOwnProperty(r)&&i(r,s[r])}const D2=function(s){(0,L.hu)(!WT(s),"Invalid JSON number");const o=1023;let a,d,g,y,C;0===s?(d=0,g=0,a=1/s==-1/0?1:0):(a=s<0,(s=Math.abs(s))>=Math.pow(2,1-o)?(y=Math.min(Math.floor(Math.log(s)/Math.LN2),o),d=y+o,g=Math.round(s*Math.pow(2,52-y)-Math.pow(2,52))):(d=0,g=Math.round(s/Math.pow(2,-1074))));const T=[];for(C=52;C;C-=1)T.push(g%2?1:0),g=Math.floor(g/2);for(C=11;C;C-=1)T.push(d%2?1:0),d=Math.floor(d/2);T.push(a?1:0),T.reverse();const S=T.join("");let N="";for(C=0;C<64;C+=8){let O=parseInt(S.substr(C,8),2).toString(16);1===O.length&&(O="0"+O),N+=O}return N.toLowerCase()},r8=new RegExp("^-?(0*)\\d{1,10}$"),x2=-2147483648,Dk=2147483647,qT=function(s){if(r8.test(s)){const i=Number(s);if(i>=x2&&i<=Dk)return i}return null},Pv=function(s){try{s()}catch(i){setTimeout(()=>{throw gs("Exception was thrown by user callback.",i.stack||""),i},Math.floor(0))}},UC=function(s,i){const r=setTimeout(s,i);return"object"==typeof r&&r.unref&&r.unref(),r};class s8{constructor(i,r){this.appName_=i,this.appCheckProvider=r,this.appCheck=null==r?void 0:r.getImmediate({optional:!0}),this.appCheck||null==r||r.get().then(o=>this.appCheck=o)}getToken(i){return this.appCheck?this.appCheck.getToken(i):new Promise((r,o)=>{setTimeout(()=>{this.appCheck?this.getToken(i).then(r,o):r(null)},0)})}addTokenChangeListener(i){var r;null===(r=this.appCheckProvider)||void 0===r||r.get().then(o=>o.addTokenListener(i))}notifyForInvalidToken(){gs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class o8{constructor(i,r,o){this.appName_=i,this.firebaseOptions_=r,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(a=>this.auth_=a)}getToken(i){return this.auth_?this.auth_.getToken(i).catch(r=>r&&"auth/token-not-initialized"===r.code?(_i("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,o)=>{setTimeout(()=>{this.auth_?this.getToken(i).then(r,o):r(null)},0)})}addTokenChangeListener(i){this.auth_?this.auth_.addAuthTokenListener(i):this.authProvider_.get().then(r=>r.addAuthTokenListener(i))}removeTokenChangeListener(i){this.authProvider_.get().then(r=>r.removeAuthTokenListener(i))}notifyForInvalidToken(){let i='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';i+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gs(i)}}let GC=(()=>{class s{constructor(r){this.accessToken=r}getToken(r){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(r){r(this.accessToken)}removeTokenChangeListener(r){}notifyForInvalidToken(){}}return s.OWNER="owner",s})();const N2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,R2="websocket",O2="long_polling";class k2{constructor(i,r,o,a,d=!1,g="",y=!1){this.secure=r,this.namespace=o,this.webSocketOnly=a,this.nodeAdmin=d,this.persistenceKey=g,this.includeNamespaceInQueryParams=y,this._host=i.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Xp.get("host:"+i)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(i){i!==this.internalHost&&(this.internalHost=i,this.isCacheableHost()&&Xp.set("host:"+this._host,this.internalHost))}toString(){let i=this.toURLString();return this.persistenceKey&&(i+="<"+this.persistenceKey+">"),i}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function P2(s,i,r){let o;if((0,L.hu)("string"==typeof i,"typeof type must == string"),(0,L.hu)("object"==typeof r,"typeof params must == object"),i===R2)o=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else{if(i!==O2)throw new Error("Unknown connection type: "+i);o=(s.secure?"https://":"http://")+s.internalHost+"/.lp?"}(function(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams})(s)&&(r.ns=s.namespace);const a=[];return yi(r,(d,g)=>{a.push(d+"="+g)}),o+a.join("&")}class u8{constructor(){this.counters_={}}incrementCounter(i,r=1){(0,L.r3)(this.counters_,i)||(this.counters_[i]=0),this.counters_[i]+=r}get(){return(0,L.p$)(this.counters_)}}const Ik={},Tk={};function Ak(s){const i=s.toString();return Ik[i]||(Ik[i]=new u8),Ik[i]}class d8{constructor(i){this.onMessage_=i,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(i,r){this.closeAfterResponse=i,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(i,r){for(this.pendingResponses[i]=r;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<o.length;++a)o[a]&&Pv(()=>{this.onMessage_(o[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Fv{constructor(i,r,o,a,d,g,y){this.connId=i,this.repoInfo=r,this.applicationId=o,this.appCheckToken=a,this.authToken=d,this.transportSessionId=g,this.lastSessionId=y,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=VC(i),this.stats_=Ak(r),this.urlFn=C=>(this.appCheckToken&&(C.ac=this.appCheckToken),P2(r,O2,C))}open(i,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new d8(i),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(s){if((0,L.Yr)()||"complete"===document.readyState)s();else{let i=!1;const r=function(){document.body?i||(i=!0,s()):setTimeout(r,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&r()}),window.attachEvent("onload",r))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Sk((...d)=>{const[g,y,C,T,S]=d;if(this.incrementIncomingBytes_(d),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===g)this.id=y,this.password=C;else{if("close"!==g)throw new Error("Unrecognized command received: "+g);y?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(y,()=>{this.onClosed_()})):this.onClosed_()}},(...d)=>{const[g,y]=d;this.incrementIncomingBytes_(d),this.myPacketOrderer.handleResponse(g,y)},()=>{this.onClosed_()},this.urlFn);const o={start:"t"};o.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(o.cb=this.scriptTagHolder.uniqueCallbackIdentifier),o.v="5",this.transportSessionId&&(o.s=this.transportSessionId),this.lastSessionId&&(o.ls=this.lastSessionId),this.applicationId&&(o.p=this.applicationId),this.appCheckToken&&(o.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&N2.test(location.hostname)&&(o.r="f");const a=this.urlFn(o);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fv.forceAllow_=!0}static forceDisallow(){Fv.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!Fv.forceAllow_&&(Fv.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(i){const r=(0,L.Pz)(i);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=(0,L.h$)(r),a=E2(o,1840);for(let d=0;d<a.length;d++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[d]),this.curSegmentNum++}addDisconnectPingFrame(i,r){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const o={dframe:"t"};o.id=i,o.pw=r,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(i){const r=(0,L.Pz)(i).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class Sk{constructor(i,r,o,a){if(this.onDisconnect=o,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=i,this.onMessageCB=r;else{this.uniqueCallbackIdentifier=v2(),window["pLPCommand"+this.uniqueCallbackIdentifier]=i,window["pRTLPCB"+this.uniqueCallbackIdentifier]=r,this.myIFrame=Sk.createIFrame_();let d="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(d='<script>document.domain="'+document.domain+'";<\/script>');const g="<html><body>"+d+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(g),this.myIFrame.doc.close()}catch(y){_i("frame writing exception"),y.stack&&_i(y.stack),_i(y)}}}static createIFrame_(){const i=document.createElement("iframe");if(i.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(i);try{i.contentWindow.document||_i("No IE domain setting required")}catch(r){const o=document.domain;i.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}return i.contentDocument?i.doc=i.contentDocument:i.contentWindow?i.doc=i.contentWindow.document:i.document&&(i.doc=i.document),i}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const i=this.onDisconnect;i&&(this.onDisconnect=null,i())}startLongPoll(i,r){for(this.myID=i,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const i={};i.id=this.myID,i.pw=this.myPW,i.ser=this.currentSerial;let r=this.urlFn(i),o="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+o.length<=1870;){const g=this.pendingSegs.shift();o=o+"&seg"+a+"="+g.seg+"&ts"+a+"="+g.ts+"&d"+a+"="+g.d,a++}return r+=o,this.addLongPollTag_(r,this.currentSerial),!0}return!1}enqueueSegment(i,r,o){this.pendingSegs.push({seg:i,ts:r,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(i,r){this.outstandingRequests.add(r);const o=()=>{this.outstandingRequests.delete(r),this.newRequest_()},a=setTimeout(o,Math.floor(25e3));this.addTag(i,()=>{clearTimeout(a),o()})}addTag(i,r){(0,L.Yr)()?this.doNodeLongPoll(i,r):setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=i,o.onload=o.onreadystatechange=function(){const a=o.readyState;(!a||"loaded"===a||"complete"===a)&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),r())},o.onerror=()=>{_i("Long-poll script failed to load: "+i),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch(o){}},Math.floor(1))}}let jC=null;"undefined"!=typeof MozWebSocket?jC=MozWebSocket:"undefined"!=typeof WebSocket&&(jC=WebSocket);let HC=(()=>{class s{constructor(r,o,a,d,g,y,C){this.connId=r,this.applicationId=a,this.appCheckToken=d,this.authToken=g,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=VC(this.connId),this.stats_=Ak(o),this.connURL=s.connectionURL_(o,y,C,d),this.nodeAdmin=o.nodeAdmin}static connectionURL_(r,o,a,d){const g={v:"5"};return!(0,L.Yr)()&&"undefined"!=typeof location&&location.hostname&&N2.test(location.hostname)&&(g.r="f"),o&&(g.s=o),a&&(g.ls=a),d&&(g.ac=d),P2(r,R2,g)}open(r,o){this.onDisconnect=o,this.onMessage=r,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Xp.set("previous_websocket_failure",!0);try{if((0,L.Yr)()){const d={headers:{"User-Agent":`Firebase/5/${bk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(d.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(d.headers["X-Firebase-AppCheck"]=this.appCheckToken);const g=process.env,y=0===this.connURL.indexOf("wss://")?g.HTTPS_PROXY||g.https_proxy:g.HTTP_PROXY||g.http_proxy;y&&(d.proxy={origin:y}),this.mySock=new jC(this.connURL,[],d)}else this.mySock=new jC(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(a){this.log_("Error instantiating WebSocket.");const d=a.message||a.data;return d&&this.log_(d),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const d=a.message||a.data;d&&this.log_(d),this.onClosed_()}}start(){}static forceDisallow(){s.forceDisallow_=!0}static isAvailable(){let r=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const a=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);a&&a.length>1&&parseFloat(a[1])<4.4&&(r=!0)}return!r&&null!==jC&&!s.forceDisallow_}static previouslyFailed(){return Xp.isInMemoryStorage||!0===Xp.get("previous_websocket_failure")}markConnectionHealthy(){Xp.remove("previous_websocket_failure")}appendFrame_(r){if(this.frames.push(r),this.frames.length===this.totalFrames){const o=this.frames.join("");this.frames=null;const a=(0,L.cI)(o);this.onMessage(a)}}handleNewFrameCount_(r){this.totalFrames=r,this.frames=[]}extractFrameCount_(r){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),r.length<=6){const o=Number(r);if(!isNaN(o))return this.handleNewFrameCount_(o),null}return this.handleNewFrameCount_(1),r}handleIncomingFrame(r){if(null===this.mySock)return;const o=r.data;if(this.bytesReceived+=o.length,this.stats_.incrementCounter("bytes_received",o.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(o);else{const a=this.extractFrameCount_(o);null!==a&&this.appendFrame_(a)}}send(r){this.resetKeepAlive();const o=(0,L.Pz)(r);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const a=E2(o,16384);a.length>1&&this.sendString_(String(a.length));for(let d=0;d<a.length;d++)this.sendString_(a[d])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(r){try{this.mySock.send(r)}catch(o){this.log_("Exception thrown from WebSocket.send():",o.message||o.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return s.responsesRequiredToBeHealthy=2,s.healthyTimeout=3e4,s})();class Nk{constructor(i){this.initTransports_(i)}static get ALL_TRANSPORTS(){return[Fv,HC]}initTransports_(i){const r=HC&&HC.isAvailable();let o=r&&!HC.previouslyFailed();if(i.webSocketOnly&&(r||gs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[HC];else{const a=this.transports_=[];for(const d of Nk.ALL_TRANSPORTS)d&&d.isAvailable()&&a.push(d)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class R8{constructor(i,r,o,a,d,g,y,C,T,S){this.id=i,this.repoInfo_=r,this.applicationId_=o,this.appCheckToken_=a,this.authToken_=d,this.onMessage_=g,this.onReady_=y,this.onDisconnect_=C,this.onKill_=T,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=VC("c:"+this.id+":"),this.transportManager_=new Nk(r),this.log_("Connection created"),this.start_()}start_(){const i=this.transportManager_.initialTransport();this.conn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,o)},Math.floor(0));const a=i.healthyTimeout||0;a>0&&(this.healthyTimeout_=UC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(i){return r=>{i===this.conn_?this.onConnectionLost_(r):i===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(i){return r=>{2!==this.state_&&(i===this.rx_?this.onPrimaryMessageReceived_(r):i===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(i){this.sendData_({t:"d",d:i})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(i){if("t"in i){const r=i.t;"a"===r?this.upgradeIfSecondaryHealthy_():"r"===r?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===r&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(i){const r=BC("t",i),o=BC("d",i);if("c"===r)this.onSecondaryControl_(o);else{if("d"!==r)throw new Error("Unknown protocol layer: "+r);this.pendingDataMessages.push(o)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(i){const r=BC("t",i),o=BC("d",i);"c"===r?this.onControl_(o):"d"===r&&this.onDataMessage_(o)}onDataMessage_(i){this.onPrimaryResponse_(),this.onMessage_(i)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(i){const r=BC("t",i);if("d"in i){const o=i.d;if("h"===r)this.onHandshake_(o);else if("n"===r){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===r?this.onConnectionShutdown_(o):"r"===r?this.onReset_(o):"e"===r?Ck("Server Error: "+o):"o"===r?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ck("Unknown control packet command: "+r)}}onHandshake_(i){const r=i.ts,o=i.v,a=i.h;this.sessionId=i.s,this.repoInfo_.host=a,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),"5"!==o&&gs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const i=this.transportManager_.upgradeTransport();i&&this.startUpgrade_(i)}startUpgrade_(i){this.secondaryConn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,o),UC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(i){this.log_("Reset packet received.  New host: "+i),this.repoInfo_.host=i,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(i,r){this.log_("Realtime connection established."),this.conn_=i,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):UC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const i=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===i||this.rx_===i)&&this.close()}onConnectionLost_(i){this.conn_=null,i||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Xp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(i){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(i),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(i){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(i)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class z2{put(i,r,o,a){}merge(i,r,o,a){}refreshAuthToken(i){}refreshAppCheckToken(i){}onDisconnectPut(i,r,o){}onDisconnectMerge(i,r,o){}onDisconnectCancel(i,r){}reportStats(i){}}class Z2{constructor(i){this.allowedEvents_=i,this.listeners_={},(0,L.hu)(Array.isArray(i)&&i.length>0,"Requires a non-empty array")}trigger(i,...r){if(Array.isArray(this.listeners_[i])){const o=[...this.listeners_[i]];for(let a=0;a<o.length;a++)o[a].callback.apply(o[a].context,r)}}on(i,r,o){this.validateEventType_(i),this.listeners_[i]=this.listeners_[i]||[],this.listeners_[i].push({callback:r,context:o});const a=this.getInitialEvent(i);a&&r.apply(o,a)}off(i,r,o){this.validateEventType_(i);const a=this.listeners_[i]||[];for(let d=0;d<a.length;d++)if(a[d].callback===r&&(!o||o===a[d].context))return void a.splice(d,1)}validateEventType_(i){(0,L.hu)(this.allowedEvents_.find(r=>r===i),"Unknown event: "+i)}}class zT extends Z2{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zT}getInitialEvent(i){return(0,L.hu)("online"===i,"Unknown event type: "+i),[this.online_]}currentlyOnline(){return this.online_}}class ln{constructor(i,r){if(void 0===r){this.pieces_=i.split("/");let o=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[o]=this.pieces_[a],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=i,this.pieceNum_=r}toString(){let i="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)""!==this.pieces_[r]&&(i+="/"+this.pieces_[r]);return i||"/"}}function Jt(){return new ln("")}function Ut(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function df(s){return s.pieces_.length-s.pieceNum_}function wn(s){let i=s.pieceNum_;return i<s.pieces_.length&&i++,new ln(s.pieces_,i)}function Rk(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function $C(s,i=0){return s.pieces_.slice(s.pieceNum_+i)}function J2(s){if(s.pieceNum_>=s.pieces_.length)return null;const i=[];for(let r=s.pieceNum_;r<s.pieces_.length-1;r++)i.push(s.pieces_[r]);return new ln(i,0)}function Yn(s,i){const r=[];for(let o=s.pieceNum_;o<s.pieces_.length;o++)r.push(s.pieces_[o]);if(i instanceof ln)for(let o=i.pieceNum_;o<i.pieces_.length;o++)r.push(i.pieces_[o]);else{const o=i.split("/");for(let a=0;a<o.length;a++)o[a].length>0&&r.push(o[a])}return new ln(r,0)}function Gt(s){return s.pieceNum_>=s.pieces_.length}function ps(s,i){const r=Ut(s),o=Ut(i);if(null===r)return i;if(r===o)return ps(wn(s),wn(i));throw new Error("INTERNAL ERROR: innerPath ("+i+") is not within outerPath ("+s+")")}function k8(s,i){const r=$C(s,0),o=$C(i,0);for(let a=0;a<r.length&&a<o.length;a++){const d=tm(r[a],o[a]);if(0!==d)return d}return r.length===o.length?0:r.length<o.length?-1:1}function Ok(s,i){if(df(s)!==df(i))return!1;for(let r=s.pieceNum_,o=i.pieceNum_;r<=s.pieces_.length;r++,o++)if(s.pieces_[r]!==i.pieces_[o])return!1;return!0}function jo(s,i){let r=s.pieceNum_,o=i.pieceNum_;if(df(s)>df(i))return!1;for(;r<s.pieces_.length;){if(s.pieces_[r]!==i.pieces_[o])return!1;++r,++o}return!0}class P8{constructor(i,r){this.errorPrefix_=r,this.parts_=$C(i,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=(0,L.ug)(this.parts_[o]);X2(this)}}function X2(s){if(s.byteLength_>768)throw new Error(s.errorPrefix_+"has a key path longer than 768 bytes ("+s.byteLength_+").");if(s.parts_.length>32)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+nm(s))}function nm(s){return 0===s.parts_.length?"":"in property '"+s.parts_.join(".")+"'"}class kk extends Z2{constructor(){let i,r;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(r="visibilitychange",i="hidden"):void 0!==document.mozHidden?(r="mozvisibilitychange",i="mozHidden"):void 0!==document.msHidden?(r="msvisibilitychange",i="msHidden"):void 0!==document.webkitHidden&&(r="webkitvisibilitychange",i="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const o=!document[i];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}static getInstance(){return new kk}getInitialEvent(i){return(0,L.hu)("visible"===i,"Unknown event type: "+i),[this.visible_]}}const WC=1e3;let KT,Lv=(()=>{class s extends z2{constructor(r,o,a,d,g,y,C,T){if(super(),this.repoInfo_=r,this.applicationId_=o,this.onDataUpdate_=a,this.onConnectStatus_=d,this.onServerInfoUpdate_=g,this.authTokenProvider_=y,this.appCheckTokenProvider_=C,this.authOverride_=T,this.id=s.nextPersistentConnectionId_++,this.log_=VC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=WC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,T&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kk.getInstance().on("visible",this.onVisible_,this),-1===r.host.indexOf("fblocal")&&zT.getInstance().on("online",this.onOnline_,this)}sendRequest(r,o,a){const d=++this.requestNumber_,g={r:d,a:r,b:o};this.log_((0,L.Pz)(g)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(g),a&&(this.requestCBHash_[d]=a)}get(r){this.initConnection_();const o=new L.BH,a={p:r._path.toString(),q:r._queryObject},d={action:"g",request:a,onComplete:y=>{const C=y.d;"ok"===y.s?(this.onDataUpdate_(a.p,C,!1,null),o.resolve(C)):o.reject(C)}};this.outstandingGets_.push(d),this.outstandingGetCount_++;const g=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const y=this.outstandingGets_[g];void 0===y||d!==y||(delete this.outstandingGets_[g],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+g+" timed out on connection"),o.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(g),o.promise}listen(r,o,a,d){this.initConnection_();const g=r._queryIdentifier,y=r._path.toString();this.log_("Listen called for "+y+" "+g),this.listens.has(y)||this.listens.set(y,new Map),(0,L.hu)(r._queryParams.isDefault()||!r._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(y).has(g),"listen() called twice for same path/queryId.");const C={onComplete:d,hashFn:o,query:r,tag:a};this.listens.get(y).set(g,C),this.connected_&&this.sendListen_(C)}sendGet_(r){const o=this.outstandingGets_[r];this.sendRequest("g",o.request,a=>{delete this.outstandingGets_[r],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),o.onComplete&&o.onComplete(a)})}sendListen_(r){const o=r.query,a=o._path.toString(),d=o._queryIdentifier;this.log_("Listen on "+a+" for "+d);const g={p:a};r.tag&&(g.q=o._queryObject,g.t=r.tag),g.h=r.hashFn(),this.sendRequest("q",g,C=>{const T=C.d,S=C.s;s.warnOnListenWarnings_(T,o),(this.listens.get(a)&&this.listens.get(a).get(d))===r&&(this.log_("listen response",C),"ok"!==S&&this.removeListen_(a,d),r.onComplete&&r.onComplete(S,T))})}static warnOnListenWarnings_(r,o){if(r&&"object"==typeof r&&(0,L.r3)(r,"w")){const a=(0,L.DV)(r,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const d='".indexOn": "'+o._queryParams.getIndex().toString()+'"',g=o._path.toString();gs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${d} at ${g} to your security rules for better performance.`)}}}refreshAuthToken(r){this.authToken_=r,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(r)}reduceReconnectDelayIfAdminCredential_(r){(r&&40===r.length||(0,L.GJ)(r))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(r){this.appCheckToken_=r,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const r=this.authToken_,o=(0,L.w9)(r)?"auth":"gauth",a={cred:r};null===this.authOverride_?a.noauth=!0:"object"==typeof this.authOverride_&&(a.authvar=this.authOverride_),this.sendRequest(o,a,d=>{const g=d.s,y=d.d||"error";this.authToken_===r&&("ok"===g?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(g,y))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},r=>{const o=r.s,a=r.d||"error";"ok"===o?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(o,a)})}unlisten(r,o){const a=r._path.toString(),d=r._queryIdentifier;this.log_("Unlisten called for "+a+" "+d),(0,L.hu)(r._queryParams.isDefault()||!r._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,d)&&this.connected_&&this.sendUnlisten_(a,d,r._queryObject,o)}sendUnlisten_(r,o,a,d){this.log_("Unlisten on "+r+" for "+o);const g={p:r};d&&(g.q=a,g.t=d),this.sendRequest("n",g)}onDisconnectPut(r,o,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",r,o,a):this.onDisconnectRequestQueue_.push({pathString:r,action:"o",data:o,onComplete:a})}onDisconnectMerge(r,o,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",r,o,a):this.onDisconnectRequestQueue_.push({pathString:r,action:"om",data:o,onComplete:a})}onDisconnectCancel(r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",r,null,o):this.onDisconnectRequestQueue_.push({pathString:r,action:"oc",data:null,onComplete:o})}sendOnDisconnect_(r,o,a,d){const g={p:o,d:a};this.log_("onDisconnect "+r,g),this.sendRequest(r,g,y=>{d&&setTimeout(()=>{d(y.s,y.d)},Math.floor(0))})}put(r,o,a,d){this.putInternal("p",r,o,a,d)}merge(r,o,a,d){this.putInternal("m",r,o,a,d)}putInternal(r,o,a,d,g){this.initConnection_();const y={p:o,d:a};void 0!==g&&(y.h=g),this.outstandingPuts_.push({action:r,request:y,onComplete:d}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+o)}sendPut_(r){const o=this.outstandingPuts_[r].action,a=this.outstandingPuts_[r].request,d=this.outstandingPuts_[r].onComplete;this.outstandingPuts_[r].queued=this.connected_,this.sendRequest(o,a,g=>{this.log_(o+" response",g),delete this.outstandingPuts_[r],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),d&&d(g.s,g.d)})}reportStats(r){if(this.connected_){const o={c:r};this.log_("reportStats",o),this.sendRequest("s",o,a=>{"ok"!==a.s&&this.log_("reportStats","Error sending stats: "+a.d)})}}onDataMessage_(r){if("r"in r){this.log_("from server: "+(0,L.Pz)(r));const o=r.r,a=this.requestCBHash_[o];a&&(delete this.requestCBHash_[o],a(r.b))}else{if("error"in r)throw"A server-side error has occurred: "+r.error;"a"in r&&this.onDataPush_(r.a,r.b)}}onDataPush_(r,o){this.log_("handleServerMessage",r,o),"d"===r?this.onDataUpdate_(o.p,o.d,!1,o.t):"m"===r?this.onDataUpdate_(o.p,o.d,!0,o.t):"c"===r?this.onListenRevoked_(o.p,o.q):"ac"===r?this.onAuthRevoked_(o.s,o.d):"apc"===r?this.onAppCheckRevoked_(o.s,o.d):"sd"===r?this.onSecurityDebugPacket_(o):Ck("Unrecognized action received from server: "+(0,L.Pz)(r)+"\nAre you using the latest client?")}onReady_(r,o){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(r),this.lastSessionId=o,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(r){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(r))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(r){r&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=WC,this.realtime_||this.scheduleConnect_(0)),this.visible_=r}onOnline_(r){r?(this.log_("Browser went online."),this.reconnectDelay_=WC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=WC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const r=(new Date).getTime()-this.lastConnectionAttemptTime_;let o=Math.max(0,this.reconnectDelay_-r);o=Math.random()*o,this.log_("Trying to reconnect in "+o+"ms"),this.scheduleConnect_(o),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var r=this;return(0,Ee.Z)(function*(){if(r.shouldReconnect_()){r.log_("Making a connection attempt"),r.lastConnectionAttemptTime_=(new Date).getTime(),r.lastConnectionEstablishedTime_=null;const o=r.onDataMessage_.bind(r),a=r.onReady_.bind(r),d=r.onRealtimeDisconnect_.bind(r),g=r.id+":"+s.nextConnectionId_++,y=r.lastSessionId;let C=!1,T=null;const S=function(){T?T.close():(C=!0,d())};r.realtime_={close:S,sendRequest:function(V){(0,L.hu)(T,"sendRequest call when we're not connected not allowed."),T.sendRequest(V)}};const O=r.forceTokenRefresh_;r.forceTokenRefresh_=!1;try{const[V,Y]=yield Promise.all([r.authTokenProvider_.getToken(O),r.appCheckTokenProvider_.getToken(O)]);C?_i("getToken() completed but was canceled"):(_i("getToken() completed. Creating connection."),r.authToken_=V&&V.accessToken,r.appCheckToken_=Y&&Y.token,T=new R8(g,r.repoInfo_,r.applicationId_,r.appCheckToken_,r.authToken_,o,a,d,le=>{gs(le+" ("+r.repoInfo_.toString()+")"),r.interrupt("server_kill")},y))}catch(V){r.log_("Failed to get token: "+V),C||(r.repoInfo_.nodeAdmin&&gs(V),S())}}})()}interrupt(r){_i("Interrupting connection for reason: "+r),this.interruptReasons_[r]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(r){_i("Resuming connection for reason: "+r),delete this.interruptReasons_[r],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=WC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(r){const o=r-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:o})}cancelSentTransactions_(){for(let r=0;r<this.outstandingPuts_.length;r++){const o=this.outstandingPuts_[r];o&&"h"in o.request&&o.queued&&(o.onComplete&&o.onComplete("disconnect"),delete this.outstandingPuts_[r],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(r,o){let a;a=o?o.map(g=>Ek(g)).join("$"):"default";const d=this.removeListen_(r,a);d&&d.onComplete&&d.onComplete("permission_denied")}removeListen_(r,o){const a=new ln(r).toString();let d;if(this.listens.has(a)){const g=this.listens.get(a);d=g.get(o),g.delete(o),0===g.size&&this.listens.delete(a)}else d=void 0;return d}onAuthRevoked_(r,o){_i("Auth token revoked: "+r+"/"+o),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===r||"permission_denied"===r)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(r,o){_i("App check token revoked: "+r+"/"+o),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===r||"permission_denied"===r)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(r){this.securityDebugCallback_?this.securityDebugCallback_(r):"msg"in r&&console.log("FIREBASE: "+r.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const r of this.listens.values())for(const o of r.values())this.sendListen_(o);for(let r=0;r<this.outstandingPuts_.length;r++)this.outstandingPuts_[r]&&this.sendPut_(r);for(;this.onDisconnectRequestQueue_.length;){const r=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(r.action,r.pathString,r.data,r.onComplete)}for(let r=0;r<this.outstandingGets_.length;r++)this.outstandingGets_[r]&&this.sendGet_(r)}sendConnectStats_(){const r={};let o="js";(0,L.Yr)()&&(o=this.repoInfo_.nodeAdmin?"admin_node":"node"),r["sdk."+o+"."+bk.replace(/\./g,"-")]=1,(0,L.uI)()?r["framework.cordova"]=1:(0,L.b$)()&&(r["framework.reactnative"]=1),this.reportStats(r)}shouldReconnect_(){const r=zT.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&r}}return s.nextPersistentConnectionId_=0,s.nextConnectionId_=0,s})();class Ht{constructor(i,r){this.name=i,this.node=r}static Wrap(i,r){return new Ht(i,r)}}class ZT{getCompare(){return this.compare.bind(this)}indexedValueChanged(i,r){const o=new Ht(Bc,i),a=new Ht(Bc,r);return 0!==this.compare(o,a)}minPost(){return Ht.MIN}}class nB extends ZT{static get __EMPTY_NODE(){return KT}static set __EMPTY_NODE(i){KT=i}compare(i,r){return tm(i.name,r.name)}isDefinedOn(i){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(i,r){return!1}minPost(){return Ht.MIN}maxPost(){return new Ht(uu,KT)}makePost(i,r){return(0,L.hu)("string"==typeof i,"KeyIndex indexValue must always be a string."),new Ht(i,KT)}toString(){return".key"}}const cu=new nB;class QT{constructor(i,r,o,a,d=null){this.isReverse_=a,this.resultGenerator_=d,this.nodeStack_=[];let g=1;for(;!i.isEmpty();)if(i=i,g=r?o(i.key,r):1,a&&(g*=-1),g<0)i=this.isReverse_?i.left:i.right;else{if(0===g){this.nodeStack_.push(i);break}this.nodeStack_.push(i),i=this.isReverse_?i.right:i.left}}getNext(){if(0===this.nodeStack_.length)return null;let r,i=this.nodeStack_.pop();if(r=this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value},this.isReverse_)for(i=i.left;!i.isEmpty();)this.nodeStack_.push(i),i=i.right;else for(i=i.right;!i.isEmpty();)this.nodeStack_.push(i),i=i.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const i=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value}}}let Fk,Ga=(()=>{class s{constructor(r,o,a,d,g){this.key=r,this.value=o,this.color=null!=a?a:s.RED,this.left=null!=d?d:ks.EMPTY_NODE,this.right=null!=g?g:ks.EMPTY_NODE}copy(r,o,a,d,g){return new s(null!=r?r:this.key,null!=o?o:this.value,null!=a?a:this.color,null!=d?d:this.left,null!=g?g:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(r){return this.left.inorderTraversal(r)||!!r(this.key,this.value)||this.right.inorderTraversal(r)}reverseTraversal(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(r,o,a){let d=this;const g=a(r,d.key);return d=g<0?d.copy(null,null,null,d.left.insert(r,o,a),null):0===g?d.copy(null,o,null,null,null):d.copy(null,null,null,null,d.right.insert(r,o,a)),d.fixUp_()}removeMin_(){if(this.left.isEmpty())return ks.EMPTY_NODE;let r=this;return!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.removeMin_(),null),r.fixUp_()}remove(r,o){let a,d;if(a=this,o(r,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(r,o),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),0===o(r,a.key)){if(a.right.isEmpty())return ks.EMPTY_NODE;d=a.right.min_(),a=a.copy(d.key,d.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(r,o))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let r=this;return r.right.isRed_()&&!r.left.isRed_()&&(r=r.rotateLeft_()),r.left.isRed_()&&r.left.left.isRed_()&&(r=r.rotateRight_()),r.left.isRed_()&&r.right.isRed_()&&(r=r.colorFlip_()),r}moveRedLeft_(){let r=this.colorFlip_();return r.right.left.isRed_()&&(r=r.copy(null,null,null,null,r.right.rotateRight_()),r=r.rotateLeft_(),r=r.colorFlip_()),r}moveRedRight_(){let r=this.colorFlip_();return r.left.left.isRed_()&&(r=r.rotateRight_(),r=r.colorFlip_()),r}rotateLeft_(){const r=this.copy(null,null,s.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}rotateRight_(){const r=this.copy(null,null,s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}colorFlip_(){const r=this.left.copy(null,null,!this.left.color,null,null),o=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,o)}checkMaxDepth_(){const r=this.check_();return Math.pow(2,r)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const r=this.left.check_();if(r!==this.right.check_())throw new Error("Black depths differ");return r+(this.isRed_()?0:1)}}return s.RED=!0,s.BLACK=!1,s})();class ks{constructor(i,r=ks.EMPTY_NODE){this.comparator_=i,this.root_=r}insert(i,r){return new ks(this.comparator_,this.root_.insert(i,r,this.comparator_).copy(null,null,Ga.BLACK,null,null))}remove(i){return new ks(this.comparator_,this.root_.remove(i,this.comparator_).copy(null,null,Ga.BLACK,null,null))}get(i){let r,o=this.root_;for(;!o.isEmpty();){if(r=this.comparator_(i,o.key),0===r)return o.value;r<0?o=o.left:r>0&&(o=o.right)}return null}getPredecessorKey(i){let r,o=this.root_,a=null;for(;!o.isEmpty();){if(r=this.comparator_(i,o.key),0===r){if(o.left.isEmpty())return a?a.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}r<0?o=o.left:r>0&&(a=o,o=o.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(i){return this.root_.inorderTraversal(i)}reverseTraversal(i){return this.root_.reverseTraversal(i)}getIterator(i){return new QT(this.root_,null,this.comparator_,!1,i)}getIteratorFrom(i,r){return new QT(this.root_,i,this.comparator_,!1,r)}getReverseIteratorFrom(i,r){return new QT(this.root_,i,this.comparator_,!0,r)}getReverseIterator(i){return new QT(this.root_,null,this.comparator_,!0,i)}}function $8(s,i){return tm(s.name,i.name)}function Pk(s,i){return tm(s,i)}ks.EMPTY_NODE=new class{copy(i,r,o,a,d){return this}insert(i,r,o){return new Ga(i,r,null)}remove(i,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const rB=function(s){return"number"==typeof s?"number:"+D2(s):"string:"+s},iB=function(s){if(s.isLeafNode()){const i=s.val();(0,L.hu)("string"==typeof i||"number"==typeof i||"object"==typeof i&&(0,L.r3)(i,".sv"),"Priority must be a string or number.")}else(0,L.hu)(s===Fk||s.isEmpty(),"priority of unexpected type.");(0,L.hu)(s===Fk||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let sB,oB,aB,Vv=(()=>{class s{constructor(r,o=s.__childrenNodeConstructor.EMPTY_NODE){this.value_=r,this.priorityNode_=o,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),iB(this.priorityNode_)}static set __childrenNodeConstructor(r){sB=r}static get __childrenNodeConstructor(){return sB}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(r){return new s(this.value_,r)}getImmediateChild(r){return".priority"===r?this.priorityNode_:s.__childrenNodeConstructor.EMPTY_NODE}getChild(r){return Gt(r)?this:".priority"===Ut(r)?this.priorityNode_:s.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(r,o){return null}updateImmediateChild(r,o){return".priority"===r?this.updatePriority(o):o.isEmpty()&&".priority"!==r?this:s.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(r,o).updatePriority(this.priorityNode_)}updateChild(r,o){const a=Ut(r);return null===a?o:o.isEmpty()&&".priority"!==a?this:((0,L.hu)(".priority"!==a||1===df(r),".priority must be the last token in a path"),this.updateImmediateChild(a,s.__childrenNodeConstructor.EMPTY_NODE.updateChild(wn(r),o)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(r,o){return!1}val(r){return r&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let r="";this.priorityNode_.isEmpty()||(r+="priority:"+rB(this.priorityNode_.val())+":");const o=typeof this.value_;r+=o+":",r+="number"===o?D2(this.value_):this.value_,this.lazyHash_=b2(r)}return this.lazyHash_}getValue(){return this.value_}compareTo(r){return r===s.__childrenNodeConstructor.EMPTY_NODE?1:r instanceof s.__childrenNodeConstructor?-1:((0,L.hu)(r.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(r))}compareToLeafNode_(r){const o=typeof r.value_,a=typeof this.value_,d=s.VALUE_TYPE_ORDER.indexOf(o),g=s.VALUE_TYPE_ORDER.indexOf(a);return(0,L.hu)(d>=0,"Unknown leaf type: "+o),(0,L.hu)(g>=0,"Unknown leaf type: "+a),d===g?"object"===a?0:this.value_<r.value_?-1:this.value_===r.value_?0:1:g-d}withIndex(){return this}isIndexed(){return!0}equals(r){if(r===this)return!0;if(r.isLeafNode()){const o=r;return this.value_===o.value_&&this.priorityNode_.equals(o.priorityNode_)}return!1}}return s.VALUE_TYPE_ORDER=["object","boolean","number","string"],s})();const Mn=new class extends ZT{compare(i,r){const o=i.node.getPriority(),a=r.node.getPriority(),d=o.compareTo(a);return 0===d?tm(i.name,r.name):d}isDefinedOn(i){return!i.getPriority().isEmpty()}indexedValueChanged(i,r){return!i.getPriority().equals(r.getPriority())}minPost(){return Ht.MIN}maxPost(){return new Ht(uu,new Vv("[PRIORITY-POST]",aB))}makePost(i,r){const o=oB(i);return new Ht(r,new Vv("[PRIORITY-POST]",o))}toString(){return".priority"}},Z8=Math.log(2);class K8{constructor(i){this.count=parseInt(Math.log(i+1)/Z8,10),this.current_=this.count-1;const a=(d=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=i+1&a}nextBitIsOne(){const i=!(this.bits_&1<<this.current_);return this.current_--,i}}const JT=function(s,i,r,o){s.sort(i);const a=function(C,T){const S=T-C;let N,O;if(0===S)return null;if(1===S)return N=s[C],O=r?r(N):N,new Ga(O,N.node,Ga.BLACK,null,null);{const V=parseInt(S/2,10)+C,Y=a(C,V),le=a(V+1,T);return N=s[V],O=r?r(N):N,new Ga(O,N.node,Ga.BLACK,Y,le)}},y=function(C){let T=null,S=null,N=s.length;const O=function(Y,le){const Te=N-Y,ke=N;N-=Y;const Ue=a(Te+1,ke),nt=s[Te],Ot=r?r(nt):nt;V(new Ga(Ot,nt.node,le,null,Ue))},V=function(Y){T?(T.left=Y,T=Y):(S=Y,T=Y)};for(let Y=0;Y<C.count;++Y){const le=C.nextBitIsOne(),Te=Math.pow(2,C.count-(Y+1));le?O(Te,Ga.BLACK):(O(Te,Ga.BLACK),O(Te,Ga.RED))}return S}(new K8(s.length));return new ks(o||i,y)};let Lk;const Bv={};class Uc{constructor(i,r){this.indexes_=i,this.indexSet_=r}static get Default(){return(0,L.hu)(Bv&&Mn,"ChildrenNode.ts has not been loaded"),Lk=Lk||new Uc({".priority":Bv},{".priority":Mn}),Lk}get(i){const r=(0,L.DV)(this.indexes_,i);if(!r)throw new Error("No index defined for "+i);return r instanceof ks?r:null}hasIndex(i){return(0,L.r3)(this.indexSet_,i.toString())}addIndex(i,r){(0,L.hu)(i!==cu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let a=!1;const d=r.getIterator(Ht.Wrap);let y,g=d.getNext();for(;g;)a=a||i.isDefinedOn(g.node),o.push(g),g=d.getNext();y=a?JT(o,i.getCompare()):Bv;const C=i.toString(),T=Object.assign({},this.indexSet_);T[C]=i;const S=Object.assign({},this.indexes_);return S[C]=y,new Uc(S,T)}addToIndexes(i,r){const o=(0,L.UI)(this.indexes_,(a,d)=>{const g=(0,L.DV)(this.indexSet_,d);if((0,L.hu)(g,"Missing index implementation for "+d),a===Bv){if(g.isDefinedOn(i.node)){const y=[],C=r.getIterator(Ht.Wrap);let T=C.getNext();for(;T;)T.name!==i.name&&y.push(T),T=C.getNext();return y.push(i),JT(y,g.getCompare())}return Bv}{const y=r.get(i.name);let C=a;return y&&(C=C.remove(new Ht(i.name,y))),C.insert(i,i.node)}});return new Uc(o,this.indexSet_)}removeFromIndexes(i,r){const o=(0,L.UI)(this.indexes_,a=>{if(a===Bv)return a;{const d=r.get(i.name);return d?a.remove(new Ht(i.name,d)):a}});return new Uc(o,this.indexSet_)}}let qC,Nt=(()=>{class s{constructor(r,o,a){this.children_=r,this.priorityNode_=o,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&iB(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qC||(qC=new s(new ks(Pk),null,Uc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qC}updatePriority(r){return this.children_.isEmpty()?this:new s(this.children_,r,this.indexMap_)}getImmediateChild(r){if(".priority"===r)return this.getPriority();{const o=this.children_.get(r);return null===o?qC:o}}getChild(r){const o=Ut(r);return null===o?this:this.getImmediateChild(o).getChild(wn(r))}hasChild(r){return null!==this.children_.get(r)}updateImmediateChild(r,o){if((0,L.hu)(o,"We should always be passing snapshot nodes"),".priority"===r)return this.updatePriority(o);{const a=new Ht(r,o);let d,g;o.isEmpty()?(d=this.children_.remove(r),g=this.indexMap_.removeFromIndexes(a,this.children_)):(d=this.children_.insert(r,o),g=this.indexMap_.addToIndexes(a,this.children_));const y=d.isEmpty()?qC:this.priorityNode_;return new s(d,y,g)}}updateChild(r,o){const a=Ut(r);if(null===a)return o;{(0,L.hu)(".priority"!==Ut(r)||1===df(r),".priority must be the last token in a path");const d=this.getImmediateChild(a).updateChild(wn(r),o);return this.updateImmediateChild(a,d)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(r){if(this.isEmpty())return null;const o={};let a=0,d=0,g=!0;if(this.forEachChild(Mn,(y,C)=>{o[y]=C.val(r),a++,g&&s.INTEGER_REGEXP_.test(y)?d=Math.max(d,Number(y)):g=!1}),!r&&g&&d<2*a){const y=[];for(const C in o)y[C]=o[C];return y}return r&&!this.getPriority().isEmpty()&&(o[".priority"]=this.getPriority().val()),o}hash(){if(null===this.lazyHash_){let r="";this.getPriority().isEmpty()||(r+="priority:"+rB(this.getPriority().val())+":"),this.forEachChild(Mn,(o,a)=>{const d=a.hash();""!==d&&(r+=":"+o+":"+d)}),this.lazyHash_=""===r?"":b2(r)}return this.lazyHash_}getPredecessorChildName(r,o,a){const d=this.resolveIndex_(a);if(d){const g=d.getPredecessorKey(new Ht(r,o));return g?g.name:null}return this.children_.getPredecessorKey(r)}getFirstChildName(r){const o=this.resolveIndex_(r);if(o){const a=o.minKey();return a&&a.name}return this.children_.minKey()}getFirstChild(r){const o=this.getFirstChildName(r);return o?new Ht(o,this.children_.get(o)):null}getLastChildName(r){const o=this.resolveIndex_(r);if(o){const a=o.maxKey();return a&&a.name}return this.children_.maxKey()}getLastChild(r){const o=this.getLastChildName(r);return o?new Ht(o,this.children_.get(o)):null}forEachChild(r,o){const a=this.resolveIndex_(r);return a?a.inorderTraversal(d=>o(d.name,d.node)):this.children_.inorderTraversal(o)}getIterator(r){return this.getIteratorFrom(r.minPost(),r)}getIteratorFrom(r,o){const a=this.resolveIndex_(o);if(a)return a.getIteratorFrom(r,d=>d);{const d=this.children_.getIteratorFrom(r.name,Ht.Wrap);let g=d.peek();for(;null!=g&&o.compare(g,r)<0;)d.getNext(),g=d.peek();return d}}getReverseIterator(r){return this.getReverseIteratorFrom(r.maxPost(),r)}getReverseIteratorFrom(r,o){const a=this.resolveIndex_(o);if(a)return a.getReverseIteratorFrom(r,d=>d);{const d=this.children_.getReverseIteratorFrom(r.name,Ht.Wrap);let g=d.peek();for(;null!=g&&o.compare(g,r)>0;)d.getNext(),g=d.peek();return d}}compareTo(r){return this.isEmpty()?r.isEmpty()?0:-1:r.isLeafNode()||r.isEmpty()?1:r===YC?-1:0}withIndex(r){if(r===cu||this.indexMap_.hasIndex(r))return this;{const o=this.indexMap_.addIndex(r,this.children_);return new s(this.children_,this.priorityNode_,o)}}isIndexed(r){return r===cu||this.indexMap_.hasIndex(r)}equals(r){if(r===this)return!0;if(r.isLeafNode())return!1;{const o=r;if(this.getPriority().equals(o.getPriority())){if(this.children_.count()===o.children_.count()){const a=this.getIterator(Mn),d=o.getIterator(Mn);let g=a.getNext(),y=d.getNext();for(;g&&y;){if(g.name!==y.name||!g.node.equals(y.node))return!1;g=a.getNext(),y=d.getNext()}return null===g&&null===y}return!1}return!1}}resolveIndex_(r){return r===cu?null:this.indexMap_.get(r.toString())}}return s.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,s})();const YC=new class extends Nt{constructor(){super(new ks(Pk),Nt.EMPTY_NODE,Uc.Default)}compareTo(i){return i===this?0:1}equals(i){return i===this}getPriority(){return this}getImmediateChild(i){return Nt.EMPTY_NODE}isEmpty(){return!1}};function ir(s,i=null){if(null===s)return Nt.EMPTY_NODE;if("object"==typeof s&&".priority"in s&&(i=s[".priority"]),(0,L.hu)(null===i||"string"==typeof i||"number"==typeof i||"object"==typeof i&&".sv"in i,"Invalid priority type found: "+typeof i),"object"==typeof s&&".value"in s&&null!==s[".value"]&&(s=s[".value"]),"object"!=typeof s||".sv"in s)return new Vv(s,ir(i));if(s instanceof Array){let r=Nt.EMPTY_NODE;return yi(s,(o,a)=>{if((0,L.r3)(s,o)&&"."!==o.substring(0,1)){const d=ir(a);(d.isLeafNode()||!d.isEmpty())&&(r=r.updateImmediateChild(o,d))}}),r.updatePriority(ir(i))}{const r=[];let o=!1;if(yi(s,(g,y)=>{if("."!==g.substring(0,1)){const C=ir(y);C.isEmpty()||(o=o||!C.getPriority().isEmpty(),r.push(new Ht(g,C)))}}),0===r.length)return Nt.EMPTY_NODE;const d=JT(r,$8,g=>g.name,Pk);if(o){const g=JT(r,Mn.getCompare());return new Nt(d,ir(i),new Uc({".priority":g},{".priority":Mn}))}return new Nt(d,ir(i),Uc.Default)}}Object.defineProperties(Ht,{MIN:{value:new Ht(Bc,Nt.EMPTY_NODE)},MAX:{value:new Ht(uu,YC)}}),nB.__EMPTY_NODE=Nt.EMPTY_NODE,Vv.__childrenNodeConstructor=Nt,function(s){Fk=s}(YC),function(s){aB=s}(YC),function(s){oB=s}(ir);class Vk extends ZT{constructor(i){super(),this.indexPath_=i,(0,L.hu)(!Gt(i)&&".priority"!==Ut(i),"Can't create PathIndex with empty path or .priority key")}extractChild(i){return i.getChild(this.indexPath_)}isDefinedOn(i){return!i.getChild(this.indexPath_).isEmpty()}compare(i,r){const o=this.extractChild(i.node),a=this.extractChild(r.node),d=o.compareTo(a);return 0===d?tm(i.name,r.name):d}makePost(i,r){const o=ir(i),a=Nt.EMPTY_NODE.updateChild(this.indexPath_,o);return new Ht(r,a)}maxPost(){const i=Nt.EMPTY_NODE.updateChild(this.indexPath_,YC);return new Ht(uu,i)}toString(){return $C(this.indexPath_,0).join("/")}}const Bk=new class extends ZT{compare(i,r){const o=i.node.compareTo(r.node);return 0===o?tm(i.name,r.name):o}isDefinedOn(i){return!0}indexedValueChanged(i,r){return!i.equals(r)}minPost(){return Ht.MIN}maxPost(){return Ht.MAX}makePost(i,r){const o=ir(i);return new Ht(r,o)}toString(){return".value"}},Uv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",e4=function(){let s=0;const i=[];return function(r){const o=r===s;let a;s=r;const d=new Array(8);for(a=7;a>=0;a--)d[a]=Uv.charAt(r%64),r=Math.floor(r/64);(0,L.hu)(0===r,"Cannot push at time == 0");let g=d.join("");if(o){for(a=11;a>=0&&63===i[a];a--)i[a]=0;i[a]++}else for(a=0;a<12;a++)i[a]=Math.floor(64*Math.random());for(a=0;a<12;a++)g+=Uv.charAt(i[a]);return(0,L.hu)(20===g.length,"nextPushId: Length should be 20."),g}}(),cB=function(s){if(s===""+Dk)return"-";const i=qT(s);if(null!=i)return""+(i+1);const r=new Array(s.length);for(let g=0;g<r.length;g++)r[g]=s.charAt(g);if(r.length<786)return r.push("-"),r.join("");let o=r.length-1;for(;o>=0&&"z"===r[o];)o--;if(-1===o)return uu;const d=Uv.charAt(Uv.indexOf(r[o])+1);return r[o]=d,r.slice(0,o+1).join("")},dB=function(s){if(s===""+x2)return Bc;const i=qT(s);if(null!=i)return""+(i-1);const r=new Array(s.length);for(let o=0;o<r.length;o++)r[o]=s.charAt(o);return"-"===r[r.length-1]?1===r.length?""+Dk:(delete r[r.length-1],r.join("")):(r[r.length-1]=Uv.charAt(Uv.indexOf(r[r.length-1])-1),r.join("")+"z".repeat(786-r.length))};function hB(s){return{type:"value",snapshotNode:s}}function Gv(s,i){return{type:"child_added",snapshotNode:i,childName:s}}function zC(s,i){return{type:"child_removed",snapshotNode:i,childName:s}}function ZC(s,i,r){return{type:"child_changed",snapshotNode:i,childName:s,oldSnap:r}}class Gk{constructor(i){this.index_=i}updateChild(i,r,o,a,d,g){(0,L.hu)(i.isIndexed(this.index_),"A node must be indexed if only a child is updated");const y=i.getImmediateChild(r);return y.getChild(a).equals(o.getChild(a))&&y.isEmpty()===o.isEmpty()||(null!=g&&(o.isEmpty()?i.hasChild(r)?g.trackChildChange(zC(r,y)):(0,L.hu)(i.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):y.isEmpty()?g.trackChildChange(Gv(r,o)):g.trackChildChange(ZC(r,o,y))),i.isLeafNode()&&o.isEmpty())?i:i.updateImmediateChild(r,o).withIndex(this.index_)}updateFullNode(i,r,o){return null!=o&&(i.isLeafNode()||i.forEachChild(Mn,(a,d)=>{r.hasChild(a)||o.trackChildChange(zC(a,d))}),r.isLeafNode()||r.forEachChild(Mn,(a,d)=>{if(i.hasChild(a)){const g=i.getImmediateChild(a);g.equals(d)||o.trackChildChange(ZC(a,d,g))}else o.trackChildChange(Gv(a,d))})),r.withIndex(this.index_)}updatePriority(i,r){return i.isEmpty()?Nt.EMPTY_NODE:i.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class KC{constructor(i){this.indexedFilter_=new Gk(i.getIndex()),this.index_=i.getIndex(),this.startPost_=KC.getStartPost_(i),this.endPost_=KC.getEndPost_(i)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(i){return this.index_.compare(this.getStartPost(),i)<=0&&this.index_.compare(i,this.getEndPost())<=0}updateChild(i,r,o,a,d,g){return this.matches(new Ht(r,o))||(o=Nt.EMPTY_NODE),this.indexedFilter_.updateChild(i,r,o,a,d,g)}updateFullNode(i,r,o){r.isLeafNode()&&(r=Nt.EMPTY_NODE);let a=r.withIndex(this.index_);a=a.updatePriority(Nt.EMPTY_NODE);const d=this;return r.forEachChild(Mn,(g,y)=>{d.matches(new Ht(g,y))||(a=a.updateImmediateChild(g,Nt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(i,a,o)}updatePriority(i,r){return i}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(i){if(i.hasStart()){const r=i.getIndexStartName();return i.getIndex().makePost(i.getIndexStartValue(),r)}return i.getIndex().minPost()}static getEndPost_(i){if(i.hasEnd()){const r=i.getIndexEndName();return i.getIndex().makePost(i.getIndexEndValue(),r)}return i.getIndex().maxPost()}}class n4{constructor(i){this.rangedFilter_=new KC(i),this.index_=i.getIndex(),this.limit_=i.getLimit(),this.reverse_=!i.isViewFromLeft()}updateChild(i,r,o,a,d,g){return this.rangedFilter_.matches(new Ht(r,o))||(o=Nt.EMPTY_NODE),i.getImmediateChild(r).equals(o)?i:i.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(i,r,o,a,d,g):this.fullLimitUpdateChild_(i,r,o,d,g)}updateFullNode(i,r,o){let a;if(r.isLeafNode()||r.isEmpty())a=Nt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<r.numChildren()&&r.isIndexed(this.index_)){let d;a=Nt.EMPTY_NODE.withIndex(this.index_),d=this.reverse_?r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let g=0;for(;d.hasNext()&&g<this.limit_;){const y=d.getNext();let C;if(C=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),y)<=0:this.index_.compare(y,this.rangedFilter_.getEndPost())<=0,!C)break;a=a.updateImmediateChild(y.name,y.node),g++}}else{let d,g,y,C;if(a=r.withIndex(this.index_),a=a.updatePriority(Nt.EMPTY_NODE),this.reverse_){C=a.getReverseIterator(this.index_),d=this.rangedFilter_.getEndPost(),g=this.rangedFilter_.getStartPost();const N=this.index_.getCompare();y=(O,V)=>N(V,O)}else C=a.getIterator(this.index_),d=this.rangedFilter_.getStartPost(),g=this.rangedFilter_.getEndPost(),y=this.index_.getCompare();let T=0,S=!1;for(;C.hasNext();){const N=C.getNext();!S&&y(d,N)<=0&&(S=!0),S&&T<this.limit_&&y(N,g)<=0?T++:a=a.updateImmediateChild(N.name,Nt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(i,a,o)}updatePriority(i,r){return i}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(i,r,o,a,d){let g;if(this.reverse_){const N=this.index_.getCompare();g=(O,V)=>N(V,O)}else g=this.index_.getCompare();const y=i;(0,L.hu)(y.numChildren()===this.limit_,"");const C=new Ht(r,o),T=this.reverse_?y.getFirstChild(this.index_):y.getLastChild(this.index_),S=this.rangedFilter_.matches(C);if(y.hasChild(r)){const N=y.getImmediateChild(r);let O=a.getChildAfterChild(this.index_,T,this.reverse_);for(;null!=O&&(O.name===r||y.hasChild(O.name));)O=a.getChildAfterChild(this.index_,O,this.reverse_);const V=null==O?1:g(O,C);if(S&&!o.isEmpty()&&V>=0)return null!=d&&d.trackChildChange(ZC(r,o,N)),y.updateImmediateChild(r,o);{null!=d&&d.trackChildChange(zC(r,N));const le=y.updateImmediateChild(r,Nt.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(null!=d&&d.trackChildChange(Gv(O.name,O.node)),le.updateImmediateChild(O.name,O.node)):le}}return o.isEmpty()?i:S&&g(T,C)>=0?(null!=d&&(d.trackChildChange(zC(T.name,T.node)),d.trackChildChange(Gv(r,o))),y.updateImmediateChild(r,o).updateImmediateChild(T.name,Nt.EMPTY_NODE)):i}}class XT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:uu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Mn}copy(){const i=new XT;return i.limitSet_=this.limitSet_,i.limit_=this.limit_,i.startSet_=this.startSet_,i.indexStartValue_=this.indexStartValue_,i.startNameSet_=this.startNameSet_,i.indexStartName_=this.indexStartName_,i.endSet_=this.endSet_,i.indexEndValue_=this.indexEndValue_,i.endNameSet_=this.endNameSet_,i.indexEndName_=this.indexEndName_,i.index_=this.index_,i.viewFrom_=this.viewFrom_,i}}function jk(s,i,r){const o=s.copy();return o.startSet_=!0,void 0===i&&(i=null),o.indexStartValue_=i,null!=r?(o.startNameSet_=!0,o.indexStartName_=r):(o.startNameSet_=!1,o.indexStartName_=""),o}function Hk(s,i,r){const o=s.copy();return o.endSet_=!0,void 0===i&&(i=null),o.indexEndValue_=i,void 0!==r?(o.endNameSet_=!0,o.indexEndName_=r):(o.endNameSet_=!1,o.indexEndName_=""),o}function eA(s,i){const r=s.copy();return r.index_=i,r}function fB(s){const i={};if(s.isDefault())return i;let r;return s.index_===Mn?r="$priority":s.index_===Bk?r="$value":s.index_===cu?r="$key":((0,L.hu)(s.index_ instanceof Vk,"Unrecognized index type!"),r=s.index_.toString()),i.orderBy=(0,L.Pz)(r),s.startSet_&&(i.startAt=(0,L.Pz)(s.indexStartValue_),s.startNameSet_&&(i.startAt+=","+(0,L.Pz)(s.indexStartName_))),s.endSet_&&(i.endAt=(0,L.Pz)(s.indexEndValue_),s.endNameSet_&&(i.endAt+=","+(0,L.Pz)(s.indexEndName_))),s.limitSet_&&(s.isViewFromLeft()?i.limitToFirst=s.limit_:i.limitToLast=s.limit_),i}function gB(s){const i={};if(s.startSet_&&(i.sp=s.indexStartValue_,s.startNameSet_&&(i.sn=s.indexStartName_)),s.endSet_&&(i.ep=s.indexEndValue_,s.endNameSet_&&(i.en=s.indexEndName_)),s.limitSet_){i.l=s.limit_;let r=s.viewFrom_;""===r&&(r=s.isViewFromLeft()?"l":"r"),i.vf=r}return s.index_!==Mn&&(i.i=s.index_.toString()),i}class tA extends z2{constructor(i,r,o,a){super(),this.repoInfo_=i,this.onDataUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.log_=VC("p:rest:"),this.listens_={}}reportStats(i){throw new Error("Method not implemented.")}static getListenId_(i,r){return void 0!==r?"tag$"+r:((0,L.hu)(i._queryParams.isDefault(),"should have a tag if it's not a default query."),i._path.toString())}listen(i,r,o,a){const d=i._path.toString();this.log_("Listen called for "+d+" "+i._queryIdentifier);const g=tA.getListenId_(i,o),y={};this.listens_[g]=y;const C=fB(i._queryParams);this.restRequest_(d+".json",C,(T,S)=>{let N=S;if(404===T&&(N=null,T=null),null===T&&this.onDataUpdate_(d,N,!1,o),(0,L.DV)(this.listens_,g)===y){let O;O=T?401===T?"permission_denied":"rest_error:"+T:"ok",a(O,null)}})}unlisten(i,r){const o=tA.getListenId_(i,r);delete this.listens_[o]}get(i){const r=fB(i._queryParams),o=i._path.toString(),a=new L.BH;return this.restRequest_(o+".json",r,(d,g)=>{let y=g;404===d&&(y=null,d=null),null===d?(this.onDataUpdate_(o,y,!1,null),a.resolve(y)):a.reject(new Error(y))}),a.promise}refreshAuthToken(i){}restRequest_(i,r={},o){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,d])=>{a&&a.accessToken&&(r.auth=a.accessToken),d&&d.token&&(r.ac=d.token);const g=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+i+"?ns="+this.repoInfo_.namespace+(0,L.xO)(r);this.log_("Sending REST request for "+g);const y=new XMLHttpRequest;y.onreadystatechange=()=>{if(o&&4===y.readyState){this.log_("REST Response for "+g+" received. status:",y.status,"response:",y.responseText);let C=null;if(y.status>=200&&y.status<300){try{C=(0,L.cI)(y.responseText)}catch(T){gs("Failed to parse JSON response for "+g+": "+y.responseText)}o(null,C)}else 401!==y.status&&404!==y.status&&gs("Got unsuccessful REST response for "+g+" Status: "+y.status),o(y.status);o=null}},y.open("GET",g,!0),y.send()})}}class l4{constructor(){this.rootNode_=Nt.EMPTY_NODE}getNode(i){return this.rootNode_.getChild(i)}updateSnapshot(i,r){this.rootNode_=this.rootNode_.updateChild(i,r)}}function nA(){return{value:null,children:new Map}}function jv(s,i,r){if(Gt(i))s.value=r,s.children.clear();else if(null!==s.value)s.value=s.value.updateChild(i,r);else{const o=Ut(i);s.children.has(o)||s.children.set(o,nA()),jv(s.children.get(o),i=wn(i),r)}}function $k(s,i){if(Gt(i))return s.value=null,s.children.clear(),!0;if(null!==s.value){if(s.value.isLeafNode())return!1;{const r=s.value;return s.value=null,r.forEachChild(Mn,(o,a)=>{jv(s,new ln(o),a)}),$k(s,i)}}if(s.children.size>0){const r=Ut(i);return i=wn(i),s.children.has(r)&&$k(s.children.get(r),i)&&s.children.delete(r),0===s.children.size}return!0}function Wk(s,i,r){null!==s.value?r(i,s.value):function(s,i){s.children.forEach((r,o)=>{i(o,r)})}(s,(o,a)=>{Wk(a,new ln(i.toString()+"/"+o),r)})}class c4{constructor(i){this.collection_=i,this.last_=null}get(){const i=this.collection_.get(),r=Object.assign({},i);return this.last_&&yi(this.last_,(o,a)=>{r[o]=r[o]-a}),this.last_=i,r}}class f4{constructor(i,r){this.server_=r,this.statsToReport_={},this.statsListener_=new c4(i);const o=1e4+2e4*Math.random();UC(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const i=this.statsListener_.get(),r={};let o=!1;yi(i,(a,d)=>{d>0&&(0,L.r3)(this.statsToReport_,a)&&(r[a]=d,o=!0)}),o&&this.server_.reportStats(r),UC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ho=(()=>(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ho||(Ho={})),Ho))();function zk(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}class rA{constructor(i,r,o){this.path=i,this.affectedTree=r,this.revert=o,this.type=Ho.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(i){if(Gt(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new ln(i));return new rA(Jt(),r,this.revert)}}return(0,L.hu)(Ut(this.path)===i,"operationForChild called for unrelated child."),new rA(wn(this.path),this.affectedTree,this.revert)}}class QC{constructor(i,r){this.source=i,this.path=r,this.type=Ho.LISTEN_COMPLETE}operationForChild(i){return Gt(this.path)?new QC(this.source,Jt()):new QC(this.source,wn(this.path))}}class rm{constructor(i,r,o){this.source=i,this.path=r,this.snap=o,this.type=Ho.OVERWRITE}operationForChild(i){return Gt(this.path)?new rm(this.source,Jt(),this.snap.getImmediateChild(i)):new rm(this.source,wn(this.path),this.snap)}}class Hv{constructor(i,r,o){this.source=i,this.path=r,this.children=o,this.type=Ho.MERGE}operationForChild(i){if(Gt(this.path)){const r=this.children.subtree(new ln(i));return r.isEmpty()?null:r.value?new rm(this.source,Jt(),r.value):new Hv(this.source,Jt(),r)}return(0,L.hu)(Ut(this.path)===i,"Can't get a merge for a child not on the path of the operation"),new Hv(this.source,wn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class hf{constructor(i,r,o){this.node_=i,this.fullyInitialized_=r,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(i){if(Gt(i))return this.isFullyInitialized()&&!this.filtered_;const r=Ut(i);return this.isCompleteForChild(r)}isCompleteForChild(i){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(i)}getNode(){return this.node_}}class g4{constructor(i){this.query_=i,this.index_=this.query_._queryParams.getIndex()}}function JC(s,i,r,o,a,d){const g=o.filter(y=>y.type===r);g.sort((y,C)=>function(s,i,r){if(null==i.childName||null==r.childName)throw(0,L.g5)("Should only compare child_ events.");const o=new Ht(i.childName,i.snapshotNode),a=new Ht(r.childName,r.snapshotNode);return s.index_.compare(o,a)}(s,y,C)),g.forEach(y=>{const C=function(s,i,r){return"value"===i.type||"child_removed"===i.type||(i.prevName=r.getPredecessorChildName(i.childName,i.snapshotNode,s.index_)),i}(s,y,d);a.forEach(T=>{T.respondsTo(y.type)&&i.push(T.createEvent(C,s.query_))})})}function iA(s,i){return{eventCache:s,serverCache:i}}function XC(s,i,r,o){return iA(new hf(i,r,o),s.serverCache)}function mB(s,i,r,o){return iA(s.eventCache,new hf(i,r,o))}function sA(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function im(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}let Zk;class Rn{constructor(i,r=(()=>(Zk||(Zk=new ks(X6)),Zk))()){this.value=i,this.children=r}static fromObject(i){let r=new Rn(null);return yi(i,(o,a)=>{r=r.set(new ln(o),a)}),r}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(i,r){if(null!=this.value&&r(this.value))return{path:Jt(),value:this.value};if(Gt(i))return null;{const o=Ut(i),a=this.children.get(o);if(null!==a){const d=a.findRootMostMatchingPathAndValue(wn(i),r);return null!=d?{path:Yn(new ln(o),d.path),value:d.value}:null}return null}}findRootMostValueAndPath(i){return this.findRootMostMatchingPathAndValue(i,()=>!0)}subtree(i){if(Gt(i))return this;{const r=Ut(i),o=this.children.get(r);return null!==o?o.subtree(wn(i)):new Rn(null)}}set(i,r){if(Gt(i))return new Rn(r,this.children);{const o=Ut(i),d=(this.children.get(o)||new Rn(null)).set(wn(i),r),g=this.children.insert(o,d);return new Rn(this.value,g)}}remove(i){if(Gt(i))return this.children.isEmpty()?new Rn(null):new Rn(null,this.children);{const r=Ut(i),o=this.children.get(r);if(o){const a=o.remove(wn(i));let d;return d=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),null===this.value&&d.isEmpty()?new Rn(null):new Rn(this.value,d)}return this}}get(i){if(Gt(i))return this.value;{const r=Ut(i),o=this.children.get(r);return o?o.get(wn(i)):null}}setTree(i,r){if(Gt(i))return r;{const o=Ut(i),d=(this.children.get(o)||new Rn(null)).setTree(wn(i),r);let g;return g=d.isEmpty()?this.children.remove(o):this.children.insert(o,d),new Rn(this.value,g)}}fold(i){return this.fold_(Jt(),i)}fold_(i,r){const o={};return this.children.inorderTraversal((a,d)=>{o[a]=d.fold_(Yn(i,a),r)}),r(i,this.value,o)}findOnPath(i,r){return this.findOnPath_(i,Jt(),r)}findOnPath_(i,r,o){const a=!!this.value&&o(r,this.value);if(a)return a;if(Gt(i))return null;{const d=Ut(i),g=this.children.get(d);return g?g.findOnPath_(wn(i),Yn(r,d),o):null}}foreachOnPath(i,r){return this.foreachOnPath_(i,Jt(),r)}foreachOnPath_(i,r,o){if(Gt(i))return this;{this.value&&o(r,this.value);const a=Ut(i),d=this.children.get(a);return d?d.foreachOnPath_(wn(i),Yn(r,a),o):new Rn(null)}}foreach(i){this.foreach_(Jt(),i)}foreach_(i,r){this.children.inorderTraversal((o,a)=>{a.foreach_(Yn(i,o),r)}),this.value&&r(i,this.value)}foreachChild(i){this.children.inorderTraversal((r,o)=>{o.value&&i(r,o.value)})}}class ja{constructor(i){this.writeTree_=i}static empty(){return new ja(new Rn(null))}}function eE(s,i,r){if(Gt(i))return new ja(new Rn(r));{const o=s.writeTree_.findRootMostValueAndPath(i);if(null!=o){const a=o.path;let d=o.value;const g=ps(a,i);return d=d.updateChild(g,r),new ja(s.writeTree_.set(a,d))}{const a=new Rn(r),d=s.writeTree_.setTree(i,a);return new ja(d)}}}function Kk(s,i,r){let o=s;return yi(r,(a,d)=>{o=eE(o,Yn(i,a),d)}),o}function _B(s,i){if(Gt(i))return ja.empty();{const r=s.writeTree_.setTree(i,new Rn(null));return new ja(r)}}function Qk(s,i){return null!=sm(s,i)}function sm(s,i){const r=s.writeTree_.findRootMostValueAndPath(i);return null!=r?s.writeTree_.get(r.path).getChild(ps(r.path,i)):null}function yB(s){const i=[],r=s.writeTree_.value;return null!=r?r.isLeafNode()||r.forEachChild(Mn,(o,a)=>{i.push(new Ht(o,a))}):s.writeTree_.children.inorderTraversal((o,a)=>{null!=a.value&&i.push(new Ht(o,a.value))}),i}function ff(s,i){if(Gt(i))return s;{const r=sm(s,i);return new ja(null!=r?new Rn(r):s.writeTree_.subtree(i))}}function Jk(s){return s.writeTree_.isEmpty()}function $v(s,i){return vB(Jt(),s.writeTree_,i)}function vB(s,i,r){if(null!=i.value)return r.updateChild(s,i.value);{let o=null;return i.children.inorderTraversal((a,d)=>{".priority"===a?((0,L.hu)(null!==d.value,"Priority writes must always be leaf nodes"),o=d.value):r=vB(Yn(s,a),d,r)}),!r.getChild(s).isEmpty()&&null!==o&&(r=r.updateChild(Yn(s,".priority"),o)),r}}function oA(s,i){return DB(i,s)}function E4(s,i){if(s.snap)return jo(s.path,i);for(const r in s.children)if(s.children.hasOwnProperty(r)&&jo(Yn(s.path,r),i))return!0;return!1}function x4(s){return s.visible}function bB(s,i,r){let o=ja.empty();for(let a=0;a<s.length;++a){const d=s[a];if(i(d)){const g=d.path;let y;if(d.snap)jo(r,g)?(y=ps(r,g),o=eE(o,y,d.snap)):jo(g,r)&&(y=ps(g,r),o=eE(o,Jt(),d.snap.getChild(y)));else{if(!d.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(jo(r,g))y=ps(r,g),o=Kk(o,y,d.children);else if(jo(g,r))if(y=ps(g,r),Gt(y))o=Kk(o,Jt(),d.children);else{const C=(0,L.DV)(d.children,Ut(y));if(C){const T=C.getChild(wn(y));o=eE(o,Jt(),T)}}}}}return o}function wB(s,i,r,o,a){if(o||a){const d=ff(s.visibleWrites,i);return!a&&Jk(d)?r:a||null!=r||Qk(d,Jt())?$v(bB(s.allWrites,function(T){return(T.visible||a)&&(!o||!~o.indexOf(T.writeId))&&(jo(T.path,i)||jo(i,T.path))},i),r||Nt.EMPTY_NODE):null}{const d=sm(s.visibleWrites,i);if(null!=d)return d;{const g=ff(s.visibleWrites,i);return Jk(g)?r:null!=r||Qk(g,Jt())?$v(g,r||Nt.EMPTY_NODE):null}}}function aA(s,i,r,o){return wB(s.writeTree,s.treePath,i,r,o)}function Xk(s,i){return function(s,i,r){let o=Nt.EMPTY_NODE;const a=sm(s.visibleWrites,i);if(a)return a.isLeafNode()||a.forEachChild(Mn,(d,g)=>{o=o.updateImmediateChild(d,g)}),o;if(r){const d=ff(s.visibleWrites,i);return r.forEachChild(Mn,(g,y)=>{const C=$v(ff(d,new ln(g)),y);o=o.updateImmediateChild(g,C)}),yB(d).forEach(g=>{o=o.updateImmediateChild(g.name,g.node)}),o}return yB(ff(s.visibleWrites,i)).forEach(g=>{o=o.updateImmediateChild(g.name,g.node)}),o}(s.writeTree,s.treePath,i)}function CB(s,i,r,o){return function(s,i,r,o,a){(0,L.hu)(o||a,"Either existingEventSnap or existingServerSnap must exist");const d=Yn(i,r);if(Qk(s.visibleWrites,d))return null;{const g=ff(s.visibleWrites,d);return Jk(g)?a.getChild(r):$v(g,a.getChild(r))}}(s.writeTree,s.treePath,i,r,o)}function lA(s,i){return function(s,i){return sm(s.visibleWrites,i)}(s.writeTree,Yn(s.treePath,i))}function eP(s,i,r){return function(s,i,r,o){const a=Yn(i,r),d=sm(s.visibleWrites,a);return null!=d?d:o.isCompleteForChild(r)?$v(ff(s.visibleWrites,a),o.getNode().getImmediateChild(r)):null}(s.writeTree,s.treePath,i,r)}function EB(s,i){return DB(Yn(s.treePath,i),s.writeTree)}function DB(s,i){return{treePath:s,writeTree:i}}class O4{constructor(){this.changeMap=new Map}trackChildChange(i){const r=i.type,o=i.childName;(0,L.hu)("child_added"===r||"child_changed"===r||"child_removed"===r,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==o,"Only non-priority child changes can be tracked.");const a=this.changeMap.get(o);if(a){const d=a.type;if("child_added"===r&&"child_removed"===d)this.changeMap.set(o,ZC(o,i.snapshotNode,a.snapshotNode));else if("child_removed"===r&&"child_added"===d)this.changeMap.delete(o);else if("child_removed"===r&&"child_changed"===d)this.changeMap.set(o,zC(o,a.oldSnap));else if("child_changed"===r&&"child_added"===d)this.changeMap.set(o,Gv(o,i.snapshotNode));else{if("child_changed"!==r||"child_changed"!==d)throw(0,L.g5)("Illegal combination of changes: "+i+" occurred after "+a);this.changeMap.set(o,ZC(o,i.snapshotNode,a.oldSnap))}}else this.changeMap.set(o,i)}getChanges(){return Array.from(this.changeMap.values())}}const xB=new class{getCompleteChild(i){return null}getChildAfterChild(i,r,o){return null}};class tP{constructor(i,r,o=null){this.writes_=i,this.viewCache_=r,this.optCompleteServerCache_=o}getCompleteChild(i){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(i))return r.getNode().getImmediateChild(i);{const o=null!=this.optCompleteServerCache_?new hf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return eP(this.writes_,i,o)}}getChildAfterChild(i,r,o){const a=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:im(this.viewCache_),d=function(s,i,r,o,a,d){return function(s,i,r,o,a,d,g){let y;const C=ff(s.visibleWrites,i),T=sm(C,Jt());if(null!=T)y=T;else{if(null==r)return[];y=$v(C,r)}if(y=y.withIndex(g),y.isEmpty()||y.isLeafNode())return[];{const S=[],N=g.getCompare(),O=d?y.getReverseIteratorFrom(o,g):y.getIteratorFrom(o,g);let V=O.getNext();for(;V&&S.length<a;)0!==N(V,o)&&S.push(V),V=O.getNext();return S}}(s.writeTree,s.treePath,i,r,o,a,d)}(this.writes_,a,r,1,o,i);return 0===d.length?null:d[0]}}function IB(s,i,r,o,a,d){const g=i.eventCache;if(null!=lA(o,r))return i;{let y,C;if(Gt(r))if((0,L.hu)(i.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),i.serverCache.isFiltered()){const T=im(i),N=Xk(o,T instanceof Nt?T:Nt.EMPTY_NODE);y=s.filter.updateFullNode(i.eventCache.getNode(),N,d)}else{const T=aA(o,im(i));y=s.filter.updateFullNode(i.eventCache.getNode(),T,d)}else{const T=Ut(r);if(".priority"===T){(0,L.hu)(1===df(r),"Can't have a priority with additional path components");const S=g.getNode();C=i.serverCache.getNode();const N=CB(o,r,S,C);y=null!=N?s.filter.updatePriority(S,N):g.getNode()}else{const S=wn(r);let N;if(g.isCompleteForChild(T)){C=i.serverCache.getNode();const O=CB(o,r,g.getNode(),C);N=null!=O?g.getNode().getImmediateChild(T).updateChild(S,O):g.getNode().getImmediateChild(T)}else N=eP(o,T,i.serverCache);y=null!=N?s.filter.updateChild(g.getNode(),T,N,S,a,d):g.getNode()}}return XC(i,y,g.isFullyInitialized()||Gt(r),s.filter.filtersNodes())}}function uA(s,i,r,o,a,d,g,y){const C=i.serverCache;let T;const S=g?s.filter:s.filter.getIndexedFilter();if(Gt(r))T=S.updateFullNode(C.getNode(),o,null);else if(S.filtersNodes()&&!C.isFiltered()){const V=C.getNode().updateChild(r,o);T=S.updateFullNode(C.getNode(),V,null)}else{const V=Ut(r);if(!C.isCompleteForPath(r)&&df(r)>1)return i;const Y=wn(r),Te=C.getNode().getImmediateChild(V).updateChild(Y,o);T=".priority"===V?S.updatePriority(C.getNode(),Te):S.updateChild(C.getNode(),V,Te,Y,xB,null)}const N=mB(i,T,C.isFullyInitialized()||Gt(r),S.filtersNodes());return IB(s,N,r,a,new tP(a,N,d),y)}function nP(s,i,r,o,a,d,g){const y=i.eventCache;let C,T;const S=new tP(a,i,d);if(Gt(r))T=s.filter.updateFullNode(i.eventCache.getNode(),o,g),C=XC(i,T,!0,s.filter.filtersNodes());else{const N=Ut(r);if(".priority"===N)T=s.filter.updatePriority(i.eventCache.getNode(),o),C=XC(i,T,y.isFullyInitialized(),y.isFiltered());else{const O=wn(r),V=y.getNode().getImmediateChild(N);let Y;if(Gt(O))Y=o;else{const le=S.getCompleteChild(N);Y=null!=le?".priority"===Rk(O)&&le.getChild(J2(O)).isEmpty()?le:le.updateChild(O,o):Nt.EMPTY_NODE}C=V.equals(Y)?i:XC(i,s.filter.updateChild(y.getNode(),N,Y,O,S,g),y.isFullyInitialized(),s.filter.filtersNodes())}}return C}function TB(s,i){return s.eventCache.isCompleteForChild(i)}function AB(s,i,r){return r.foreach((o,a)=>{i=i.updateChild(o,a)}),i}function rP(s,i,r,o,a,d,g,y){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;let T,C=i;T=Gt(r)?o:new Rn(null).setTree(r,o);const S=i.serverCache.getNode();return T.children.inorderTraversal((N,O)=>{if(S.hasChild(N)){const Y=AB(0,i.serverCache.getNode().getImmediateChild(N),O);C=uA(s,C,new ln(N),Y,a,d,g,y)}}),T.children.inorderTraversal((N,O)=>{const V=!i.serverCache.isCompleteForChild(N)&&void 0===O.value;if(!S.hasChild(N)&&!V){const le=AB(0,i.serverCache.getNode().getImmediateChild(N),O);C=uA(s,C,new ln(N),le,a,d,g,y)}}),C}class H4{constructor(i,r){this.query_=i,this.eventRegistrations_=[];const o=this.query_._queryParams,a=new Gk(o.getIndex()),d=function(s){return s.loadsAllData()?new Gk(s.getIndex()):s.hasLimit()?new n4(s):new KC(s)}(o);this.processor_=function(s){return{filter:s}}(d);const g=r.serverCache,y=r.eventCache,C=a.updateFullNode(Nt.EMPTY_NODE,g.getNode(),null),T=d.updateFullNode(Nt.EMPTY_NODE,y.getNode(),null),S=new hf(C,g.isFullyInitialized(),a.filtersNodes()),N=new hf(T,y.isFullyInitialized(),d.filtersNodes());this.viewCache_=iA(N,S),this.eventGenerator_=new g4(this.query_)}get query(){return this.query_}}function q4(s,i){const r=im(s.viewCache_);return r&&(s.query._queryParams.loadsAllData()||!Gt(i)&&!r.getImmediateChild(Ut(i)).isEmpty())?r.getChild(i):null}function SB(s){return 0===s.eventRegistrations_.length}function NB(s,i,r){const o=[];if(r){(0,L.hu)(null==i,"A cancel should cancel all event registrations.");const a=s.query._path;s.eventRegistrations_.forEach(d=>{const g=d.createCancelEvent(r,a);g&&o.push(g)})}if(i){let a=[];for(let d=0;d<s.eventRegistrations_.length;++d){const g=s.eventRegistrations_[d];if(g.matches(i)){if(i.hasAnyCallback()){a=a.concat(s.eventRegistrations_.slice(d+1));break}}else a.push(g)}s.eventRegistrations_=a}else s.eventRegistrations_=[];return o}function MB(s,i,r,o){i.type===Ho.MERGE&&null!==i.source.queryId&&((0,L.hu)(im(s.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(sA(s.viewCache_),"Missing event cache, even though we have a server cache"));const a=s.viewCache_,d=function(s,i,r,o,a){const d=new O4;let g,y;if(r.type===Ho.OVERWRITE){const T=r;T.source.fromUser?g=nP(s,i,T.path,T.snap,o,a,d):((0,L.hu)(T.source.fromServer,"Unknown source."),y=T.source.tagged||i.serverCache.isFiltered()&&!Gt(T.path),g=uA(s,i,T.path,T.snap,o,a,y,d))}else if(r.type===Ho.MERGE){const T=r;T.source.fromUser?g=function(s,i,r,o,a,d,g){let y=i;return o.foreach((C,T)=>{const S=Yn(r,C);TB(i,Ut(S))&&(y=nP(s,y,S,T,a,d,g))}),o.foreach((C,T)=>{const S=Yn(r,C);TB(i,Ut(S))||(y=nP(s,y,S,T,a,d,g))}),y}(s,i,T.path,T.children,o,a,d):((0,L.hu)(T.source.fromServer,"Unknown source."),y=T.source.tagged||i.serverCache.isFiltered(),g=rP(s,i,T.path,T.children,o,a,y,d))}else if(r.type===Ho.ACK_USER_WRITE){const T=r;g=T.revert?function(s,i,r,o,a,d){let g;if(null!=lA(o,r))return i;{const y=new tP(o,i,a),C=i.eventCache.getNode();let T;if(Gt(r)||".priority"===Ut(r)){let S;if(i.serverCache.isFullyInitialized())S=aA(o,im(i));else{const N=i.serverCache.getNode();(0,L.hu)(N instanceof Nt,"serverChildren would be complete if leaf node"),S=Xk(o,N)}S=S,T=s.filter.updateFullNode(C,S,d)}else{const S=Ut(r);let N=eP(o,S,i.serverCache);null==N&&i.serverCache.isCompleteForChild(S)&&(N=C.getImmediateChild(S)),T=null!=N?s.filter.updateChild(C,S,N,wn(r),y,d):i.eventCache.getNode().hasChild(S)?s.filter.updateChild(C,S,Nt.EMPTY_NODE,wn(r),y,d):C,T.isEmpty()&&i.serverCache.isFullyInitialized()&&(g=aA(o,im(i)),g.isLeafNode()&&(T=s.filter.updateFullNode(T,g,d)))}return g=i.serverCache.isFullyInitialized()||null!=lA(o,Jt()),XC(i,T,g,s.filter.filtersNodes())}}(s,i,T.path,o,a,d):function(s,i,r,o,a,d,g){if(null!=lA(a,r))return i;const y=i.serverCache.isFiltered(),C=i.serverCache;if(null!=o.value){if(Gt(r)&&C.isFullyInitialized()||C.isCompleteForPath(r))return uA(s,i,r,C.getNode().getChild(r),a,d,y,g);if(Gt(r)){let T=new Rn(null);return C.getNode().forEachChild(cu,(S,N)=>{T=T.set(new ln(S),N)}),rP(s,i,r,T,a,d,y,g)}return i}{let T=new Rn(null);return o.foreach((S,N)=>{const O=Yn(r,S);C.isCompleteForPath(O)&&(T=T.set(S,C.getNode().getChild(O)))}),rP(s,i,r,T,a,d,y,g)}}(s,i,T.path,T.affectedTree,o,a,d)}else{if(r.type!==Ho.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+r.type);g=function(s,i,r,o,a){const d=i.serverCache;return IB(s,mB(i,d.getNode(),d.isFullyInitialized()||Gt(r),d.isFiltered()),r,o,xB,a)}(s,i,r.path,o,d)}const C=d.getChanges();return function(s,i,r){const o=i.eventCache;if(o.isFullyInitialized()){const a=o.getNode().isLeafNode()||o.getNode().isEmpty(),d=sA(s);(r.length>0||!s.eventCache.isFullyInitialized()||a&&!o.getNode().equals(d)||!o.getNode().getPriority().equals(d.getPriority()))&&r.push(hB(sA(i)))}}(i,g,C),{viewCache:g,changes:C}}(s.processor_,a,i,r,o);return function(s,i){(0,L.hu)(i.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(i.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}(s.processor_,d.viewCache),(0,L.hu)(d.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=d.viewCache,RB(s,d.changes,d.viewCache.eventCache.getNode(),null)}function RB(s,i,r,o){return function(s,i,r,o){const a=[],d=[];return i.forEach(g=>{"child_changed"===g.type&&s.index_.indexedValueChanged(g.oldSnap,g.snapshotNode)&&d.push(function(s,i){return{type:"child_moved",snapshotNode:i,childName:s}}(g.childName,g.snapshotNode))}),JC(s,a,"child_removed",i,o,r),JC(s,a,"child_added",i,o,r),JC(s,a,"child_moved",d,o,r),JC(s,a,"child_changed",i,o,r),JC(s,a,"value",i,o,r),a}(s.eventGenerator_,i,r,o?[o]:s.eventRegistrations_)}let cA,hA;class OB{constructor(){this.views=new Map}}function iP(s,i,r,o){const a=i.source.queryId;if(null!==a){const d=s.views.get(a);return(0,L.hu)(null!=d,"SyncTree gave us an op for an invalid query."),MB(d,i,r,o)}{let d=[];for(const g of s.views.values())d=d.concat(MB(g,i,r,o));return d}}function kB(s,i,r,o,a){const g=s.views.get(i._queryIdentifier);if(!g){let y=aA(r,a?o:null),C=!1;y?C=!0:o instanceof Nt?(y=Xk(r,o),C=!1):(y=Nt.EMPTY_NODE,C=!1);const T=iA(new hf(y,C,!1),new hf(o,a,!1));return new H4(i,T)}return g}function PB(s){const i=[];for(const r of s.views.values())r.query._queryParams.loadsAllData()||i.push(r);return i}function gf(s,i){let r=null;for(const o of s.views.values())r=r||q4(o,i);return r}function FB(s,i){return i._queryParams.loadsAllData()?dA(s):s.views.get(i._queryIdentifier)}function LB(s,i){return null!=FB(s,i)}function pf(s){return null!=dA(s)}function dA(s){for(const i of s.views.values())if(i.query._queryParams.loadsAllData())return i;return null}let nW=1;class VB{constructor(i){this.listenProvider_=i,this.syncPointTree_=new Rn(null),this.pendingWriteTree_={visibleWrites:ja.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sP(s,i,r,o,a){return function(s,i,r,o,a){(0,L.hu)(o>s.lastWriteId,"Stacking an older write on top of newer ones"),void 0===a&&(a=!0),s.allWrites.push({path:i,snap:r,writeId:o,visible:a}),a&&(s.visibleWrites=eE(s.visibleWrites,i,r)),s.lastWriteId=o}(s.pendingWriteTree_,i,r,o,a),a?Wv(s,new rm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},i,r)):[]}function mf(s,i,r=!1){const o=function(s,i){for(let r=0;r<s.allWrites.length;r++){const o=s.allWrites[r];if(o.writeId===i)return o}return null}(s.pendingWriteTree_,i);if(function(s,i){const r=s.allWrites.findIndex(y=>y.writeId===i);(0,L.hu)(r>=0,"removeWrite called with nonexistent writeId.");const o=s.allWrites[r];s.allWrites.splice(r,1);let a=o.visible,d=!1,g=s.allWrites.length-1;for(;a&&g>=0;){const y=s.allWrites[g];y.visible&&(g>=r&&E4(y,o.path)?a=!1:jo(o.path,y.path)&&(d=!0)),g--}return!!a&&(d?(function(s){s.visibleWrites=bB(s.allWrites,x4,Jt()),s.lastWriteId=s.allWrites.length>0?s.allWrites[s.allWrites.length-1].writeId:-1}(s),!0):(o.snap?s.visibleWrites=_B(s.visibleWrites,o.path):yi(o.children,C=>{s.visibleWrites=_B(s.visibleWrites,Yn(o.path,C))}),!0))}(s.pendingWriteTree_,i)){let d=new Rn(null);return null!=o.snap?d=d.set(Jt(),!0):yi(o.children,g=>{d=d.set(new ln(g),!0)}),Wv(s,new rA(o.path,d,r))}return[]}function tE(s,i,r){return Wv(s,new rm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,r))}function oP(s,i,r,o){const a=i._path,d=s.syncPointTree_.get(a);let g=[];if(d&&("default"===i._queryIdentifier||LB(d,i))){const y=function(s,i,r,o){const a=i._queryIdentifier,d=[];let g=[];const y=pf(s);if("default"===a)for(const[C,T]of s.views.entries())g=g.concat(NB(T,r,o)),SB(T)&&(s.views.delete(C),T.query._queryParams.loadsAllData()||d.push(T.query));else{const C=s.views.get(a);C&&(g=g.concat(NB(C,r,o)),SB(C)&&(s.views.delete(a),C.query._queryParams.loadsAllData()||d.push(C.query)))}return y&&!pf(s)&&d.push(new((0,L.hu)(cA,"Reference.ts has not been loaded"),cA)(i._repo,i._path)),{removed:d,events:g}}(d,i,r,o);(function(s){return 0===s.views.size})(d)&&(s.syncPointTree_=s.syncPointTree_.remove(a));const C=y.removed;g=y.events;const T=-1!==C.findIndex(N=>N._queryParams.loadsAllData()),S=s.syncPointTree_.findOnPath(a,(N,O)=>pf(O));if(T&&!S){const N=s.syncPointTree_.subtree(a);if(!N.isEmpty()){const O=function(s){return s.fold((i,r,o)=>{if(r&&pf(r))return[dA(r)];{let a=[];return r&&(a=PB(r)),yi(o,(d,g)=>{a=a.concat(g)}),a}})}(N);for(let V=0;V<O.length;++V){const Y=O[V],le=Y.query,Te=jB(s,Y);s.listenProvider_.startListening(nE(le),gA(s,le),Te.hashFn,Te.onComplete)}}}if(!S&&C.length>0&&!o)if(T){const N=null;s.listenProvider_.stopListening(nE(i),N)}else C.forEach(N=>{const O=s.queryToTagMap.get(pA(N));s.listenProvider_.stopListening(nE(N),O)});!function(s,i){for(let r=0;r<i.length;++r){const o=i[r];if(!o._queryParams.loadsAllData()){const a=pA(o),d=s.queryToTagMap.get(a);s.queryToTagMap.delete(a),s.tagToQueryMap.delete(d)}}}(s,C)}return g}function BB(s,i,r){const o=i._path;let a=null,d=!1;s.syncPointTree_.foreachOnPath(o,(N,O)=>{const V=ps(N,o);a=a||gf(O,V),d=d||pf(O)});let y,g=s.syncPointTree_.get(o);g?(d=d||pf(g),a=a||gf(g,Jt())):(g=new OB,s.syncPointTree_=s.syncPointTree_.set(o,g)),null!=a?y=!0:(y=!1,a=Nt.EMPTY_NODE,s.syncPointTree_.subtree(o).foreachChild((O,V)=>{const Y=gf(V,Jt());Y&&(a=a.updateImmediateChild(O,Y))}));const C=LB(g,i);if(!C&&!i._queryParams.loadsAllData()){const N=pA(i);(0,L.hu)(!s.queryToTagMap.has(N),"View does not exist, but we have a tag");const O=nW++;s.queryToTagMap.set(N,O),s.tagToQueryMap.set(O,N)}let S=function(s,i,r,o,a,d){const g=kB(s,i,o,a,d);return s.views.has(i._queryIdentifier)||s.views.set(i._queryIdentifier,g),function(s,i){s.eventRegistrations_.push(i)}(g,r),function(s,i){const r=s.viewCache_.eventCache,o=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Mn,(d,g)=>{o.push(Gv(d,g))}),r.isFullyInitialized()&&o.push(hB(r.getNode())),RB(s,o,r.getNode(),i)}(g,r)}(g,i,r,oA(s.pendingWriteTree_,o),a,y);if(!C&&!d){const N=FB(g,i);S=S.concat(function(s,i,r){const o=i._path,a=gA(s,i),d=jB(s,r),g=s.listenProvider_.startListening(nE(i),a,d.hashFn,d.onComplete),y=s.syncPointTree_.subtree(o);if(a)(0,L.hu)(!pf(y.value),"If we're adding a query, it shouldn't be shadowed");else{const C=y.fold((T,S,N)=>{if(!Gt(T)&&S&&pf(S))return[dA(S).query];{let O=[];return S&&(O=O.concat(PB(S).map(V=>V.query))),yi(N,(V,Y)=>{O=O.concat(Y)}),O}});for(let T=0;T<C.length;++T){const S=C[T];s.listenProvider_.stopListening(nE(S),gA(s,S))}}return g}(s,i,N))}return S}function fA(s,i,r){const a=s.pendingWriteTree_,d=s.syncPointTree_.findOnPath(i,(g,y)=>{const T=gf(y,ps(g,i));if(T)return T});return wB(a,i,d,r,!0)}function Wv(s,i){return UB(i,s.syncPointTree_,null,oA(s.pendingWriteTree_,Jt()))}function UB(s,i,r,o){if(Gt(s.path))return GB(s,i,r,o);{const a=i.get(Jt());null==r&&null!=a&&(r=gf(a,Jt()));let d=[];const g=Ut(s.path),y=s.operationForChild(g),C=i.children.get(g);if(C&&y){const T=r?r.getImmediateChild(g):null,S=EB(o,g);d=d.concat(UB(y,C,T,S))}return a&&(d=d.concat(iP(a,s,o,r))),d}}function GB(s,i,r,o){const a=i.get(Jt());null==r&&null!=a&&(r=gf(a,Jt()));let d=[];return i.children.inorderTraversal((g,y)=>{const C=r?r.getImmediateChild(g):null,T=EB(o,g),S=s.operationForChild(g);S&&(d=d.concat(GB(S,y,C,T)))}),a&&(d=d.concat(iP(a,s,o,r))),d}function jB(s,i){const r=i.query,o=gA(s,r);return{hashFn:()=>(function(s){return s.viewCache_.serverCache.getNode()}(i)||Nt.EMPTY_NODE).hash(),onComplete:a=>{if("ok"===a)return o?function(s,i,r){const o=aP(s,r);if(o){const a=lP(o),d=a.path,g=a.queryId,y=ps(d,i);return uP(s,d,new QC(zk(g),y))}return[]}(s,r._path,o):function(s,i){return Wv(s,new QC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i))}(s,r._path);{const d=function(s,i){let r="Unknown Error";"too_big"===s?r="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===s?r="Client doesn't have permission to access the desired data.":"unavailable"===s&&(r="The service is unavailable");const o=new Error(s+" at "+i._path.toString()+": "+r);return o.code=s.toUpperCase(),o}(a,r);return oP(s,r,null,d)}}}}function gA(s,i){const r=pA(i);return s.queryToTagMap.get(r)}function pA(s){return s._path.toString()+"$"+s._queryIdentifier}function aP(s,i){return s.tagToQueryMap.get(i)}function lP(s){const i=s.indexOf("$");return(0,L.hu)(-1!==i&&i<s.length-1,"Bad queryKey."),{queryId:s.substr(i+1),path:new ln(s.substr(0,i))}}function uP(s,i,r){const o=s.syncPointTree_.get(i);return(0,L.hu)(o,"Missing sync point for query tag that we're tracking"),iP(o,r,oA(s.pendingWriteTree_,i),null)}function nE(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new((0,L.hu)(hA,"Reference.ts has not been loaded"),hA)(s._repo,s._path):s}class cP{constructor(i){this.node_=i}getImmediateChild(i){const r=this.node_.getImmediateChild(i);return new cP(r)}node(){return this.node_}}class dP{constructor(i,r){this.syncTree_=i,this.path_=r}getImmediateChild(i){const r=Yn(this.path_,i);return new dP(this.syncTree_,r)}node(){return fA(this.syncTree_,this.path_)}}const HB=function(s,i,r){return s&&"object"==typeof s?((0,L.hu)(".sv"in s,"Unexpected leaf node or priority contents"),"string"==typeof s[".sv"]?pW(s[".sv"],i,r):"object"==typeof s[".sv"]?mW(s[".sv"],i):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(s,null,2))):s},pW=function(s,i,r){switch(s){case"timestamp":return r.timestamp;default:(0,L.hu)(!1,"Unexpected server value: "+s)}},mW=function(s,i,r){s.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const o=s.increment;"number"!=typeof o&&(0,L.hu)(!1,"Unexpected increment value: "+o);const a=i.node();if((0,L.hu)(null!=a,"Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return o;const g=a.getValue();return"number"!=typeof g?o:g+o},$B=function(s,i,r,o){return fP(i,new dP(r,s),o)},hP=function(s,i,r){return fP(s,new cP(i),r)};function fP(s,i,r){const o=s.getPriority().val(),a=HB(o,i.getImmediateChild(".priority"),r);let d;if(s.isLeafNode()){const g=s,y=HB(g.getValue(),i,r);return y!==g.getValue()||a!==g.getPriority().val()?new Vv(y,ir(a)):s}{const g=s;return d=g,a!==g.getPriority().val()&&(d=d.updatePriority(new Vv(a))),g.forEachChild(Mn,(y,C)=>{const T=fP(C,i.getImmediateChild(y),r);T!==C&&(d=d.updateImmediateChild(y,T))}),d}}class gP{constructor(i="",r=null,o={children:{},childCount:0}){this.name=i,this.parent=r,this.node=o}}function mA(s,i){let r=i instanceof ln?i:new ln(i),o=s,a=Ut(r);for(;null!==a;){const d=(0,L.DV)(o.node.children,a)||{children:{},childCount:0};o=new gP(a,o,d),r=wn(r),a=Ut(r)}return o}function om(s){return s.node.value}function pP(s,i){s.node.value=i,mP(s)}function WB(s){return s.node.childCount>0}function _A(s,i){yi(s.node.children,(r,o)=>{i(new gP(r,s,o))})}function qB(s,i,r,o){r&&!o&&i(s),_A(s,a=>{qB(a,i,!0,o)}),r&&o&&i(s)}function rE(s){return new ln(null===s.parent?s.name:rE(s.parent)+"/"+s.name)}function mP(s){null!==s.parent&&function(s,i,r){const o=function(s){return void 0===om(s)&&!WB(s)}(r),a=(0,L.r3)(s.node.children,i);o&&a?(delete s.node.children[i],s.node.childCount--,mP(s)):!o&&!a&&(s.node.children[i]=r.node,s.node.childCount++,mP(s))}(s.parent,s.name,s)}const bW=/[\[\].#$\/\u0000-\u001F\u007F]/,wW=/[\[\].#$\u0000-\u001F\u007F]/,_P=10485760,yA=function(s){return"string"==typeof s&&0!==s.length&&!bW.test(s)},YB=function(s){return"string"==typeof s&&0!==s.length&&!wW.test(s)},iE=function(s){return null===s||"string"==typeof s||"number"==typeof s&&!WT(s)||s&&"object"==typeof s&&(0,L.r3)(s,".sv")},du=function(s,i,r,o){o&&void 0===i||sE((0,L.gK)(s,"value"),i,r)},sE=function(s,i,r){const o=r instanceof ln?new P8(r,s):r;if(void 0===i)throw new Error(s+"contains undefined "+nm(o));if("function"==typeof i)throw new Error(s+"contains a function "+nm(o)+" with contents = "+i.toString());if(WT(i))throw new Error(s+"contains "+i.toString()+" "+nm(o));if("string"==typeof i&&i.length>_P/3&&(0,L.ug)(i)>_P)throw new Error(s+"contains a string greater than "+_P+" utf8 bytes "+nm(o)+" ('"+i.substring(0,50)+"...')");if(i&&"object"==typeof i){let a=!1,d=!1;if(yi(i,(g,y)=>{if(".value"===g)a=!0;else if(".priority"!==g&&".sv"!==g&&(d=!0,!yA(g)))throw new Error(s+" contains an invalid key ("+g+") "+nm(o)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(s,i){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(i),s.byteLength_+=(0,L.ug)(i),X2(s)})(o,g),sE(s,y,o),function(s){const i=s.parts_.pop();s.byteLength_-=(0,L.ug)(i),s.parts_.length>0&&(s.byteLength_-=1)}(o)}),a&&d)throw new Error(s+' contains ".value" child '+nm(o)+" in addition to actual children.")}},zB=function(s,i,r,o){if(o&&void 0===i)return;const a=(0,L.gK)(s,"values");if(!i||"object"!=typeof i||Array.isArray(i))throw new Error(a+" must be an object containing the children to replace.");const d=[];yi(i,(g,y)=>{const C=new ln(g);if(sE(a,y,Yn(r,C)),".priority"===Rk(C)&&!iE(y))throw new Error(a+"contains an invalid value for '"+C.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");d.push(C)}),function(s,i){let r,o;for(r=0;r<i.length;r++){o=i[r];const d=$C(o);for(let g=0;g<d.length;g++)if((".priority"!==d[g]||g!==d.length-1)&&!yA(d[g]))throw new Error(s+"contains an invalid key ("+d[g]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}i.sort(k8);let a=null;for(r=0;r<i.length;r++){if(o=i[r],null!==a&&jo(a,o))throw new Error(s+"contains a path "+a.toString()+" that is ancestor of another path "+o.toString());a=o}}(a,d)},yP=function(s,i,r){if(!r||void 0!==i){if(WT(i))throw new Error((0,L.gK)(s,"priority")+"is "+i.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!iE(i))throw new Error((0,L.gK)(s,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},oE=function(s,i,r,o){if(!(o&&void 0===r||yA(r)))throw new Error((0,L.gK)(s,i)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},aE=function(s,i,r,o){if(!(o&&void 0===r||YB(r)))throw new Error((0,L.gK)(s,i)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},$o=function(s,i){if(".info"===Ut(i))throw new Error(s+" failed = Can't modify data under /.info/")},ZB=function(s,i){const r=i.path.toString();if("string"!=typeof i.repoInfo.host||0===i.repoInfo.host.length||!yA(i.repoInfo.namespace)&&"localhost"!==i.repoInfo.host.split(":")[0]||0!==r.length&&!function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),YB(s)}(r))throw new Error((0,L.gK)(s,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class xW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function vA(s,i){let r=null;for(let o=0;o<i.length;o++){const a=i[o],d=a.getPath();null!==r&&!Ok(d,r.path)&&(s.eventLists_.push(r),r=null),null===r&&(r={events:[],path:d}),r.events.push(a)}r&&s.eventLists_.push(r)}function vP(s,i,r){vA(s,r),KB(s,o=>Ok(o,i))}function Wo(s,i,r){vA(s,r),KB(s,o=>jo(o,i)||jo(i,o))}function KB(s,i){s.recursionDepth_++;let r=!0;for(let o=0;o<s.eventLists_.length;o++){const a=s.eventLists_[o];a&&(i(a.path)?(IW(s.eventLists_[o]),s.eventLists_[o]=null):r=!1)}r&&(s.eventLists_=[]),s.recursionDepth_--}function IW(s){for(let i=0;i<s.events.length;i++){const r=s.events[i];if(null!==r){s.events[i]=null;const o=r.getEventRunner();em&&_i("event: "+r.toString()),Pv(o)}}}const QB="repo_interrupt";class AW{constructor(i,r,o,a){this.repoInfo_=i,this.forceRestClient_=r,this.authTokenProvider_=o,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nA(),this.transactionQueueTree_=new gP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function JB(s){const r=s.infoData_.getNode(new ln(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+r}function lE(s){return function(s){return(s=s||{}).timestamp=s.timestamp||(new Date).getTime(),s}({timestamp:JB(s)})}function XB(s,i,r,o,a){s.dataUpdateCount++;const d=new ln(i);r=s.interceptServerDataCallback_?s.interceptServerDataCallback_(i,r):r;let g=[];if(a)if(o){const C=(0,L.UI)(r,T=>ir(T));g=function(s,i,r,o){const a=aP(s,o);if(a){const d=lP(a),g=d.path,y=d.queryId,C=ps(g,i),T=Rn.fromObject(r);return uP(s,g,new Hv(zk(y),C,T))}return[]}(s.serverSyncTree_,d,C,a)}else{const C=ir(r);g=function(s,i,r,o){const a=aP(s,o);if(null!=a){const d=lP(a),g=d.path,y=d.queryId,C=ps(g,i);return uP(s,g,new rm(zk(y),C,r))}return[]}(s.serverSyncTree_,d,C,a)}else if(o){const C=(0,L.UI)(r,T=>ir(T));g=function(s,i,r){const o=Rn.fromObject(r);return Wv(s,new Hv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,o))}(s.serverSyncTree_,d,C)}else{const C=ir(r);g=tE(s.serverSyncTree_,d,C)}let y=d;g.length>0&&(y=Yv(s,d)),Wo(s.eventQueue_,y,g)}function eU(s,i){bP(s,"connected",i),!1===i&&function(s){qv(s,"onDisconnectEvents");const i=lE(s),r=nA();Wk(s.onDisconnect_,Jt(),(a,d)=>{const g=$B(a,d,s.serverSyncTree_,i);jv(r,a,g)});let o=[];Wk(r,Jt(),(a,d)=>{o=o.concat(tE(s.serverSyncTree_,a,d));const g=DP(s,a);Yv(s,g)}),s.onDisconnect_=nA(),Wo(s.eventQueue_,Jt(),o)}(s)}function bP(s,i,r){const o=new ln("/.info/"+i),a=ir(r);s.infoData_.updateSnapshot(o,a);const d=tE(s.infoSyncTree_,o,a);Wo(s.eventQueue_,o,d)}function bA(s){return s.nextWriteId_++}function wP(s,i,r,o,a){qv(s,"set",{path:i.toString(),value:r,priority:o});const d=lE(s),g=ir(r,o),y=fA(s.serverSyncTree_,i),C=hP(g,y,d),T=bA(s),S=sP(s.serverSyncTree_,i,C,T,!0);vA(s.eventQueue_,S),s.server_.put(i.toString(),g.val(!0),(O,V)=>{const Y="ok"===O;Y||gs("set at "+i+" failed: "+O);const le=mf(s.serverSyncTree_,T,!Y);Wo(s.eventQueue_,i,le),_f(0,a,O,V)});const N=DP(s,i);Yv(s,N),Wo(s.eventQueue_,N,[])}function kW(s,i,r){s.server_.onDisconnectCancel(i.toString(),(o,a)=>{"ok"===o&&$k(s.onDisconnect_,i),_f(0,r,o,a)})}function tU(s,i,r,o){const a=ir(r);s.server_.onDisconnectPut(i.toString(),a.val(!0),(d,g)=>{"ok"===d&&jv(s.onDisconnect_,i,a),_f(0,o,d,g)})}function CP(s,i,r){let o;o=".info"===Ut(i._path)?oP(s.infoSyncTree_,i,r):oP(s.serverSyncTree_,i,r),vP(s.eventQueue_,i._path,o)}function nU(s){s.persistentConnection_&&s.persistentConnection_.interrupt(QB)}function qv(s,...i){let r="";s.persistentConnection_&&(r=s.persistentConnection_.id+":"),_i(r,...i)}function _f(s,i,r,o){i&&Pv(()=>{if("ok"===r)i(null);else{const a=(r||"error").toUpperCase();let d=a;o&&(d+=": "+o);const g=new Error(d);g.code=a,i(g)}})}function EP(s,i,r){return fA(s.serverSyncTree_,i,r)||Nt.EMPTY_NODE}function wA(s,i=s.transactionQueueTree_){if(i||CA(s,i),om(i)){const r=iU(s,i);(0,L.hu)(r.length>0,"Sending zero length transaction queue"),r.every(a=>0===a.status)&&function(s,i,r){const o=r.map(T=>T.currentWriteId),a=EP(s,i,o);let d=a;const g=a.hash();for(let T=0;T<r.length;T++){const S=r[T];(0,L.hu)(0===S.status,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const N=ps(i,S.path);d=d.updateChild(N,S.currentOutputSnapshotRaw)}const y=d.val(!0),C=i;s.server_.put(C.toString(),y,T=>{qv(s,"transaction put response",{path:C.toString(),status:T});let S=[];if("ok"===T){const N=[];for(let O=0;O<r.length;O++)r[O].status=2,S=S.concat(mf(s.serverSyncTree_,r[O].currentWriteId)),r[O].onComplete&&N.push(()=>r[O].onComplete(null,!0,r[O].currentOutputSnapshotResolved)),r[O].unwatcher();CA(s,mA(s.transactionQueueTree_,i)),wA(s,s.transactionQueueTree_),Wo(s.eventQueue_,i,S);for(let O=0;O<N.length;O++)Pv(N[O])}else{if("datastale"===T)for(let N=0;N<r.length;N++)r[N].status=3===r[N].status?4:0;else{gs("transaction at "+C.toString()+" failed: "+T);for(let N=0;N<r.length;N++)r[N].status=4,r[N].abortReason=T}Yv(s,i)}},g)}(s,rE(i),r)}else WB(i)&&_A(i,r=>{wA(s,r)})}function Yv(s,i){const r=rU(s,i),o=rE(r);return function(s,i,r){if(0===i.length)return;const o=[];let a=[];const g=i.filter(y=>0===y.status).map(y=>y.currentWriteId);for(let y=0;y<i.length;y++){const C=i[y],T=ps(r,C.path);let N,S=!1;if((0,L.hu)(null!==T,"rerunTransactionsUnderNode_: relativePath should not be null."),4===C.status)S=!0,N=C.abortReason,a=a.concat(mf(s.serverSyncTree_,C.currentWriteId,!0));else if(0===C.status)if(C.retryCount>=25)S=!0,N="maxretry",a=a.concat(mf(s.serverSyncTree_,C.currentWriteId,!0));else{const O=EP(s,C.path,g);C.currentInputSnapshot=O;const V=i[y].update(O.val());if(void 0!==V){sE("transaction failed: Data returned ",V,C.path);let Y=ir(V);"object"==typeof V&&null!=V&&(0,L.r3)(V,".priority")||(Y=Y.updatePriority(O.getPriority()));const Te=C.currentWriteId,ke=lE(s),Ue=hP(Y,O,ke);C.currentOutputSnapshotRaw=Y,C.currentOutputSnapshotResolved=Ue,C.currentWriteId=bA(s),g.splice(g.indexOf(Te),1),a=a.concat(sP(s.serverSyncTree_,C.path,Ue,C.currentWriteId,C.applyLocally)),a=a.concat(mf(s.serverSyncTree_,Te,!0))}else S=!0,N="nodata",a=a.concat(mf(s.serverSyncTree_,C.currentWriteId,!0))}Wo(s.eventQueue_,r,a),a=[],S&&(i[y].status=2,setTimeout(i[y].unwatcher,Math.floor(0)),i[y].onComplete&&o.push("nodata"===N?()=>i[y].onComplete(null,!1,i[y].currentInputSnapshot):()=>i[y].onComplete(new Error(N),!1,null)))}CA(s,s.transactionQueueTree_);for(let y=0;y<o.length;y++)Pv(o[y]);wA(s,s.transactionQueueTree_)}(s,iU(s,r),o),o}function rU(s,i){let r,o=s.transactionQueueTree_;for(r=Ut(i);null!==r&&void 0===om(o);)o=mA(o,r),r=Ut(i=wn(i));return o}function iU(s,i){const r=[];return sU(s,i,r),r.sort((o,a)=>o.order-a.order),r}function sU(s,i,r){const o=om(i);if(o)for(let a=0;a<o.length;a++)r.push(o[a]);_A(i,a=>{sU(s,a,r)})}function CA(s,i){const r=om(i);if(r){let o=0;for(let a=0;a<r.length;a++)2!==r[a].status&&(r[o]=r[a],o++);r.length=o,pP(i,r.length>0?r:void 0)}_A(i,o=>{CA(s,o)})}function DP(s,i){const r=rE(rU(s,i)),o=mA(s.transactionQueueTree_,i);return function(s,i,r){let o=s.parent;for(;null!==o;){if(i(o))return!0;o=o.parent}}(o,a=>{xP(s,a)}),xP(s,o),qB(o,a=>{xP(s,a)}),r}function xP(s,i){const r=om(i);if(r){const o=[];let a=[],d=-1;for(let g=0;g<r.length;g++)3===r[g].status||(1===r[g].status?((0,L.hu)(d===g-1,"All SENT items should be at beginning of queue."),d=g,r[g].status=3,r[g].abortReason="set"):((0,L.hu)(0===r[g].status,"Unexpected transaction status in abort"),r[g].unwatcher(),a=a.concat(mf(s.serverSyncTree_,r[g].currentWriteId,!0)),r[g].onComplete&&o.push(r[g].onComplete.bind(null,new Error("set"),!1,null))));-1===d?pP(i,void 0):r.length=d+1,Wo(s.eventQueue_,rE(i),a);for(let g=0;g<o.length;g++)Pv(o[g])}}const IP=function(s,i){const r=$W(s),o=r.namespace;return"firebase.com"===r.domain&&lu(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||"undefined"===o)&&"localhost"!==r.domain&&lu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&gs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new k2(r.host,r.secure,o,i,"ws"===r.scheme||"wss"===r.scheme,"",o!==r.subdomain),path:new ln(r.pathString)}},$W=function(s){let i="",r="",o="",a="",d="",g=!0,y="https",C=443;if("string"==typeof s){let T=s.indexOf("//");T>=0&&(y=s.substring(0,T-1),s=s.substring(T+2));let S=s.indexOf("/");-1===S&&(S=s.length);let N=s.indexOf("?");-1===N&&(N=s.length),i=s.substring(0,Math.min(S,N)),S<N&&(a=function(s){let i="";const r=s.split("/");for(let o=0;o<r.length;o++)if(r[o].length>0){let a=r[o];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch(d){}i+="/"+a}return i}(s.substring(S,N)));const O=function(s){const i={};"?"===s.charAt(0)&&(s=s.substring(1));for(const r of s.split("&")){if(0===r.length)continue;const o=r.split("=");2===o.length?i[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):gs(`Invalid query segment '${r}' in query '${s}'`)}return i}(s.substring(Math.min(s.length,N)));T=i.indexOf(":"),T>=0?(g="https"===y||"wss"===y,C=parseInt(i.substring(T+1),10)):T=i.length;const V=i.slice(0,T);if("localhost"===V.toLowerCase())r="localhost";else if(V.split(".").length<=2)r=V;else{const Y=i.indexOf(".");o=i.substring(0,Y).toLowerCase(),r=i.substring(Y+1),d=o}"ns"in O&&(d=O.ns)}return{host:i,port:C,domain:r,subdomain:o,secure:g,scheme:y,pathString:a,namespace:d}};class oU{constructor(i,r,o,a){this.eventType=i,this.eventRegistration=r,this.snapshot=o,this.prevName=a}getPath(){const i=this.snapshot.ref;return"value"===this.eventType?i._path:i.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Pz)(this.snapshot.exportVal())}}class aU{constructor(i,r,o){this.eventRegistration=i,this.error=r,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class lU{constructor(i,r){this.snapshotCallback=i,this.cancelCallback=r}onValue(i,r){this.snapshotCallback.call(null,i,r)}onCancel(i){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,i)}get hasCancelCallback(){return!!this.cancelCallback}matches(i){return this.snapshotCallback===i.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===i.snapshotCallback.userCallback&&this.snapshotCallback.context===i.snapshotCallback.context}}class uU{constructor(i,r){this._repo=i,this._path=r}cancel(){const i=new L.BH;return kW(this._repo,this._path,i.wrapCallback(()=>{})),i.promise}remove(){$o("OnDisconnect.remove",this._path);const i=new L.BH;return tU(this._repo,this._path,null,i.wrapCallback(()=>{})),i.promise}set(i){$o("OnDisconnect.set",this._path),du("OnDisconnect.set",i,this._path,!1);const r=new L.BH;return tU(this._repo,this._path,i,r.wrapCallback(()=>{})),r.promise}setWithPriority(i,r){$o("OnDisconnect.setWithPriority",this._path),du("OnDisconnect.setWithPriority",i,this._path,!1),yP("OnDisconnect.setWithPriority",r,!1);const o=new L.BH;return function(s,i,r,o,a){const d=ir(r,o);s.server_.onDisconnectPut(i.toString(),d.val(!0),(g,y)=>{"ok"===g&&jv(s.onDisconnect_,i,d),_f(0,a,g,y)})}(this._repo,this._path,i,r,o.wrapCallback(()=>{})),o.promise}update(i){$o("OnDisconnect.update",this._path),zB("OnDisconnect.update",i,this._path,!1);const r=new L.BH;return function(s,i,r,o){if((0,L.xb)(r))return _i("onDisconnect().update() called with empty data.  Don't do anything."),void _f(0,o,"ok",void 0);s.server_.onDisconnectMerge(i.toString(),r,(a,d)=>{"ok"===a&&yi(r,(g,y)=>{const C=ir(y);jv(s.onDisconnect_,Yn(i,g),C)}),_f(0,o,a,d)})}(this._repo,this._path,i,r.wrapCallback(()=>{})),r.promise}}class Ps{constructor(i,r,o,a){this._repo=i,this._path=r,this._queryParams=o,this._orderByCalled=a}get key(){return Gt(this._path)?null:Rk(this._path)}get ref(){return new qo(this._repo,this._path)}get _queryIdentifier(){const i=gB(this._queryParams),r=Ek(i);return"{}"===r?"default":r}get _queryObject(){return gB(this._queryParams)}isEqual(i){if(!((i=(0,L.m9)(i))instanceof Ps))return!1;const r=this._repo===i._repo,o=Ok(this._path,i._path);return r&&o&&this._queryIdentifier===i._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(s){let i="";for(let r=s.pieceNum_;r<s.pieces_.length;r++)""!==s.pieces_[r]&&(i+="/"+encodeURIComponent(String(s.pieces_[r])));return i||"/"}(this._path)}}function EA(s,i){if(!0===s._orderByCalled)throw new Error(i+": You can't combine multiple orderBy calls.")}function yf(s){let i=null,r=null;if(s.hasStart()&&(i=s.getIndexStartValue()),s.hasEnd()&&(r=s.getIndexEndValue()),s.getIndex()===cu){const o="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",a="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(s.hasStart()){if(s.getIndexStartName()!==Bc)throw new Error(o);if("string"!=typeof i)throw new Error(a)}if(s.hasEnd()){if(s.getIndexEndName()!==uu)throw new Error(o);if("string"!=typeof r)throw new Error(a)}}else if(s.getIndex()===Mn){if(null!=i&&!iE(i)||null!=r&&!iE(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(s.getIndex()instanceof Vk||s.getIndex()===Bk,"unknown index type."),null!=i&&"object"==typeof i||null!=r&&"object"==typeof r)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function DA(s){if(s.hasStart()&&s.hasEnd()&&s.hasLimit()&&!s.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class qo extends Ps{constructor(i,r){super(i,r,new XT,!1)}get parent(){const i=J2(this._path);return null===i?null:new qo(this._repo,i)}get root(){let i=this;for(;null!==i.parent;)i=i.parent;return i}}class am{constructor(i,r,o){this._node=i,this.ref=r,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(i){const r=new ln(i),o=lm(this.ref,i);return new am(this._node.getChild(r),o,Mn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(i){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(o,a)=>i(new am(a,lm(this.ref,o),Mn)))}hasChild(i){const r=new ln(i);return!this._node.getChild(r).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function cU(s,i){return(s=(0,L.m9)(s))._checkNotDeleted("ref"),void 0!==i?lm(s._root,i):s._root}function dU(s,i){(s=(0,L.m9)(s))._checkNotDeleted("refFromURL");const r=IP(i,s._repo.repoInfo_.nodeAdmin);ZB("refFromURL",r);const o=r.repoInfo;return!s._repo.repoInfo_.isCustomHost()&&o.host!==s._repo.repoInfo_.host&&lu("refFromURL: Host name does not match the current database: (found "+o.host+" but expected "+s._repo.repoInfo_.host+")"),cU(s,r.path.toString())}function lm(s,i){return null===Ut((s=(0,L.m9)(s))._path)?((r=i)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),aE("child","path",r,!1)):aE("child","path",i,!1),new qo(s._repo,Yn(s._path,i));var r}function TP(s,i){s=(0,L.m9)(s),$o("set",s._path),du("set",i,s._path,!1);const r=new L.BH;return wP(s._repo,s._path,i,null,r.wrapCallback(()=>{})),r.promise}function ZW(s,i){zB("update",i,s._path,!1);const r=new L.BH;return function(s,i,r,o){qv(s,"update",{path:i.toString(),value:r});let a=!0;const d=lE(s),g={};if(yi(r,(y,C)=>{a=!1,g[y]=$B(Yn(i,y),ir(C),s.serverSyncTree_,d)}),a)_i("update() called with empty data.  Don't do anything."),_f(0,o,"ok",void 0);else{const y=bA(s),C=function(s,i,r,o){!function(s,i,r,o){(0,L.hu)(o>s.lastWriteId,"Stacking an older merge on top of newer ones"),s.allWrites.push({path:i,children:r,writeId:o,visible:!0}),s.visibleWrites=Kk(s.visibleWrites,i,r),s.lastWriteId=o}(s.pendingWriteTree_,i,r,o);const a=Rn.fromObject(r);return Wv(s,new Hv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},i,a))}(s.serverSyncTree_,i,g,y);vA(s.eventQueue_,C),s.server_.merge(i.toString(),r,(T,S)=>{const N="ok"===T;N||gs("update at "+i+" failed: "+T);const O=mf(s.serverSyncTree_,y,!N),V=O.length>0?Yv(s,i):i;Wo(s.eventQueue_,V,O),_f(0,o,T,S)}),yi(r,T=>{const S=DP(s,Yn(i,T));Yv(s,S)}),Wo(s.eventQueue_,i,[])}}(s._repo,s._path,i,r.wrapCallback(()=>{})),r.promise}function KW(s){return function(s,i){const r=function(s,i){const r=i._path;let o=null;s.syncPointTree_.foreachOnPath(r,(T,S)=>{const N=ps(T,r);o=o||gf(S,N)});let a=s.syncPointTree_.get(r);a?o=o||gf(a,Jt()):(a=new OB,s.syncPointTree_=s.syncPointTree_.set(r,a));const d=null!=o,g=d?new hf(o,!0,!1):null;return function(s){return sA(s.viewCache_)}(kB(a,i,oA(s.pendingWriteTree_,i._path),d?g.getNode():Nt.EMPTY_NODE,d))}(s.serverSyncTree_,i);return null!=r?Promise.resolve(r):s.server_.get(i).then(o=>{const a=ir(o).withIndex(i._queryParams.getIndex()),d=tE(s.serverSyncTree_,i._path,a);return vP(s.eventQueue_,i._path,d),Promise.resolve(a)},o=>(qv(s,"get for query "+(0,L.Pz)(i)+" failed: "+o),Promise.reject(new Error(o))))}((s=(0,L.m9)(s))._repo,s).then(i=>new am(i,new qo(s._repo,s._path),s._queryParams.getIndex()))}class xA{constructor(i){this.callbackContext=i}respondsTo(i){return"value"===i}createEvent(i,r){const o=r._queryParams.getIndex();return new oU("value",this,new am(i.snapshotNode,new qo(r._repo,r._path),o))}getEventRunner(i){return"cancel"===i.getEventType()?()=>this.callbackContext.onCancel(i.error):()=>this.callbackContext.onValue(i.snapshot,null)}createCancelEvent(i,r){return this.callbackContext.hasCancelCallback?new aU(this,i,r):null}matches(i){return i instanceof xA&&(!i.callbackContext||!this.callbackContext||i.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class IA{constructor(i,r){this.eventType=i,this.callbackContext=r}respondsTo(i){let r="children_added"===i?"child_added":i;return r="children_removed"===r?"child_removed":r,this.eventType===r}createCancelEvent(i,r){return this.callbackContext.hasCancelCallback?new aU(this,i,r):null}createEvent(i,r){(0,L.hu)(null!=i.childName,"Child events should have a childName.");const o=lm(new qo(r._repo,r._path),i.childName),a=r._queryParams.getIndex();return new oU(i.type,this,new am(i.snapshotNode,o,a),i.prevName)}getEventRunner(i){return"cancel"===i.getEventType()?()=>this.callbackContext.onCancel(i.error):()=>this.callbackContext.onValue(i.snapshot,i.prevName)}matches(i){return i instanceof IA&&this.eventType===i.eventType&&(!this.callbackContext||!i.callbackContext||this.callbackContext.matches(i.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function uE(s,i,r,o,a){let d;if("object"==typeof o&&(d=void 0,a=o),"function"==typeof o&&(d=o),a&&a.onlyOnce){const C=r,T=(S,N)=>{CP(s._repo,s,y),C(S,N)};T.userCallback=r.userCallback,T.context=r.context,r=T}const g=new lU(r,d||void 0),y="value"===i?new xA(g):new IA(i,g);return function(s,i,r){let o;o=".info"===Ut(i._path)?BB(s.infoSyncTree_,i,r):BB(s.serverSyncTree_,i,r),vP(s.eventQueue_,i._path,o)}(s._repo,s,y),()=>CP(s._repo,s,y)}function AP(s,i,r,o){return uE(s,"value",i,r,o)}function hU(s,i,r,o){return uE(s,"child_added",i,r,o)}function fU(s,i,r,o){return uE(s,"child_changed",i,r,o)}function gU(s,i,r,o){return uE(s,"child_moved",i,r,o)}function pU(s,i,r,o){return uE(s,"child_removed",i,r,o)}function mU(s,i,r){let o=null;const a=r?new lU(r):null;"value"===i?o=new xA(a):i&&(o=new IA(i,a)),CP(s._repo,s,o)}class Ha{}class _U extends Ha{constructor(i,r){super(),this._value=i,this._key=r}_apply(i){du("endAt",this._value,i._path,!0);const r=Hk(i._queryParams,this._value,this._key);if(DA(r),yf(r),i._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ps(i._repo,i._path,r,i._orderByCalled)}}class JW extends Ha{constructor(i,r){super(),this._value=i,this._key=r}_apply(i){du("endBefore",this._value,i._path,!1);const r=function(s,i,r){let o,a;return s.index_===cu?("string"==typeof i&&(i=dB(i)),a=Hk(s,i,r)):(o=null==r?Bc:dB(r),a=Hk(s,i,o)),a.endBeforeSet_=!0,a}(i._queryParams,this._value,this._key);if(DA(r),yf(r),i._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ps(i._repo,i._path,r,i._orderByCalled)}}class yU extends Ha{constructor(i,r){super(),this._value=i,this._key=r}_apply(i){du("startAt",this._value,i._path,!0);const r=jk(i._queryParams,this._value,this._key);if(DA(r),yf(r),i._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ps(i._repo,i._path,r,i._orderByCalled)}}class t5 extends Ha{constructor(i,r){super(),this._value=i,this._key=r}_apply(i){du("startAfter",this._value,i._path,!1);const r=function(s,i,r){let o;if(s.index_===cu)"string"==typeof i&&(i=cB(i)),o=jk(s,i,r);else{let a;a=null==r?uu:cB(r),o=jk(s,i,a)}return o.startAfterSet_=!0,o}(i._queryParams,this._value,this._key);if(DA(r),yf(r),i._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ps(i._repo,i._path,r,i._orderByCalled)}}class r5 extends Ha{constructor(i){super(),this._limit=i}_apply(i){if(i._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ps(i._repo,i._path,function(s,i){const r=s.copy();return r.limitSet_=!0,r.limit_=i,r.viewFrom_="l",r}(i._queryParams,this._limit),i._orderByCalled)}}class s5 extends Ha{constructor(i){super(),this._limit=i}_apply(i){if(i._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ps(i._repo,i._path,function(s,i){const r=s.copy();return r.limitSet_=!0,r.limit_=i,r.viewFrom_="r",r}(i._queryParams,this._limit),i._orderByCalled)}}class a5 extends Ha{constructor(i){super(),this._path=i}_apply(i){EA(i,"orderByChild");const r=new ln(this._path);if(Gt(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const o=new Vk(r),a=eA(i._queryParams,o);return yf(a),new Ps(i._repo,i._path,a,!0)}}class u5 extends Ha{_apply(i){EA(i,"orderByKey");const r=eA(i._queryParams,cu);return yf(r),new Ps(i._repo,i._path,r,!0)}}class d5 extends Ha{_apply(i){EA(i,"orderByPriority");const r=eA(i._queryParams,Mn);return yf(r),new Ps(i._repo,i._path,r,!0)}}class f5 extends Ha{_apply(i){EA(i,"orderByValue");const r=eA(i._queryParams,Bk);return yf(r),new Ps(i._repo,i._path,r,!0)}}class p5 extends Ha{constructor(i,r){super(),this._value=i,this._key=r}_apply(i){if(du("equalTo",this._value,i._path,!1),i._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(i._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new _U(this._value,this._key)._apply(new yU(this._value,this._key)._apply(i))}}function $a(s,...i){let r=(0,L.m9)(s);for(const o of i)r=o._apply(r);return r}(function(s){(0,L.hu)(!cA,"__referenceConstructor has already been defined"),cA=s})(qo),function(s){(0,L.hu)(!hA,"__referenceConstructor has already been defined"),hA=s}(qo);const SP={};function bU(s,i,r,o,a){let d=o||s.options.databaseURL;void 0===d&&(s.options.projectId||lu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_i("Using default host for project ",s.options.projectId),d=`${s.options.projectId}-default-rtdb.firebaseio.com`);let C,T,g=IP(d,a),y=g.repoInfo;"undefined"!=typeof process&&(T=process.env.FIREBASE_DATABASE_EMULATOR_HOST),T?(C=!0,d=`http://${T}?ns=${y.namespace}`,g=IP(d,a),y=g.repoInfo):C=!g.repoInfo.secure;const S=a&&C?new GC(GC.OWNER):new o8(s.name,s.options,i);ZB("Invalid Firebase Database URL",g),Gt(g.path)||lu("Database URL must point to the root of a Firebase Database (not including a child path).");const N=function(s,i,r,o){let a=SP[i.name];a||(a={},SP[i.name]=a);let d=a[s.toURLString()];return d&&lu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),d=new AW(s,false,r,o),a[s.toURLString()]=d,d}(y,s,S,new s8(s.name,r));return new C5(N,s)}class C5{constructor(i,r){this._repoInternal=i,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(s,i,r){if(s.stats_=Ak(s.repoInfo_),s.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)s.server_=new tA(s.repoInfo_,(o,a,d,g)=>{XB(s,o,a,d,g)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>eU(s,!0),0);else{if(null!=r){if("object"!=typeof r)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Pz)(r)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}s.persistentConnection_=new Lv(s.repoInfo_,i,(o,a,d,g)=>{XB(s,o,a,d,g)},o=>{eU(s,o)},o=>{!function(s,i){yi(i,(r,o)=>{bP(s,r,o)})}(s,o)},s.authTokenProvider_,s.appCheckProvider_,r),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(o=>{s.server_.refreshAuthToken(o)}),s.appCheckProvider_.addTokenChangeListener(o=>{s.server_.refreshAppCheckToken(o.token)}),s.statsReporter_=function(s,i){const r=s.toString();return Tk[r]||(Tk[r]=i()),Tk[r]}(s.repoInfo_,()=>new f4(s.stats_,s.server_)),s.infoData_=new l4,s.infoSyncTree_=new VB({startListening:(o,a,d,g)=>{let y=[];const C=s.infoData_.getNode(o._path);return C.isEmpty()||(y=tE(s.infoSyncTree_,o._path,C),setTimeout(()=>{g("ok")},0)),y},stopListening:()=>{}}),bP(s,"connected",!1),s.serverSyncTree_=new VB({startListening:(o,a,d,g)=>(s.server_.listen(o,d,a,(y,C)=>{const T=g(y,C);Wo(s.eventQueue_,o._path,T)}),[]),stopListening:(o,a)=>{s.server_.unlisten(o,a)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new qo(this._repo,Jt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(s,i){const r=SP[i];(!r||r[s.key]!==s)&&lu(`Database ${i}(${s.repoInfo_}) has already been deleted.`),nU(s),delete r[s.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(i){null===this._rootInternal&&lu("Cannot call "+i+" on a deleted database.")}}function I5(s,i){C2(s,i)}class M5{constructor(i,r){this.committed=i,this.snapshot=r}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Lv.prototype.simpleListen=function(s,i){this.sendRequest("q",{p:s},i)},Lv.prototype.echo=function(s,i){this.sendRequest("echo",{d:s},i)},_2(yc.SDK_VERSION),(0,yc._registerComponent)(new vc.wA("database",(i,{instanceIdentifier:r})=>bU(i.getProvider("app").getImmediate(),i.getProvider("auth-internal"),i.getProvider("app-check-internal"),r),"PUBLIC").setMultipleInstances(!0)),(0,yc.registerVersion)("@firebase/database","0.12.0",void 0);const P5=new Sa.Yd("@firebase/database-compat"),wU=function(s){P5.warn("FIREBASE WARNING: "+s)};class V5{constructor(i){this._delegate=i}cancel(i){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",i,!0);const r=this._delegate.cancel();return i&&r.then(()=>i(null),o=>i(o)),r}remove(i){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",i,!0);const r=this._delegate.remove();return i&&r.then(()=>i(null),o=>i(o)),r}set(i,r){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",r,!0);const o=this._delegate.set(i);return r&&o.then(()=>r(null),a=>r(a)),o}setWithPriority(i,r,o){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",o,!0);const a=this._delegate.setWithPriority(i,r);return o&&a.then(()=>o(null),d=>o(d)),a}update(i,r){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(i)){const a={};for(let d=0;d<i.length;++d)a[""+d]=i[d];i=a,wU("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",r,!0);const o=this._delegate.update(i);return r&&o.then(()=>r(null),a=>r(a)),o}}class B5{constructor(i,r){this.committed=i,this.snapshot=r}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class vf{constructor(i,r){this._database=i,this._delegate=r}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(i){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),i=String(i),aE("DataSnapshot.child","path",i,!1),new vf(this._database,this._delegate.child(i))}hasChild(i){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),aE("DataSnapshot.hasChild","path",i,!1),this._delegate.hasChild(i)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(i){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",i,!1),this._delegate.forEach(r=>i(new vf(this._database,r)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new go(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ri{constructor(i,r){this.database=i,this._delegate=r}on(i,r,o,a){var d;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",r,!1);const g=Ri.getCancelAndContextArgs_("Query.on",o,a),y=(T,S)=>{r.call(g.context,new vf(this.database,T),S)};y.userCallback=r,y.context=g.context;const C=null===(d=g.cancel)||void 0===d?void 0:d.bind(g.context);switch(i){case"value":return AP(this._delegate,y,C),r;case"child_added":return hU(this._delegate,y,C),r;case"child_removed":return pU(this._delegate,y,C),r;case"child_changed":return fU(this._delegate,y,C),r;case"child_moved":return gU(this._delegate,y,C),r;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(i,r,o){if((0,L.Dv)("Query.off",0,3,arguments.length),function(s,i,r){if(void 0!==i)switch(i){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,i),(0,L.Wj)("Query.off","callback",r,!0),(0,L.lb)("Query.off","context",o,!0),r){const a=()=>{};a.userCallback=r,a.context=o,mU(this._delegate,i,a)}else mU(this._delegate,i)}get(){return KW(this._delegate).then(i=>new vf(this.database,i))}once(i,r,o,a){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",r,!0);const d=Ri.getCancelAndContextArgs_("Query.once",o,a),g=new L.BH,y=(T,S)=>{const N=new vf(this.database,T);r&&r.call(d.context,N,S),g.resolve(N)};y.userCallback=r,y.context=d.context;const C=T=>{d.cancel&&d.cancel.call(d.context,T),g.reject(T)};switch(i){case"value":AP(this._delegate,y,C,{onlyOnce:!0});break;case"child_added":hU(this._delegate,y,C,{onlyOnce:!0});break;case"child_removed":pU(this._delegate,y,C,{onlyOnce:!0});break;case"child_changed":fU(this._delegate,y,C,{onlyOnce:!0});break;case"child_moved":gU(this._delegate,y,C,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return g.promise}limitToFirst(i){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new Ri(this.database,$a(this._delegate,function(s){if("number"!=typeof s||Math.floor(s)!==s||s<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new r5(s)}(i)))}limitToLast(i){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new Ri(this.database,$a(this._delegate,function(s){if("number"!=typeof s||Math.floor(s)!==s||s<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new s5(s)}(i)))}orderByChild(i){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new Ri(this.database,$a(this._delegate,function(s){if("$key"===s)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===s)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===s)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return aE("orderByChild","path",s,!1),new a5(s)}(i)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new Ri(this.database,$a(this._delegate,new u5))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new Ri(this.database,$a(this._delegate,new d5))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new Ri(this.database,$a(this._delegate,new f5))}startAt(i=null,r){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new Ri(this.database,$a(this._delegate,function(s=null,i){return oE("startAt","key",i,!0),new yU(s,i)}(i,r)))}startAfter(i=null,r){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new Ri(this.database,$a(this._delegate,function(s,i){return oE("startAfter","key",i,!0),new t5(s,i)}(i,r)))}endAt(i=null,r){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new Ri(this.database,$a(this._delegate,function(s,i){return oE("endAt","key",i,!0),new _U(s,i)}(i,r)))}endBefore(i=null,r){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new Ri(this.database,$a(this._delegate,function(s,i){return oE("endBefore","key",i,!0),new JW(s,i)}(i,r)))}equalTo(i,r){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new Ri(this.database,$a(this._delegate,function(s,i){return oE("equalTo","key",i,!0),new p5(s,i)}(i,r)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(i){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(i instanceof Ri))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(i._delegate)}static getCancelAndContextArgs_(i,r,o){const a={cancel:void 0,context:void 0};if(r&&o)a.cancel=r,(0,L.Wj)(i,"cancel",a.cancel,!0),a.context=o,(0,L.lb)(i,"context",a.context,!0);else if(r)if("object"==typeof r&&null!==r)a.context=r;else{if("function"!=typeof r)throw new Error((0,L.gK)(i,"cancelOrContext")+" must either be a cancel callback or a context object.");a.cancel=r}return a}get ref(){return new go(this.database,new qo(this._delegate._repo,this._delegate._path))}}class go extends Ri{constructor(i,r){super(i,new Ps(r._repo,r._path,new XT,!1)),this.database=i,this._delegate=r}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(i){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof i&&(i=String(i)),new go(this.database,lm(this._delegate,i))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const i=this._delegate.parent;return i?new go(this.database,i):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new go(this.database,this._delegate.root)}set(i,r){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",r,!0);const o=TP(this._delegate,i);return r&&o.then(()=>r(null),a=>r(a)),o}update(i,r){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(i)){const a={};for(let d=0;d<i.length;++d)a[""+d]=i[d];i=a,wU("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}$o("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",r,!0);const o=ZW(this._delegate,i);return r&&o.then(()=>r(null),a=>r(a)),o}setWithPriority(i,r,o){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",o,!0);const a=function(s,i,r){if($o("setWithPriority",s._path),du("setWithPriority",i,s._path,!1),yP("setWithPriority",r,!1),".length"===s.key||".keys"===s.key)throw"setWithPriority failed: "+s.key+" is a read-only object.";const o=new L.BH;return wP(s._repo,s._path,i,r,o.wrapCallback(()=>{})),o.promise}(this._delegate,i,r);return o&&a.then(()=>o(null),d=>o(d)),a}remove(i){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",i,!0);const r=function(s){return $o("remove",s._path),TP(s,null)}(this._delegate);return i&&r.then(()=>i(null),o=>i(o)),r}transaction(i,r,o){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",i,!1),(0,L.Wj)("Reference.transaction","onComplete",r,!0),function(s,i,r,o){if(void 0!==r&&"boolean"!=typeof r)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,o);const a=function(s,i,r){var o;if(s=(0,L.m9)(s),$o("Reference.transaction",s._path),".length"===s.key||".keys"===s.key)throw"Reference.transaction failed: "+s.key+" is a read-only object.";const a=null===(o=null==r?void 0:r.applyLocally)||void 0===o||o,d=new L.BH,y=AP(s,()=>{});return function(s,i,r,o,a,d){qv(s,"transaction on "+i);const g={path:i,update:r,onComplete:o,status:null,order:v2(),applyLocally:d,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},y=EP(s,i,void 0);g.currentInputSnapshot=y;const C=g.update(y.val());if(void 0===C)g.unwatcher(),g.currentOutputSnapshotRaw=null,g.currentOutputSnapshotResolved=null,g.onComplete&&g.onComplete(null,!1,g.currentInputSnapshot);else{sE("transaction failed: Data returned ",C,g.path),g.status=0;const T=mA(s.transactionQueueTree_,i),S=om(T)||[];let N;S.push(g),pP(T,S),"object"==typeof C&&null!==C&&(0,L.r3)(C,".priority")?(N=(0,L.DV)(C,".priority"),(0,L.hu)(iE(N),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):N=(fA(s.serverSyncTree_,i)||Nt.EMPTY_NODE).getPriority().val();const O=lE(s),V=ir(C,N),Y=hP(V,y,O);g.currentOutputSnapshotRaw=V,g.currentOutputSnapshotResolved=Y,g.currentWriteId=bA(s);const le=sP(s.serverSyncTree_,i,Y,g.currentWriteId,g.applyLocally);Wo(s.eventQueue_,i,le),wA(s,s.transactionQueueTree_)}}(s._repo,s._path,i,(C,T,S)=>{let N=null;C?d.reject(C):(N=new am(S,new qo(s._repo,s._path),Mn),d.resolve(new M5(T,N)))},y,a),d.promise}(this._delegate,i,{applyLocally:o}).then(d=>new B5(d.committed,new vf(this.database,d.snapshot)));return r&&a.then(d=>r(null,d.committed,d.snapshot),d=>r(d,!1,null)),a}setPriority(i,r){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",r,!0);const o=function(s,i){s=(0,L.m9)(s),$o("setPriority",s._path),yP("setPriority",i,!1);const r=new L.BH;return wP(s._repo,Yn(s._path,".priority"),i,null,r.wrapCallback(()=>{})),r.promise}(this._delegate,i);return r&&o.then(()=>r(null),a=>r(a)),o}push(i,r){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",r,!0);const o=function(s,i){s=(0,L.m9)(s),$o("push",s._path),du("push",i,s._path,!0);const r=JB(s._repo),o=e4(r),a=lm(s,o),d=lm(s,o);let g;return g=null!=i?TP(d,i).then(()=>d):Promise.resolve(d),a.then=g.then.bind(g),a.catch=g.then.bind(g,void 0),a}(this._delegate,i),a=o.then(g=>new go(this.database,g));r&&a.then(()=>r(null),g=>r(g));const d=new go(this.database,o);return d.then=a.then.bind(a),d.catch=a.catch.bind(a,void 0),d}onDisconnect(){return $o("Reference.onDisconnect",this._delegate._path),new V5(new uU(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class cE{constructor(i,r){this._delegate=i,this.app=r,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(i,r,o={}){!function(s,i,r,o={}){(s=(0,L.m9)(s))._checkNotDeleted("useEmulator"),s._instanceStarted&&lu("Cannot call useEmulator() after instance has already been initialized.");const a=s._repoInternal;let d;if(a.repoInfo_.nodeAdmin)o.mockUserToken&&lu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new GC(GC.OWNER);else if(o.mockUserToken){const g="string"==typeof o.mockUserToken?o.mockUserToken:(0,L.Sg)(o.mockUserToken,s.app.options.projectId);d=new GC(g)}!function(s,i,r,o){s.repoInfo_=new k2(`${i}:${r}`,!1,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams),o&&(s.authTokenProvider_=o)}(a,i,r,d)}(this._delegate,i,r,o)}ref(i){if((0,L.Dv)("database.ref",0,1,arguments.length),i instanceof go){const r=dU(this._delegate,i.toString());return new go(this,r)}{const r=cU(this._delegate,i);return new go(this,r)}}refFromURL(i){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const o=dU(this._delegate,i);return new go(this,o)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function(s){(s=(0,L.m9)(s))._checkNotDeleted("goOffline"),nU(s._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function(s){(s=(0,L.m9)(s))._checkNotDeleted("goOnline"),function(s){s.persistentConnection_&&s.persistentConnection_.resume(QB)}(s._repo)}(this._delegate)}}cE.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:s=>function(s){return{".sv":{increment:s}}}(s)};var G5=Object.freeze({__proto__:null,initStandalone:function({app:s,url:i,version:r,customAuthImpl:o,namespace:a,nodeAdmin:d=!1}){_2(r);const g=new vc.zt("auth-internal",new vc.H0("database-standalone"));return g.setComponent(new vc.wA("auth-internal",()=>o,"PRIVATE")),{instance:new cE(bU(s,g,void 0,i,d),s),namespace:a}}});const j5=cE.ServerValue;function CU(s){return null==s}function EU(s){return"function"==typeof s.set}function DU(s,i){return EU(i)?i:s.ref(i)}function xU(s,i){if(function(s){return"string"==typeof s}(s))return i.stringCase();if(EU(s))return i.firebaseCase();if(function(s){return"function"==typeof s.exportVal}(s))return i.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof s)}function dE(s,i,r="on",o=M_.z){return new In.y(a=>{let d=null;return d=s[r](i,(g,y)=>{o.schedule(()=>{a.next({snapshot:g,prevKey:y})}),"once"===r&&o.schedule(()=>a.complete())},g=>{o.schedule(()=>a.error(g))}),"on"===r?{unsubscribe(){null!=d&&s.off(i,d)}}:{unsubscribe(){}}}).pipe((0,et.U)(a=>{const{snapshot:d,prevKey:g}=a;let y=null;return d.exists()&&(y=d.key),{type:i,payload:d,prevKey:g,key:y}}),(0,WD.B)())}function IU(s,i){const r=s.length;for(let o=0;o<r;o++)if(s[o].payload.key===i)return o;return-1}function z5(s,i){const{payload:r,prevKey:o,key:a}=i,d=IU(s,a),g=function(s,i){if(CU(i))return 0;{const r=IU(s,i);return-1===r?s.length:r+1}}(s,o);switch(i.type){case"value":if(i.payload&&i.payload.exists()){let y=null;i.payload.forEach(C=>{const T={payload:C,type:"value",prevKey:y,key:C.key};return y=C.key,s=[...s,T],!1})}return s;case"child_added":if(d>-1){const y=s[d-1];(y&&y.key||null)!==o&&(s=s.filter(C=>C.payload.key!==r.key)).splice(g,0,i)}else{if(null==o)return[i,...s];(s=s.slice()).splice(g,0,i)}return s;case"child_removed":return s.filter(y=>y.payload.key!==r.key);case"child_changed":return s.map(y=>y.payload.key===a?i:y);case"child_moved":if(d>-1){const y=s.splice(d,1)[0];return(s=s.slice()).splice(g,0,y),s}return s;default:return s}}function TU(s){return(CU(s)||0===s.length)&&(s=["child_added","child_removed","child_changed","child_moved"]),s}function AU(s,i,r){return function(s,i,r){return dE(s,"value","once",r).pipe(Hn(o=>{const a=[(0,ze.of)(o)];return i.forEach(d=>a.push(dE(s,d,"on",r))),(0,sc.T)(...a).pipe(ll(z5,[]))}),Vg())}(s,i=TU(i),r)}function SU(s,i,r){const o=(i=TU(i)).map(a=>dE(s,a,"on",r));return(0,sc.T)(...o)}function NU(s,i){return function(o,a){return xU(o,{stringCase:()=>s.child(o)[i](a),firebaseCase:()=>o[i](a),snapshotCase:()=>o.ref[i](a)})}}function J5(s){return function(r){return r?xU(r,{stringCase:()=>s.child(r).remove(),firebaseCase:()=>r.remove(),snapshotCase:()=>r.ref.remove()}):s.remove()}}function MU(s,i){return function(){return dE(s,"value","on",i)}}!function(s){s.INTERNAL.registerComponent(new vc.wA("database-compat",(i,{instanceIdentifier:r})=>{const o=i.getProvider("app-compat").getImmediate(),a=i.getProvider("database").getImmediate({identifier:r});return new cE(a,o)},"PUBLIC").setServiceProps({Reference:go,Query:Ri,Database:cE,DataSnapshot:vf,enableLogging:I5,INTERNAL:G5,ServerValue:j5}).setMultipleInstances(!0)),s.registerVersion("@firebase/database-compat","0.1.0")}(Kg.Z);const tq=new h.OlP("angularfire2.realtimeDatabaseURL"),nq=new h.OlP("angularfire2.database.use-emulator");let rq=(()=>{class s{constructor(r,o,a,d,g,y,C,T,S,N,O,V,Y,le){this.schedulers=y;const Te=C,ke=(0,Ts.on)(r,g,o);if(T){const Ue=N;(0,_n.cc)(`${ke.name}.auth`,"AngularFireAuth",ke.name,()=>{const nt=g.runOutsideAngular(()=>ke.auth());if(S&&nt.useEmulator(...S),O&&(nt.tenantId=O),nt.languageCode=V,Y&&nt.useDeviceLanguage(),Ue)for(const[Ot,rn]of Object.entries(Ue))nt.settings[Ot]=rn;return le&&nt.setPersistence(le),nt},[S,O,V,Y,Ue,le])}this.database=(0,_n.cc)(`${ke.name}.database.${a}`,"AngularFireDatabase",ke.name,()=>{const Ue=g.runOutsideAngular(()=>ke.database(a||void 0));return Te&&Ue.useEmulator(...Te),Ue},[Te])}list(r,o){const a=this.schedulers.ngZone.runOutsideAngular(()=>DU(this.database,r));let d=a;return o&&(d=o(a)),function(s,i){const r=i.schedulers.outsideAngular,o=i.schedulers.ngZone.run(()=>s.ref);return{query:s,update:NU(o,"update"),set:NU(o,"set"),push:a=>o.push(a),remove:J5(o),snapshotChanges:a=>AU(s,a,r).pipe(_n.iC),stateChanges:a=>SU(s,a,r).pipe(_n.iC),auditTrail:a=>function(s,i,r){return function(s,i,r){return function(s,i){return dE(s,"value","on",i).pipe((0,et.U)(r=>{let o;return r.payload.forEach(a=>(o=a.key,!1)),{data:r,lastKeyToLoad:o}}))}(s,r).pipe(zd(i),(0,et.U)(([a,d])=>{const g=a.lastKeyToLoad,y=d.map(C=>C.key);return{actions:d,lastKeyToLoad:g,loadedKeys:y}}),function(s){return i=>i.lift(new W6(s))}(a=>-1===a.loadedKeys.indexOf(a.lastKeyToLoad)),(0,et.U)(a=>a.actions))}(s,SU(s,i).pipe(ll((a,d)=>[...a,d],[])),r)}(s,a,r).pipe(_n.iC),valueChanges:(a,d)=>AU(s,a,r).pipe((0,et.U)(y=>y.map(C=>d&&d.idField?Object.assign(Object.assign({},C.payload.val()),{[d.idField]:C.key}):C.payload.val())),_n.iC)}}(d,this)}object(r){return function(s,i){return{query:s,snapshotChanges:()=>MU(s,i.schedulers.outsideAngular)().pipe(_n.iC),update:r=>s.ref.update(r),set:r=>s.ref.set(r),remove:()=>s.ref.remove(),valueChanges:()=>MU(s,i.schedulers.outsideAngular)().pipe(_n.iC,(0,et.U)(o=>o.payload.exists()?o.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>DU(this.database,r)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(Ts.Dh),h.LFG(Ts.xv,8),h.LFG(tq,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(_n.HU),h.LFG(nq,8),h.LFG(ck,8),h.LFG(ik,8),h.LFG(sk,8),h.LFG(ok,8),h.LFG(ak,8),h.LFG(lk,8),h.LFG(uk,8))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})(),iq=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({providers:[rq]}),s})();const RU_firebaseConfig={apiKey:"AIzaSyC4085ptxoF3je19RGrZCWp0Z9ZJUJx5p0",authDomain:"vashie.firebaseapp.com",projectId:"vashie",storageBucket:"vashie.appspot.com",messagingSenderId:"297463519601",appId:"1:297463519601:web:67824761aadc9e6571bed0",measurementId:"G-VNLLFYJQY4"};let sq=(()=>{class s{}return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=h.oAB({type:s,bootstrap:[fH]}),s.\u0275inj=h.cJS({providers:[],imports:[[ad,H6,KA,Ts.hO.initializeApp(RU_firebaseConfig),Cj,iq,mM,AD,SD]]}),s})();(0,h.G48)(),Eu().bootstrapModule(sq).catch(s=>console.error(s))},4762:(qe,xe,U)=>{"use strict";U.d(xe,{ZT:()=>ue,pi:()=>q,_T:()=>ae,mG:()=>J,Jh:()=>$,XA:()=>G,CR:()=>K,ev:()=>ye});var h=function(fe,oe){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(be,me){be.__proto__=me}||function(be,me){for(var ge in me)Object.prototype.hasOwnProperty.call(me,ge)&&(be[ge]=me[ge])})(fe,oe)};function ue(fe,oe){if("function"!=typeof oe&&null!==oe)throw new TypeError("Class extends value "+String(oe)+" is not a constructor or null");function be(){this.constructor=fe}h(fe,oe),fe.prototype=null===oe?Object.create(oe):(be.prototype=oe.prototype,new be)}var q=function(){return(q=Object.assign||function(oe){for(var be,me=1,ge=arguments.length;me<ge;me++)for(var te in be=arguments[me])Object.prototype.hasOwnProperty.call(be,te)&&(oe[te]=be[te]);return oe}).apply(this,arguments)};function ae(fe,oe){var be={};for(var me in fe)Object.prototype.hasOwnProperty.call(fe,me)&&oe.indexOf(me)<0&&(be[me]=fe[me]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols){var ge=0;for(me=Object.getOwnPropertySymbols(fe);ge<me.length;ge++)oe.indexOf(me[ge])<0&&Object.prototype.propertyIsEnumerable.call(fe,me[ge])&&(be[me[ge]]=fe[me[ge]])}return be}function J(fe,oe,be,me){return new(be||(be=Promise))(function(te,Be){function it(lt){try{Ke(me.next(lt))}catch(ut){Be(ut)}}function Zt(lt){try{Ke(me.throw(lt))}catch(ut){Be(ut)}}function Ke(lt){lt.done?te(lt.value):function(te){return te instanceof be?te:new be(function(Be){Be(te)})}(lt.value).then(it,Zt)}Ke((me=me.apply(fe,oe||[])).next())})}function $(fe,oe){var me,ge,te,Be,be={label:0,sent:function(){if(1&te[0])throw te[1];return te[1]},trys:[],ops:[]};return Be={next:it(0),throw:it(1),return:it(2)},"function"==typeof Symbol&&(Be[Symbol.iterator]=function(){return this}),Be;function it(Ke){return function(lt){return function(Ke){if(me)throw new TypeError("Generator is already executing.");for(;be;)try{if(me=1,ge&&(te=2&Ke[0]?ge.return:Ke[0]?ge.throw||((te=ge.return)&&te.call(ge),0):ge.next)&&!(te=te.call(ge,Ke[1])).done)return te;switch(ge=0,te&&(Ke=[2&Ke[0],te.value]),Ke[0]){case 0:case 1:te=Ke;break;case 4:return be.label++,{value:Ke[1],done:!1};case 5:be.label++,ge=Ke[1],Ke=[0];continue;case 7:Ke=be.ops.pop(),be.trys.pop();continue;default:if(!(te=(te=be.trys).length>0&&te[te.length-1])&&(6===Ke[0]||2===Ke[0])){be=0;continue}if(3===Ke[0]&&(!te||Ke[1]>te[0]&&Ke[1]<te[3])){be.label=Ke[1];break}if(6===Ke[0]&&be.label<te[1]){be.label=te[1],te=Ke;break}if(te&&be.label<te[2]){be.label=te[2],be.ops.push(Ke);break}te[2]&&be.ops.pop(),be.trys.pop();continue}Ke=oe.call(fe,be)}catch(lt){Ke=[6,lt],ge=0}finally{me=te=0}if(5&Ke[0])throw Ke[1];return{value:Ke[0]?Ke[1]:void 0,done:!0}}([Ke,lt])}}}function G(fe){var oe="function"==typeof Symbol&&Symbol.iterator,be=oe&&fe[oe],me=0;if(be)return be.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&me>=fe.length&&(fe=void 0),{value:fe&&fe[me++],done:!fe}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(fe,oe){var be="function"==typeof Symbol&&fe[Symbol.iterator];if(!be)return fe;var ge,Be,me=be.call(fe),te=[];try{for(;(void 0===oe||oe-- >0)&&!(ge=me.next()).done;)te.push(ge.value)}catch(it){Be={error:it}}finally{try{ge&&!ge.done&&(be=me.return)&&be.call(me)}finally{if(Be)throw Be.error}}return te}function ye(fe,oe,be){if(be||2===arguments.length)for(var te,me=0,ge=oe.length;me<ge;me++)(te||!(me in oe))&&(te||(te=Array.prototype.slice.call(oe,0,me)),te[me]=oe[me]);return fe.concat(te||Array.prototype.slice.call(oe))}},8239:(qe,xe,U)=>{"use strict";function h(q,ae,pe,X,ie,J,$){try{var B=q[J]($),z=B.value}catch(G){return void pe(G)}B.done?ae(z):Promise.resolve(z).then(X,ie)}function ue(q){return function(){var ae=this,pe=arguments;return new Promise(function(X,ie){var J=q.apply(ae,pe);function $(z){h(J,X,ie,$,B,"next",z)}function B(z){h(J,X,ie,$,B,"throw",z)}$(void 0)})}}U.d(xe,{Z:()=>ue})}},qe=>{qe(qe.s=4104)}]);